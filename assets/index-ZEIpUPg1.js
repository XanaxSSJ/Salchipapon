(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Nd={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function cA(){if(A_)return pl;A_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return pl.Fragment=t,pl.jsx=n,pl.jsxs=n,pl}var S_;function hA(){return S_||(S_=1,Nd.exports=cA()),Nd.exports}var w=hA(),xd={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function fA(){if(w_)return Rt;w_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function D(V){return V===null||typeof V!="object"?null:(V=R&&V[R]||V["@@iterator"],typeof V=="function"?V:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,J={};function Z(V,W,rt){this.props=V,this.context=W,this.refs=J,this.updater=rt||j}Z.prototype.isReactComponent={},Z.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},Z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function gt(){}gt.prototype=Z.prototype;function ct(V,W,rt){this.props=V,this.context=W,this.refs=J,this.updater=rt||j}var ot=ct.prototype=new gt;ot.constructor=ct,F(ot,Z.prototype),ot.isPureReactComponent=!0;var nt=Array.isArray,lt={H:null,A:null,T:null,S:null,V:null},ht=Object.prototype.hasOwnProperty;function I(V,W,rt,tt,pt,Nt){return rt=Nt.ref,{$$typeof:r,type:V,key:W,ref:rt!==void 0?rt:null,props:Nt}}function S(V,W){return I(V.type,W,void 0,void 0,void 0,V.props)}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function N(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(rt){return W[rt]})}var O=/\/+/g;function P(V,W){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):W.toString(36)}function C(){}function be(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function ae(V,W,rt,tt,pt){var Nt=typeof V;(Nt==="undefined"||Nt==="boolean")&&(V=null);var At=!1;if(V===null)At=!0;else switch(Nt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(V.$$typeof){case r:case t:At=!0;break;case T:return At=V._init,ae(At(V._payload),W,rt,tt,pt)}}if(At)return pt=pt(V),At=tt===""?"."+P(V,0):tt,nt(pt)?(rt="",At!=null&&(rt=At.replace(O,"$&/")+"/"),ae(pt,W,rt,"",function(Hn){return Hn})):pt!=null&&(A(pt)&&(pt=S(pt,rt+(pt.key==null||V&&V.key===pt.key?"":(""+pt.key).replace(O,"$&/")+"/")+At)),W.push(pt)),1;At=0;var Ne=tt===""?".":tt+":";if(nt(V))for(var Jt=0;Jt<V.length;Jt++)tt=V[Jt],Nt=Ne+P(tt,Jt),At+=ae(tt,W,rt,Nt,pt);else if(Jt=D(V),typeof Jt=="function")for(V=Jt.call(V),Jt=0;!(tt=V.next()).done;)tt=tt.value,Nt=Ne+P(tt,Jt++),At+=ae(tt,W,rt,Nt,pt);else if(Nt==="object"){if(typeof V.then=="function")return ae(be(V),W,rt,tt,pt);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return At}function G(V,W,rt){if(V==null)return V;var tt=[],pt=0;return ae(V,tt,"","",function(Nt){return W.call(rt,Nt,pt++)}),tt}function it(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(rt){(V._status===0||V._status===-1)&&(V._status=1,V._result=rt)},function(rt){(V._status===0||V._status===-1)&&(V._status=2,V._result=rt)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var dt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function zt(){}return Rt.Children={map:G,forEach:function(V,W,rt){G(V,function(){W.apply(this,arguments)},rt)},count:function(V){var W=0;return G(V,function(){W++}),W},toArray:function(V){return G(V,function(W){return W})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Rt.Component=Z,Rt.Fragment=n,Rt.Profiler=o,Rt.PureComponent=ct,Rt.StrictMode=s,Rt.Suspense=p,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return lt.H.useMemoCache(V)}},Rt.cache=function(V){return function(){return V.apply(null,arguments)}},Rt.cloneElement=function(V,W,rt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var tt=F({},V.props),pt=V.key,Nt=void 0;if(W!=null)for(At in W.ref!==void 0&&(Nt=void 0),W.key!==void 0&&(pt=""+W.key),W)!ht.call(W,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&W.ref===void 0||(tt[At]=W[At]);var At=arguments.length-2;if(At===1)tt.children=rt;else if(1<At){for(var Ne=Array(At),Jt=0;Jt<At;Jt++)Ne[Jt]=arguments[Jt+2];tt.children=Ne}return I(V.type,pt,void 0,void 0,Nt,tt)},Rt.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Rt.createElement=function(V,W,rt){var tt,pt={},Nt=null;if(W!=null)for(tt in W.key!==void 0&&(Nt=""+W.key),W)ht.call(W,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(pt[tt]=W[tt]);var At=arguments.length-2;if(At===1)pt.children=rt;else if(1<At){for(var Ne=Array(At),Jt=0;Jt<At;Jt++)Ne[Jt]=arguments[Jt+2];pt.children=Ne}if(V&&V.defaultProps)for(tt in At=V.defaultProps,At)pt[tt]===void 0&&(pt[tt]=At[tt]);return I(V,Nt,void 0,void 0,null,pt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(V){return{$$typeof:g,render:V}},Rt.isValidElement=A,Rt.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:it}},Rt.memo=function(V,W){return{$$typeof:y,type:V,compare:W===void 0?null:W}},Rt.startTransition=function(V){var W=lt.T,rt={};lt.T=rt;try{var tt=V(),pt=lt.S;pt!==null&&pt(rt,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(zt,dt)}catch(Nt){dt(Nt)}finally{lt.T=W}},Rt.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Rt.use=function(V){return lt.H.use(V)},Rt.useActionState=function(V,W,rt){return lt.H.useActionState(V,W,rt)},Rt.useCallback=function(V,W){return lt.H.useCallback(V,W)},Rt.useContext=function(V){return lt.H.useContext(V)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(V,W){return lt.H.useDeferredValue(V,W)},Rt.useEffect=function(V,W,rt){var tt=lt.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(V,W)},Rt.useId=function(){return lt.H.useId()},Rt.useImperativeHandle=function(V,W,rt){return lt.H.useImperativeHandle(V,W,rt)},Rt.useInsertionEffect=function(V,W){return lt.H.useInsertionEffect(V,W)},Rt.useLayoutEffect=function(V,W){return lt.H.useLayoutEffect(V,W)},Rt.useMemo=function(V,W){return lt.H.useMemo(V,W)},Rt.useOptimistic=function(V,W){return lt.H.useOptimistic(V,W)},Rt.useReducer=function(V,W,rt){return lt.H.useReducer(V,W,rt)},Rt.useRef=function(V){return lt.H.useRef(V)},Rt.useState=function(V){return lt.H.useState(V)},Rt.useSyncExternalStore=function(V,W,rt){return lt.H.useSyncExternalStore(V,W,rt)},Rt.useTransition=function(){return lt.H.useTransition()},Rt.version="19.1.0",Rt}var R_;function _m(){return R_||(R_=1,xd.exports=fA()),xd.exports}var vt=_m(),Dd={exports:{}},yl={},Od={exports:{}},Vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function dA(){return I_||(I_=1,function(r){function t(G,it){var dt=G.length;G.push(it);t:for(;0<dt;){var zt=dt-1>>>1,V=G[zt];if(0<o(V,it))G[zt]=it,G[dt]=V,dt=zt;else break t}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var it=G[0],dt=G.pop();if(dt!==it){G[0]=dt;t:for(var zt=0,V=G.length,W=V>>>1;zt<W;){var rt=2*(zt+1)-1,tt=G[rt],pt=rt+1,Nt=G[pt];if(0>o(tt,dt))pt<V&&0>o(Nt,tt)?(G[zt]=Nt,G[pt]=dt,zt=pt):(G[zt]=tt,G[rt]=dt,zt=rt);else if(pt<V&&0>o(Nt,dt))G[zt]=Nt,G[pt]=dt,zt=pt;else break t}}return it}function o(G,it){var dt=G.sortIndex-it.sortIndex;return dt!==0?dt:G.id-it.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,R=null,D=3,j=!1,F=!1,J=!1,Z=!1,gt=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;function nt(G){for(var it=n(y);it!==null;){if(it.callback===null)s(y);else if(it.startTime<=G)s(y),it.sortIndex=it.expirationTime,t(p,it);else break;it=n(y)}}function lt(G){if(J=!1,nt(G),!F)if(n(p)!==null)F=!0,ht||(ht=!0,P());else{var it=n(y);it!==null&&ae(lt,it.startTime-G)}}var ht=!1,I=-1,S=5,A=-1;function N(){return Z?!0:!(r.unstable_now()-A<S)}function O(){if(Z=!1,ht){var G=r.unstable_now();A=G;var it=!0;try{t:{F=!1,J&&(J=!1,ct(I),I=-1),j=!0;var dt=D;try{e:{for(nt(G),R=n(p);R!==null&&!(R.expirationTime>G&&N());){var zt=R.callback;if(typeof zt=="function"){R.callback=null,D=R.priorityLevel;var V=zt(R.expirationTime<=G);if(G=r.unstable_now(),typeof V=="function"){R.callback=V,nt(G),it=!0;break e}R===n(p)&&s(p),nt(G)}else s(p);R=n(p)}if(R!==null)it=!0;else{var W=n(y);W!==null&&ae(lt,W.startTime-G),it=!1}}break t}finally{R=null,D=dt,j=!1}it=void 0}}finally{it?P():ht=!1}}}var P;if(typeof ot=="function")P=function(){ot(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,be=C.port2;C.port1.onmessage=O,P=function(){be.postMessage(null)}}else P=function(){gt(O,0)};function ae(G,it){I=gt(function(){G(r.unstable_now())},it)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(G){switch(D){case 1:case 2:case 3:var it=3;break;default:it=D}var dt=D;D=it;try{return G()}finally{D=dt}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(G,it){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var dt=D;D=G;try{return it()}finally{D=dt}},r.unstable_scheduleCallback=function(G,it,dt){var zt=r.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?zt+dt:zt):dt=zt,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=dt+V,G={id:T++,callback:it,priorityLevel:G,startTime:dt,expirationTime:V,sortIndex:-1},dt>zt?(G.sortIndex=dt,t(y,G),n(p)===null&&G===n(y)&&(J?(ct(I),I=-1):J=!0,ae(lt,dt-zt))):(G.sortIndex=V,t(p,G),F||j||(F=!0,ht||(ht=!0,P()))),G},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(G){var it=D;return function(){var dt=D;D=it;try{return G.apply(this,arguments)}finally{D=dt}}}}(Vd)),Vd}var C_;function mA(){return C_||(C_=1,Od.exports=dA()),Od.exports}var Md={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function gA(){if(N_)return Ke;N_=1;var r=_m();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:p,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(p,y,null,T)},Ke.flushSync=function(p){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ke.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ke.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,R=g(T,y.crossOrigin),D=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:D,fetchPriority:j}):T==="script"&&s.d.X(p,{crossOrigin:R,integrity:D,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ke.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,R=g(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ke.requestFormReset=function(p){s.d.r(p)},Ke.unstable_batchedUpdates=function(p,y){return p(y)},Ke.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Ke.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ke.version="19.1.0",Ke}var x_;function pA(){if(x_)return Md.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Md.exports=gA(),Md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function yA(){if(D_)return yl;D_=1;var r=mA(),t=_m(),n=pA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===l)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,l=d;break}if(E===l){v=!0,l=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=h;break}if(E===l){v=!0,l=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),gt=Symbol.for("react.provider"),ct=Symbol.for("react.consumer"),ot=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Z:return"Profiler";case J:return"StrictMode";case lt:return"Suspense";case ht:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case ot:return(e.displayName||"Context")+".Provider";case ct:return(e._context.displayName||"Context")+".Consumer";case nt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return i=e.displayName||null,i!==null?i:be(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return be(e(i))}catch{}}return null}var ae=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},zt=[],V=-1;function W(e){return{current:e}}function rt(e){0>V||(e.current=zt[V],zt[V]=null,V--)}function tt(e,i){V++,zt[V]=e.current,e.current=i}var pt=W(null),Nt=W(null),At=W(null),Ne=W(null);function Jt(e,i){switch(tt(At,i),tt(Nt,e),tt(pt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Zy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Zy(i),e=Wy(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(pt),tt(pt,e)}function Hn(){rt(pt),rt(Nt),rt(At)}function $i(e){e.memoizedState!==null&&tt(Ne,e);var i=pt.current,a=Wy(i,e.type);i!==a&&(tt(Nt,e),tt(pt,a))}function gi(e){Nt.current===e&&(rt(pt),rt(Nt)),Ne.current===e&&(rt(Ne),hl._currentValue=dt)}var Yr=Object.prototype.hasOwnProperty,Xr=r.unstable_scheduleCallback,$r=r.unstable_cancelCallback,oo=r.unstable_shouldYield,tu=r.unstable_requestPaint,vn=r.unstable_now,Ch=r.unstable_getCurrentPriorityLevel,lo=r.unstable_ImmediatePriority,Hs=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Nh=r.unstable_LowPriority,Fs=r.unstable_IdlePriority,uo=r.log,eu=r.unstable_setDisableYieldValue,oe=null,Ft=null;function ln(e){if(typeof uo=="function"&&eu(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(oe,e)}catch{}}var Ge=Math.clz32?Math.clz32:Wr,nu=Math.log,xh=Math.LN2;function Wr(e){return e>>>=0,e===0?32:31-(nu(e)/xh|0)|0}var Jr=256,ts=4194304;function Vn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gs(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=Vn(l):(v&=E,v!==0?h=Vn(v):a||(a=E&~e,a!==0&&(h=Vn(a))))):(E=l&~d,E!==0?h=Vn(E):v!==0?h=Vn(v):a||(a=l&~e,a!==0&&(h=Vn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function es(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function co(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=Jr;return Jr<<=1,(Jr&4194048)===0&&(Jr=256),e}function fo(){var e=ts;return ts<<=1,(ts&62914560)===0&&(ts=4194304),e}function pi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function yi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mo(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,x=e.expirationTimes,z=e.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Ge(a),X=1<<Q;E[Q]=0,x[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var q=B[Q];q!==null&&(q.lane&=-536870913)}a&=~X}l!==0&&Fn(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Fn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Ge(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function go(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Ge(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function Zi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wi(){var e=it.p;return e!==0?e:(e=window.event,e===void 0?32:y_(e.type))}function iu(e,i){var a=it.p;try{return it.p=e,i()}finally{it.p=a}}var ne=Math.random().toString(36).slice(2),Ae="__reactFiber$"+ne,me="__reactProps$"+ne,En="__reactContainer$"+ne,po="__reactEvents$"+ne,Dh="__reactListeners$"+ne,Ji="__reactHandles$"+ne,ru="__reactResources$"+ne,ns="__reactMarker$"+ne;function tr(e){delete e[Ae],delete e[me],delete e[po],delete e[Dh],delete e[Ji]}function _i(e){var i=e[Ae];if(i)return i;for(var a=e.parentNode;a;){if(i=a[En]||a[Ae]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=n_(e);e!==null;){if(a=e[Ae])return a;e=n_(e)}return i}e=a,a=e.parentNode}return null}function Gn(e){if(e=e[Ae]||e[En]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Qn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[ru];return i||(i=e[ru]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[ns]=!0}var yo=new Set,Ks={};function Mn(e,i){vi(e,i),vi(e+"Capture",i)}function vi(e,i){for(Ks[e]=i,e=0;e<i.length;e++)yo.add(i[e])}var su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),au={},is={};function ou(e){return Yr.call(is,e)?!0:Yr.call(au,e)?!1:su.test(e)?is[e]=!0:(au[e]=!0,!1)}function er(e,i,a){if(ou(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Kn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Le(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var rs,lu;function Ei(e){if(rs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);rs=i&&i[1]||"",lu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rs+e+lu}var Ys=!1;function Xs(e,i){if(!e||Ys)return"";Ys=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var B=q}Reflect.construct(e,[],X)}else{try{X.call()}catch(q){B=q}e.call(X.prototype)}}else{try{throw Error()}catch(q){B=q}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var x=v.split(`
`),z=E.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===z.length)for(l=x.length-1,h=z.length-1;1<=l&&0<=h&&x[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==z[h]){var Q=`
`+x[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=h);break}}}finally{Ys=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ei(a):""}function _o(e){switch(e.tag){case 26:case 27:case 5:return Ei(e.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Xs(e.type,!1);case 11:return Xs(e.type.render,!1);case 1:return Xs(e.type,!0);case 31:return Ei("Activity");default:return""}}function $s(e){try{var i="";do i+=_o(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oh(e){var i=vo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Oh(e))}function Eo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=vo(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vh=/[\n"\\]/g;function ge(e){return e.replace(Vh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(e,i,a,l,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?nr(e,v,Je(i)):a!=null?nr(e,v,Je(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Je(E):e.removeAttribute("name")}function as(e,i,a,l,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function nr(e,i,a){i==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ti(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Kt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function os(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Tn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ls=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||ls.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function To(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&uu(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&uu(e,d,i[d])}function bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ph=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(e){return Ph.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bi=null;function bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ai=null,Si=null;function Ao(e){var i=Gn(e);if(i&&(e=i.stateNode)){var a=e[me]||null;t:switch(e=i.stateNode,i.type){case"input":if(un(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ge(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[me]||null;if(!h)throw Error(s(90));un(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Eo(l)}break t;case"textarea":Kt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ti(e,!!a.multiple,i,!1)}}}var Yn=!1;function cu(e,i,a){if(Yn)return e(i,a);Yn=!0;try{var l=e(i);return l}finally{if(Yn=!1,(Ai!==null||Si!==null)&&(ic(),Ai&&(i=Ai,e=Si,Si=Ai=null,Ao(i),e)))for(i=0;i<e.length;i++)Ao(e[i])}}function us(e,i){var a=e.stateNode;if(a===null)return null;var l=a[me]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(Pn)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){An=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{An=!1}var Xn=null,ir=null,wi=null;function So(){if(wi)return wi;var e,i=ir,a=i.length,l,h="value"in Xn?Xn.value:Xn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return wi=h.slice(e,1<l?1-l:void 0)}function $n(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function wo(){return!1}function xe(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zn:wo,this.isPropagationStopped=wo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=xe(qt),hs=T({},qt,{view:0,detail:0}),hu=xe(hs),ta,ea,Wn,fs=T({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(ta=e.screenX-Wn.screenX,ea=e.screenY-Wn.screenY):ea=ta=0,Wn=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),Sn=xe(fs),fu=T({},fs,{dataTransfer:0}),kh=xe(fu),ds=T({},hs,{relatedTarget:0}),na=xe(ds),Ro=T({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=xe(Ro),du=T({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ra=xe(du),Lh=T({},qt,{data:0}),Io=xe(Lh),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=gu[e])?!!i[e]:!1}function gs(){return Co}var pu=T({},hs,{key:function(e){if(e.key){var i=ms[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sa=xe(pu),yu=T({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=xe(yu),Ri=T({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),_u=xe(Ri),vu=T({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=xe(vu),Tu=T({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=xe(Tu),tn=T({},qt,{newState:0,oldState:0}),bu=xe(tn),Au=[9,13,27,32],Jn=Pn&&"CompositionEvent"in window,c=null;Pn&&"documentMode"in document&&(c=document.documentMode);var m=Pn&&"TextEvent"in window&&!c,_=Pn&&(!Jn||c&&8<c&&11>=c),b=" ",L=!1;function H(e,i){switch(e){case"keyup":return Au.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function Se(e,i){switch(e){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return e=i.data,e===b&&L?null:e;default:return null}}function kt(e,i){if(Pt)return e==="compositionend"||!Jn&&H(e,i)?(e=So(),wi=ir=Xn=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function we(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!De[e.type]:i==="textarea"}function Ii(e,i,a,l){Ai?Si?Si.push(l):Si=[l]:Ai=l,i=uc(i,"onChange"),0<i.length&&(a=new Js("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Ue=null,ti=null;function xo(e){Qy(e,0)}function Su(e){var i=Qn(e);if(Eo(i))return e}function dg(e,i){if(e==="change")return i}var mg=!1;if(Pn){var Uh;if(Pn){var jh="oninput"in document;if(!jh){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),jh=typeof gg.oninput=="function"}Uh=jh}else Uh=!1;mg=Uh&&(!document.documentMode||9<document.documentMode)}function pg(){Ue&&(Ue.detachEvent("onpropertychange",yg),ti=Ue=null)}function yg(e){if(e.propertyName==="value"&&Su(ti)){var i=[];Ii(i,ti,e,bn(e)),cu(xo,i)}}function zT(e,i,a){e==="focusin"?(pg(),Ue=i,ti=a,Ue.attachEvent("onpropertychange",yg)):e==="focusout"&&pg()}function BT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Su(ti)}function qT(e,i){if(e==="click")return Su(i)}function HT(e,i){if(e==="input"||e==="change")return Su(i)}function FT(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:FT;function Do(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Yr.call(i,h)||!cn(e[h],i[h]))return!1}return!0}function _g(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vg(e,i){var a=_g(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=_g(a)}}function Eg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Eg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Tg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ss(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ss(e.document)}return i}function zh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var GT=Pn&&"documentMode"in document&&11>=document.documentMode,oa=null,Bh=null,Oo=null,qh=!1;function bg(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qh||oa==null||oa!==ss(l)||(l=oa,"selectionStart"in l&&zh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Oo&&Do(Oo,l)||(Oo=l,l=uc(Bh,"onSelect"),0<l.length&&(i=new Js("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=oa)))}function ps(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var la={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},Hh={},Ag={};Pn&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function ys(e){if(Hh[e])return Hh[e];if(!la[e])return e;var i=la[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ag)return Hh[e]=i[a];return e}var Sg=ys("animationend"),wg=ys("animationiteration"),Rg=ys("animationstart"),QT=ys("transitionrun"),KT=ys("transitionstart"),YT=ys("transitioncancel"),Ig=ys("transitionend"),Cg=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function kn(e,i){Cg.set(e,i),Mn(i,[e])}var Ng=new WeakMap;function wn(e,i){if(typeof e=="object"&&e!==null){var a=Ng.get(e);return a!==void 0?a:(i={value:e,source:i,stack:$s(i)},Ng.set(e,i),i)}return{value:e,source:i,stack:$s(i)}}var Rn=[],ua=0,Gh=0;function wu(){for(var e=ua,i=Gh=ua=0;i<e;){var a=Rn[i];Rn[i++]=null;var l=Rn[i];Rn[i++]=null;var h=Rn[i];Rn[i++]=null;var d=Rn[i];if(Rn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&xg(a,h,d)}}function Ru(e,i,a,l){Rn[ua++]=e,Rn[ua++]=i,Rn[ua++]=a,Rn[ua++]=l,Gh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Qh(e,i,a,l){return Ru(e,i,a,l),Iu(e)}function ca(e,i){return Ru(e,null,null,i),Iu(e)}function xg(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Ge(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Iu(e){if(50<il)throw il=0,Jf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ha={};function XT(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,i,a,l){return new XT(e,i,a,l)}function Kh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ci(e,i){var a=e.alternate;return a===null?(a=hn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Dg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Cu(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")Kh(e)&&(v=1);else if(typeof e=="string")v=Zb(e,a,pt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case A:return e=hn(31,a,i,h),e.elementType=A,e.lanes=d,e;case F:return _s(a.children,h,d,i);case J:v=8,h|=24;break;case Z:return e=hn(12,a,i,h|2),e.elementType=Z,e.lanes=d,e;case lt:return e=hn(13,a,i,h),e.elementType=lt,e.lanes=d,e;case ht:return e=hn(19,a,i,h),e.elementType=ht,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gt:case ot:v=10;break t;case ct:v=9;break t;case nt:v=11;break t;case I:v=14;break t;case S:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=hn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function _s(e,i,a,l){return e=hn(7,e,l,i),e.lanes=a,e}function Yh(e,i,a){return e=hn(6,e,null,i),e.lanes=a,e}function Xh(e,i,a){return i=hn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var fa=[],da=0,Nu=null,xu=0,In=[],Cn=0,vs=null,Ni=1,xi="";function Es(e,i){fa[da++]=xu,fa[da++]=Nu,Nu=e,xu=i}function Og(e,i,a){In[Cn++]=Ni,In[Cn++]=xi,In[Cn++]=vs,vs=e;var l=Ni;e=xi;var h=32-Ge(l)-1;l&=~(1<<h),a+=1;var d=32-Ge(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ni=1<<32-Ge(i)+h|a<<h|l,xi=d+e}else Ni=1<<d|a<<h|l,xi=e}function $h(e){e.return!==null&&(Es(e,1),Og(e,1,0))}function Zh(e){for(;e===Nu;)Nu=fa[--da],fa[da]=null,xu=fa[--da],fa[da]=null;for(;e===vs;)vs=In[--Cn],In[Cn]=null,xi=In[--Cn],In[Cn]=null,Ni=In[--Cn],In[Cn]=null}var en=null,le=null,Bt=!1,Ts=null,ei=!1,Wh=Error(s(519));function bs(e){var i=Error(s(418,""));throw Po(wn(i,e)),Wh}function Vg(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ae]=e,i[me]=l,a){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(a=0;a<sl.length;a++)Ot(sl[a],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),as(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Zs(i);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),os(i,l.value,l.defaultValue,l.children),Zs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||$y(i.textContent,a)?(l.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),l.onScroll!=null&&Ot("scroll",i),l.onScrollEnd!=null&&Ot("scrollend",i),l.onClick!=null&&(i.onclick=cc),i=!0):i=!1,i||bs(e)}function Mg(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:en=en.return}}function Vo(e){if(e!==en)return!1;if(!Bt)return Mg(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||gd(e.type,e.memoizedProps)),a=!a),a&&le&&bs(e),Mg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=Un(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,vr(e.type)?(e=vd,vd=null,le=e):le=i):le=en?Un(e.stateNode.nextSibling):null;return!0}function Mo(){le=en=null,Bt=!1}function Pg(){var e=Ts;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),Ts=null),e}function Po(e){Ts===null?Ts=[e]:Ts.push(e)}var Jh=W(null),As=null,Di=null;function rr(e,i,a){tt(Jh,i._currentValue),i._currentValue=a}function Oi(e){e._currentValue=Jh.current,rt(Jh)}function tf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function ef(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var x=0;x<i.length;x++)if(E.context===i[x]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),tf(d.return,a,e),l||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),tf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ko(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;cn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ne.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hl):e=[hl])}h=h.return}e!==null&&ef(i,e,a,l),i.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ss(e){As=e,Di=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return kg(As,e)}function Ou(e,i){return As===null&&Ss(e),kg(e,i)}function kg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Di===null){if(e===null)throw Error(s(308));Di=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Di=Di.next=i;return a}var $T=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},ZT=r.unstable_scheduleCallback,WT=r.unstable_NormalPriority,Re={$$typeof:ot,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nf(){return{controller:new $T,data:new Map,refCount:0}}function Lo(e){e.refCount--,e.refCount===0&&ZT(WT,function(){e.controller.abort()})}var Uo=null,rf=0,ma=0,ga=null;function JT(e,i){if(Uo===null){var a=Uo=[];rf=0,ma=ad(),ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return rf++,i.then(Lg,Lg),i}function Lg(){if(--rf===0&&Uo!==null){ga!==null&&(ga.status="fulfilled");var e=Uo;Uo=null,ma=0,ga=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function tb(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ug=G.S;G.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&JT(e,i),Ug!==null&&Ug(e,i)};var ws=W(null);function sf(){var e=ws.current;return e!==null?e:te.pooledCache}function Vu(e,i){i===null?tt(ws,ws.current):tt(ws,i.pool)}function jg(){var e=sf();return e===null?null:{parent:Re._currentValue,pool:e}}var jo=Error(s(460)),zg=Error(s(474)),Mu=Error(s(542)),af={then:function(){}};function Bg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pu(){}function qg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Pu,Pu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fg(e),e;default:if(typeof i.status=="string")i.then(Pu,Pu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fg(e),e}throw zo=i,jo}}var zo=null;function Hg(){if(zo===null)throw Error(s(459));var e=zo;return zo=null,e}function Fg(e){if(e===jo||e===Mu)throw Error(s(483))}var sr=!1;function of(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ar(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function or(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Iu(e),xg(e,null,a),i}return Ru(e,l,i,a),Iu(e)}function Bo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,go(e,a)}}function uf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var cf=!1;function qo(){if(cf){var e=ga;if(e!==null)throw e}}function Ho(e,i,a,l){cf=!1;var h=e.updateQueue;sr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var x=E,z=x.next;x.next=null,v===null?d=z:v.next=z,v=x;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=z:E.next=z,Q.lastBaseUpdate=x))}if(d!==null){var X=h.baseState;v=0,Q=z=x=null,E=d;do{var B=E.lane&-536870913,q=B!==E.lane;if(q?(Lt&B)===B:(l&B)===B){B!==0&&B===ma&&(cf=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var bt=e,yt=E;B=i;var $t=a;switch(yt.tag){case 1:if(bt=yt.payload,typeof bt=="function"){X=bt.call($t,X,B);break t}X=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=yt.payload,B=typeof bt=="function"?bt.call($t,X,B):bt,B==null)break t;X=T({},X,B);break t;case 2:sr=!0}}B=E.callback,B!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(z=Q=q,x=X):Q=Q.next=q,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(x=X),h.baseState=x,h.firstBaseUpdate=z,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),gr|=v,e.lanes=v,e.memoizedState=X}}function Gg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Qg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Gg(a[e],i)}var pa=W(null),ku=W(0);function Kg(e,i){e=ji,tt(ku,e),tt(pa,i),ji=e|i.baseLanes}function hf(){tt(ku,ji),tt(pa,pa.current)}function ff(){ji=ku.current,rt(pa),rt(ku)}var lr=0,It=null,Yt=null,pe=null,Lu=!1,ya=!1,Rs=!1,Uu=0,Fo=0,_a=null,eb=0;function he(){throw Error(s(321))}function df(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function mf(e,i,a,l,h,d){return lr=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?xp:Dp,Rs=!1,d=a(l,h),Rs=!1,ya&&(d=Xg(i,a,l,h)),Yg(e),d}function Yg(e){G.H=Fu;var i=Yt!==null&&Yt.next!==null;if(lr=0,pe=Yt=It=null,Lu=!1,Fo=0,_a=null,i)throw Error(s(300));e===null||Oe||(e=e.dependencies,e!==null&&Du(e)&&(Oe=!0))}function Xg(e,i,a,l){It=e;var h=0;do{if(ya&&(_a=null),Fo=0,ya=!1,25<=h)throw Error(s(301));if(h+=1,pe=Yt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=lb,d=i(a,l)}while(ya);return d}function nb(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?Go(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(It.flags|=1024),i}function gf(){var e=Uu!==0;return Uu=0,e}function pf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function yf(e){if(Lu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Lu=!1}lr=0,pe=Yt=It=null,ya=!1,Fo=Uu=0,_a=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?It.memoizedState=pe=e:pe=pe.next=e,pe}function ye(){if(Yt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=pe===null?It.memoizedState:pe.next;if(i!==null)pe=i,Yt=e;else{if(e===null)throw It.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},pe===null?It.memoizedState=pe=e:pe=pe.next=e}return pe}function _f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(e){var i=Fo;return Fo+=1,_a===null&&(_a=[]),e=qg(_a,e,i),i=It,(pe===null?i.memoizedState:pe.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?xp:Dp),e}function ju(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Go(e);if(e.$$typeof===ot)return Qe(e)}throw Error(s(438,String(e)))}function vf(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=It.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_f(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=N;return i.index++,a}function Vi(e,i){return typeof i=="function"?i(e):i}function zu(e){var i=ye();return Ef(i,Yt,e)}function Ef(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,x=null,z=i,Q=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Lt&X)===X:(lr&X)===X){var B=z.revertLane;if(B===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===ma&&(Q=!0);else if((lr&B)===B){z=z.next,B===ma&&(Q=!0);continue}else X={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(E=x=X,v=d):x=x.next=X,It.lanes|=B,gr|=B;X=z.action,Rs&&a(d,X),d=z.hasEagerState?z.eagerState:a(d,X)}else B={lane:X,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(E=x=B,v=d):x=x.next=B,It.lanes|=X,gr|=X;z=z.next}while(z!==null&&z!==i);if(x===null?v=d:x.next=E,!cn(d,e.memoizedState)&&(Oe=!0,Q&&(a=ga,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Tf(e){var i=ye(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);cn(d,i.memoizedState)||(Oe=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function $g(e,i,a){var l=It,h=ye(),d=Bt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Yt||h).memoizedState,a);v&&(h.memoizedState=a,Oe=!0),h=h.queue;var E=Jg.bind(null,l,h,e);if(Qo(2048,8,E,[e]),h.getSnapshot!==i||v||pe!==null&&pe.memoizedState.tag&1){if(l.flags|=2048,va(9,Bu(),Wg.bind(null,l,h,a,i),null),te===null)throw Error(s(349));d||(lr&124)!==0||Zg(l,i,a)}return a}function Zg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=_f(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Wg(e,i,a,l){i.value=a,i.getSnapshot=l,tp(i)&&ep(e)}function Jg(e,i,a){return a(function(){tp(i)&&ep(e)})}function tp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function ep(e){var i=ca(e,2);i!==null&&pn(i,e,2)}function bf(e){var i=nn();if(typeof e=="function"){var a=e;if(e=a(),Rs){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},i}function np(e,i,a,l){return e.baseState=a,Ef(e,Yt,typeof l=="function"?l:Vi)}function ib(e,i,a,l,h){if(Hu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ip(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ip(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var E=a(h,l),x=G.S;x!==null&&x(v,E),rp(e,i,E)}catch(z){Af(e,i,z)}finally{G.T=d}}else try{d=a(h,l),rp(e,i,d)}catch(z){Af(e,i,z)}}function rp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){sp(e,i,l)},function(l){return Af(e,i,l)}):sp(e,i,a)}function sp(e,i,a){i.status="fulfilled",i.value=a,ap(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,ip(e,a)))}function Af(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ap(i),i=i.next;while(i!==l)}e.action=null}function ap(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function op(e,i){return i}function lp(e,i){if(Bt){var a=te.formState;if(a!==null){t:{var l=It;if(Bt){if(le){e:{for(var h=le,d=ei;h.nodeType!==8;){if(!d){h=null;break e}if(h=Un(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){le=Un(h.nextSibling),l=h.data==="F!";break t}}bs(l)}l=!1}l&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:i},a.queue=l,a=Ip.bind(null,It,l),l.dispatch=a,l=bf(!1),d=Cf.bind(null,It,!1,l.queue),l=nn(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=ib.bind(null,It,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function up(e){var i=ye();return cp(i,Yt,e)}function cp(e,i,a){if(i=Ef(e,i,op)[0],e=zu(Vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Go(i)}catch(v){throw v===jo?Mu:v}else l=i;i=ye();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(It.flags|=2048,va(9,Bu(),rb.bind(null,h,a),null)),[l,d,e]}function rb(e,i){e.action=i}function hp(e){var i=ye(),a=Yt;if(a!==null)return cp(i,a,e);ye(),i=i.memoizedState,a=ye();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function va(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=It.updateQueue,i===null&&(i=_f(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Bu(){return{destroy:void 0,resource:void 0}}function fp(){return ye().memoizedState}function qu(e,i,a,l){var h=nn();l=l===void 0?null:l,It.flags|=e,h.memoizedState=va(1|i,Bu(),a,l)}function Qo(e,i,a,l){var h=ye();l=l===void 0?null:l;var d=h.memoizedState.inst;Yt!==null&&l!==null&&df(l,Yt.memoizedState.deps)?h.memoizedState=va(i,d,a,l):(It.flags|=e,h.memoizedState=va(1|i,d,a,l))}function dp(e,i){qu(8390656,8,e,i)}function mp(e,i){Qo(2048,8,e,i)}function gp(e,i){return Qo(4,2,e,i)}function pp(e,i){return Qo(4,4,e,i)}function yp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function _p(e,i,a){a=a!=null?a.concat([e]):null,Qo(4,4,yp.bind(null,i,e),a)}function Sf(){}function vp(e,i){var a=ye();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&df(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function Ep(e,i){var a=ye();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&df(i,l[1]))return l[0];if(l=e(),Rs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[l,i],l}function wf(e,i,a){return a===void 0||(lr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Ay(),It.lanes|=e,gr|=e,a)}function Tp(e,i,a,l){return cn(a,i)?a:pa.current!==null?(e=wf(e,a,l),cn(e,i)||(Oe=!0),e):(lr&42)===0?(Oe=!0,e.memoizedState=a):(e=Ay(),It.lanes|=e,gr|=e,i)}function bp(e,i,a,l,h){var d=it.p;it.p=d!==0&&8>d?d:8;var v=G.T,E={};G.T=E,Cf(e,!1,i,a);try{var x=h(),z=G.S;if(z!==null&&z(E,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Q=tb(x,l);Ko(e,i,Q,gn(e))}else Ko(e,i,l,gn(e))}catch(X){Ko(e,i,{then:function(){},status:"rejected",reason:X},gn())}finally{it.p=d,G.T=v}}function sb(){}function Rf(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=Ap(e).queue;bp(e,h,i,dt,a===null?sb:function(){return Sp(e),a(l)})}function Ap(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Sp(e){var i=Ap(e).next.queue;Ko(e,i,{},gn())}function If(){return Qe(hl)}function wp(){return ye().memoizedState}function Rp(){return ye().memoizedState}function ab(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gn();e=ar(a);var l=or(i,e,a);l!==null&&(pn(l,i,a),Bo(l,i,a)),i={cache:nf()},e.payload=i;return}i=i.return}}function ob(e,i,a){var l=gn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Hu(e)?Cp(i,a):(a=Qh(e,i,a,l),a!==null&&(pn(a,e,l),Np(a,i,l)))}function Ip(e,i,a){var l=gn();Ko(e,i,a,l)}function Ko(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hu(e))Cp(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,cn(E,v))return Ru(e,i,h,0),te===null&&wu(),!1}catch{}finally{}if(a=Qh(e,i,h,l),a!==null)return pn(a,e,l),Np(a,i,l),!0}return!1}function Cf(e,i,a,l){if(l={lane:2,revertLane:ad(),action:l,hasEagerState:!1,eagerState:null,next:null},Hu(e)){if(i)throw Error(s(479))}else i=Qh(e,a,l,2),i!==null&&pn(i,e,2)}function Hu(e){var i=e.alternate;return e===It||i!==null&&i===It}function Cp(e,i){ya=Lu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Np(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,go(e,a)}}var Fu={readContext:Qe,use:ju,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},xp={readContext:Qe,use:ju,useCallback:function(e,i){return nn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:dp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,qu(4194308,4,yp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return qu(4194308,4,e,i)},useInsertionEffect:function(e,i){qu(4,2,e,i)},useMemo:function(e,i){var a=nn();i=i===void 0?null:i;var l=e();if(Rs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=nn();if(a!==void 0){var h=a(i);if(Rs){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=ob.bind(null,It,e),[l.memoizedState,e]},useRef:function(e){var i=nn();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,a=Ip.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Sf,useDeferredValue:function(e,i){var a=nn();return wf(a,e,i)},useTransition:function(){var e=bf(!1);return e=bp.bind(null,It,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=It,h=nn();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(Lt&124)!==0||Zg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,dp(Jg.bind(null,l,d,e),[e]),l.flags|=2048,va(9,Bu(),Wg.bind(null,l,d,a,i),null),a},useId:function(){var e=nn(),i=te.identifierPrefix;if(Bt){var a=xi,l=Ni;a=(l&~(1<<32-Ge(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Uu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=eb++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:If,useFormState:lp,useActionState:lp,useOptimistic:function(e){var i=nn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Cf.bind(null,It,!0,a),a.dispatch=i,[e,i]},useMemoCache:vf,useCacheRefresh:function(){return nn().memoizedState=ab.bind(null,It)}},Dp={readContext:Qe,use:ju,useCallback:vp,useContext:Qe,useEffect:mp,useImperativeHandle:_p,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:Ep,useReducer:zu,useRef:fp,useState:function(){return zu(Vi)},useDebugValue:Sf,useDeferredValue:function(e,i){var a=ye();return Tp(a,Yt.memoizedState,e,i)},useTransition:function(){var e=zu(Vi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Go(e),i]},useSyncExternalStore:$g,useId:wp,useHostTransitionStatus:If,useFormState:up,useActionState:up,useOptimistic:function(e,i){var a=ye();return np(a,Yt,e,i)},useMemoCache:vf,useCacheRefresh:Rp},lb={readContext:Qe,use:ju,useCallback:vp,useContext:Qe,useEffect:mp,useImperativeHandle:_p,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:Ep,useReducer:Tf,useRef:fp,useState:function(){return Tf(Vi)},useDebugValue:Sf,useDeferredValue:function(e,i){var a=ye();return Yt===null?wf(a,e,i):Tp(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Tf(Vi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Go(e),i]},useSyncExternalStore:$g,useId:wp,useHostTransitionStatus:If,useFormState:hp,useActionState:hp,useOptimistic:function(e,i){var a=ye();return Yt!==null?np(a,Yt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:vf,useCacheRefresh:Rp},Ea=null,Yo=0;function Gu(e){var i=Yo;return Yo+=1,Ea===null&&(Ea=[]),qg(Ea,e,i)}function Xo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Qu(e,i){throw i.$$typeof===R?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Op(e){var i=e._init;return i(e._payload)}function Vp(e){function i(k,M){if(e){var U=k.deletions;U===null?(k.deletions=[M],k.flags|=16):U.push(M)}}function a(k,M){if(!e)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function l(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=Ci(k,M),k.index=0,k.sibling=null,k}function d(k,M,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<M?(k.flags|=67108866,M):U):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,M,U,K){return M===null||M.tag!==6?(M=Yh(U,k.mode,K),M.return=k,M):(M=h(M,U),M.return=k,M)}function x(k,M,U,K){var ut=U.type;return ut===F?Q(k,M,U.props.children,K,U.key):M!==null&&(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Op(ut)===M.type)?(M=h(M,U.props),Xo(M,U),M.return=k,M):(M=Cu(U.type,U.key,U.props,null,k.mode,K),Xo(M,U),M.return=k,M)}function z(k,M,U,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Xh(U,k.mode,K),M.return=k,M):(M=h(M,U.children||[]),M.return=k,M)}function Q(k,M,U,K,ut){return M===null||M.tag!==7?(M=_s(U,k.mode,K,ut),M.return=k,M):(M=h(M,U),M.return=k,M)}function X(k,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Yh(""+M,k.mode,U),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return U=Cu(M.type,M.key,M.props,null,k.mode,U),Xo(U,M),U.return=k,U;case j:return M=Xh(M,k.mode,U),M.return=k,M;case S:var K=M._init;return M=K(M._payload),X(k,M,U)}if(ae(M)||P(M))return M=_s(M,k.mode,U,null),M.return=k,M;if(typeof M.then=="function")return X(k,Gu(M),U);if(M.$$typeof===ot)return X(k,Ou(k,M),U);Qu(k,M)}return null}function B(k,M,U,K){var ut=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ut!==null?null:E(k,M,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===ut?x(k,M,U,K):null;case j:return U.key===ut?z(k,M,U,K):null;case S:return ut=U._init,U=ut(U._payload),B(k,M,U,K)}if(ae(U)||P(U))return ut!==null?null:Q(k,M,U,K,null);if(typeof U.then=="function")return B(k,M,Gu(U),K);if(U.$$typeof===ot)return B(k,M,Ou(k,U),K);Qu(k,U)}return null}function q(k,M,U,K,ut){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(U)||null,E(M,k,""+K,ut);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return k=k.get(K.key===null?U:K.key)||null,x(M,k,K,ut);case j:return k=k.get(K.key===null?U:K.key)||null,z(M,k,K,ut);case S:var xt=K._init;return K=xt(K._payload),q(k,M,U,K,ut)}if(ae(K)||P(K))return k=k.get(U)||null,Q(M,k,K,ut,null);if(typeof K.then=="function")return q(k,M,U,Gu(K),ut);if(K.$$typeof===ot)return q(k,M,U,Ou(M,K),ut);Qu(M,K)}return null}function bt(k,M,U,K){for(var ut=null,xt=null,ft=M,_t=M=0,Me=null;ft!==null&&_t<U.length;_t++){ft.index>_t?(Me=ft,ft=null):Me=ft.sibling;var jt=B(k,ft,U[_t],K);if(jt===null){ft===null&&(ft=Me);break}e&&ft&&jt.alternate===null&&i(k,ft),M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt,ft=Me}if(_t===U.length)return a(k,ft),Bt&&Es(k,_t),ut;if(ft===null){for(;_t<U.length;_t++)ft=X(k,U[_t],K),ft!==null&&(M=d(ft,M,_t),xt===null?ut=ft:xt.sibling=ft,xt=ft);return Bt&&Es(k,_t),ut}for(ft=l(ft);_t<U.length;_t++)Me=q(ft,k,_t,U[_t],K),Me!==null&&(e&&Me.alternate!==null&&ft.delete(Me.key===null?_t:Me.key),M=d(Me,M,_t),xt===null?ut=Me:xt.sibling=Me,xt=Me);return e&&ft.forEach(function(Sr){return i(k,Sr)}),Bt&&Es(k,_t),ut}function yt(k,M,U,K){if(U==null)throw Error(s(151));for(var ut=null,xt=null,ft=M,_t=M=0,Me=null,jt=U.next();ft!==null&&!jt.done;_t++,jt=U.next()){ft.index>_t?(Me=ft,ft=null):Me=ft.sibling;var Sr=B(k,ft,jt.value,K);if(Sr===null){ft===null&&(ft=Me);break}e&&ft&&Sr.alternate===null&&i(k,ft),M=d(Sr,M,_t),xt===null?ut=Sr:xt.sibling=Sr,xt=Sr,ft=Me}if(jt.done)return a(k,ft),Bt&&Es(k,_t),ut;if(ft===null){for(;!jt.done;_t++,jt=U.next())jt=X(k,jt.value,K),jt!==null&&(M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt);return Bt&&Es(k,_t),ut}for(ft=l(ft);!jt.done;_t++,jt=U.next())jt=q(ft,k,_t,jt.value,K),jt!==null&&(e&&jt.alternate!==null&&ft.delete(jt.key===null?_t:jt.key),M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt);return e&&ft.forEach(function(uA){return i(k,uA)}),Bt&&Es(k,_t),ut}function $t(k,M,U,K){if(typeof U=="object"&&U!==null&&U.type===F&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var ut=U.key;M!==null;){if(M.key===ut){if(ut=U.type,ut===F){if(M.tag===7){a(k,M.sibling),K=h(M,U.props.children),K.return=k,k=K;break t}}else if(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Op(ut)===M.type){a(k,M.sibling),K=h(M,U.props),Xo(K,U),K.return=k,k=K;break t}a(k,M);break}else i(k,M);M=M.sibling}U.type===F?(K=_s(U.props.children,k.mode,K,U.key),K.return=k,k=K):(K=Cu(U.type,U.key,U.props,null,k.mode,K),Xo(K,U),K.return=k,k=K)}return v(k);case j:t:{for(ut=U.key;M!==null;){if(M.key===ut)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(k,M.sibling),K=h(M,U.children||[]),K.return=k,k=K;break t}else{a(k,M);break}else i(k,M);M=M.sibling}K=Xh(U,k.mode,K),K.return=k,k=K}return v(k);case S:return ut=U._init,U=ut(U._payload),$t(k,M,U,K)}if(ae(U))return bt(k,M,U,K);if(P(U)){if(ut=P(U),typeof ut!="function")throw Error(s(150));return U=ut.call(U),yt(k,M,U,K)}if(typeof U.then=="function")return $t(k,M,Gu(U),K);if(U.$$typeof===ot)return $t(k,M,Ou(k,U),K);Qu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(a(k,M.sibling),K=h(M,U),K.return=k,k=K):(a(k,M),K=Yh(U,k.mode,K),K.return=k,k=K),v(k)):a(k,M)}return function(k,M,U,K){try{Yo=0;var ut=$t(k,M,U,K);return Ea=null,ut}catch(ft){if(ft===jo||ft===Mu)throw ft;var xt=hn(29,ft,null,k.mode);return xt.lanes=K,xt.return=k,xt}finally{}}}var Ta=Vp(!0),Mp=Vp(!1),Nn=W(null),ni=null;function ur(e){var i=e.alternate;tt(Ie,Ie.current&1),tt(Nn,e),ni===null&&(i===null||pa.current!==null||i.memoizedState!==null)&&(ni=e)}function Pp(e){if(e.tag===22){if(tt(Ie,Ie.current),tt(Nn,e),ni===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ni=e)}}else cr()}function cr(){tt(Ie,Ie.current),tt(Nn,Nn.current)}function Mi(e){rt(Nn),ni===e&&(ni=null),rt(Ie)}var Ie=W(0);function Ku(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||_d(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Nf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var xf={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=gn(),h=ar(l);h.payload=i,a!=null&&(h.callback=a),i=or(e,h,l),i!==null&&(pn(i,e,l),Bo(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=gn(),h=ar(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=or(e,h,l),i!==null&&(pn(i,e,l),Bo(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gn(),l=ar(a);l.tag=2,i!=null&&(l.callback=i),i=or(e,l,a),i!==null&&(pn(i,e,a),Bo(i,e,a))}};function kp(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Do(a,l)||!Do(h,d):!0}function Lp(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&xf.enqueueReplaceState(i,i.state,null)}function Is(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Yu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Up(e){Yu(e)}function jp(e){console.error(e)}function zp(e){Yu(e)}function Xu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Bp(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Df(e,i,a){return a=ar(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(e,i)},a}function qp(e){return e=ar(e),e.tag=3,e}function Hp(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Bp(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Bp(i,a,l),typeof h!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function ub(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ko(i,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 13:return ni===null?ed():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===af?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),id(e,l,h)),!1;case 22:return a.flags|=65536,l===af?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),id(e,l,h)),!1}throw Error(s(435,a.tag))}return id(e,l,h),ed(),!1}if(Bt)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Wh&&(e=Error(s(422),{cause:l}),Po(wn(e,a)))):(l!==Wh&&(i=Error(s(423),{cause:l}),Po(wn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=wn(l,a),h=Df(e.stateNode,l,h),uf(e,h),ue!==4&&(ue=2)),!1;var d=Error(s(520),{cause:l});if(d=wn(d,a),nl===null?nl=[d]:nl.push(d),ue!==4&&(ue=2),i===null)return!0;l=wn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Df(a.stateNode,l,e),uf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(pr===null||!pr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=qp(h),Hp(h,e,a,l),uf(a,h),!1}a=a.return}while(a!==null);return!1}var Fp=Error(s(461)),Oe=!1;function je(e,i,a,l){i.child=e===null?Mp(i,null,a,l):Ta(i,e.child,a,l)}function Gp(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Ss(i),l=mf(e,i,a,v,d,h),E=gf(),e!==null&&!Oe?(pf(e,i,h),Pi(e,i,h)):(Bt&&E&&$h(i),i.flags|=1,je(e,i,l,h),i.child)}function Qp(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!Kh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Kp(e,i,d,l,h)):(e=Cu(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!jf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Do,a(v,l)&&e.ref===i.ref)return Pi(e,i,h)}return i.flags|=1,e=Ci(d,l),e.ref=i.ref,e.return=i,i.child=e}function Kp(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Do(d,l)&&e.ref===i.ref)if(Oe=!1,i.pendingProps=l=d,jf(e,h))(e.flags&131072)!==0&&(Oe=!0);else return i.lanes=e.lanes,Pi(e,i,h)}return Of(e,i,a,l,h)}function Yp(e,i,a){var l=i.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Xp(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vu(i,d!==null?d.cachePool:null),d!==null?Kg(i,d):hf(),Pp(i);else return i.lanes=i.childLanes=536870912,Xp(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Vu(i,d.cachePool),Kg(i,d),cr(),i.memoizedState=null):(e!==null&&Vu(i,null),hf(),cr());return je(e,i,h,a),i.child}function Xp(e,i,a,l){var h=sf();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Vu(i,null),hf(),Pp(i),e!==null&&ko(e,i,l,!0),null}function $u(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Of(e,i,a,l,h){return Ss(i),a=mf(e,i,a,l,void 0,h),l=gf(),e!==null&&!Oe?(pf(e,i,h),Pi(e,i,h)):(Bt&&l&&$h(i),i.flags|=1,je(e,i,a,h),i.child)}function $p(e,i,a,l,h,d){return Ss(i),i.updateQueue=null,a=Xg(i,l,a,h),Yg(e),l=gf(),e!==null&&!Oe?(pf(e,i,d),Pi(e,i,d)):(Bt&&l&&$h(i),i.flags|=1,je(e,i,a,d),i.child)}function Zp(e,i,a,l,h){if(Ss(i),i.stateNode===null){var d=ha,v=a.contextType;typeof v=="object"&&v!==null&&(d=Qe(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=xf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},of(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Qe(v):ha,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Nf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&xf.enqueueReplaceState(d,d.state,null),Ho(i,l,d,h),qo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,x=Is(a,E);d.props=x;var z=d.context,Q=a.contextType;v=ha,typeof Q=="object"&&Q!==null&&(v=Qe(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||z!==v)&&Lp(i,d,l,v),sr=!1;var B=i.memoizedState;d.state=B,Ho(i,l,d,h),qo(),z=i.memoizedState,E||B!==z||sr?(typeof X=="function"&&(Nf(i,a,X,l),z=i.memoizedState),(x=sr||kp(i,a,x,l,B,z,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,lf(e,i),v=i.memoizedProps,Q=Is(a,v),d.props=Q,X=i.pendingProps,B=d.context,z=a.contextType,x=ha,typeof z=="object"&&z!==null&&(x=Qe(z)),E=a.getDerivedStateFromProps,(z=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||B!==x)&&Lp(i,d,l,x),sr=!1,B=i.memoizedState,d.state=B,Ho(i,l,d,h),qo();var q=i.memoizedState;v!==X||B!==q||sr||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof E=="function"&&(Nf(i,a,E,l),q=i.memoizedState),(Q=sr||kp(i,a,Q,l,B,q,x)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=x,l=Q):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,$u(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ta(i,e.child,null,h),i.child=Ta(i,null,a,h)):je(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Pi(e,i,h),e}function Wp(e,i,a,l){return Mo(),i.flags|=256,je(e,i,a,l),i.child}var Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(e){return{baseLanes:e,cachePool:jg()}}function Pf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=xn),e}function Jp(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?ur(i):cr(),Bt){var E=le,x;if(x=E){t:{for(x=E,E=ei;x.nodeType!==8;){if(!E){E=null;break t}if(x=Un(x.nextSibling),x===null){E=null;break t}}E=x}E!==null?(i.memoizedState={dehydrated:E,treeContext:vs!==null?{id:Ni,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},x=hn(18,null,null,0),x.stateNode=E,x.return=i,i.child=x,en=i,le=null,x=!0):x=!1}x||bs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return _d(E)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return E=l.children,l=l.fallback,h?(cr(),h=i.mode,E=Zu({mode:"hidden",children:E},h),l=_s(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=Mf(a),h.childLanes=Pf(e,v,a),i.memoizedState=Vf,l):(ur(i),kf(i,E))}if(x=e.memoizedState,x!==null&&(E=x.dehydrated,E!==null)){if(d)i.flags&256?(ur(i),i.flags&=-257,i=Lf(e,i,a)):i.memoizedState!==null?(cr(),i.child=e.child,i.flags|=128,i=null):(cr(),h=l.fallback,E=i.mode,l=Zu({mode:"visible",children:l.children},E),h=_s(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ta(i,e.child,null,a),l=i.child,l.memoizedState=Mf(a),l.childLanes=Pf(e,v,a),i.memoizedState=Vf,i=h);else if(ur(i),_d(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(s(419)),l.stack="",l.digest=v,Po({value:l,source:null,stack:null}),i=Lf(e,i,a)}else if(Oe||ko(e,i,a,!1),v=(a&e.childLanes)!==0,Oe||v){if(v=te,v!==null&&(l=a&-a,l=(l&42)!==0?1:Zi(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,ca(e,l),pn(v,e,l),Fp;E.data==="$?"||ed(),i=Lf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=x.treeContext,le=Un(E.nextSibling),en=i,Bt=!0,Ts=null,ei=!1,e!==null&&(In[Cn++]=Ni,In[Cn++]=xi,In[Cn++]=vs,Ni=e.id,xi=e.overflow,vs=i),i=kf(i,l.children),i.flags|=4096);return i}return h?(cr(),h=l.fallback,E=i.mode,x=e.child,z=x.sibling,l=Ci(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,z!==null?h=Ci(z,h):(h=_s(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=e.child.memoizedState,E===null?E=Mf(a):(x=E.cachePool,x!==null?(z=Re._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=jg(),E={baseLanes:E.baseLanes|a,cachePool:x}),h.memoizedState=E,h.childLanes=Pf(e,v,a),i.memoizedState=Vf,l):(ur(i),a=e.child,e=a.sibling,a=Ci(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function kf(e,i){return i=Zu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Zu(e,i){return e=hn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lf(e,i,a){return Ta(i,e.child,null,a),e=kf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ty(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),tf(e.return,i,a)}function Uf(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function ey(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(je(e,i,l.children,a),l=Ie.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ty(e,a,i);else if(e.tag===19)ty(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(tt(Ie,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ku(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Uf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ku(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Uf(i,!0,a,null,d);break;case"together":Uf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),gr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(ko(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ci(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ci(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function jf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function cb(e,i,a){switch(i.tag){case 3:Jt(i,i.stateNode.containerInfo),rr(i,Re,e.memoizedState.cache),Mo();break;case 27:case 5:$i(i);break;case 4:Jt(i,i.stateNode.containerInfo);break;case 10:rr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Jp(e,i,a):(ur(i),e=Pi(e,i,a),e!==null?e.sibling:null);ur(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ko(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ey(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),tt(Ie,Ie.current),l)break;return null;case 22:case 23:return i.lanes=0,Yp(e,i,a);case 24:rr(i,Re,e.memoizedState.cache)}return Pi(e,i,a)}function ny(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Oe=!0;else{if(!jf(e,a)&&(i.flags&128)===0)return Oe=!1,cb(e,i,a);Oe=(e.flags&131072)!==0}else Oe=!1,Bt&&(i.flags&1048576)!==0&&Og(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Kh(l)?(e=Is(l,e),i.tag=1,i=Zp(null,i,l,e,a)):(i.tag=0,i=Of(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===nt){i.tag=11,i=Gp(null,i,l,e,a);break t}else if(h===I){i.tag=14,i=Qp(null,i,l,e,a);break t}}throw i=be(l)||l,Error(s(306,i,""))}}return i;case 0:return Of(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Is(l,i.pendingProps),Zp(e,i,l,h,a);case 3:t:{if(Jt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,lf(e,i),Ho(i,l,null,a);var v=i.memoizedState;if(l=v.cache,rr(i,Re,l),l!==d.cache&&ef(i,[Re],a,!0),qo(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Wp(e,i,l,a);break t}else if(l!==h){h=wn(Error(s(424)),i),Po(h),i=Wp(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=Un(e.firstChild),en=i,Bt=!0,Ts=null,ei=!0,a=Mp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),l===h){i=Pi(e,i,a);break t}je(e,i,l,a)}i=i.child}return i;case 26:return $u(e,i),e===null?(a=a_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,l=hc(At.current).createElement(a),l[Ae]=i,l[me]=e,Be(l,a,e),ce(l),i.stateNode=l):i.memoizedState=a_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return $i(i),e===null&&Bt&&(l=i.stateNode=i_(i.type,i.pendingProps,At.current),en=i,ei=!0,h=le,vr(i.type)?(vd=h,le=Un(l.firstChild)):le=h),je(e,i,i.pendingProps.children,a),$u(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((h=l=le)&&(l=Ub(l,i.type,i.pendingProps,ei),l!==null?(i.stateNode=l,en=i,le=Un(l.firstChild),ei=!1,h=!0):h=!1),h||bs(i)),$i(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,gd(h,d)?l=null:v!==null&&gd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=mf(e,i,nb,null,null,a),hl._currentValue=h),$u(e,i),je(e,i,l,a),i.child;case 6:return e===null&&Bt&&((e=a=le)&&(a=jb(a,i.pendingProps,ei),a!==null?(i.stateNode=a,en=i,le=null,e=!0):e=!1),e||bs(i)),null;case 13:return Jp(e,i,a);case 4:return Jt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ta(i,null,l,a):je(e,i,l,a),i.child;case 11:return Gp(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,rr(i,i.type,l.value),je(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ss(i),h=Qe(h),l=l(h),i.flags|=1,je(e,i,l,a),i.child;case 14:return Qp(e,i,i.type,i.pendingProps,a);case 15:return Kp(e,i,i.type,i.pendingProps,a);case 19:return ey(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=Zu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ci(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Yp(e,i,a);case 24:return Ss(i),l=Qe(Re),e===null?(h=sf(),h===null&&(h=te,d=nf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},of(i),rr(i,Re,h)):((e.lanes&a)!==0&&(lf(e,i),Ho(i,null,null,a),qo()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),rr(i,Re,l)):(l=d.cache,rr(i,Re,l),l!==h.cache&&ef(i,[Re],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function iy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!h_(i)){if(i=Nn.current,i!==null&&((Lt&4194048)===Lt?ni!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==ni))throw zo=af,zg;e.flags|=8192}}function Wu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?fo():536870912,e.lanes|=i,wa|=i)}function $o(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function hb(e,i,a){var l=i.pendingProps;switch(Zh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Oi(Re),Hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Vo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pg())),re(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(re(i),iy(i,a)):(re(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),re(i),iy(i,a)):(re(i),i.flags&=-16777217):(e.memoizedProps!==l&&ki(i),re(i),i.flags&=-16777217),null;case 27:gi(i),a=At.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=pt.current,Vo(i)?Vg(i):(e=i_(h,l,a),i.stateNode=e,ki(i))}return re(i),null;case 5:if(gi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(e=pt.current,Vo(i))Vg(i);else{switch(h=hc(At.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Ae]=i,e[me]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Be(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return re(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=At.current,Vo(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=en,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ae]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||$y(e.nodeValue,a)),e||bs(i)}else e=hc(e).createTextNode(l),e[Ae]=i,i.stateNode=e}return re(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Vo(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ae]=i}else Mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=Pg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Wu(i,i.updateQueue),re(i),null;case 4:return Hn(),e===null&&cd(i.stateNode.containerInfo),re(i),null;case 10:return Oi(i.type),re(i),null;case 19:if(rt(Ie),h=i.memoizedState,h===null)return re(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)$o(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Ku(e),d!==null){for(i.flags|=128,$o(h,!1),e=d.updateQueue,i.updateQueue=e,Wu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Dg(a,e),a=a.sibling;return tt(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&vn()>ec&&(i.flags|=128,l=!0,$o(h,!1),i.lanes=4194304)}else{if(!l)if(e=Ku(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Wu(i,e),$o(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Bt)return re(i),null}else 2*vn()-h.renderingStartTime>ec&&a!==536870912&&(i.flags|=128,l=!0,$o(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=vn(),i.sibling=null,e=Ie.current,tt(Ie,l?e&1|2:e&1),i):(re(i),null);case 22:case 23:return Mi(i),ff(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&Wu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&rt(ws),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Oi(Re),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function fb(e,i){switch(Zh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Oi(Re),Hn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 13:if(Mi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Mo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return rt(Ie),null;case 4:return Hn(),null;case 10:return Oi(i.type),null;case 22:case 23:return Mi(i),ff(),e!==null&&rt(ws),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Oi(Re),null;case 25:return null;default:return null}}function ry(e,i){switch(Zh(i),i.tag){case 3:Oi(Re),Hn();break;case 26:case 27:case 5:gi(i);break;case 4:Hn();break;case 13:Mi(i);break;case 19:rt(Ie);break;case 10:Oi(i.type);break;case 22:case 23:Mi(i),ff(),e!==null&&rt(ws);break;case 24:Oi(Re)}}function Zo(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(E){Zt(i,i.return,E)}}function hr(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var x=a,z=E;try{z()}catch(Q){Zt(h,x,Q)}}}l=l.next}while(l!==d)}}catch(Q){Zt(i,i.return,Q)}}function sy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Qg(i,a)}catch(l){Zt(e,e.return,l)}}}function ay(e,i,a){a.props=Is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Zt(e,i,l)}}function Wo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Zt(e,i,h)}}function ii(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Zt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(e,i,h)}else a.current=null}function oy(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Zt(e,e.return,h)}}function zf(e,i,a){try{var l=e.stateNode;Vb(l,e.type,a,i),l[me]=i}catch(h){Zt(e,e.return,h)}}function ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vr(e.type)||e.tag===4}function Bf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qf(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=cc));else if(l!==4&&(l===27&&vr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(qf(e,i,a),e=e.sibling;e!==null;)qf(e,i,a),e=e.sibling}function Ju(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&vr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ju(e,i,a),e=e.sibling;e!==null;)Ju(e,i,a),e=e.sibling}function uy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Be(i,l,a),i[Ae]=e,i[me]=a}catch(d){Zt(e,e.return,d)}}var Li=!1,fe=!1,Hf=!1,cy=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function db(e,i){if(e=e.containerInfo,dd=yc,e=Tg(e),zh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,x=-1,z=0,Q=0,X=e,B=null;e:for(;;){for(var q;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==d||l!==0&&X.nodeType!==3||(x=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(q=X.firstChild)!==null;)B=X,X=q;for(;;){if(X===e)break e;if(B===a&&++z===h&&(E=v),B===d&&++Q===l&&(x=v),(q=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=q}a=E===-1||x===-1?null:{start:E,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(md={focusedElem:e,selectionRange:a},yc=!1,Ve=i;Ve!==null;)if(i=Ve,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ve=e;else for(;Ve!==null;){switch(i=Ve,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var bt=Is(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(bt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Zt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)yd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ve=e;break}Ve=i.return}}function hy(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:fr(e,a),l&4&&Zo(5,a);break;case 1:if(fr(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Zt(a,a.return,v)}else{var h=Is(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Zt(a,a.return,v)}}l&64&&sy(a),l&512&&Wo(a,a.return);break;case 3:if(fr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Qg(e,i)}catch(v){Zt(a,a.return,v)}}break;case 27:i===null&&l&4&&uy(a);case 26:case 5:fr(e,a),i===null&&l&4&&oy(a),l&512&&Wo(a,a.return);break;case 12:fr(e,a);break;case 13:fr(e,a),l&4&&my(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=bb.bind(null,a),zb(e,a))));break;case 22:if(l=a.memoizedState!==null||Li,!l){i=i!==null&&i.memoizedState!==null||fe,h=Li;var d=fe;Li=l,(fe=i)&&!d?dr(e,a,(a.subtreeFlags&8772)!==0):fr(e,a),Li=h,fe=d}break;case 30:break;default:fr(e,a)}}function fy(e){var i=e.alternate;i!==null&&(e.alternate=null,fy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&tr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,rn=!1;function Ui(e,i,a){for(a=a.child;a!==null;)dy(e,i,a),a=a.sibling}function dy(e,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||ii(a,i),Ui(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ii(a,i);var l=ie,h=rn;vr(a.type)&&(ie=a.stateNode,rn=!1),Ui(e,i,a),ol(a.stateNode),ie=l,rn=h;break;case 5:fe||ii(a,i);case 6:if(l=ie,h=rn,ie=null,Ui(e,i,a),ie=l,rn=h,ie!==null)if(rn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{ie.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:ie!==null&&(rn?(e=ie,e_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gl(e)):e_(ie,a.stateNode));break;case 4:l=ie,h=rn,ie=a.stateNode.containerInfo,rn=!0,Ui(e,i,a),ie=l,rn=h;break;case 0:case 11:case 14:case 15:fe||hr(2,a,i),fe||hr(4,a,i),Ui(e,i,a);break;case 1:fe||(ii(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ay(a,i,l)),Ui(e,i,a);break;case 21:Ui(e,i,a);break;case 22:fe=(l=fe)||a.memoizedState!==null,Ui(e,i,a),fe=l;break;default:Ui(e,i,a)}}function my(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gl(e)}catch(a){Zt(i,i.return,a)}}function mb(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new cy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new cy),i;default:throw Error(s(435,e.tag))}}function Ff(e,i){var a=mb(e);i.forEach(function(l){var h=Ab.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function fn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(vr(E.type)){ie=E.stateNode,rn=!1;break t}break;case 5:ie=E.stateNode,rn=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,rn=!0;break t}E=E.return}if(ie===null)throw Error(s(160));dy(d,v,h),ie=null,rn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)gy(i,e),i=i.sibling}var Ln=null;function gy(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(i,e),dn(e),l&4&&(hr(3,e,e.return),Zo(3,e),hr(5,e,e.return));break;case 1:fn(i,e),dn(e),l&512&&(fe||a===null||ii(a,a.return)),l&64&&Li&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ln;if(fn(i,e),dn(e),l&512&&(fe||a===null||ii(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ns]||d[Ae]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Be(d,l,a),d[Ae]=e,ce(d),l=d;break t;case"link":var v=u_("link","href",h).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(l),Be(d,l,a),h.head.appendChild(d);break;case"meta":if(v=u_("meta","content",h).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(l),Be(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ae]=e,ce(d),l=d}e.stateNode=l}else c_(h,e.type,e.stateNode);else e.stateNode=l_(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?c_(h,e.type,e.stateNode):l_(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&zf(e,e.memoizedProps,a.memoizedProps)}break;case 27:fn(i,e),dn(e),l&512&&(fe||a===null||ii(a,a.return)),a!==null&&l&4&&zf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,e),dn(e),l&512&&(fe||a===null||ii(a,a.return)),e.flags&32){h=e.stateNode;try{Tn(h,"")}catch(q){Zt(e,e.return,q)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,zf(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Hf=!0);break;case 6:if(fn(i,e),dn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(q){Zt(e,e.return,q)}}break;case 3:if(mc=null,h=Ln,Ln=fc(i.containerInfo),fn(i,e),Ln=h,dn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(i.containerInfo)}catch(q){Zt(e,e.return,q)}Hf&&(Hf=!1,py(e));break;case 4:l=Ln,Ln=fc(e.stateNode.containerInfo),fn(i,e),dn(e),Ln=l;break;case 12:fn(i,e),dn(e);break;case 13:fn(i,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($f=vn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ff(e,l)));break;case 22:h=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=Li,Q=fe;if(Li=z||h,fe=Q||x,fn(i,e),fe=Q,Li=z,dn(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||Li||fe||Cs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=x.stateNode;var X=x.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){Zt(x,x.return,q)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(q){Zt(x,x.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ff(e,a))));break;case 19:fn(i,e),dn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ff(e,l)));break;case 30:break;case 21:break;default:fn(i,e),dn(e)}}function dn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(ly(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Bf(e);Ju(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Tn(v,""),a.flags&=-33);var E=Bf(e);Ju(e,E,v);break;case 3:case 4:var x=a.stateNode.containerInfo,z=Bf(e);qf(e,z,x);break;default:throw Error(s(161))}}catch(Q){Zt(e,e.return,Q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function py(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function fr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hy(e,i.alternate,i),i=i.sibling}function Cs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:hr(4,i,i.return),Cs(i);break;case 1:ii(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ay(i,i.return,a),Cs(i);break;case 27:ol(i.stateNode);case 26:case 5:ii(i,i.return),Cs(i);break;case 22:i.memoizedState===null&&Cs(i);break;case 30:Cs(i);break;default:Cs(i)}e=e.sibling}}function dr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:dr(h,d,a),Zo(4,d);break;case 1:if(dr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Zt(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Gg(x[h],E)}catch(z){Zt(l,l.return,z)}}a&&v&64&&sy(d),Wo(d,d.return);break;case 27:uy(d);case 26:case 5:dr(h,d,a),a&&l===null&&v&4&&oy(d),Wo(d,d.return);break;case 12:dr(h,d,a);break;case 13:dr(h,d,a),a&&v&4&&my(h,d);break;case 22:d.memoizedState===null&&dr(h,d,a),Wo(d,d.return);break;case 30:break;default:dr(h,d,a)}i=i.sibling}}function Gf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Lo(a))}function Qf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Lo(e))}function ri(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yy(e,i,a,l),i=i.sibling}function yy(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ri(e,i,a,l),h&2048&&Zo(9,i);break;case 1:ri(e,i,a,l);break;case 3:ri(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Lo(e)));break;case 12:if(h&2048){ri(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Zt(i,i.return,x)}}else ri(e,i,a,l);break;case 13:ri(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ri(e,i,a,l):Jo(e,i):d._visibility&2?ri(e,i,a,l):(d._visibility|=2,ba(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Gf(v,i);break;case 24:ri(e,i,a,l),h&2048&&Qf(i.alternate,i);break;default:ri(e,i,a,l)}}function ba(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,x=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:ba(d,v,E,x,h),Zo(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?ba(d,v,E,x,h):Jo(d,v):(Q._visibility|=2,ba(d,v,E,x,h)),h&&z&2048&&Gf(v.alternate,v);break;case 24:ba(d,v,E,x,h),h&&z&2048&&Qf(v.alternate,v);break;default:ba(d,v,E,x,h)}i=i.sibling}}function Jo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:Jo(a,l),h&2048&&Gf(l.alternate,l);break;case 24:Jo(a,l),h&2048&&Qf(l.alternate,l);break;default:Jo(a,l)}i=i.sibling}}var tl=8192;function Aa(e){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)_y(e),e=e.sibling}function _y(e){switch(e.tag){case 26:Aa(e),e.flags&tl&&e.memoizedState!==null&&Jb(Ln,e.memoizedState,e.memoizedProps);break;case 5:Aa(e);break;case 3:case 4:var i=Ln;Ln=fc(e.stateNode.containerInfo),Aa(e),Ln=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,Aa(e),tl=i):Aa(e));break;default:Aa(e)}}function vy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function el(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ve=l,Ty(l,e)}vy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ey(e),e=e.sibling}function Ey(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&hr(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,tc(e)):el(e);break;default:el(e)}}function tc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ve=l,Ty(l,e)}vy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:hr(8,i,i.return),tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,tc(i));break;default:tc(i)}e=e.sibling}}function Ty(e,i){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:hr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Lo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ve=l;else t:for(a=e;Ve!==null;){l=Ve;var h=l.sibling,d=l.return;if(fy(l),l===a){Ve=null;break t}if(h!==null){h.return=d,Ve=h;break t}Ve=d}}}var gb={getCacheForType:function(e){var i=Qe(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},pb=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,Dt=null,Lt=0,Qt=0,mn=null,mr=!1,Sa=!1,Kf=!1,ji=0,ue=0,gr=0,Ns=0,Yf=0,xn=0,wa=0,nl=null,sn=null,Xf=!1,$f=0,ec=1/0,nc=null,pr=null,ze=0,yr=null,Ra=null,Ia=0,Zf=0,Wf=null,by=null,il=0,Jf=null;function gn(){if((Gt&2)!==0&&Lt!==0)return Lt&-Lt;if(G.T!==null){var e=ma;return e!==0?e:ad()}return Wi()}function Ay(){xn===0&&(xn=(Lt&536870912)===0||Bt?ho():536870912);var e=Nn.current;return e!==null&&(e.flags|=32),xn}function pn(e,i,a){(e===te&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Ca(e,0),_r(e,Lt,xn,!1)),yi(e,a),((Gt&2)===0||e!==te)&&(e===te&&((Gt&2)===0&&(Ns|=a),ue===4&&_r(e,Lt,xn,!1)),si(e))}function Sy(e,i,a){if((Gt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||es(e,i),h=l?vb(e,i):nd(e,i,!0),d=l;do{if(h===0){Sa&&!l&&_r(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!yb(a)){h=nd(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=nl;var x=E.current.memoizedState.isDehydrated;if(x&&(Ca(E,v).flags|=256),v=nd(E,v,!1),v!==2){if(Kf&&!x){E.errorRecoveryDisabledLanes|=d,Ns|=d,h=4;break t}d=sn,sn=h,d!==null&&(sn===null?sn=d:sn.push.apply(sn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ca(e,0),_r(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:_r(l,i,xn,!mr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=$f+300-vn(),10<h)){if(_r(l,i,xn,!mr),Gs(l,0,!0)!==0)break t;l.timeoutHandle=Jy(wy.bind(null,l,a,sn,nc,Xf,i,xn,Ns,wa,mr,d,2,-0,0),h);break t}wy(l,a,sn,nc,Xf,i,xn,Ns,wa,mr,d,0,-0,0)}}break}while(!0);si(e)}function wy(e,i,a,l,h,d,v,E,x,z,Q,X,B,q){if(e.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:Wb},_y(i),X=tA(),X!==null)){e.cancelPendingCommit=X(Oy.bind(null,e,i,d,a,l,h,v,E,x,Q,1,B,q)),_r(e,d,v,!z);return}Oy(e,i,d,a,l,h,v,E,x)}function yb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _r(e,i,a,l){i&=~Yf,i&=~Ns,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Ge(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Fn(e,a,i)}function ic(){return(Gt&6)===0?(rl(0),!1):!0}function td(){if(Dt!==null){if(Qt===0)var e=Dt.return;else e=Dt,Di=As=null,yf(e),Ea=null,Yo=0,e=Dt;for(;e!==null;)ry(e.alternate,e),e=e.return;Dt=null}}function Ca(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Pb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),td(),te=e,Dt=a=Ci(e.current,null),Lt=i,Qt=0,mn=null,mr=!1,Sa=es(e,i),Kf=!1,wa=xn=Yf=Ns=gr=ue=0,sn=nl=null,Xf=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Ge(l),d=1<<h;i|=e[h],l&=~d}return ji=i,wu(),a}function Ry(e,i){It=null,G.H=Fu,i===jo||i===Mu?(i=Hg(),Qt=3):i===zg?(i=Hg(),Qt=4):Qt=i===Fp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,Dt===null&&(ue=1,Xu(e,wn(i,e.current)))}function Iy(){var e=G.H;return G.H=Fu,e===null?Fu:e}function Cy(){var e=G.A;return G.A=gb,e}function ed(){ue=4,mr||(Lt&4194048)!==Lt&&Nn.current!==null||(Sa=!0),(gr&134217727)===0&&(Ns&134217727)===0||te===null||_r(te,Lt,xn,!1)}function nd(e,i,a){var l=Gt;Gt|=2;var h=Iy(),d=Cy();(te!==e||Lt!==i)&&(nc=null,Ca(e,i)),i=!1;var v=ue;t:do try{if(Qt!==0&&Dt!==null){var E=Dt,x=mn;switch(Qt){case 8:td(),v=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var z=Qt;if(Qt=0,mn=null,Na(e,E,x,z),a&&Sa){v=0;break t}break;default:z=Qt,Qt=0,mn=null,Na(e,E,x,z)}}_b(),v=ue;break}catch(Q){Ry(e,Q)}while(!0);return i&&e.shellSuspendCounter++,Di=As=null,Gt=l,G.H=h,G.A=d,Dt===null&&(te=null,Lt=0,wu()),v}function _b(){for(;Dt!==null;)Ny(Dt)}function vb(e,i){var a=Gt;Gt|=2;var l=Iy(),h=Cy();te!==e||Lt!==i?(nc=null,ec=vn()+500,Ca(e,i)):Sa=es(e,i);t:do try{if(Qt!==0&&Dt!==null){i=Dt;var d=mn;e:switch(Qt){case 1:Qt=0,mn=null,Na(e,i,d,1);break;case 2:case 9:if(Bg(d)){Qt=0,mn=null,xy(i);break}i=function(){Qt!==2&&Qt!==9||te!==e||(Qt=7),si(e)},d.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Bg(d)?(Qt=0,mn=null,xy(i)):(Qt=0,mn=null,Na(e,i,d,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var E=Dt;if(!v||h_(v)){Qt=0,mn=null;var x=E.sibling;if(x!==null)Dt=x;else{var z=E.return;z!==null?(Dt=z,rc(z)):Dt=null}break e}}Qt=0,mn=null,Na(e,i,d,5);break;case 6:Qt=0,mn=null,Na(e,i,d,6);break;case 8:td(),ue=6;break t;default:throw Error(s(462))}}Eb();break}catch(Q){Ry(e,Q)}while(!0);return Di=As=null,G.H=l,G.A=h,Gt=a,Dt!==null?0:(te=null,Lt=0,wu(),ue)}function Eb(){for(;Dt!==null&&!oo();)Ny(Dt)}function Ny(e){var i=ny(e.alternate,e,ji);e.memoizedProps=e.pendingProps,i===null?rc(e):Dt=i}function xy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=$p(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=$p(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:yf(i);default:ry(a,i),i=Dt=Dg(i,ji),i=ny(a,i,ji)}e.memoizedProps=e.pendingProps,i===null?rc(e):Dt=i}function Na(e,i,a,l){Di=As=null,yf(i),Ea=null,Yo=0;var h=i.return;try{if(ub(e,h,i,a,Lt)){ue=1,Xu(e,wn(a,e.current)),Dt=null;return}}catch(d){if(h!==null)throw Dt=h,d;ue=1,Xu(e,wn(a,e.current)),Dt=null;return}i.flags&32768?(Bt||l===1?e=!0:Sa||(Lt&536870912)!==0?e=!1:(mr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Dy(i,e)):rc(i)}function rc(e){var i=e;do{if((i.flags&32768)!==0){Dy(i,mr);return}e=i.return;var a=hb(i.alternate,i,ji);if(a!==null){Dt=a;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=e}while(i!==null);ue===0&&(ue=5)}function Dy(e,i){do{var a=fb(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);ue=6,Dt=null}function Oy(e,i,a,l,h,d,v,E,x){e.cancelPendingCommit=null;do sc();while(ze!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Gh,mo(e,a,d,v,E,x),e===te&&(Dt=te=null,Lt=0),Ra=i,yr=e,Ia=a,Zf=d,Wf=h,by=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Sb(Zr,function(){return Ly(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=it.p,it.p=2,v=Gt,Gt|=4;try{db(e,i,a)}finally{Gt=v,it.p=h,G.T=l}}ze=1,Vy(),My(),Py()}}function Vy(){if(ze===1){ze=0;var e=yr,i=Ra,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=it.p;it.p=2;var h=Gt;Gt|=4;try{gy(i,e);var d=md,v=Tg(e.containerInfo),E=d.focusedElem,x=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Eg(E.ownerDocument.documentElement,E)){if(x!==null&&zh(E)){var z=x.start,Q=x.end;if(Q===void 0&&(Q=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var q=B.getSelection(),bt=E.textContent.length,yt=Math.min(x.start,bt),$t=x.end===void 0?yt:Math.min(x.end,bt);!q.extend&&yt>$t&&(v=$t,$t=yt,yt=v);var k=vg(E,yt),M=vg(E,$t);if(k&&M&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==M.node||q.focusOffset!==M.offset)){var U=X.createRange();U.setStart(k.node,k.offset),q.removeAllRanges(),yt>$t?(q.addRange(U),q.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),q.addRange(U))}}}}for(X=[],q=E;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var K=X[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}yc=!!dd,md=dd=null}finally{Gt=h,it.p=l,G.T=a}}e.current=i,ze=2}}function My(){if(ze===2){ze=0;var e=yr,i=Ra,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=it.p;it.p=2;var h=Gt;Gt|=4;try{hy(e,i.alternate,i)}finally{Gt=h,it.p=l,G.T=a}}ze=3}}function Py(){if(ze===4||ze===3){ze=0,tu();var e=yr,i=Ra,a=Ia,l=by;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,Ra=yr=null,ky(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(pr=null),Qs(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=it.p,it.p=2,G.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{G.T=i,it.p=h}}(Ia&3)!==0&&sc(),si(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Jf?il++:(il=0,Jf=e):il=0,rl(0)}}function ky(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Lo(i)))}function sc(e){return Vy(),My(),Py(),Ly()}function Ly(){if(ze!==5)return!1;var e=yr,i=Zf;Zf=0;var a=Qs(Ia),l=G.T,h=it.p;try{it.p=32>a?32:a,G.T=null,a=Wf,Wf=null;var d=yr,v=Ia;if(ze=0,Ra=yr=null,Ia=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Ey(d.current),yy(d,d.current,v,a),Gt=E,rl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(oe,d)}catch{}return!0}finally{it.p=h,G.T=l,ky(e,i)}}function Uy(e,i,a){i=wn(a,i),i=Df(e.stateNode,i,2),e=or(e,i,2),e!==null&&(yi(e,2),si(e))}function Zt(e,i,a){if(e.tag===3)Uy(e,e,a);else for(;i!==null;){if(i.tag===3){Uy(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pr===null||!pr.has(l))){e=wn(a,e),a=qp(2),l=or(i,a,2),l!==null&&(Hp(a,l,i,e),yi(l,2),si(l));break}}i=i.return}}function id(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new pb;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Kf=!0,h.add(a),e=Tb.bind(null,e,i,a),i.then(e,e))}function Tb(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(Lt&a)===a&&(ue===4||ue===3&&(Lt&62914560)===Lt&&300>vn()-$f?(Gt&2)===0&&Ca(e,0):Yf|=a,wa===Lt&&(wa=0)),si(e)}function jy(e,i){i===0&&(i=fo()),e=ca(e,i),e!==null&&(yi(e,i),si(e))}function bb(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),jy(e,a)}function Ab(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),jy(e,a)}function Sb(e,i){return Xr(e,i)}var ac=null,xa=null,rd=!1,oc=!1,sd=!1,xs=0;function si(e){e!==xa&&e.next===null&&(xa===null?ac=xa=e:xa=xa.next=e),oc=!0,rd||(rd=!0,Rb())}function rl(e,i){if(!sd&&oc){sd=!0;do for(var a=!1,l=ac;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Ge(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Hy(l,d))}else d=Lt,d=Gs(l,l===te?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||es(l,d)||(a=!0,Hy(l,d));l=l.next}while(a);sd=!1}}function wb(){zy()}function zy(){oc=rd=!1;var e=0;xs!==0&&(Mb()&&(e=xs),xs=0);for(var i=vn(),a=null,l=ac;l!==null;){var h=l.next,d=By(l,i);d===0?(l.next=null,a===null?ac=h:a.next=h,h===null&&(xa=a)):(a=l,(e!==0||(d&3)!==0)&&(oc=!0)),l=h}rl(e)}function By(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Ge(d),E=1<<v,x=h[v];x===-1?((E&a)===0||(E&l)!==0)&&(h[v]=co(E,i)):x<=i&&(e.expiredLanes|=E),d&=~E}if(i=te,a=Lt,a=Gs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&$r(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||es(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&$r(l),Qs(a)){case 2:case 8:a=Hs;break;case 32:a=Zr;break;case 268435456:a=Fs;break;default:a=Zr}return l=qy.bind(null,e),a=Xr(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&$r(l),e.callbackPriority=2,e.callbackNode=null,2}function qy(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(sc()&&e.callbackNode!==a)return null;var l=Lt;return l=Gs(e,e===te?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Sy(e,l,i),By(e,vn()),e.callbackNode!=null&&e.callbackNode===a?qy.bind(null,e):null)}function Hy(e,i){if(sc())return null;Sy(e,i,!0)}function Rb(){kb(function(){(Gt&6)!==0?Xr(lo,wb):zy()})}function ad(){return xs===0&&(xs=ho()),xs}function Fy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ws(""+e)}function Gy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Ib(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Fy((h[me]||null).action),v=l.submitter;v&&(i=(i=v[me]||null)?Fy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new Js("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xs!==0){var x=v?Gy(h,v):new FormData(h);Rf(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(E.preventDefault(),x=v?Gy(h,v):new FormData(h),Rf(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var od=0;od<Fh.length;od++){var ld=Fh[od],Cb=ld.toLowerCase(),Nb=ld[0].toUpperCase()+ld.slice(1);kn(Cb,"on"+Nb)}kn(Sg,"onAnimationEnd"),kn(wg,"onAnimationIteration"),kn(Rg,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(QT,"onTransitionRun"),kn(KT,"onTransitionStart"),kn(YT,"onTransitionCancel"),kn(Ig,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Qy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],x=E.instance,z=E.currentTarget;if(E=E.listener,x!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=z;try{d(h)}catch(Q){Yu(Q)}h.currentTarget=null,d=x}else for(v=0;v<l.length;v++){if(E=l[v],x=E.instance,z=E.currentTarget,E=E.listener,x!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=z;try{d(h)}catch(Q){Yu(Q)}h.currentTarget=null,d=x}}}}function Ot(e,i){var a=i[po];a===void 0&&(a=i[po]=new Set);var l=e+"__bubble";a.has(l)||(Ky(i,e,2,!1),a.add(l))}function ud(e,i,a){var l=0;i&&(l|=4),Ky(a,e,l,i)}var lc="_reactListening"+Math.random().toString(36).slice(2);function cd(e){if(!e[lc]){e[lc]=!0,yo.forEach(function(a){a!=="selectionchange"&&(xb.has(a)||ud(a,!1,e),ud(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[lc]||(i[lc]=!0,ud("selectionchange",!1,i))}}function Ky(e,i,a,l){switch(y_(i)){case 2:var h=iA;break;case 8:h=rA;break;default:h=Sd}a=h.bind(null,i,a,e),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function hd(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=l.return;v!==null;){var x=v.tag;if((x===3||x===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=_i(E),v===null)return;if(x=v.tag,x===5||x===6||x===26||x===27){l=d=v;continue t}E=E.parentNode}}l=l.return}cu(function(){var z=d,Q=bn(a),X=[];t:{var B=Cg.get(e);if(B!==void 0){var q=Js,bt=e;switch(e){case"keypress":if($n(a)===0)break t;case"keydown":case"keyup":q=sa;break;case"focusin":bt="focus",q=na;break;case"focusout":bt="blur",q=na;break;case"beforeblur":case"afterblur":q=na;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=_u;break;case Sg:case wg:case Rg:q=ia;break;case Ig:q=Eu;break;case"scroll":case"scrollend":q=hu;break;case"wheel":q=aa;break;case"copy":case"cut":case"paste":q=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=No;break;case"toggle":case"beforetoggle":q=bu}var yt=(i&4)!==0,$t=!yt&&(e==="scroll"||e==="scrollend"),k=yt?B!==null?B+"Capture":null:B;yt=[];for(var M=z,U;M!==null;){var K=M;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||k===null||(K=us(M,k),K!=null&&yt.push(al(M,K,U))),$t)break;M=M.return}0<yt.length&&(B=new q(B,bt,null,a,Q),X.push({event:B,listeners:yt}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",B&&a!==bi&&(bt=a.relatedTarget||a.fromElement)&&(_i(bt)||bt[En]))break t;if((q||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,q?(bt=a.relatedTarget||a.toElement,q=z,bt=bt?_i(bt):null,bt!==null&&($t=u(bt),yt=bt.tag,bt!==$t||yt!==5&&yt!==27&&yt!==6)&&(bt=null)):(q=null,bt=z),q!==bt)){if(yt=Sn,K="onMouseLeave",k="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(yt=No,K="onPointerLeave",k="onPointerEnter",M="pointer"),$t=q==null?B:Qn(q),U=bt==null?B:Qn(bt),B=new yt(K,M+"leave",q,a,Q),B.target=$t,B.relatedTarget=U,K=null,_i(Q)===z&&(yt=new yt(k,M+"enter",bt,a,Q),yt.target=U,yt.relatedTarget=$t,K=yt),$t=K,q&&bt)e:{for(yt=q,k=bt,M=0,U=yt;U;U=Da(U))M++;for(U=0,K=k;K;K=Da(K))U++;for(;0<M-U;)yt=Da(yt),M--;for(;0<U-M;)k=Da(k),U--;for(;M--;){if(yt===k||k!==null&&yt===k.alternate)break e;yt=Da(yt),k=Da(k)}yt=null}else yt=null;q!==null&&Yy(X,B,q,yt,!1),bt!==null&&$t!==null&&Yy(X,$t,bt,yt,!0)}}t:{if(B=z?Qn(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ut=dg;else if(we(B))if(mg)ut=HT;else{ut=BT;var xt=zT}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&bo(z.elementType)&&(ut=dg):ut=qT;if(ut&&(ut=ut(e,z))){Ii(X,ut,a,Q);break t}xt&&xt(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&nr(B,"number",B.value)}switch(xt=z?Qn(z):window,e){case"focusin":(we(xt)||xt.contentEditable==="true")&&(oa=xt,Bh=z,Oo=null);break;case"focusout":Oo=Bh=oa=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,bg(X,a,Q);break;case"selectionchange":if(GT)break;case"keydown":case"keyup":bg(X,a,Q)}var ft;if(Jn)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Pt?H(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(_&&a.locale!=="ko"&&(Pt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Pt&&(ft=So()):(Xn=Q,ir="value"in Xn?Xn.value:Xn.textContent,Pt=!0)),xt=uc(z,_t),0<xt.length&&(_t=new Io(_t,e,null,a,Q),X.push({event:_t,listeners:xt}),ft?_t.data=ft:(ft=et(a),ft!==null&&(_t.data=ft)))),(ft=m?Se(e,a):kt(e,a))&&(_t=uc(z,"onBeforeInput"),0<_t.length&&(xt=new Io("onBeforeInput","beforeinput",null,a,Q),X.push({event:xt,listeners:_t}),xt.data=ft)),Ib(X,e,z,a,Q)}Qy(X,i)})}function al(e,i,a){return{instance:e,listener:i,currentTarget:a}}function uc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=us(e,a),h!=null&&l.unshift(al(e,h,d)),h=us(e,i),h!=null&&l.push(al(e,h,d))),e.tag===3)return l;e=e.return}return[]}function Da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yy(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,x=E.alternate,z=E.stateNode;if(E=E.tag,x!==null&&x===l)break;E!==5&&E!==26&&E!==27||z===null||(x=z,h?(z=us(a,d),z!=null&&v.unshift(al(a,z,x))):h||(z=us(a,d),z!=null&&v.push(al(a,z,x)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var Db=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(Db,`
`).replace(Ob,"")}function $y(e,i){return i=Xy(i),Xy(e)===i}function cc(){}function Xt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Tn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Tn(e,""+l);break;case"className":Kn(e,"class",l);break;case"tabIndex":Kn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Kn(e,a,l);break;case"style":To(e,l,d);break;case"data":if(i!=="object"){Kn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ws(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ws(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=cc);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ws(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),er(e,"popover",l);break;case"xlinkActuate":Le(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Le(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Le(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Le(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Le(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Le(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Le(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Le(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Le(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":er(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Mh.get(a)||a,er(e,a,l))}}function fd(e,i,a,l,h,d){switch(a){case"style":To(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Tn(e,l):(typeof l=="number"||typeof l=="bigint")&&Tn(e,""+l);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"onClick":l!=null&&(e.onclick=cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[me]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):er(e,a,l)}}}function Be(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,d,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),l&&Xt(e,i,"src",a.src,a,null);return;case"input":Ot("invalid",e);var E=d=v=h=null,x=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":v=Q;break;case"checked":x=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Xt(e,i,l,Q,a,null)}}as(e,d,E,x,z,v,h,!1),Zs(e);return;case"select":Ot("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Xt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!l,i!=null?Ti(e,!!l,i,!1):a!=null&&Ti(e,!!l,a,!0);return;case"textarea":Ot("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}os(e,l,h,d),Zs(e);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xt(e,i,x,l,a,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(l=0;l<sl.length;l++)Ot(sl[l],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,z,l,a,null)}return;default:if(bo(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&fd(e,i,Q,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xt(e,i,E,l,a,null))}function Vb(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,x=null,z=null,Q=null;for(q in a){var X=a[q];if(a.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":x=X;default:l.hasOwnProperty(q)||Xt(e,i,q,null,l,X)}}for(var B in l){var q=l[B];if(X=a[B],l.hasOwnProperty(B)&&(q!=null||X!=null))switch(B){case"type":d=q;break;case"name":h=q;break;case"checked":z=q;break;case"defaultChecked":Q=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==X&&Xt(e,i,B,q,l,X)}}un(e,v,E,x,z,Q,d,h);return;case"select":q=v=E=B=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":q=x;default:l.hasOwnProperty(d)||Xt(e,i,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":B=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==x&&Xt(e,i,h,d,l,x)}i=E,a=v,l=q,B!=null?Ti(e,!!a,B,!1):!!l!=!!a&&(i!=null?Ti(e,!!a,i,!0):Ti(e,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xt(e,i,v,h,l,d)}Kt(e,B,q);return;case"option":for(var bt in a)if(B=a[bt],a.hasOwnProperty(bt)&&B!=null&&!l.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:Xt(e,i,bt,null,l,B)}for(x in l)if(B=l[x],q=a[x],l.hasOwnProperty(x)&&B!==q&&(B!=null||q!=null))switch(x){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Xt(e,i,x,B,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)B=a[yt],a.hasOwnProperty(yt)&&B!=null&&!l.hasOwnProperty(yt)&&Xt(e,i,yt,null,l,B);for(z in l)if(B=l[z],q=a[z],l.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:Xt(e,i,z,B,l,q)}return;default:if(bo(i)){for(var $t in a)B=a[$t],a.hasOwnProperty($t)&&B!==void 0&&!l.hasOwnProperty($t)&&fd(e,i,$t,void 0,l,B);for(Q in l)B=l[Q],q=a[Q],!l.hasOwnProperty(Q)||B===q||B===void 0&&q===void 0||fd(e,i,Q,B,l,q);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&Xt(e,i,k,null,l,B);for(X in l)B=l[X],q=a[X],!l.hasOwnProperty(X)||B===q||B==null&&q==null||Xt(e,i,X,B,l,q)}var dd=null,md=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function Zy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function gd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var pd=null;function Mb(){var e=window.event;return e&&e.type==="popstate"?e===pd?!1:(pd=e,!0):(pd=null,!1)}var Jy=typeof setTimeout=="function"?setTimeout:void 0,Pb=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,kb=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(e){return t_.resolve(null).then(e).catch(Lb)}:Jy;function Lb(e){setTimeout(function(){throw e})}function vr(e){return e==="head"}function e_(e,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&ol(v.documentElement),a&2&&ol(v.body),a&4)for(a=v.head,ol(a),v=a.firstChild;v;){var E=v.nextSibling,x=v.nodeName;v[ns]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),gl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);gl(i)}function yd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yd(a),tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ub(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ns])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function jb(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Un(e.nextSibling),e===null))return null;return e}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function zb(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Un(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var vd=null;function n_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function i_(e,i,a){switch(i=hc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ol(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);tr(e)}var Dn=new Map,r_=new Set;function fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zi=it.d;it.d={f:Bb,r:qb,D:Hb,C:Fb,L:Gb,m:Qb,X:Yb,S:Kb,M:Xb};function Bb(){var e=zi.f(),i=ic();return e||i}function qb(e){var i=Gn(e);i!==null&&i.tag===5&&i.type==="form"?Sp(i):zi.r(e)}var Oa=typeof document>"u"?null:document;function s_(e,i,a){var l=Oa;if(l&&typeof i=="string"&&i){var h=ge(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),r_.has(h)||(r_.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Be(i,"link",e),ce(i),l.head.appendChild(i)))}}function Hb(e){zi.D(e),s_("dns-prefetch",e,null)}function Fb(e,i){zi.C(e,i),s_("preconnect",e,i)}function Gb(e,i,a){zi.L(e,i,a);var l=Oa;if(l&&e&&i){var h='link[rel="preload"][as="'+ge(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ge(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ge(a.imageSizes)+'"]')):h+='[href="'+ge(e)+'"]';var d=h;switch(i){case"style":d=Va(e);break;case"script":d=Ma(e)}Dn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Dn.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(ll(d))||i==="script"&&l.querySelector(ul(d))||(i=l.createElement("link"),Be(i,"link",e),ce(i),l.head.appendChild(i)))}}function Qb(e,i){zi.m(e,i);var a=Oa;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ge(l)+'"][href="'+ge(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ma(e)}if(!Dn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Dn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(d)))return}l=a.createElement("link"),Be(l,"link",e),ce(l),a.head.appendChild(l)}}}function Kb(e,i,a){zi.S(e,i,a);var l=Oa;if(l&&e){var h=We(l).hoistableStyles,d=Va(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(ll(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Dn.get(d))&&Ed(e,a);var x=v=l.createElement("link");ce(x),Be(x,"link",e),x._p=new Promise(function(z,Q){x.onload=z,x.onerror=Q}),x.addEventListener("load",function(){E.loading|=1}),x.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function Yb(e,i){zi.X(e,i);var a=Oa;if(a&&e){var l=We(a).hoistableScripts,h=Ma(e),d=l.get(h);d||(d=a.querySelector(ul(h)),d||(e=T({src:e,async:!0},i),(i=Dn.get(h))&&Td(e,i),d=a.createElement("script"),ce(d),Be(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Xb(e,i){zi.M(e,i);var a=Oa;if(a&&e){var l=We(a).hoistableScripts,h=Ma(e),d=l.get(h);d||(d=a.querySelector(ul(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Dn.get(h))&&Td(e,i),d=a.createElement("script"),ce(d),Be(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function a_(e,i,a,l){var h=(h=At.current)?fc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Va(a.href),a=We(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Va(a.href);var d=We(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(ll(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Dn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(e,a),d||$b(h,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ma(a),a=We(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Va(e){return'href="'+ge(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function o_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function $b(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Be(i,"link",a),ce(i),e.head.appendChild(i))}function Ma(e){return'[src="'+ge(e)+'"]'}function ul(e){return"script[async]"+e}function l_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+ge(a.href)+'"]');if(l)return i.instance=l,ce(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ce(l),Be(l,"style",h),dc(l,a.precedence,e),i.instance=l;case"stylesheet":h=Va(a.href);var d=e.querySelector(ll(h));if(d)return i.state.loading|=4,i.instance=d,ce(d),d;l=o_(a),(h=Dn.get(h))&&Ed(l,h),d=(e.ownerDocument||e).createElement("link"),ce(d);var v=d;return v._p=new Promise(function(E,x){v.onload=E,v.onerror=x}),Be(d,"link",l),i.state.loading|=4,dc(d,a.precedence,e),i.instance=d;case"script":return d=Ma(a.src),(h=e.querySelector(ul(d)))?(i.instance=h,ce(h),h):(l=a,(h=Dn.get(d))&&(l=T({},a),Td(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Be(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,dc(l,a.precedence,e));return i.instance}function dc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Ed(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var mc=null;function u_(e,i,a){if(mc===null){var l=new Map,h=mc=new Map;h.set(a,l)}else h=mc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ns]||d[Ae]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function c_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function Zb(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function h_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var cl=null;function Wb(){}function Jb(e,i,a){if(cl===null)throw Error(s(475));var l=cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Va(a.href),d=e.querySelector(ll(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=gc.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,ce(d);return}d=e.ownerDocument||e,a=o_(a),(h=Dn.get(h))&&Ed(a,h),d=d.createElement("link"),ce(d);var v=d;v._p=new Promise(function(E,x){v.onload=E,v.onerror=x}),Be(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=gc.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function tA(){if(cl===null)throw Error(s(475));var e=cl;return e.stylesheets&&e.count===0&&bd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&bd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function gc(){if(this.count--,this.count===0){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pc=null;function bd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pc=new Map,i.forEach(eA,e),pc=null,gc.call(e))}function eA(e,i){if(!(i.state.loading&4)){var a=pc.get(e);if(a)var l=a.get(null);else{a=new Map,pc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=gc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var hl={$$typeof:ot,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function nA(e,i,a,l,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function f_(e,i,a,l,h,d,v,E,x,z,Q,X){return e=new nA(e,i,a,v,E,x,z,X),i=1,d===!0&&(i|=24),d=hn(3,null,null,i),e.current=d,d.stateNode=e,i=nf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},of(d),e}function d_(e){return e?(e=ha,e):ha}function m_(e,i,a,l,h,d){h=d_(h),l.context===null?l.context=h:l.pendingContext=h,l=ar(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=or(e,l,i),a!==null&&(pn(a,e,i),Bo(a,e,i))}function g_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Ad(e,i){g_(e,i),(e=e.alternate)&&g_(e,i)}function p_(e){if(e.tag===13){var i=ca(e,67108864);i!==null&&pn(i,e,67108864),Ad(e,67108864)}}var yc=!0;function iA(e,i,a,l){var h=G.T;G.T=null;var d=it.p;try{it.p=2,Sd(e,i,a,l)}finally{it.p=d,G.T=h}}function rA(e,i,a,l){var h=G.T;G.T=null;var d=it.p;try{it.p=8,Sd(e,i,a,l)}finally{it.p=d,G.T=h}}function Sd(e,i,a,l){if(yc){var h=wd(l);if(h===null)hd(e,i,l,_c,a),__(e,l);else if(aA(h,e,i,a,l))l.stopPropagation();else if(__(e,l),i&4&&-1<sA.indexOf(e)){for(;h!==null;){var d=Gn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Vn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var x=1<<31-Ge(v);E.entanglements[1]|=x,v&=~x}si(d),(Gt&6)===0&&(ec=vn()+500,rl(0))}}break;case 13:E=ca(d,2),E!==null&&pn(E,d,2),ic(),Ad(d,2)}if(d=wd(l),d===null&&hd(e,i,l,_c,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else hd(e,i,l,null,a)}}function wd(e){return e=bn(e),Rd(e)}var _c=null;function Rd(e){if(_c=null,e=_i(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return _c=e,null}function y_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ch()){case lo:return 2;case Hs:return 8;case Zr:case Nh:return 32;case Fs:return 268435456;default:return 32}default:return 32}}var Id=!1,Er=null,Tr=null,br=null,fl=new Map,dl=new Map,Ar=[],sA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function __(e,i){switch(e){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function ml(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Gn(i),i!==null&&p_(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function aA(e,i,a,l,h){switch(i){case"focusin":return Er=ml(Er,e,i,a,l,h),!0;case"dragenter":return Tr=ml(Tr,e,i,a,l,h),!0;case"mouseover":return br=ml(br,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return fl.set(d,ml(fl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,dl.set(d,ml(dl.get(d)||null,e,i,a,l,h)),!0}return!1}function v_(e){var i=_i(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,iu(e.priority,function(){if(a.tag===13){var l=gn();l=Zi(l);var h=ca(a,l);h!==null&&pn(h,a,l),Ad(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=wd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);bi=l,a.target.dispatchEvent(l),bi=null}else return i=Gn(a),i!==null&&p_(i),e.blockedOn=a,!1;i.shift()}return!0}function E_(e,i,a){vc(e)&&a.delete(i)}function oA(){Id=!1,Er!==null&&vc(Er)&&(Er=null),Tr!==null&&vc(Tr)&&(Tr=null),br!==null&&vc(br)&&(br=null),fl.forEach(E_),dl.forEach(E_)}function Ec(e,i){e.blockedOn===i&&(e.blockedOn=null,Id||(Id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,oA)))}var Tc=null;function T_(e){Tc!==e&&(Tc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Tc===e&&(Tc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Rd(l||a)===null)continue;break}var d=Gn(a);d!==null&&(e.splice(i,3),i-=3,Rf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function gl(e){function i(x){return Ec(x,e)}Er!==null&&Ec(Er,e),Tr!==null&&Ec(Tr,e),br!==null&&Ec(br,e),fl.forEach(i),dl.forEach(i);for(var a=0;a<Ar.length;a++){var l=Ar[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ar.length&&(a=Ar[0],a.blockedOn===null);)v_(a),a.blockedOn===null&&Ar.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[me]||null;if(typeof d=="function")v||T_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[me]||null)E=v.formAction;else if(Rd(h)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),T_(a)}}}function Cd(e){this._internalRoot=e}bc.prototype.render=Cd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=gn();m_(a,l,e,i,null,null)},bc.prototype.unmount=Cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;m_(e.current,2,null,e,null,null),ic(),i[En]=null}};function bc(e){this._internalRoot=e}bc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Wi();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ar.length&&i!==0&&i<Ar[a].priority;a++);Ar.splice(a,0,e),a===0&&v_(e)}};var b_=t.version;if(b_!=="19.1.0")throw Error(s(527,b_,"19.1.0"));it.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var lA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{oe=Ac.inject(lA),Ft=Ac}catch{}}return yl.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=Up,d=jp,v=zp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=f_(e,1,!1,null,null,a,l,h,d,v,E,null),e[En]=i.current,cd(e),new Cd(i)},yl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=Up,v=jp,E=zp,x=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=f_(e,1,!0,i,a??null,l,h,d,v,E,x,z),i.context=d_(null),a=i.current,l=gn(),l=Zi(l),h=ar(l),h.callback=null,or(a,h,l),a=l,i.current.lanes=a,yi(i,a),si(i),e[En]=i.current,cd(e),new bc(i)},yl.version="19.1.0",yl}var O_;function _A(){if(O_)return Dd.exports;O_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Dd.exports=yA(),Dd.exports}var vA=_A();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=()=>{};var V_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},TA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],g=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},f0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,g=f?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,T=u>>2,R=(u&3)<<4|g>>4;let D=(g&15)<<2|y>>6,j=y&63;p||(j=64,f||(D=64)),s.push(n[T],n[R],n[D],n[j])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(h0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):TA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const R=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||g==null||y==null||R==null)throw new bA;const D=u<<2|g>>4;if(s.push(D),y!==64){const j=g<<4&240|y>>2;if(s.push(j),R!==64){const F=y<<6&192|R;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class bA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(r){const t=h0(r);return f0.encodeByteArray(t,!0)},Bc=function(r){return AA(r).replace(/\./g,"")},d0=function(r){try{return f0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=()=>SA().__FIREBASE_DEFAULTS__,RA=()=>{if(typeof process>"u"||typeof V_>"u")return;const r=V_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},IA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&d0(r[1]);return t&&JSON.parse(t)},oh=()=>{try{return EA()||wA()||RA()||IA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},m0=r=>{var t,n;return(n=(t=oh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[r]},CA=r=>{const t=m0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},g0=()=>{var r;return(r=oh())===null||r===void 0?void 0:r.config},p0=r=>{var t;return(t=oh())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Bc(JSON.stringify(n)),Bc(JSON.stringify(f)),""].join(".")}const Sl={};function DA(){const r={prod:[],emulator:[]};for(const t of Object.keys(Sl))Sl[t]?r.emulator.push(t):r.prod.push(t);return r}function OA(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let M_=!1;function _0(r,t){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||Sl[r]===t||Sl[r]||M_)return;Sl[r]=t;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",u=DA().prod.length>0;function f(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function p(D,j){D.setAttribute("width","24"),D.setAttribute("id",j),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function y(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{M_=!0,f()},D}function T(D,j){D.setAttribute("id",j),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function R(){const D=OA(s),j=n("text"),F=document.getElementById(j)||document.createElement("span"),J=n("learnmore"),Z=document.getElementById(J)||document.createElement("a"),gt=n("preprendIcon"),ct=document.getElementById(gt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ot=D.element;g(ot),T(Z,J);const nt=y();p(ct,gt),ot.append(ct,F,Z,nt),document.body.appendChild(ot)}u?(F.innerText="Preview backend disconnected.",ct.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ct.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function MA(){var r;const t=(r=oh())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function jA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zA(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class Xi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=qA,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?HA(u,s):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Xi(o,g,s)}}function HA(r,t){return r.replace(FA,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const FA=/\{\$([^}]+)}/g;function GA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ms(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(P_(u)&&P_(f)){if(!Ms(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function P_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function _l(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function vl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function QA(r,t){const n=new KA(r,t);return n.subscribe.bind(n)}class KA{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YA(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=Pd),o.error===void 0&&(o.error=Pd),o.complete===void 0&&(o.complete=Pd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r){return r&&r._delegate?r._delegate:r}class Ps{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new NA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t?.identifier),o=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ZA(t))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Ds){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ds){return this.instances.has(t)}getOptions(t=Ds){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(o)}return o}onInit(t,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$A(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ds){return this.component?this.component.multipleInstances?t:Ds:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $A(r){return r===Ds?void 0:r}function ZA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new XA(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Vt||(Vt={}));const JA={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},tS=Vt.INFO,eS={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},nS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=eS[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class vm{constructor(t){this.name=t,this._logLevel=tS,this._logHandler=nS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const iS=(r,t)=>t.some(n=>r instanceof n);let k_,L_;function rS(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sS(){return L_||(L_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v0=new WeakMap,Qd=new WeakMap,E0=new WeakMap,kd=new WeakMap,Em=new WeakMap;function aS(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Dr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&v0.set(n,r)}).catch(()=>{}),Em.set(t,r),t}function oS(r){if(Qd.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Qd.set(r,t)}let Kd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Qd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||E0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function lS(r){Kd=r(Kd)}function uS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Ld(this),t,...n);return E0.set(s,t.sort?t.sort():[t]),Dr(s)}:sS().includes(r)?function(...t){return r.apply(Ld(this),t),Dr(v0.get(this))}:function(...t){return Dr(r.apply(Ld(this),t))}}function cS(r){return typeof r=="function"?uS(r):(r instanceof IDBTransaction&&oS(r),iS(r,rS())?new Proxy(r,Kd):r)}function Dr(r){if(r instanceof IDBRequest)return aS(r);if(kd.has(r))return kd.get(r);const t=cS(r);return t!==r&&(kd.set(r,t),Em.set(t,r)),t}const Ld=r=>Em.get(r);function hS(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),g=Dr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Dr(f.result),p.oldVersion,p.newVersion,Dr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const fS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],Ud=new Map;function U_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Ud.get(t))return Ud.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=dS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||fS.includes(n)))return;const u=async function(f,...g){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Ud.set(t,u),u}lS(r=>({...r,get:(t,n,s)=>U_(t,n)||r.get(t,n,s),has:(t,n)=>!!U_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function gS(r){const t=r.getComponent();return t?.type==="VERSION"}const Yd="@firebase/app",j_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new vm("@firebase/app"),pS="@firebase/app-compat",yS="@firebase/analytics-compat",_S="@firebase/analytics",vS="@firebase/app-check-compat",ES="@firebase/app-check",TS="@firebase/auth",bS="@firebase/auth-compat",AS="@firebase/database",SS="@firebase/data-connect",wS="@firebase/database-compat",RS="@firebase/functions",IS="@firebase/functions-compat",CS="@firebase/installations",NS="@firebase/installations-compat",xS="@firebase/messaging",DS="@firebase/messaging-compat",OS="@firebase/performance",VS="@firebase/performance-compat",MS="@firebase/remote-config",PS="@firebase/remote-config-compat",kS="@firebase/storage",LS="@firebase/storage-compat",US="@firebase/firestore",jS="@firebase/ai",zS="@firebase/firestore-compat",BS="firebase",qS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",HS={[Yd]:"fire-core",[pS]:"fire-core-compat",[_S]:"fire-analytics",[yS]:"fire-analytics-compat",[ES]:"fire-app-check",[vS]:"fire-app-check-compat",[TS]:"fire-auth",[bS]:"fire-auth-compat",[AS]:"fire-rtdb",[SS]:"fire-data-connect",[wS]:"fire-rtdb-compat",[RS]:"fire-fn",[IS]:"fire-fn-compat",[CS]:"fire-iid",[NS]:"fire-iid-compat",[xS]:"fire-fcm",[DS]:"fire-fcm-compat",[OS]:"fire-perf",[VS]:"fire-perf-compat",[MS]:"fire-rc",[PS]:"fire-rc-compat",[kS]:"fire-gcs",[LS]:"fire-gcs-compat",[US]:"fire-fst",[zS]:"fire-fst-compat",[jS]:"fire-vertex","fire-js":"fire-js",[BS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,FS=new Map,$d=new Map;function z_(r,t){try{r.container.addComponent(t)}catch(n){Fi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ga(r){const t=r.name;if($d.has(t))return Fi.debug(`There were multiple attempts to register component ${t}.`),!1;$d.set(t,r);for(const n of qc.values())z_(n,r);for(const n of FS.values())z_(n,r);return!0}function Tm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new zl("app","Firebase",GS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=qS;function T0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Xd,automaticDataCollectionEnabled:!0},t),o=s.name;if(typeof o!="string"||!o)throw Or.create("bad-app-name",{appName:String(o)});if(n||(n=g0()),!n)throw Or.create("no-options");const u=qc.get(o);if(u){if(Ms(n,u.options)&&Ms(s,u.config))return u;throw Or.create("duplicate-app",{appName:o})}const f=new WA(o);for(const p of $d.values())f.addComponent(p);const g=new QS(n,s,f);return qc.set(o,g),g}function b0(r=Xd){const t=qc.get(r);if(!t&&r===Xd&&g0())return T0();if(!t)throw Or.create("no-app",{appName:r});return t}function Vr(r,t,n){var s;let o=(s=HS[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const g=[`Unable to register library "${o}" with version "${t}":`];u&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fi.warn(g.join(" "));return}Ga(new Ps(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="firebase-heartbeat-database",YS=1,xl="firebase-heartbeat-store";let jd=null;function A0(){return jd||(jd=hS(KS,YS,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Or.create("idb-open",{originalErrorMessage:r.message})})),jd}async function XS(r){try{const n=(await A0()).transaction(xl),s=await n.objectStore(xl).get(S0(r));return await n.done,s}catch(t){if(t instanceof Xi)Fi.warn(t.message);else{const n=Or.create("idb-get",{originalErrorMessage:t?.message});Fi.warn(n.message)}}}async function B_(r,t){try{const s=(await A0()).transaction(xl,"readwrite");await s.objectStore(xl).put(t,S0(r)),await s.done}catch(n){if(n instanceof Xi)Fi.warn(n.message);else{const s=Or.create("idb-set",{originalErrorMessage:n?.message});Fi.warn(s.message)}}}function S0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1024,ZS=30;class WS{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=q_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>ZS){const f=e1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=q_(),{heartbeatsToSend:s,unsentEntries:o}=JS(this._heartbeatsCache.heartbeats),u=Bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Fi.warn(n),""}}}function q_(){return new Date().toISOString().substring(0,10)}function JS(r,t=$S){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),H_(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),H_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class t1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zA()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return B_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return B_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function H_(r){return Bc(JSON.stringify({version:2,heartbeats:r})).length}function e1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(r){Ga(new Ps("platform-logger",t=>new mS(t),"PRIVATE")),Ga(new Ps("heartbeat",t=>new WS(t),"PRIVATE")),Vr(Yd,j_,r),Vr(Yd,j_,"esm2017"),Vr("fire-js","")}n1("");function bm(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function w0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i1=w0,R0=new zl("auth","Firebase",w0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new vm("@firebase/auth");function r1(r,...t){Hc.logLevel<=Vt.WARN&&Hc.warn(`Auth (${to}): ${r}`,...t)}function Dc(r,...t){Hc.logLevel<=Vt.ERROR&&Hc.error(`Auth (${to}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,...t){throw Am(r,...t)}function oi(r,...t){return Am(r,...t)}function I0(r,t,n){const s=Object.assign(Object.assign({},i1()),{[t]:n});return new zl("auth","Firebase",s).create(t,{appName:r.name})}function Mr(r){return I0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Am(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return R0.create(r,...t)}function Et(r,t,...n){if(!r)throw Am(t,...n)}function Bi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Dc(t),new Error(t)}function Gi(r,t){r||Bi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function s1(){return F_()==="http:"||F_()==="https:"}function F_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s1()||kA()||"connection"in navigator)?navigator.onLine:!0}function o1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gi(n>t,"Short delay should be less than long delay!"),this.isMobile=VA()||LA()}get(){return a1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(r,t){Gi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c1=new ql(3e4,6e4);function js(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function Gr(r,t,n,s,o={}){return N0(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const g=Bl(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:t,headers:p},u);return PA()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(y.credentials="include"),C0.fetch()(await x0(r,r.config.apiHost,n,g),y)})}async function N0(r,t,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},l1),t);try{const o=new f1(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Sc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Sc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Sc(r,"user-disabled",f);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw I0(r,T,y);Bn(r,T)}}catch(o){if(o instanceof Xi)throw o;Bn(r,"network-request-failed",{message:String(o)})}}async function lh(r,t,n,s,o={}){const u=await Gr(r,t,n,s,o);return"mfaPendingCredential"in u&&Bn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function x0(r,t,n,s){const o=`${t}${n}?${s}`,u=r,f=u.config.emulator?Sm(r.config,o):`${r.config.apiScheme}://${o}`;return u1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function h1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class f1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),c1.get())})}}function Sc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=oi(r,t,s);return o.customData._tokenResponse=n,o}function G_(r){return r!==void 0&&r.enterprise!==void 0}class d1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return h1(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function m1(r,t){return Gr(r,"GET","/v2/recaptchaConfig",js(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,t){return Gr(r,"POST","/v1/accounts:delete",t)}async function Fc(r,t){return Gr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function p1(r,t=!1){const n=ke(r),s=await n.getIdToken(t),o=wm(s);Et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:wl(zd(o.auth_time)),issuedAtTime:wl(zd(o.iat)),expirationTime:wl(zd(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function zd(r){return Number(r)*1e3}function wm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const o=d0(n);return o?JSON.parse(o):(Dc("Failed to decode base64 JWT payload"),null)}catch(o){return Dc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Q_(r){const t=wm(r);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Xi&&y1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function y1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(r){var t;const n=r.auth,s=await r.getIdToken(),o=await Dl(r,Fc(n,{idToken:s}));Et(o?.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?D0(u.providerUserInfo):[],g=E1(r.providerData,f),p=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!g?.length,T=p?y:!1,R={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new Wd(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(r,R)}async function v1(r){const t=ke(r);await Gc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function E1(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function D0(r){return r.map(t=>{var{providerId:n}=t,s=bm(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,t){const n=await N0(r,{},async()=>{const s=Bl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await x0(r,o,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(p.credentials="include"),C0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b1(r,t){return Gr(r,"POST","/v2/accounts:revokeToken",js(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Q_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=Q_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await T1(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new za;return s&&(Et(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(Et(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(Et(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(r,t){Et(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class zn{constructor(t){var{uid:n,auth:s,stsTokenManager:o}=t,u=bm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Wd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const n=await Dl(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return p1(this,t)}reload(){return v1(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Mr(this.auth));const t=await this.getIdToken();return await Dl(this,g1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,o,u,f,g,p,y,T;const R=(s=n.displayName)!==null&&s!==void 0?s:void 0,D=(o=n.email)!==null&&o!==void 0?o:void 0,j=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,F=(f=n.photoURL)!==null&&f!==void 0?f:void 0,J=(g=n.tenantId)!==null&&g!==void 0?g:void 0,Z=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,gt=(y=n.createdAt)!==null&&y!==void 0?y:void 0,ct=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ot,emailVerified:nt,isAnonymous:lt,providerData:ht,stsTokenManager:I}=n;Et(ot&&I,t,"internal-error");const S=za.fromJSON(this.name,I);Et(typeof ot=="string",t,"internal-error"),wr(R,t.name),wr(D,t.name),Et(typeof nt=="boolean",t,"internal-error"),Et(typeof lt=="boolean",t,"internal-error"),wr(j,t.name),wr(F,t.name),wr(J,t.name),wr(Z,t.name),wr(gt,t.name),wr(ct,t.name);const A=new zn({uid:ot,auth:t,email:D,emailVerified:nt,displayName:R,isAnonymous:lt,photoURL:F,phoneNumber:j,tenantId:J,stsTokenManager:S,createdAt:gt,lastLoginAt:ct});return ht&&Array.isArray(ht)&&(A.providerData=ht.map(N=>Object.assign({},N))),Z&&(A._redirectEventId=Z),A}static async _fromIdTokenResponse(t,n,s=!1){const o=new za;o.updateFromServerResponse(n);const u=new zn({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await Gc(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];Et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?D0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,g=new za;g.updateFromIdToken(s);const p=new zn({uid:o.localId,auth:t,stsTokenManager:g,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;function qi(r){Gi(r instanceof Function,"Expected a class definition");let t=K_.get(r);return t?(Gi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,K_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}O0.type="NONE";const Y_=O0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(r,t,n){return`firebase:${r}:${t}:${n}`}class Ba{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Oc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Oc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Fc(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ba(qi(Y_),t,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||qi(Y_);const f=Oc(s,t.config.apiKey,t.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let R;if(typeof T=="string"){const D=await Fc(t,{idToken:T}).catch(()=>{});if(!D)break;R=await zn._fromGetAccountInfoResponse(t,D,T)}else R=zn._fromJSON(t,T);y!==u&&(g=R),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ba(u,t,s):(u=p[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Ba(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(k0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(V0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(U0(t))return"Blackberry";if(j0(t))return"Webos";if(M0(t))return"Safari";if((t.includes("chrome/")||P0(t))&&!t.includes("edge/"))return"Chrome";if(L0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function V0(r=Ze()){return/firefox\//i.test(r)}function M0(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function P0(r=Ze()){return/crios\//i.test(r)}function k0(r=Ze()){return/iemobile/i.test(r)}function L0(r=Ze()){return/android/i.test(r)}function U0(r=Ze()){return/blackberry/i.test(r)}function j0(r=Ze()){return/webos/i.test(r)}function Rm(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function A1(r=Ze()){var t;return Rm(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function S1(){return UA()&&document.documentMode===10}function z0(r=Ze()){return Rm(r)||L0(r)||j0(r)||U0(r)||/windows phone/i.test(r)||k0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r,t=[]){let n;switch(r){case"Browser":n=X_(Ze());break;case"Worker":n=`${X_(Ze())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,g)=>{try{const p=t(u);f(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(r,t={}){return Gr(r,"GET","/v2/passwordPolicy",js(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=6;class C1{constructor(t){var n,s,o,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:I1,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,o,u,f,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,p),this.validatePasswordCharacterOptions(t,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $_(this),this.idTokenSubscription=new $_(this),this.beforeStateQueue=new w1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Fc(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(jn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o?._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&p?.user&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Gc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=o1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(Mr(this));const n=t?ke(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await R1(this),n=new C1(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new zl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await b1(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=B0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&r1(`Error while retrieving App Check token: ${n.error}`),n?.token}}function eo(r){return ke(r)}class $_{constructor(t){this.auth=t,this.observer=null,this.addObserver=QA(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x1(r){uh=r}function q0(r){return uh.loadJS(r)}function D1(){return uh.recaptchaEnterpriseScript}function O1(){return uh.gapiScript}function V1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class M1{constructor(){this.enterprise=new P1}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class P1{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const k1="recaptcha-enterprise",H0="NO_RECAPTCHA";class L1{constructor(t){this.type=k1,this.auth=eo(t)}async verify(t="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{m1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new d1(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{g(p)})})}function o(u,f,g){const p=window.grecaptcha;G_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:t}).then(y=>{f(y)}).catch(()=>{f(H0)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new M1().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(g=>{if(!n&&G_(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=D1();p.length!==0&&(p+=g),q0(p).then(()=>{o(g,u,f)}).catch(y=>{f(y)})}}).catch(g=>{f(g)})})}}async function Z_(r,t,n,s=!1,o=!1){const u=new L1(r);let f;if(o)f=H0;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function W_(r,t,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Z_(r,t,n,n==="getOobCode");return s(r,f)}else return s(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Z_(r,t,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r,t){const n=Tm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ms(u,t??{}))return o;Bn(o,"already-initialized")}return n.initialize({options:t})}function j1(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function z1(r,t,n){const s=eo(r);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=F0(t),{host:f,port:g}=B1(t),p=g===null?"":`:${g}`,y={url:`${u}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(Ms(y,s.config.emulator)&&Ms(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Ja(f)?(y0(`${u}//${f}${p}`),_0("Auth",!0)):q1()}function F0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function B1(r){const t=F0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:J_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:J_(f)}}}function J_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function q1(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(t){return Bi("not implemented")}_linkToIdToken(t,n){return Bi("not implemented")}_getReauthenticationResolver(t){return Bi("not implemented")}}async function H1(r,t){return Gr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(r,t){return lh(r,"POST","/v1/accounts:signInWithPassword",js(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(r,t){return lh(r,"POST","/v1/accounts:signInWithEmailLink",js(r,t))}async function Q1(r,t){return lh(r,"POST","/v1/accounts:signInWithEmailLink",js(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Im{constructor(t,n,s,o=null){super("password",s),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Ol(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Ol(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(t,n,"signInWithPassword",F1);case"emailLink":return G1(t,{email:this._email,oobCode:this._password});default:Bn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(t,s,"signUpPassword",H1);case"emailLink":return Q1(t,{idToken:n,email:this._email,oobCode:this._password});default:Bn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r,t){return lh(r,"POST","/v1/accounts:signInWithIdp",js(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="http://localhost";class ks extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o}=n,u=bm(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ks(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return qa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,qa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qa(t,n)}buildRequest(){const t={requestUri:K1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Bl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function X1(r){const t=_l(vl(r)).link,n=t?_l(vl(t)).deep_link_id:null,s=_l(vl(r)).deep_link_id;return(s?_l(vl(s)).link:null)||s||n||t||r}class Cm{constructor(t){var n,s,o,u,f,g;const p=_l(vl(t)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,T=(s=p.oobCode)!==null&&s!==void 0?s:null,R=Y1((o=p.mode)!==null&&o!==void 0?o:null);Et(y&&T&&R,"argument-error"),this.apiKey=y,this.operation=R,this.code=T,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(g=p.tenantId)!==null&&g!==void 0?g:null}static parseLink(t){const n=X1(t);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(t,n){return Ol._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Cm.parseLink(n);return Et(s,"argument-error"),Ol._fromEmailAndCode(t,s.code,s.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends G0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Hl{constructor(){super("facebook.com")}static credential(t){return ks._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Rr.credentialFromTaggedObject(t)}static credentialFromError(t){return Rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Rr.credential(t.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ks._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ir.credentialFromTaggedObject(t)}static credentialFromError(t){return Ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Ir.credential(n,s)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Hl{constructor(){super("github.com")}static credential(t){return ks._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cr.credential(t.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Hl{constructor(){super("twitter.com")}static credential(t,n){return ks._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await zn._fromIdTokenResponse(t,s,o),f=tv(s);return new Qa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=tv(s);return new Qa({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function tv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Xi{constructor(t,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new Qc(t,n,s,o)}}function Q0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(r,u,t,s):u})}async function $1(r,t,n=!1){const s=await Dl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Qa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(r,t,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(Mr(s));const o="reauthenticate";try{const u=await Dl(r,Q0(s,o,t,r),n);Et(u.idToken,s,"internal-error");const f=wm(u.idToken);Et(f,s,"internal-error");const{sub:g}=f;return Et(r.uid===g,s,"user-mismatch"),Qa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Bn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(r,t,n=!1){if(jn(r.app))return Promise.reject(Mr(r));const s="signIn",o=await Q0(r,s,t),u=await Qa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function Z1(r,t){return Y0(eo(r),t)}async function W1(r,t){return K0(ke(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(r){const t=eo(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function tw(r,t,n){return jn(r.app)?Promise.reject(Mr(r)):Z1(ke(r),zs.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&J1(r),s})}function ew(r,t,n,s){return ke(r).onIdTokenChanged(t,n,s)}function nw(r,t,n){return ke(r).beforeAuthStateChanged(t,n)}function iw(r,t,n,s){return ke(r).onAuthStateChanged(t,n,s)}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1e3,sw=10;class $0 extends X0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);S1()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,sw):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},rw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}$0.type="LOCAL";const aw=$0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends X0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Z0.type="SESSION";const W0=Z0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new ch(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(f).map(async y=>y(n.origin,u)),p=await ow(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,p)=>{const y=Nm("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(R){const D=R;if(D.data.eventId===y)switch(D.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(D.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function uw(r){li().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function cw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hw(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function fw(){return J0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firebaseLocalStorageDb",dw=1,Yc="firebaseLocalStorage",eE="fbase_key";class Fl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(r,t){return r.transaction([Yc],t?"readwrite":"readonly").objectStore(Yc)}function mw(){const r=indexedDB.deleteDatabase(tE);return new Fl(r).toPromise()}function Jd(){const r=indexedDB.open(tE,dw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Yc,{keyPath:eE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Yc)?t(s):(s.close(),await mw(),t(await Jd()))})})}async function ev(r,t,n){const s=hh(r,!0).put({[eE]:t,value:n});return new Fl(s).toPromise()}async function gw(r,t){const n=hh(r,!1).get(t),s=await new Fl(n).toPromise();return s===void 0?null:s.value}function nv(r,t){const n=hh(r,!0).delete(t);return new Fl(n).toPromise()}const pw=800,yw=3;class nE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>yw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(fw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await cw(),!this.activeServiceWorker)return;this.sender=new lw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||hw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jd();return await ev(t,Kc,"1"),await nv(t,Kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ev(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>gw(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=hh(o,!1).getAll();return new Fl(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nE.type="LOCAL";const _w=nE;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(r,t){return t?qi(t):(Et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Im{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Ew(r){return Y0(r.auth,new xm(r),r.bypassAuthState)}function Tw(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),K0(n,new xm(r),r.bypassAuthState)}async function bw(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),$1(n,new xm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ew;case"linkViaPopup":case"linkViaRedirect":return bw;case"reauthViaPopup":case"reauthViaRedirect":return Tw;default:Bn(this.auth,"internal-error")}}resolve(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new ql(2e3,1e4);class ja extends iE{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const t=Nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Aw.get())};t()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="pendingRedirect",Vc=new Map;class ww extends iE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Vc.get(this.auth._key());if(!t){try{const s=await Rw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Vc.set(this.auth._key(),t)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rw(r,t){const n=Nw(t),s=Cw(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Iw(r,t){Vc.set(r._key(),t)}function Cw(r){return qi(r._redirectPersistence)}function Nw(r){return Oc(Sw,r.config.apiKey,r.name)}async function xw(r,t,n=!1){if(jn(r.app))return Promise.reject(Mr(r));const s=eo(r),o=vw(s,t),f=await new ww(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=10*60*1e3;class Ow{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Vw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!rE(t)){const o=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Dw&&this.cachedEventUids.clear(),this.cachedEventUids.has(iv(t))}saveEventToCache(t){this.cachedEventUids.add(iv(t)),this.lastProcessedEventTime=Date.now()}}function iv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function rE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Vw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(r,t={}){return Gr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kw=/^https?/;async function Lw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Mw(r);for(const n of t)try{if(Uw(n))return}catch{}Bn(r,"unauthorized-domain")}function Uw(r){const t=Zd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!kw.test(n))return!1;if(Pw.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new ql(3e4,6e4);function rv(){const r=li().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function zw(r){return new Promise((t,n)=>{var s,o,u;function f(){rv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rv(),n(oi(r,"network-request-failed"))},timeout:jw.get()})}if(!((o=(s=li().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=li().gapi)===null||u===void 0)&&u.load)f();else{const g=V1("iframefcb");return li()[g]=()=>{gapi.load?f():n(oi(r,"network-request-failed"))},q0(`${O1()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw Mc=null,t})}let Mc=null;function Bw(r){return Mc=Mc||zw(r),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new ql(5e3,15e3),Hw="__/auth/iframe",Fw="emulator/auth/iframe",Gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kw(r){const t=r.config;Et(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Sm(t,Fw):`https://${r.config.authDomain}/${Hw}`,s={apiKey:t.apiKey,appName:r.name,v:to},o=Qw.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Bl(s).slice(1)}`}async function Yw(r){const t=await Bw(r),n=li().gapi;return Et(n,r,"internal-error"),t.open({where:document.body,url:Kw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gw,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=oi(r,"network-request-failed"),g=li().setTimeout(()=>{u(f)},qw.get());function p(){li().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$w=500,Zw=600,Ww="_blank",Jw="http://localhost";class sv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(r,t,n,s=$w,o=Zw){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p=Object.assign(Object.assign({},Xw),{width:s.toString(),height:o.toString(),top:u,left:f}),y=Ze().toLowerCase();n&&(g=P0(y)?Ww:n),V0(y)&&(t=t||Jw,p.scrollbars="yes");const T=Object.entries(p).reduce((D,[j,F])=>`${D}${j}=${F},`,"");if(A1(y)&&g!=="_self")return eR(t||"",g),new sv(null);const R=window.open(t||"",g,T);Et(R,r,"popup-blocked");try{R.focus()}catch{}return new sv(R)}function eR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",iR="emulator/auth/handler",rR=encodeURIComponent("fac");async function av(r,t,n,s,o,u){Et(r.config.authDomain,r,"auth-domain-config-required"),Et(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:to,eventId:o};if(t instanceof G0){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",GA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,R]of Object.entries({}))f[T]=R}if(t instanceof Hl){const T=t.getScopes().filter(R=>R!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),y=p?`#${rR}=${encodeURIComponent(p)}`:"";return`${sR(r)}?${Bl(g).slice(1)}${y}`}function sR({config:r}){return r.emulator?Sm(r,iR):`https://${r.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W0,this._completeRedirectFn=xw,this._overrideRedirectResult=Iw}async _openPopup(t,n,s,o){var u;Gi((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await av(t,n,s,Zd(),o);return tR(t,f,Nm())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await av(t,n,s,Zd(),o);return uw(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Gi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Yw(t),s=new Ow(t);return n.register("authEvent",o=>(Et(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Bd,{type:Bd},o=>{var u;const f=(u=o?.[0])===null||u===void 0?void 0:u[Bd];f!==void 0&&n(!!f),Bn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Lw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return z0()||M0()||Rm()}}const oR=aR;var ov="@firebase/auth",lv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(r){Ga(new Ps("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Et(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B0(r)},y=new N1(s,o,u,p);return j1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ga(new Ps("auth-internal",t=>{const n=eo(t.getProvider("auth").getImmediate());return(s=>new lR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(ov,lv,uR(r)),Vr(ov,lv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=5*60,fR=p0("authIdTokenMaxAge")||hR;let uv=null;const dR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fR)return;const o=n?.token;uv!==o&&(uv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mR(r=b0()){const t=Tm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=U1(r,{popupRedirectResolver:oR,persistence:[_w,aw,W0]}),s=p0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=dR(u.toString());nw(n,f,()=>f(n.currentUser)),ew(n,g=>f(g))}}const o=m0("auth");return o&&z1(n,`http://${o}`),n}function gR(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}x1({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=oi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",gR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");var pR="firebase",yR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(pR,yR,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,sE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,S){function A(){}A.prototype=S.prototype,I.D=S.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(N,O,P){for(var C=Array(arguments.length-2),be=2;be<arguments.length;be++)C[be-2]=arguments[be];return S.prototype[O].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,A){A||(A=0);var N=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)N[O]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(O=0;16>O;++O)N[O]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=I.g[0],A=I.g[1],O=I.g[2];var P=I.g[3],C=S+(P^A&(O^P))+N[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=P+(O^S&(A^O))+N[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=O+(A^P&(S^A))+N[2]+606105819&4294967295,O=P+(C<<17&4294967295|C>>>15),C=A+(S^O&(P^S))+N[3]+3250441966&4294967295,A=O+(C<<22&4294967295|C>>>10),C=S+(P^A&(O^P))+N[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(O^S&(A^O))+N[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=O+(A^P&(S^A))+N[6]+2821735955&4294967295,O=P+(C<<17&4294967295|C>>>15),C=A+(S^O&(P^S))+N[7]+4249261313&4294967295,A=O+(C<<22&4294967295|C>>>10),C=S+(P^A&(O^P))+N[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(O^S&(A^O))+N[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=O+(A^P&(S^A))+N[10]+4294925233&4294967295,O=P+(C<<17&4294967295|C>>>15),C=A+(S^O&(P^S))+N[11]+2304563134&4294967295,A=O+(C<<22&4294967295|C>>>10),C=S+(P^A&(O^P))+N[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(O^S&(A^O))+N[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=O+(A^P&(S^A))+N[14]+2792965006&4294967295,O=P+(C<<17&4294967295|C>>>15),C=A+(S^O&(P^S))+N[15]+1236535329&4294967295,A=O+(C<<22&4294967295|C>>>10),C=S+(O^P&(A^O))+N[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^O&(S^A))+N[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=O+(S^A&(P^S))+N[11]+643717713&4294967295,O=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(O^P))+N[0]+3921069994&4294967295,A=O+(C<<20&4294967295|C>>>12),C=S+(O^P&(A^O))+N[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^O&(S^A))+N[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=O+(S^A&(P^S))+N[15]+3634488961&4294967295,O=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(O^P))+N[4]+3889429448&4294967295,A=O+(C<<20&4294967295|C>>>12),C=S+(O^P&(A^O))+N[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^O&(S^A))+N[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=O+(S^A&(P^S))+N[3]+4107603335&4294967295,O=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(O^P))+N[8]+1163531501&4294967295,A=O+(C<<20&4294967295|C>>>12),C=S+(O^P&(A^O))+N[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^O&(S^A))+N[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=O+(S^A&(P^S))+N[7]+1735328473&4294967295,O=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(O^P))+N[12]+2368359562&4294967295,A=O+(C<<20&4294967295|C>>>12),C=S+(A^O^P)+N[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^O)+N[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=O+(P^S^A)+N[11]+1839030562&4294967295,O=P+(C<<16&4294967295|C>>>16),C=A+(O^P^S)+N[14]+4259657740&4294967295,A=O+(C<<23&4294967295|C>>>9),C=S+(A^O^P)+N[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^O)+N[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=O+(P^S^A)+N[7]+4139469664&4294967295,O=P+(C<<16&4294967295|C>>>16),C=A+(O^P^S)+N[10]+3200236656&4294967295,A=O+(C<<23&4294967295|C>>>9),C=S+(A^O^P)+N[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^O)+N[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=O+(P^S^A)+N[3]+3572445317&4294967295,O=P+(C<<16&4294967295|C>>>16),C=A+(O^P^S)+N[6]+76029189&4294967295,A=O+(C<<23&4294967295|C>>>9),C=S+(A^O^P)+N[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^O)+N[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=O+(P^S^A)+N[15]+530742520&4294967295,O=P+(C<<16&4294967295|C>>>16),C=A+(O^P^S)+N[2]+3299628645&4294967295,A=O+(C<<23&4294967295|C>>>9),C=S+(O^(A|~P))+N[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~O))+N[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=O+(S^(P|~A))+N[14]+2878612391&4294967295,O=P+(C<<15&4294967295|C>>>17),C=A+(P^(O|~S))+N[5]+4237533241&4294967295,A=O+(C<<21&4294967295|C>>>11),C=S+(O^(A|~P))+N[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~O))+N[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=O+(S^(P|~A))+N[10]+4293915773&4294967295,O=P+(C<<15&4294967295|C>>>17),C=A+(P^(O|~S))+N[1]+2240044497&4294967295,A=O+(C<<21&4294967295|C>>>11),C=S+(O^(A|~P))+N[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~O))+N[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=O+(S^(P|~A))+N[6]+2734768916&4294967295,O=P+(C<<15&4294967295|C>>>17),C=A+(P^(O|~S))+N[13]+1309151649&4294967295,A=O+(C<<21&4294967295|C>>>11),C=S+(O^(A|~P))+N[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~O))+N[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=O+(S^(P|~A))+N[2]+718787259&4294967295,O=P+(C<<15&4294967295|C>>>17),C=A+(P^(O|~S))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var A=S-this.blockSize,N=this.B,O=this.h,P=0;P<S;){if(O==0)for(;P<=A;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<S;)if(N[O++]=I.charCodeAt(P++),O==this.blockSize){o(this,N),O=0;break}}else for(;P<S;)if(N[O++]=I[P++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var A=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=A&255,A/=256;for(this.u(I),I=Array(16),S=A=0;4>S;++S)for(var N=0;32>N;N+=8)I[A++]=this.g[S]>>>N&255;return I};function u(I,S){var A=g;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=S(I)}function f(I,S){this.h=S;for(var A=[],N=!0,O=I.length-1;0<=O;O--){var P=I[O]|0;N&&P==S||(A[O]=P,N=!1)}this.g=A}var g={};function p(I){return-128<=I&&128>I?u(I,function(S){return new f([S|0],0>S?-1:0)}):new f([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return R;if(0>I)return Z(y(-I));for(var S=[],A=1,N=0;I>=A;N++)S[N]=I/A|0,A*=4294967296;return new f(S,0)}function T(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return Z(T(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),N=R,O=0;O<I.length;O+=8){var P=Math.min(8,I.length-O),C=parseInt(I.substring(O,O+P),S);8>P?(P=y(Math.pow(S,P)),N=N.j(P).add(y(C))):(N=N.j(A),N=N.add(y(C)))}return N}var R=p(0),D=p(1),j=p(16777216);r=f.prototype,r.m=function(){if(J(this))return-Z(this).m();for(var I=0,S=1,A=0;A<this.g.length;A++){var N=this.i(A);I+=(0<=N?N:4294967296+N)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(F(this))return"0";if(J(this))return"-"+Z(this).toString(I);for(var S=y(Math.pow(I,6)),A=this,N="";;){var O=nt(A,S).g;A=gt(A,O.j(S));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=O,F(A))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function F(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function J(I){return I.h==-1}r.l=function(I){return I=gt(this,I),J(I)?-1:F(I)?0:1};function Z(I){for(var S=I.g.length,A=[],N=0;N<S;N++)A[N]=~I.g[N];return new f(A,~I.h).add(D)}r.abs=function(){return J(this)?Z(this):this},r.add=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],N=0,O=0;O<=S;O++){var P=N+(this.i(O)&65535)+(I.i(O)&65535),C=(P>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);N=C>>>16,P&=65535,C&=65535,A[O]=C<<16|P}return new f(A,A[A.length-1]&-2147483648?-1:0)};function gt(I,S){return I.add(Z(S))}r.j=function(I){if(F(this)||F(I))return R;if(J(this))return J(I)?Z(this).j(Z(I)):Z(Z(this).j(I));if(J(I))return Z(this.j(Z(I)));if(0>this.l(j)&&0>I.l(j))return y(this.m()*I.m());for(var S=this.g.length+I.g.length,A=[],N=0;N<2*S;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<I.g.length;O++){var P=this.i(N)>>>16,C=this.i(N)&65535,be=I.i(O)>>>16,ae=I.i(O)&65535;A[2*N+2*O]+=C*ae,ct(A,2*N+2*O),A[2*N+2*O+1]+=P*ae,ct(A,2*N+2*O+1),A[2*N+2*O+1]+=C*be,ct(A,2*N+2*O+1),A[2*N+2*O+2]+=P*be,ct(A,2*N+2*O+2)}for(N=0;N<S;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=S;N<2*S;N++)A[N]=0;return new f(A,0)};function ct(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function ot(I,S){this.g=I,this.h=S}function nt(I,S){if(F(S))throw Error("division by zero");if(F(I))return new ot(R,R);if(J(I))return S=nt(Z(I),S),new ot(Z(S.g),Z(S.h));if(J(S))return S=nt(I,Z(S)),new ot(Z(S.g),S.h);if(30<I.g.length){if(J(I)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var A=D,N=S;0>=N.l(I);)A=lt(A),N=lt(N);var O=ht(A,1),P=ht(N,1);for(N=ht(N,2),A=ht(A,2);!F(N);){var C=P.add(N);0>=C.l(I)&&(O=O.add(A),P=C),N=ht(N,1),A=ht(A,1)}return S=gt(I,O.j(S)),new ot(O,S)}for(O=R;0<=I.l(S);){for(A=Math.max(1,Math.floor(I.m()/S.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=y(A),C=P.j(S);J(C)||0<C.l(I);)A-=N,P=y(A),C=P.j(S);F(P)&&(P=D),O=O.add(P),I=gt(I,C)}return new ot(O,I)}r.A=function(I){return nt(this,I).h},r.and=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)&I.i(N);return new f(A,this.h&I.h)},r.or=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)|I.i(N);return new f(A,this.h|I.h)},r.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)^I.i(N);return new f(A,this.h^I.h)};function lt(I){for(var S=I.g.length+1,A=[],N=0;N<S;N++)A[N]=I.i(N)<<1|I.i(N-1)>>>31;return new f(A,I.h)}function ht(I,S){var A=S>>5;S%=32;for(var N=I.g.length-A,O=[],P=0;P<N;P++)O[P]=0<S?I.i(P+A)>>>S|I.i(P+A+1)<<32-S:I.i(P+A);return new f(O,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,sE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Pr=f}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aE,El,oE,Pc,tm,lE,uE,cE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,m){if(m)t:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in _))break t;_=_[L]}c=c[c.length-1],b=_[c],m=m(b),m!=b&&m!=null&&t(_,c,{configurable:!0,writable:!0,value:m})}}function u(c,m){c instanceof String&&(c+="");var _=0,b=!1,L={next:function(){if(!b&&_<c.length){var H=_++;return{value:m(H,c[H]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function T(c,m,_){return c.call.apply(c.bind,arguments)}function R(c,m,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function D(c,m,_){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:R,D.apply(null,arguments)}function j(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function F(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,L,H){for(var et=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)et[Pt-2]=arguments[Pt];return m.prototype[L].apply(b,et)}}function J(c){const m=c.length;if(0<m){const _=Array(m);for(let b=0;b<m;b++)_[b]=c[b];return _}return[]}function Z(c,m){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const L=c.length||0,H=b.length||0;c.length=L+H;for(let et=0;et<H;et++)c[L+et]=b[et]}else c.push(b)}}class gt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ct(c){return/^[\s\xa0]*$/.test(c)}function ot(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function nt(c){return nt[" "](c),c}nt[" "]=function(){};var lt=ot().indexOf("Gecko")!=-1&&!(ot().toLowerCase().indexOf("webkit")!=-1&&ot().indexOf("Edge")==-1)&&!(ot().indexOf("Trident")!=-1||ot().indexOf("MSIE")!=-1)&&ot().indexOf("Edge")==-1;function ht(c,m,_){for(const b in c)m.call(_,c[b],b,c)}function I(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function S(c){const m={};for(const _ in c)m[_]=c[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,m){let _,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(_ in b)c[_]=b[_];for(let H=0;H<A.length;H++)_=A[H],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function O(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function P(c){g.setTimeout(()=>{throw c},0)}function C(){var c=zt;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class be{constructor(){this.h=this.g=null}add(m,_){const b=ae.get();b.set(m,_),this.h?this.h.next=b:this.g=b,this.h=b}}var ae=new gt(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let it,dt=!1,zt=new be,V=()=>{const c=g.Promise.resolve(void 0);it=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){P(_)}var m=ae;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}dt=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return c}();function Nt(c,m){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(lt){t:{try{nt(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:At[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Nt.aa.h.call(this)}}F(Nt,tt);var At={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function Hn(c,m,_,b,L){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!b,this.ha=L,this.key=++Jt,this.da=this.fa=!1}function $i(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gi(c){this.src=c,this.g={},this.h=0}gi.prototype.add=function(c,m,_,b,L){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var et=Xr(c,m,b,L);return-1<et?(m=c[et],_||(m.fa=!1)):(m=new Hn(m,this.src,H,!!b,L),m.fa=_,c.push(m)),m};function Yr(c,m){var _=m.type;if(_ in c.g){var b=c.g[_],L=Array.prototype.indexOf.call(b,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(b,L,1),H&&($i(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xr(c,m,_,b){for(var L=0;L<c.length;++L){var H=c[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==b)return L}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),oo={};function tu(c,m,_,b,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)tu(c,m[H],_,b,L);return null}return _=eu(_),c&&c[Ne]?c.K(m,_,y(b)?!!b.capture:!1,L):vn(c,m,_,!1,b,L)}function vn(c,m,_,b,L,H){if(!m)throw Error("Invalid event type");var et=y(L)?!!L.capture:!!L,Pt=Fs(c);if(Pt||(c[$r]=Pt=new gi(c)),_=Pt.add(m,_,b,et,H),_.proxy)return _;if(b=Ch(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)pt||(L=et),L===void 0&&(L=!1),c.addEventListener(m.toString(),b,L);else if(c.attachEvent)c.attachEvent(Zr(m.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ch(){function c(_){return m.call(c.src,c.listener,_)}const m=Nh;return c}function lo(c,m,_,b,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)lo(c,m[H],_,b,L);else b=y(b)?!!b.capture:!!b,_=eu(_),c&&c[Ne]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],_=Xr(H,_,b,L),-1<_&&($i(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=Fs(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Xr(m,_,b,L)),(_=-1<c?m[c]:null)&&Hs(_))}function Hs(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ne])Yr(m.i,c);else{var _=c.type,b=c.proxy;m.removeEventListener?m.removeEventListener(_,b,c.capture):m.detachEvent?m.detachEvent(Zr(_),b):m.addListener&&m.removeListener&&m.removeListener(b),(_=Fs(m))?(Yr(_,c),_.h==0&&(_.src=null,m[$r]=null)):$i(c)}}}function Zr(c){return c in oo?oo[c]:oo[c]="on"+c}function Nh(c,m){if(c.da)c=!0;else{m=new Nt(m,this);var _=c.listener,b=c.ha||c.src;c.fa&&Hs(c),c=_.call(b,m)}return c}function Fs(c){return c=c[$r],c instanceof gi?c:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(c){return typeof c=="function"?c:(c[uo]||(c[uo]=function(m){return c.handleEvent(m)}),c[uo])}function oe(){rt.call(this),this.i=new gi(this),this.M=this,this.F=null}F(oe,rt),oe.prototype[Ne]=!0,oe.prototype.removeEventListener=function(c,m,_,b){lo(this,c,m,_,b)};function Ft(c,m){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=m.type||m,typeof m=="string")m=new tt(m,c);else if(m instanceof tt)m.target=m.target||c;else{var L=m;m=new tt(b,c),N(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var et=m.g=_[H];L=ln(et,b,!0,m)&&L}if(et=m.g=c,L=ln(et,b,!0,m)&&L,L=ln(et,b,!1,m)&&L,_)for(H=0;H<_.length;H++)et=m.g=_[H],L=ln(et,b,!1,m)&&L}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],b=0;b<_.length;b++)$i(_[b]);delete c.g[m],c.h--}}this.F=null},oe.prototype.K=function(c,m,_,b){return this.i.add(String(c),m,!1,_,b)},oe.prototype.L=function(c,m,_,b){return this.i.add(String(c),m,!0,_,b)};function ln(c,m,_,b){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var et=m[H];if(et&&!et.da&&et.capture==_){var Pt=et.listener,Se=et.ha||et.src;et.fa&&Yr(c.i,et),L=Pt.call(Se,b)!==!1&&L}}return L&&!b.defaultPrevented}function Ge(c,m,_){if(typeof c=="function")_&&(c=D(c,_));else if(c&&typeof c.handleEvent=="function")c=D(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(c,m||0)}function nu(c){c.g=Ge(()=>{c.g=null,c.i&&(c.i=!1,nu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class xh extends rt{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:nu(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(c){rt.call(this),this.h=c,this.g={}}F(Wr,rt);var Jr=[];function ts(c){ht(c.g,function(m,_){this.g.hasOwnProperty(_)&&Hs(m)},c),c.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),ts(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=g.JSON.stringify,Gs=g.JSON.parse,es=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function co(){}co.prototype.h=null;function ho(c){return c.h||(c.h=c.i())}function fo(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){tt.call(this,"d")}F(yi,tt);function mo(){tt.call(this,"c")}F(mo,tt);var Fn={},go=null;function Zi(){return go=go||new oe}Fn.La="serverreachability";function Qs(c){tt.call(this,Fn.La,c)}F(Qs,tt);function Wi(c){const m=Zi();Ft(m,new Qs(m))}Fn.STAT_EVENT="statevent";function iu(c,m){tt.call(this,Fn.STAT_EVENT,c),this.stat=m}F(iu,tt);function ne(c){const m=Zi();Ft(m,new iu(m,c))}Fn.Ma="timingevent";function Ae(c,m){tt.call(this,Fn.Ma,c),this.size=m}F(Ae,tt);function me(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},m)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function po(c,m,_,b,L,H){c.info(function(){if(c.g)if(H)for(var et="",Pt=H.split("&"),Se=0;Se<Pt.length;Se++){var kt=Pt[Se].split("=");if(1<kt.length){var De=kt[0];kt=kt[1];var we=De.split("_");et=2<=we.length&&we[1]=="type"?et+(De+"="+kt+"&"):et+(De+"=redacted&")}}else et=null;else et=H;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+m+`
`+_+`
`+et})}function Dh(c,m,_,b,L,H,et){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+et})}function Ji(c,m,_,b){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+ns(c,_)+(b?" "+b:"")})}function ru(c,m){c.info(function(){return"TIMEOUT: "+m})}En.prototype.info=function(){};function ns(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var et=1;et<L.length;et++)L[et]=""}}}}return Vn(_)}catch{return m}}var tr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_i={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function Qn(){}F(Qn,co),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Gn=new Qn;function We(c,m,_,b){this.j=c,this.i=m,this.l=_,this.R=b||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var yo={},Ks={};function Mn(c,m,_){c.L=1,c.v=os(un(m)),c.m=_,c.P=!0,vi(c,null)}function vi(c,m){c.F=Date.now(),is(c),c.A=un(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Ao(_.i,"t",b),c.C=0,_=c.j.J,c.h=new ce,c.g=Eu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new xh(D(c.Y,c,c.g),c.O)),m=c.U,_=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Jr[0]=L.toString()),L=Jr);for(var H=0;H<L.length;H++){var et=tu(_,L[H],b||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Wi(),po(c.i,c.u,c.A,c.l,c.R,c.m)}We.prototype.ca=function(c){c=c.target;const m=this.M;m&&Sn(c)==3?m.j():this.Y(c)},We.prototype.Y=function(c){try{if(c==this.g)t:{const we=Sn(this.g);var m=this.g.Ba();const Ii=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||we!=4||m==7||(m==8||0>=Ii?Wi(3):Wi(2)),er(this);var _=this.g.Z();this.X=_;e:if(su(this)){var b=fu(this.g);c="";var L=b.length,H=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Le(this),Kn(this);var et="";break e}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(b[m],{stream:!(H&&m==L-1)});b.length=0,this.h.g+=c,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,Dh(this.i,this.u,this.A,this.l,this.R,we,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,Se=this.g;if((Pt=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ct(Pt)){var kt=Pt;break e}}kt=null}if(_=kt)Ji(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,_);else{this.o=!1,this.s=3,ne(12),Le(this),Kn(this);break t}}if(this.P){_=!0;let Ue;for(;!this.J&&this.C<et.length;)if(Ue=au(this,et),Ue==Ks){we==4&&(this.s=4,ne(14),_=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==yo){this.s=4,ne(15),Ji(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else Ji(this.i,this.l,Ue,null),rs(this,Ue);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||et.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)Ji(this.i,this.l,et,"[Invalid Chunked Response]"),Le(this),Kn(this);else if(0<et.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),gs(De),De.M=!0,ne(11))}}else Ji(this.i,this.l,et,null),rs(this,et);we==4&&Le(this),this.o&&!this.J&&(we==4?yu(this.j,this):(this.o=!1,is(this)))}else kh(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Le(this),Kn(this)}}}catch{}finally{}};function su(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function au(c,m){var _=c.C,b=m.indexOf(`
`,_);return b==-1?Ks:(_=Number(m.substring(_,b)),isNaN(_)?yo:(b+=1,b+_>m.length?Ks:(m=m.slice(b,b+_),c.C=b+_,m)))}We.prototype.cancel=function(){this.J=!0,Le(this)};function is(c){c.S=Date.now()+c.I,ou(c,c.I)}function ou(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=me(D(c.ba,c),m)}function er(c){c.B&&(g.clearTimeout(c.B),c.B=null)}We.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ru(this.i,this.A),this.L!=2&&(Wi(),ne(17)),Le(this),this.s=2,Kn(this)):ou(this,this.S-c)};function Kn(c){c.j.G==0||c.J||yu(c.j,c)}function Le(c){er(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ts(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function rs(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||_o(_.h,c))){if(!c.K&&_o(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)sa(_),ia(_);else break t;Co(_),ne(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=me(D(_.Za,_),6e3));if(1>=Xs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((c.K||_.g==c)&&sa(_),!ct(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let kt=L[m];if(_.T=kt[0],kt=kt[1],_.G==2)if(kt[0]=="c"){_.K=kt[1],_.ia=kt[2];const De=kt[3];De!=null&&(_.la=De,_.j.info("VER="+_.la));const we=kt[4];we!=null&&(_.Aa=we,_.j.info("SVER="+_.Aa));const Ii=kt[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(b=1.5*Ii,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Ue=c.g;if(Ue){const ti=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var H=b.h;H.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&($s(H,H.h),H.h=null))}if(b.D){const xo=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(b.ya=xo,Kt(b.I,b.D,xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var et=c;if(b.qa=vu(b,b.J?b.ia:null,b.W),et.K){Je(b.h,et);var Pt=et,Se=b.L;Se&&(Pt.I=Se),Pt.B&&(er(Pt),is(Pt)),b.g=et}else gu(b);0<_.i.length&&ra(_)}else kt[0]!="stop"&&kt[0]!="close"||Ri(_,7);else _.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ri(_,7):Ro(_):kt[0]!="noop"&&_.l&&_.l.ta(kt),_.v=0)}}Wi(4)}catch{}}var lu=class{constructor(c,m){this.g=c,this.map=m}};function Ei(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ys(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xs(c){return c.h?1:c.g?c.g.size:0}function _o(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function $s(c,m){c.g?c.g.add(m):c.h=m}function Je(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Ei.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function vo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return J(c.i)}function Oh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],_=c.length,b=0;b<_;b++)m.push(c[b]);return m}m=[],_=0;for(b in c)m[_++]=c[b];return m}function Zs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const b in c)m[_++]=b;return m}}}function Eo(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=Zs(c),b=Oh(c),L=b.length,H=0;H<L;H++)m.call(void 0,b[H],_&&_[H],c)}var ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),L=null;if(0<=b){var H=c[_].substring(0,b);L=c[_].substring(b+1)}else H=c[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ge(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ge){this.h=c.h,as(this,c.j),this.o=c.o,this.g=c.g,nr(this,c.s),this.l=c.l;var m=c.i,_=new bi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ti(this,_),this.m=c.m}else c&&(m=String(c).match(ss))?(this.h=!1,as(this,m[1]||"",!0),this.o=Tn(m[2]||""),this.g=Tn(m[3]||"",!0),nr(this,m[4]),this.l=Tn(m[5]||"",!0),Ti(this,m[6]||"",!0),this.m=Tn(m[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}ge.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ls(m,To,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ls(m,To,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ls(_,_.charAt(0)=="/"?Mh:bo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ls(_,Ws)),c.join("")};function un(c){return new ge(c)}function as(c,m,_){c.j=_?Tn(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function nr(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Ti(c,m,_){m instanceof bi?(c.i=m,cu(c.i,c.h)):(_||(m=ls(m,Ph)),c.i=new bi(m,c.h))}function Kt(c,m,_){c.i.set(m,_)}function os(c){return Kt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Tn(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ls(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,uu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var To=/[#\/\?@]/g,bo=/[#\?:]/g,Mh=/[#\?]/g,Ph=/[#\?@]/g,Ws=/#/g;function bi(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function bn(c){c.g||(c.g=new Map,c.h=0,c.i&&Vh(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=bi.prototype,r.add=function(c,m){bn(this),this.i=null,c=Yn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function Ai(c,m){bn(c),m=Yn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Si(c,m){return bn(c),m=Yn(c,m),c.g.has(m)}r.forEach=function(c,m){bn(this),this.g.forEach(function(_,b){_.forEach(function(L){c.call(m,L,b,this)},this)},this)},r.na=function(){bn(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let b=0;b<m.length;b++){const L=c[b];for(let H=0;H<L.length;H++)_.push(m[b])}return _},r.V=function(c){bn(this);let m=[];if(typeof c=="string")Si(this,c)&&(m=m.concat(this.g.get(Yn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},r.set=function(c,m){return bn(this),this.i=null,c=Yn(this,c),Si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Ao(c,m,_){Ai(c,m),0<_.length&&(c.i=null,c.g.set(Yn(c,m),J(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var b=m[_];const H=encodeURIComponent(String(b)),et=this.V(b);for(b=0;b<et.length;b++){var L=H;et[b]!==""&&(L+="="+encodeURIComponent(String(et[b]))),c.push(L)}}return this.i=c.join("&")};function Yn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function cu(c,m){m&&!c.j&&(bn(c),c.i=null,c.g.forEach(function(_,b){var L=b.toLowerCase();b!=L&&(Ai(this,b),Ao(this,L,_))},c)),c.j=m}function us(c,m){const _=new En;if(g.Image){const b=new Image;b.onload=j(An,_,"TestLoadImage: loaded",!0,m,b),b.onerror=j(An,_,"TestLoadImage: error",!1,m,b),b.onabort=j(An,_,"TestLoadImage: abort",!1,m,b),b.ontimeout=j(An,_,"TestLoadImage: timeout",!1,m,b),g.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else m(!1)}function Pn(c,m){const _=new En,b=new AbortController,L=setTimeout(()=>{b.abort(),An(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:b.signal}).then(H=>{clearTimeout(L),H.ok?An(_,"TestPingServer: ok",!0,m):An(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),An(_,"TestPingServer: error",!1,m)})}function An(c,m,_,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(_)}catch{}}function cs(){this.g=new es}function Xn(c,m,_){const b=_||"";try{Eo(c,function(L,H){let et=L;y(L)&&(et=Vn(L)),m.push(b+H+"="+encodeURIComponent(et))})}catch(L){throw m.push(b+"type="+encodeURIComponent("_badmap")),L}}function ir(c){this.l=c.Ub||null,this.j=c.eb||!1}F(ir,co),ir.prototype.g=function(){return new wi(this.l,this.j)},ir.prototype.i=function(c){return function(){return c}}({});function wi(c,m){oe.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(wi,oe),r=wi.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Zn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;So(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function So(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?$n(this):Zn(this),this.readyState==3&&So(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,$n(this))},r.Qa=function(c){this.g&&(this.response=c,$n(this))},r.ga=function(){this.g&&$n(this)};function $n(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Zn(c)}r.setRequestHeader=function(c,m){this.u.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Zn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wo(c){let m="";return ht(c,function(_,b){m+=b,m+=":",m+=_,m+=`\r
`}),m}function xe(c,m,_){t:{for(b in _){var b=!1;break t}b=!0}b||(_=wo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Kt(c,m,_))}function qt(c){oe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(qt,oe);var Js=/^https?$/i,hs=["POST","PUT"];r=qt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,m,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?ho(this.o):ho(Gn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){hu(this,H);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)_.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())_.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(hs,m,void 0))||b||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,et]of _)this.g.setRequestHeader(H,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fs(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){hu(this,H)}};function hu(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,ta(c),Wn(c)}function ta(c){c.A||(c.A=!0,Ft(c,"complete"),Ft(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ft(this,"complete"),Ft(this,"abort"),Wn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wn(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Sn(c)!=4||c.Z()!=2)){if(c.u&&Sn(c)==4)Ge(c.Ea,0,c);else if(Ft(c,"readystatechange"),Sn(c)==4){c.h=!1;try{const et=c.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var b;if(b=et===0){var L=String(c.D).match(ss)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),b=!Js.test(L?L.toLowerCase():"")}_=b}if(_)Ft(c,"complete"),Ft(c,"success");else{c.m=6;try{var H=2<Sn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",ta(c)}}finally{Wn(c)}}}}function Wn(c,m){if(c.g){fs(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Ft(c,"ready");try{_.onreadystatechange=b}catch{}}}function fs(c){c.I&&(g.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Sn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Gs(m)}};function fu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kh(c){const m={};c=(c.g&&2<=Sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ct(c[b]))continue;var _=O(c[b]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}I(m,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function na(c){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,c),this.cb=ds("retryDelaySeedMs",1e4,c),this.Wa=ds("forwardChannelMaxRetries",2,c),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(c&&c.concurrentRequestLimit),this.Da=new cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(c,m,_,b){ne(0),this.W=c,this.H=m||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=vu(this,null,this.W),ra(this)};function Ro(c){if(du(c),c.G==3){var m=c.U++,_=un(c.I);if(Kt(_,"SID",c.K),Kt(_,"RID",m),Kt(_,"TYPE","terminate"),ms(c,_),m=new We(c,c.j,m),m.L=2,m.v=os(un(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=Eu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),is(m)}_u(c)}function ia(c){c.g&&(gs(c),c.g.cancel(),c.g=null)}function du(c){ia(c),c.u&&(g.clearTimeout(c.u),c.u=null),sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function ra(c){if(!Ys(c.h)&&!c.s){c.s=!0;var m=c.Ga;it||V(),dt||(it(),dt=!0),zt.add(m,c),c.B=0}}function Lh(c,m){return Xs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=me(D(c.Ga,c,m),No(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new We(this,this.j,c);let H=this.o;if(this.S&&(H?(H=S(H),N(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=mu(this,L,m),_=un(this.I),Kt(_,"RID",c),Kt(_,"CVER",22),this.D&&Kt(_,"X-HTTP-Session-Id",this.D),ms(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(wo(H)))+"&"+m:this.m&&xe(_,this.m,H)),$s(this.h,L),this.Ua&&Kt(_,"TYPE","init"),this.P?(Kt(_,"$req",m),Kt(_,"SID","null"),L.T=!0,Mn(L,_,null)):Mn(L,_,m),this.G=2}}else this.G==3&&(c?Io(this,c):this.i.length==0||Ys(this.h)||Io(this))};function Io(c,m){var _;m?_=m.l:_=c.U++;const b=un(c.I);Kt(b,"SID",c.K),Kt(b,"RID",_),Kt(b,"AID",c.T),ms(c,b),c.m&&c.o&&xe(b,c.m,c.o),_=new We(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=mu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),$s(c.h,_),Mn(_,b,m)}function ms(c,m){c.H&&ht(c.H,function(_,b){Kt(m,b,_)}),c.l&&Eo({},function(_,b){Kt(m,b,_)})}function mu(c,m,_){_=Math.min(c.i.length,_);var b=c.l?D(c.l.Na,c.l,c):null;t:{var L=c.i;let H=-1;for(;;){const et=["count="+_];H==-1?0<_?(H=L[0].g,et.push("ofs="+H)):H=0:et.push("ofs="+H);let Pt=!0;for(let Se=0;Se<_;Se++){let kt=L[Se].g;const De=L[Se].map;if(kt-=H,0>kt)H=Math.max(0,L[Se].g-100),Pt=!1;else try{Xn(De,et,"req"+kt+"_")}catch{b&&b(De)}}if(Pt){b=et.join("&");break t}}}return c=c.i.splice(0,_),m.D=c,b}function gu(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;it||V(),dt||(it(),dt=!0),zt.add(m,c),c.v=0}}function Co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=me(D(c.Fa,c),No(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=me(D(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),ia(this),pu(this))};function gs(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function pu(c){c.g=new We(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=un(c.qa);Kt(m,"RID","rpc"),Kt(m,"SID",c.K),Kt(m,"AID",c.T),Kt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Kt(m,"TO",c.ja),Kt(m,"TYPE","xmlhttp"),ms(c,m),c.m&&c.o&&xe(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=os(un(m)),_.m=null,_.P=!0,vi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),Co(this),ne(19))};function sa(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function yu(c,m){var _=null;if(c.g==m){sa(c),gs(c),c.g=null;var b=2}else if(_o(c.h,m))_=m.D,Je(c.h,m),b=1;else return;if(c.G!=0){if(m.o)if(b==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;b=Zi(),Ft(b,new Ae(b,_)),ra(c)}else gu(c);else if(L=m.s,L==3||L==0&&0<m.X||!(b==1&&Lh(c,m)||b==2&&Co(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),L){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function No(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function Ri(c,m){if(c.j.info("Error code "+m),m==2){var _=D(c.fb,c),b=c.Xa;const L=!b;b=new ge(b||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||as(b,"https"),os(b),L?us(b.toString(),_):Pn(b.toString(),_)}else ne(2);c.G=0,c.l&&c.l.sa(m),_u(c),du(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function _u(c){if(c.G=0,c.ka=[],c.l){const m=vo(c.h);(m.length!=0||c.i.length!=0)&&(Z(c.ka,m),Z(c.ka,c.i),c.h.i.length=0,J(c.i),c.i.length=0),c.l.ra()}}function vu(c,m,_){var b=_ instanceof ge?un(_):new ge(_);if(b.g!="")m&&(b.g=m+"."+b.g),nr(b,b.s);else{var L=g.location;b=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new ge(null);b&&as(H,b),m&&(H.g=m),L&&nr(H,L),_&&(H.l=_),b=H}return _=c.D,m=c.ya,_&&m&&Kt(b,_,m),Kt(b,"VER",c.la),ms(c,b),b}function Eu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new qt(new ir({eb:_})):new qt(c.pa),m.Ha(c.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(c,m){return new tn(c,m)};function tn(c,m){oe.call(this),this.g=new na(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!ct(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ct(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Jn(this)}F(tn,oe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ro(this.g)},tn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Vn(c),c=_);m.i.push(new lu(m.Ya++,c)),m.G==3&&ra(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,tn.aa.N.call(this)};function bu(c){yi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){t:{for(const _ in m){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}F(bu,yi);function Au(){mo.call(this),this.status=1}F(Au,mo);function Jn(c){this.g=c}F(Jn,Tu),Jn.prototype.ua=function(){Ft(this.g,"a")},Jn.prototype.ta=function(c){Ft(this.g,new bu(c))},Jn.prototype.sa=function(c){Ft(this.g,new Au)},Jn.prototype.ra=function(){Ft(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,cE=function(){return new aa},uE=function(){return Zi()},lE=Fn,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,Pc=tr,_i.COMPLETE="complete",oE=_i,fo.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",oe.prototype.listen=oe.prototype.K,El=fo,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,aE=qt}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore",fv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new vm("@firebase/firestore");function Pa(){return Ls.logLevel}function at(r,...t){if(Ls.logLevel<=Vt.DEBUG){const n=t.map(Dm);Ls.debug(`Firestore (${no}): ${r}`,...n)}}function Qi(r,...t){if(Ls.logLevel<=Vt.ERROR){const n=t.map(Dm);Ls.error(`Firestore (${no}): ${r}`,...n)}}function Lr(r,...t){if(Ls.logLevel<=Vt.WARN){const n=t.map(Dm);Ls.warn(`Firestore (${no}): ${r}`,...n)}}function Dm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,hE(r,s,n)}function hE(r,t,n){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qi(s),new Error(s)}function Ht(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||hE(t,o,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Xi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ER{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ht(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Hi,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;t.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},g=p=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Hi)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ht(typeof s.accessToken=="string",31837,{l:s}),new fE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ht(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class TR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new TR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ht(this.o===void 0,3512);const s=u=>{u.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,at("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>s(u))};const o=u=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=SR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Ct(r,t){return r<t?-1:r>t?1:0}function em(r,t){let n=0;for(;n<r.length&&n<t.length;){const s=r.codePointAt(n),o=t.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ct(s,o);{const u=dE(),f=wR(u.encode(mv(r,n)),u.encode(mv(t,n)));return f!==0?f:Ct(s,o)}}n+=s>65535?2:1}return Ct(r.length,t.length)}function mv(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function wR(r,t){for(let n=0;n<r.length&&n<t.length;++n)if(r[n]!==t[n])return Ct(r[n],t[n]);return Ct(r.length,t.length)}function Ka(r,t,n){return r.length===t.length&&r.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__name__";class ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&Tt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Tt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=ai.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Ct(t.length,n.length)}static compareSegments(t,n){const s=ai.isNumericId(t),o=ai.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ai.extractNumericId(t).compare(ai.extractNumericId(n)):em(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pr.fromString(t.substring(4,t.length-2))}}class ee extends ai{construct(t,n,s){return new ee(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new st(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ee(n)}static emptyPath(){return new ee([])}}const RR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ai{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return RR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gv}static keyField(){return new He([gv])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new st(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const g=t[o];if(g==="\\"){if(o+1===t.length)throw new st(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new st(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(s+=g,o++):(u(),o++)}if(u(),f)throw new st(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(ee.fromString(t))}static fromName(t){return new mt(ee.fromString(t).popFirst(5))}static empty(){return new mt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(r,t,n){if(!n)throw new st(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function IR(r,t,n,s){if(t===!0&&s===!0)throw new st(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function pv(r){if(!mt.isDocumentKey(r))throw new st(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yv(r){if(mt.isDocumentKey(r))throw new st(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function gE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Tt(12329,{type:typeof r})}function Ur(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new st(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(r);throw new st(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,t){const n={typeString:r};return t&&(n.value=t),n}function Gl(r,t){if(!gE(r))throw new st(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new st(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,vv=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(t){return Wt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*vv);return new Wt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new st(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<_v)throw new st(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new st(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vv}_compareTo(t){return this.seconds===t.seconds?Ct(this.nanoseconds,t.nanoseconds):Ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Gl(t,Wt._jsonSchema))return new Wt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-_v;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Ee("string",Wt._jsonSchemaVersion),seconds:Ee("number"),nanoseconds:Ee("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new Wt(0,0))}static max(){return new St(new Wt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function CR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=St.fromTimestamp(s===1e9?new Wt(n+1,0):new Wt(n,s));return new jr(o,mt.empty(),t)}function NR(r){return new jr(r.readTime,r.key,Vl)}class jr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new jr(St.min(),mt.empty(),Vl)}static max(){return new jr(St.max(),mt.empty(),Vl)}}function xR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=mt.comparator(r.documentKey,t.documentKey),n!==0?n:Ct(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==DR)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,s)=>{n(t)})}static reject(t){return new $((n,s)=>{s(t)})}static waitFor(t){return new $((n,s)=>{let o=0,u=0,f=!1;t.forEach(g=>{++o,g.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next(o=>o?$.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(t,n){return new $((s,o)=>{const u=t.length,f=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(t[y]).next(T=>{f[y]=T,++g,g===u&&s(f)},T=>o(T))}})}static doWhile(t,n){return new $((s,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):s()};u()})}}function VR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}dh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function mh(r){return r==null}function Xc(r){return r===0&&1/r==-1/0}function MR(r){return typeof r=="number"&&Number.isInteger(r)&&!Xc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="";function PR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Ev(t)),t=kR(r.get(n),t);return Ev(t)}function kR(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case pE:n+="";break;default:n+=u}}return n}function Ev(r){return r+pE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Qr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function yE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rc(this.root,t,this.comparator,!0)}}class Rc{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??qe.RED,this.left=o??qe.EMPTY,this.right=u??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new qe(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return qe.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(t){return new bv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class bv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new yn([])}unionWith(t){let n=new Ce(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new yn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ka(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new _E("Invalid base64 string: "+u):u}}(t);return new Fe(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new Fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const LR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(r){if(Ht(!!r,39018),typeof r=="string"){let t=0;const n=LR.exec(r);if(Ht(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Br(r){return typeof r=="string"?Fe.fromBase64String(r):Fe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="server_timestamp",EE="__type__",TE="__previous_value__",bE="__local_write_time__";function Mm(r){var t,n;return((n=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[EE])===null||n===void 0?void 0:n.stringValue)===vE}function gh(r){const t=r.mapValue.fields[TE];return Mm(t)?gh(t):t}function Ml(r){const t=zr(r.mapValue.fields[bE].timestampValue);return new Wt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,n,s,o,u,f,g,p,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const $c="(default)";class Pl{constructor(t,n){this.projectId=t,this.database=n||$c}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===$c}isEqual(t){return t instanceof Pl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="__type__",jR="__max__",Ic={mapValue:{}},SE="__vector__",Zc="value";function qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mm(r)?4:BR(r)?9007199254740991:zR(r)?10:11:Tt(28295,{value:r})}function mi(r,t){if(r===t)return!0;const n=qr(r);if(n!==qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ml(r).isEqual(Ml(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=zr(o.timestampValue),g=zr(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(o,u){return Br(o.bytesValue).isEqual(Br(u.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(o,u){return de(o.geoPointValue.latitude)===de(u.geoPointValue.latitude)&&de(o.geoPointValue.longitude)===de(u.geoPointValue.longitude)}(r,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return de(o.integerValue)===de(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=de(o.doubleValue),g=de(u.doubleValue);return f===g?Xc(f)===Xc(g):isNaN(f)&&isNaN(g)}return!1}(r,t);case 9:return Ka(r.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Tv(f)!==Tv(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!mi(f[p],g[p])))return!1;return!0}(r,t);default:return Tt(52216,{left:r})}}function kl(r,t){return(r.values||[]).find(n=>mi(n,t))!==void 0}function Ya(r,t){if(r===t)return 0;const n=qr(r),s=qr(t);if(n!==s)return Ct(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(r.booleanValue,t.booleanValue);case 2:return function(u,f){const g=de(u.integerValue||u.doubleValue),p=de(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,t);case 3:return Av(r.timestampValue,t.timestampValue);case 4:return Av(Ml(r),Ml(t));case 5:return em(r.stringValue,t.stringValue);case 6:return function(u,f){const g=Br(u),p=Br(f);return g.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(u,f){const g=u.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Ct(g[y],p[y]);if(T!==0)return T}return Ct(g.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(u,f){const g=Ct(de(u.latitude),de(f.latitude));return g!==0?g:Ct(de(u.longitude),de(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return Sv(r.arrayValue,t.arrayValue);case 10:return function(u,f){var g,p,y,T;const R=u.fields||{},D=f.fields||{},j=(g=R[Zc])===null||g===void 0?void 0:g.arrayValue,F=(p=D[Zc])===null||p===void 0?void 0:p.arrayValue,J=Ct(((y=j?.values)===null||y===void 0?void 0:y.length)||0,((T=F?.values)===null||T===void 0?void 0:T.length)||0);return J!==0?J:Sv(j,F)}(r.mapValue,t.mapValue);case 11:return function(u,f){if(u===Ic.mapValue&&f===Ic.mapValue)return 0;if(u===Ic.mapValue)return 1;if(f===Ic.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let R=0;R<p.length&&R<T.length;++R){const D=em(p[R],T[R]);if(D!==0)return D;const j=Ya(g[p[R]],y[T[R]]);if(j!==0)return j}return Ct(p.length,T.length)}(r.mapValue,t.mapValue);default:throw Tt(23264,{le:n})}}function Av(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ct(r,t);const n=zr(r),s=zr(t),o=Ct(n.seconds,s.seconds);return o!==0?o:Ct(n.nanos,s.nanos)}function Sv(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ya(n[o],s[o]);if(u)return u}return Ct(n.length,s.length)}function Xa(r){return nm(r)}function nm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=zr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Br(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return mt.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=nm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${nm(n.fields[f])}`;return o+"}"}(r.mapValue):Tt(61005,{value:r})}function kc(r){switch(qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gh(r);return t?16+kc(t):16;case 5:return 2*r.stringValue.length;case 6:return Br(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+kc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Qr(s.fields,(u,f)=>{o+=u.length+kc(f)}),o}(r.mapValue);default:throw Tt(13486,{value:r})}}function wv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function im(r){return!!r&&"integerValue"in r}function Pm(r){return!!r&&"arrayValue"in r}function Rv(r){return!!r&&"nullValue"in r}function Iv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lc(r){return!!r&&"mapValue"in r}function zR(r){var t,n;return((n=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[AE])===null||n===void 0?void 0:n.stringValue)===SE}function Rl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Qr(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Rl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rl(r.arrayValue.values[n]);return t}return Object.assign({},r)}function BR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Lc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rl(n)}setAll(t){let n=He.emptyPath(),s={},o=[];t.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=g.popLast()}f?s[g.lastSegment()]=Rl(f):o.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return mi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Lc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){Qr(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new on(Rl(this.value))}}function wE(r){const t=[];return Qr(r.fields,(n,s)=>{const o=new He([n]);if(Lc(s)){const u=wE(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,o,u,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(t){return new $e(t,0,St.min(),St.min(),St.min(),on.empty(),0)}static newFoundDocument(t,n,s,o){return new $e(t,1,n,St.min(),s,o,0)}static newNoDocument(t,n){return new $e(t,2,n,St.min(),St.min(),on.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,St.min(),St.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n){this.position=t,this.inclusive=n}}function Cv(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=mt.comparator(mt.fromName(f.referenceValue),n.key):s=Ya(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Nv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!mi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,n="asc"){this.field=t,this.dir=n}}function qR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{}class ve extends RE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new FR(t,n,s):n==="array-contains"?new KR(t,s):n==="in"?new YR(t,s):n==="not-in"?new XR(t,s):n==="array-contains-any"?new $R(t,s):new ve(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new GR(t,s):new QR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends RE{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new qn(t,n)}matches(t){return IE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function IE(r){return r.op==="and"}function CE(r){return HR(r)&&IE(r)}function HR(r){for(const t of r.filters)if(t instanceof qn)return!1;return!0}function rm(r){if(r instanceof ve)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(CE(r))return r.filters.map(t=>rm(t)).join(",");{const t=r.filters.map(n=>rm(n)).join(",");return`${r.op}(${t})`}}function NE(r,t){return r instanceof ve?function(s,o){return o instanceof ve&&s.op===o.op&&s.field.isEqual(o.field)&&mi(s.value,o.value)}(r,t):r instanceof qn?function(s,o){return o instanceof qn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,g)=>u&&NE(f,o.filters[g]),!0):!1}(r,t):void Tt(19439)}function xE(r){return r instanceof ve?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(r):r instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(xE).join(" ,")+"}"}(r):"Filter"}class FR extends ve{constructor(t,n,s){super(t,n,s),this.key=mt.fromName(s.referenceValue)}matches(t){const n=mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class GR extends ve{constructor(t,n){super(t,"in",n),this.keys=DE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class QR extends ve{constructor(t,n){super(t,"not-in",n),this.keys=DE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function DE(r,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>mt.fromName(s.referenceValue))}class KR extends ve{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Pm(n)&&kl(n.arrayValue,this.value)}}class YR extends ve{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&kl(this.value.arrayValue,n)}}class XR extends ve{constructor(t,n){super(t,"not-in",n)}matches(t){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kl(this.value.arrayValue,n)}}class $R extends ve{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>kl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t,n=null,s=[],o=[],u=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Pe=null}}function xv(r,t=null,n=[],s=[],o=null,u=null,f=null){return new ZR(r,t,n,s,o,u,f)}function km(r){const t=wt(r);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>rm(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),mh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Xa(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Xa(s)).join(",")),t.Pe=n}return t.Pe}function Lm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!qR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!NE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Nv(r.startAt,t.startAt)&&Nv(r.endAt,t.endAt)}function sm(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,n=null,s=[],o=[],u=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function WR(r,t,n,s,o,u,f,g){return new Ql(r,t,n,s,o,u,f,g)}function Um(r){return new Ql(r)}function Dv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function OE(r){return r.collectionGroup!==null}function Il(r){const t=wt(r);if(t.Te===null){t.Te=[];const n=new Set;for(const u of t.explicitOrderBy)t.Te.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ce(He.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.Te.push(new Jc(u,s))}),n.has(He.keyField().canonicalString())||t.Te.push(new Jc(He.keyField(),s))}return t.Te}function ui(r){const t=wt(r);return t.Ie||(t.Ie=JR(t,Il(r))),t.Ie}function JR(r,t){if(r.limitType==="F")return xv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Jc(o.field,u)});const n=r.endAt?new Wc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wc(r.startAt.position,r.startAt.inclusive):null;return xv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function am(r,t){const n=r.filters.concat([t]);return new Ql(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function om(r,t,n){return new Ql(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function ph(r,t){return Lm(ui(r),ui(t))&&r.limitType===t.limitType}function VE(r){return`${km(ui(r))}|lt:${r.limitType}`}function ka(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>xE(o)).join(", ")}]`),mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Xa(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Xa(o)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function yh(r,t){return t.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):mt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,t)&&function(s,o){for(const u of Il(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,t)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,t)&&function(s,o){return!(s.startAt&&!function(f,g,p){const y=Cv(f,g,p);return f.inclusive?y<=0:y<0}(s.startAt,Il(s),o)||s.endAt&&!function(f,g,p){const y=Cv(f,g,p);return f.inclusive?y>=0:y>0}(s.endAt,Il(s),o))}(r,t)}function tI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ME(r){return(t,n)=>{let s=!1;for(const o of Il(r)){const u=eI(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function eI(r,t,n){const s=r.field.isKeyField()?mt.comparator(t.key,n.key):function(u,f,g){const p=f.data.field(u),y=g.data.field(u);return p!==null&&y!==null?Ya(p,y):Tt(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Tt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Qr(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return yE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new se(mt.comparator);function Ki(){return nI}const PE=new se(mt.comparator);function Tl(...r){let t=PE;for(const n of r)t=t.insert(n.key,n);return t}function kE(r){let t=PE;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Os(){return Cl()}function LE(){return Cl()}function Cl(){return new Bs(r=>r.toString(),(r,t)=>r.isEqual(t))}const iI=new se(mt.comparator),rI=new Ce(mt.comparator);function Mt(...r){let t=rI;for(const n of r)t=t.add(n);return t}const sI=new Ce(Ct);function aI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(t)?"-0":t}}function UE(r){return{integerValue:""+r}}function oI(r,t){return MR(t)?UE(t):jm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function lI(r,t,n){return r instanceof th?function(o,u){const f={fields:{[EE]:{stringValue:vE},[bE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Mm(u)&&(u=gh(u)),u&&(f.fields[TE]=u),{mapValue:f}}(n,t):r instanceof Ll?zE(r,t):r instanceof Ul?BE(r,t):function(o,u){const f=jE(o,u),g=Ov(f)+Ov(o.Ee);return im(f)&&im(o.Ee)?UE(g):jm(o.serializer,g)}(r,t)}function uI(r,t,n){return r instanceof Ll?zE(r,t):r instanceof Ul?BE(r,t):n}function jE(r,t){return r instanceof eh?function(s){return im(s)||function(u){return!!u&&"doubleValue"in u}(s)}(t)?t:{integerValue:0}:null}class th extends _h{}class Ll extends _h{constructor(t){super(),this.elements=t}}function zE(r,t){const n=qE(t);for(const s of r.elements)n.some(o=>mi(o,s))||n.push(s);return{arrayValue:{values:n}}}class Ul extends _h{constructor(t){super(),this.elements=t}}function BE(r,t){let n=qE(t);for(const s of r.elements)n=n.filter(o=>!mi(o,s));return{arrayValue:{values:n}}}class eh extends _h{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Ov(r){return de(r.integerValue||r.doubleValue)}function qE(r){return Pm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function cI(r,t){return r.field.isEqual(t.field)&&function(s,o){return s instanceof Ll&&o instanceof Ll||s instanceof Ul&&o instanceof Ul?Ka(s.elements,o.elements,mi):s instanceof eh&&o instanceof eh?mi(s.Ee,o.Ee):s instanceof th&&o instanceof th}(r.transform,t.transform)}class hI{constructor(t,n){this.version=t,this.transformResults=n}}class ci{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class vh{}function HE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new GE(r.key,ci.none()):new Kl(r.key,r.data,ci.none());{const n=r.data,s=on.empty();let o=new Ce(He.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Kr(r.key,s,new yn(o.toArray()),ci.none())}}function fI(r,t,n){r instanceof Kl?function(o,u,f){const g=o.value.clone(),p=Mv(o.fieldTransforms,u,f.transformResults);g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,t,n):r instanceof Kr?function(o,u,f){if(!Uc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Mv(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(FE(o)),p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function Nl(r,t,n,s){return r instanceof Kl?function(u,f,g,p){if(!Uc(u.precondition,f))return g;const y=u.value.clone(),T=Pv(u.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(r,t,n,s):r instanceof Kr?function(u,f,g,p){if(!Uc(u.precondition,f))return g;const y=Pv(u.fieldTransforms,p,f),T=f.data;return T.setAll(FE(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(R=>R.field))}(r,t,n,s):function(u,f,g){return Uc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(r,t,n)}function dI(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=jE(s.transform,o||null);u!=null&&(n===null&&(n=on.empty()),n.set(s.field,u))}return n||null}function Vv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ka(s,o,(u,f)=>cI(u,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Kl extends vh{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Kr extends vh{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function FE(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function Mv(r,t,n){const s=new Map;Ht(r.length===n.length,32656,{Ae:n.length,Re:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,g=t.data.field(u.field);s.set(u.field,uI(f,g,n[o]))}return s}function Pv(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,lI(u,f,t))}return s}class GE extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mI extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&fI(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Nl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Nl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=LE();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const p=HE(f,g);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(St.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mt())}isEqual(t){return this.batchId===t.batchId&&Ka(this.mutations,t.mutations,(n,s)=>Vv(n,s))&&Ka(this.baseMutations,t.baseMutations,(n,s)=>Vv(n,s))}}class zm{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Ht(t.mutations.length===s.length,58842,{Ve:t.mutations.length,me:s.length});let o=function(){return iI}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new zm(t,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,Ut;function _I(r){switch(r){case Y.OK:return Tt(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Tt(15467,{code:r})}}function QE(r){if(r===void 0)return Qi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case _e.OK:return Y.OK;case _e.CANCELLED:return Y.CANCELLED;case _e.UNKNOWN:return Y.UNKNOWN;case _e.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _e.INTERNAL:return Y.INTERNAL;case _e.UNAVAILABLE:return Y.UNAVAILABLE;case _e.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _e.NOT_FOUND:return Y.NOT_FOUND;case _e.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _e.ABORTED:return Y.ABORTED;case _e.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _e.DATA_LOSS:return Y.DATA_LOSS;default:return Tt(39323,{code:r})}}(Ut=_e||(_e={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Pr([4294967295,4294967295],0);function kv(r){const t=dE().encode(r),n=new sE;return n.update(t),new Uint8Array(n.digest())}function Lv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Pr([n,s],0),new Pr([o,u],0)]}class Bm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(s<0)throw new bl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Pr.fromNumber(this.fe)}pe(t,n,s){let o=t.add(n.multiply(Pr.fromNumber(s)));return o.compare(vI)===1&&(o=new Pr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=kv(t),[s,o]=Lv(n);for(let u=0;u<this.hashCount;u++){const f=this.pe(s,o,u);if(!this.ye(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Bm(u,o,n);return s.forEach(g=>f.insert(g)),f}insert(t){if(this.fe===0)return;const n=kv(t),[s,o]=Lv(n);for(let u=0;u<this.hashCount;u++){const f=this.pe(s,o,u);this.we(f)}}we(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,Yl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Eh(St.min(),o,new se(Ct),Ki(),Mt())}}class Yl{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Yl(s,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,n,s,o){this.Se=t,this.removedTargetIds=n,this.key=s,this.be=o}}class KE{constructor(t,n){this.targetId=t,this.De=n}}class YE{constructor(t,n,s=Fe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Uv{constructor(){this.ve=0,this.Ce=jv(),this.Fe=Fe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Mt(),n=Mt(),s=Mt();return this.Ce.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Tt(38017,{changeType:u})}}),new Yl(this.Fe,this.Me,t,n,s)}ke(){this.xe=!1,this.Ce=jv()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class EI{constructor(t){this.We=t,this.Ge=new Map,this.ze=Ki(),this.je=Cc(),this.Je=Cc(),this.He=new se(Ct)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const s=this.tt(n);switch(t.state){case 0:this.nt(n)&&s.Be(t.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(t.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((s,o)=>{this.nt(o)&&n(o)})}it(t){const n=t.targetId,s=t.De.count,o=this.st(n);if(o){const u=o.target;if(sm(u))if(s===0){const f=new mt(u.path);this.Xe(n,f,$e.newNoDocument(f,St.min()))}else Ht(s===1,20013,{expectedCount:s});else{const f=this.ot(n);if(f!==s){const g=this._t(t),p=g?this.ut(g,t,f):1;if(p!==0){this.rt(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,y)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=Br(s).toUint8Array()}catch(p){if(p instanceof _E)return Lr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Bm(f,o,u)}catch(p){return Lr(p instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.fe===0?null:g}ut(t,n,s){return n.De.count===s-this.ht(t,n.targetId)?0:2}ht(t,n){const s=this.We.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.We.lt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(g)||(this.Xe(n,u,null),o++)}),o}Pt(t){const n=new Map;this.Ge.forEach((u,f)=>{const g=this.st(f);if(g){if(u.current&&sm(g.target)){const p=new mt(g.target.path);this.Tt(p).has(f)||this.It(f,p)||this.Xe(f,p,$e.newNoDocument(p,t))}u.Ne&&(n.set(f,u.Le()),u.ke())}});let s=Mt();this.Je.forEach((u,f)=>{let g=!0;f.forEachWhile(p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(u))}),this.ze.forEach((u,f)=>f.setReadTime(t));const o=new Eh(t,n,this.He,this.ze,s);return this.ze=Ki(),this.je=Cc(),this.Je=Cc(),this.He=new se(Ct),o}Ze(t,n){if(!this.nt(t))return;const s=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,s){if(!this.nt(t))return;const o=this.tt(t);this.It(t,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new Uv,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Ce(Ct),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Ce(Ct),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||at("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Uv),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Cc(){return new se(mt.comparator)}function jv(){return new se(mt.comparator)}const TI={asc:"ASCENDING",desc:"DESCENDING"},bI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AI={and:"AND",or:"OR"};class SI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function lm(r,t){return r.useProto3Json||mh(t)?t:{value:t}}function nh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function XE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function wI(r,t){return nh(r,t.toTimestamp())}function hi(r){return Ht(!!r,49232),St.fromTimestamp(function(n){const s=zr(n);return new Wt(s.seconds,s.nanos)}(r))}function qm(r,t){return um(r,t).canonicalString()}function um(r,t){const n=function(o){return new ee(["projects",o.projectId,"databases",o.database])}(r).child("documents");return t===void 0?n:n.child(t)}function $E(r){const t=ee.fromString(r);return Ht(eT(t),10190,{key:t.toString()}),t}function cm(r,t){return qm(r.databaseId,t.path)}function qd(r,t){const n=$E(t);if(n.get(1)!==r.databaseId.projectId)throw new st(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new st(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new mt(WE(n))}function ZE(r,t){return qm(r.databaseId,t)}function RI(r){const t=$E(r);return t.length===4?ee.emptyPath():WE(t)}function hm(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WE(r){return Ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function zv(r,t,n){return{name:cm(r,t),fields:n.value.mapValue.fields}}function II(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Tt(39313,{state:y})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(y,T){return y.useProto3Json?(Ht(T===void 0||typeof T=="string",58123),Fe.fromBase64String(T||"")):(Ht(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Fe.fromUint8Array(T||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&function(y){const T=y.code===void 0?Y.UNKNOWN:QE(y.code);return new st(T,y.message||"")}(f);n=new YE(s,o,u,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=qd(r,s.document.name),u=hi(s.document.updateTime),f=s.document.createTime?hi(s.document.createTime):St.min(),g=new on({mapValue:{fields:s.document.fields}}),p=$e.newFoundDocument(o,u,f,g),y=s.targetIds||[],T=s.removedTargetIds||[];n=new jc(y,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=qd(r,s.document),u=s.readTime?hi(s.readTime):St.min(),f=$e.newNoDocument(o,u),g=s.removedTargetIds||[];n=new jc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=qd(r,s.document),u=s.removedTargetIds||[];n=new jc([],u,o,null)}else{if(!("filter"in t))return Tt(11601,{At:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new yI(o,u),g=s.targetId;n=new KE(g,f)}}return n}function CI(r,t){let n;if(t instanceof Kl)n={update:zv(r,t.key,t.value)};else if(t instanceof GE)n={delete:cm(r,t.key)};else if(t instanceof Kr)n={update:zv(r,t.key,t.data),updateMask:LI(t.fieldMask)};else{if(!(t instanceof mI))return Tt(16599,{Rt:t.type});n={verify:cm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(u,f){const g=f.transform;if(g instanceof th)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ll)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ul)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof eh)return{fieldPath:f.field.canonicalString(),increment:g.Ee};throw Tt(20930,{transform:f.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:wI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Tt(27497)}(r,t.precondition)),n}function NI(r,t){return r&&r.length>0?(Ht(t!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?hi(o.updateTime):hi(u);return f.isEqual(St.min())&&(f=hi(u)),new hI(f,o.transformResults||[])}(n,t))):[]}function xI(r,t){return{documents:[ZE(r,t.path)]}}function DI(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ZE(r,o);const u=function(y){if(y.length!==0)return tT(qn.create(y,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(T=>function(D){return{field:La(D.field),direction:MI(D.dir)}}(T))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=lm(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(t.endAt)),{Vt:n,parent:o}}function OI(r){let t=RI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ht(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];n.where&&(u=function(R){const D=JE(R);return D instanceof qn&&CE(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(R){return R.map(D=>function(F){return new Jc(Ua(F.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(R){let D;return D=typeof R=="object"?R.value:R,mh(D)?null:D}(n.limit));let p=null;n.startAt&&(p=function(R){const D=!!R.before,j=R.values||[];return new Wc(j,D)}(n.startAt));let y=null;return n.endAt&&(y=function(R){const D=!R.before,j=R.values||[];return new Wc(j,D)}(n.endAt)),WR(t,o,f,u,g,"F",p,y)}function VI(r,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return ve.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ua(n.unaryFilter.field);return ve.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ua(n.unaryFilter.field);return ve.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ua(n.unaryFilter.field);return ve.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(r):r.fieldFilter!==void 0?function(n){return ve.create(Ua(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(s=>JE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(n.compositeFilter.op))}(r):Tt(30097,{filter:r})}function MI(r){return TI[r]}function PI(r){return bI[r]}function kI(r){return AI[r]}function La(r){return{fieldPath:r.canonicalString()}}function Ua(r){return He.fromServerFormat(r.fieldPath)}function tT(r){return r instanceof ve?function(n){if(n.op==="=="){if(Iv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NAN"}};if(Rv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NAN"}};if(Rv(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(n.field),op:PI(n.op),value:n.value}}}(r):r instanceof qn?function(n){const s=n.getFilters().map(o=>tT(o));return s.length===1?s[0]:{compositeFilter:{op:kI(n.op),filters:s}}}(r):Tt(54877,{filter:r})}function LI(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function eT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t,n,s,o,u=St.min(),f=St.min(),g=Fe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t){this.gt=t}}function jI(r){const t=OI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?om(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Dn=new BI}addToCollectionParentIndex(t,n){return this.Dn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(jr.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(jr.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class BI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new Ce(ee.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ce(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(nT,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new $a(0)}static ur(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LruGarbageCollector",qI=1048576;function Hv([r,t],[n,s]){const o=Ct(r,n);return o===0?Ct(t,s):o}class HI{constructor(t){this.Tr=t,this.buffer=new Ce(Hv),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){at(qv,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?at(qv,"Ignoring IndexedDB error during garbage collection: ",n):await io(n)}await this.Rr(3e5)})}}class GI{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return $.resolve(dh.ue);const s=new HI(n);return this.Vr.forEachTarget(t,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(t,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.Vr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Bv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bv):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let s,o,u,f,g,p,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(t,o))).next(R=>(s=R,g=Date.now(),this.removeTargets(t,s,n))).next(R=>(u=R,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(R=>(y=Date.now(),Pa()<=Vt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${R} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}function QI(r,t){return new GI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.changes=new Bs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(s!==null&&Nl(s.mutation,o,yn.empty(),Wt.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Mt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Mt()){const o=Os();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,s).next(u=>{let f=Tl();return u.forEach((g,p)=>{f=f.insert(g,p.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=Os();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Mt()))}populateOverlays(t,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,g)=>{n.set(f,g)})})}computeViews(t,n,s,o){let u=Ki();const f=Cl(),g=function(){return Cl()}();return n.forEach((p,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Kr)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Nl(T.mutation,y,T.mutation.getFieldMask(),Wt.now())):f.set(y.key,yn.empty())}),this.recalculateAndSaveOverlays(t,u).next(p=>(p.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>{var R;return g.set(y,new YI(T,(R=f.get(y))!==null&&R!==void 0?R:null))}),g))}recalculateAndSaveOverlays(t,n){const s=Cl();let o=new se((f,g)=>f-g),u=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const g of f)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||yn.empty();T=g.applyToLocalView(y,T),s.set(p,T);const R=(o.get(g.batchId)||Mt()).add(p);o=o.insert(g.batchId,R)})}).next(()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,R=LE();T.forEach(D=>{if(!u.has(D)){const j=HE(n.get(D),s.get(D));j!==null&&R.set(D,j),u=u.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(t,y,R))}return $.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,o){return function(f){return mt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):OE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):$.resolve(Os());let g=Vl,p=u;return f.next(y=>$.forEach(y,(T,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),u.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next(D=>{p=p.insert(T,D)}))).next(()=>this.populateOverlays(t,y,u)).next(()=>this.computeViews(t,p,y,Mt())).next(T=>({batchId:g,changes:kE(T)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new mt(n)).next(s=>{let o=Tl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=Tl();return this.indexManager.getCollectionParents(t,u).next(g=>$.forEach(g,p=>{const y=function(R,D){return new Ql(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,s,o).next(T=>{T.forEach((R,D)=>{f=f.insert(R,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o))).next(f=>{u.forEach((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,$e.newInvalidDocument(T)))});let g=Tl();return f.forEach((p,y)=>{const T=u.get(p);T!==void 0&&Nl(T.mutation,y,yn.empty(),Wt.now()),yh(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:jI(o.bundledQuery),readTime:hi(o.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.overlays=new se(mt.comparator),this.kr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Os();return $.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((o,u)=>{this.wt(t,n,u)}),$.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.kr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const o=Os(),u=n.length+1,f=new mt(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return $.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new se((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=Os(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Os(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>g.set(y,T)),!(g.size()>=o)););return $.resolve(g)}wt(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new pI(n,s));let u=this.kr.get(n);u===void 0&&(u=Mt(),this.kr.set(n,u)),this.kr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.qr=new Ce(Pe.Qr),this.$r=new Ce(Pe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Wr(new Pe(t,n))}Gr(t,n){t.forEach(s=>this.removeReference(s,n))}zr(t){const n=new mt(new ee([])),s=new Pe(n,t),o=new Pe(n,t+1),u=[];return this.$r.forEachInRange([s,o],f=>{this.Wr(f),u.push(f.key)}),u}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new mt(new ee([])),s=new Pe(n,t),o=new Pe(n,t+1);let u=Mt();return this.$r.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new Pe(t,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return mt.comparator(t.key,n.key)||Ct(t.Hr,n.Hr)}static Ur(t,n){return Ct(t.Hr,n.Hr)||mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ce(Pe.Qr)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new gI(u,n,s,o);this.mutationQueue.push(f);for(const g of o)this.Yr=this.Yr.add(new Pe(g.key,u)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return $.resolve(f)}lookupMutationBatch(t,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return $.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Vm:this.er-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),o=new Pe(n,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([s,o],f=>{const g=this.Zr(f.Hr);u.push(g)}),$.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Ct);return n.forEach(o=>{const u=new Pe(o,0),f=new Pe(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,f],g=>{s=s.add(g.Hr)})}),$.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;mt.isDocumentKey(u)||(u=u.child(""));const f=new Pe(new mt(u),0);let g=new Ce(Ct);return this.Yr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Hr)),!0)},f),$.resolve(this.ei(g))}ei(t){const n=[];return t.forEach(s=>{const o=this.Zr(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Ht(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return $.forEach(n.mutations,o=>{const u=new Pe(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Yr=s})}rr(t){}containsKey(t,n){const s=new Pe(n,0),o=this.Yr.firstAfterOrEqual(s);return $.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t){this.ni=t,this.docs=function(){return new se(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=Ki();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():$e.newInvalidDocument(o))}),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=Ki();const f=n.path,g=new mt(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||xR(NR(T),s)<=0||(o.has(T.key)||yh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return $.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Tt(9500)}ri(t,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new e2(this)}getSize(t){return $.resolve(this.size)}}class e2 extends KI{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(t,o)):this.Or.removeEntry(s)}),$.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.persistence=t,this.ii=new Bs(n=>km(n),Lm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.si=0,this.oi=new Hm,this.targetCount=0,this._i=$a.ar()}forEachTarget(t,n){return this.ii.forEach((s,o)=>n(o)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),$.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new $a(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.hr(n),$.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.ii.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.ii.delete(f),u.push(this.removeMatchingKeysForTargetId(t,g.targetId)),o++)}),$.waitFor(u).next(()=>o)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.ii.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this.oi.Kr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this.oi.Gr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),$.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this.oi.Jr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n){this.ai={},this.overlays={},this.ui=new dh(0),this.ci=!1,this.ci=!0,this.li=new WI,this.referenceDelegate=t(this),this.hi=new n2(this),this.indexManager=new zI,this.remoteDocumentCache=function(o){return new t2(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new UI(n),this.Ti=new $I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ZI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ai[t.toKey()];return s||(s=new JI(n,this.referenceDelegate),this.ai[t.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,s){at("MemoryPersistence","Starting transaction:",t);const o=new i2(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ei(t,n){return $.or(Object.values(this.ai).map(s=>()=>s.containsKey(t,n)))}}class i2 extends OR{constructor(t){super(),this.currentSequenceNumber=t}}class Fm{constructor(t){this.persistence=t,this.Ai=new Hm,this.Ri=null}static Vi(t){return new Fm(t)}get mi(){if(this.Ri)return this.Ri;throw Tt(60996)}addReference(t,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.mi.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,s=>{const o=mt.fromPath(s);return this.fi(t,o).next(u=>{u||n.removeEntry(o,St.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class ih{constructor(t,n){this.persistence=t,this.gi=new Bs(s=>PR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=QI(this,n)}static Vi(t,n){return new ih(t,n)}Ii(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(o=>s+o))}yr(t){let n=0;return this.gr(t,s=>{n++}).next(()=>n)}gr(t,n){return $.forEach(this.gi,(s,o)=>this.Sr(t,s,o).next(u=>u?$.resolve():n(o)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ri(t,f=>this.Sr(t,f,n).next(g=>{g||(s++,u.removeEntry(f,St.min()))})).next(()=>u.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),$.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=kc(t.data.value)),n}Sr(t,n,s){return $.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.gi.get(n);return $.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Is=s,this.ds=o}static Es(t,n){let s=Mt(),o=Mt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gm(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return jA()?8:VR(Ze())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ps(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ys(t,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new r2;return this.ws(t,n,f).next(g=>{if(u.result=g,this.Rs)return this.Ss(t,n,f,g.size)})}).next(()=>u.result)}Ss(t,n,s,o){return s.documentReadCount<this.Vs?(Pa()<=Vt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Pa()<=Vt.DEBUG&&at("QueryEngine","Query:",ka(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(Pa()<=Vt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(n))):$.resolve())}ps(t,n){if(Dv(n))return $.resolve(null);let s=ui(n);return this.indexManager.getIndexType(t,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=om(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(u=>{const f=Mt(...u);return this.gs.getDocuments(t,f).next(g=>this.indexManager.getMinOffset(t,s).next(p=>{const y=this.bs(n,g);return this.Ds(n,y,f,p.readTime)?this.ps(t,om(n,null,"F")):this.vs(t,y,n,p)}))})))}ys(t,n,s,o){return Dv(n)||o.isEqual(St.min())?$.resolve(null):this.gs.getDocuments(t,s).next(u=>{const f=this.bs(n,u);return this.Ds(n,f,s,o)?$.resolve(null):(Pa()<=Vt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ka(n)),this.vs(t,f,n,CR(o,Vl)).next(g=>g))})}bs(t,n){let s=new Ce(ME(t));return n.forEach((o,u)=>{yh(t,u)&&(s=s.add(u))}),s}Ds(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ws(t,n,s){return Pa()<=Vt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ka(n)),this.gs.getDocumentsMatchingQuery(t,n,jr.min(),s)}vs(t,n,s,o){return this.gs.getDocumentsMatchingQuery(t,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="LocalStore",a2=3e8;class o2{constructor(t,n,s,o){this.persistence=t,this.Cs=n,this.serializer=o,this.Fs=new se(Ct),this.Ms=new Bs(u=>km(u),Lm),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(s)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new XI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function l2(r,t,n,s){return new o2(r,t,n,s)}async function rT(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ns(t),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],g=[];let p=Mt();for(const y of o){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(y=>({Bs:y,removedBatchIds:f,addedBatchIds:g}))})})}function u2(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.Os.newChangeBuffer({trackRemovals:!0});return function(g,p,y,T){const R=y.batch,D=R.keys();let j=$.resolve();return D.forEach(F=>{j=j.next(()=>T.getEntry(p,F)).next(J=>{const Z=y.docVersions.get(F);Ht(Z!==null,48541),J.version.compareTo(Z)<0&&(R.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),T.addEntry(J)))})}),j.next(()=>g.mutationQueue.removeMutationBatch(p,R))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=Mt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(t))).next(()=>n.localDocuments.getDocuments(s,o))})}function sT(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function c2(r,t){const n=wt(r),s=t.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const g=[];t.targetChanges.forEach((T,R)=>{const D=o.get(R);if(!D)return;g.push(n.hi.removeMatchingKeys(u,T.removedDocuments,R).next(()=>n.hi.addMatchingKeys(u,T.addedDocuments,R)));let j=D.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(R)!==null?j=j.withResumeToken(Fe.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,s)),o=o.insert(R,j),function(J,Z,gt){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=a2?!0:gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0}(D,j,T)&&g.push(n.hi.updateTargetData(u,j))});let p=Ki(),y=Mt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(h2(u,f,t.documentUpdates).next(T=>{p=T.Ls,y=T.ks})),!s.isEqual(St.min())){const T=n.hi.getLastRemoteSnapshotVersion(u).next(R=>n.hi.setTargetsMetadata(u,u.currentSequenceNumber,s));g.push(T)}return $.waitFor(g).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.Fs=o,u))}function h2(r,t,n){let s=Mt(),o=Mt();return n.forEach(u=>s=s.add(u)),t.getEntries(r,s).next(u=>{let f=Ki();return n.forEach((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(St.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):at(Qm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{Ls:f,ks:o}})}function f2(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Vm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function d2(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.hi.getTargetData(s,t).next(u=>u?(o=u,$.resolve(o)):n.hi.allocateTargetId(s).next(f=>(o=new xr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(t,s.targetId)),s})}async function fm(r,t,n){const s=wt(r),o=s.Fs.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!ro(f))throw f;at(Qm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Fs=s.Fs.remove(t),s.Ms.delete(o.target)}function Fv(r,t,n){const s=wt(r);let o=St.min(),u=Mt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,y,T){const R=wt(p),D=R.Ms.get(T);return D!==void 0?$.resolve(R.Fs.get(D)):R.hi.getTargetData(y,T)}(s,f,ui(t)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(f,g.targetId).next(p=>{u=p})}).next(()=>s.Cs.getDocumentsMatchingQuery(f,t,n?o:St.min(),n?u:Mt())).next(g=>(m2(s,tI(t),g),{documents:g,qs:u})))}function m2(r,t,n){let s=r.xs.get(t)||St.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.xs.set(t,s)}class Gv{constructor(){this.activeTargetIds=aI()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class g2{constructor(){this.Fo=new Gv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,s){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Gv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="ConnectivityMonitor";class Kv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){at(Qv,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){at(Qv,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function dm(){return Nc===null?Nc=function(){return 268435456+Math.round(2147483648*Math.random())}():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _2{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===$c?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(t,n,s,o,u){const f=dm(),g=this.Go(t,n.toUriEncodedString());at(Hd,`Sending RPC '${t}' ${f}:`,g,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,u);const{host:y}=new URL(g),T=Ja(y);return this.jo(t,g,p,s,T).then(R=>(at(Hd,`Received RPC '${t}' ${f}: `,R),R),R=>{throw Lr(Hd,`RPC '${t}' ${f} failed with error: `,R,"url: ",g,"request:",s),R})}Jo(t,n,s,o,u,f){return this.Wo(t,n,s,o,u)}zo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+no}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}Go(t,n){const s=y2[t];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class E2 extends _2{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,s,o,u){const f=dm();return new Promise((g,p)=>{const y=new aE;y.setWithCredentials(!0),y.listenOnce(oE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Pc.NO_ERROR:const R=y.getResponseJson();at(Ye,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(R)),g(R);break;case Pc.TIMEOUT:at(Ye,`RPC '${t}' ${f} timed out`),p(new st(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const D=y.getStatus();if(at(Ye,`RPC '${t}' ${f} failed with status:`,D,"response text:",y.getResponseText()),D>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const F=j?.error;if(F&&F.status&&F.message){const J=function(gt){const ct=gt.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ct)>=0?ct:Y.UNKNOWN}(F.status);p(new st(J,F.message))}else p(new st(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new st(Y.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{c_:t,streamId:f,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{at(Ye,`RPC '${t}' ${f} completed.`)}});const T=JSON.stringify(o);at(Ye,`RPC '${t}' ${f} sending request:`,o),y.send(n,"POST",T,s,15)})}P_(t,n,s){const o=dm(),u=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=cE(),g=uE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");at(Ye,`Creating RPC '${t}' stream ${o}: ${T}`,p);const R=f.createWebChannel(T,p);this.T_(R);let D=!1,j=!1;const F=new v2({Ho:Z=>{j?at(Ye,`Not sending because RPC '${t}' stream ${o} is closed:`,Z):(D||(at(Ye,`Opening RPC '${t}' stream ${o} transport.`),R.open(),D=!0),at(Ye,`RPC '${t}' stream ${o} sending:`,Z),R.send(Z))},Yo:()=>R.close()}),J=(Z,gt,ct)=>{Z.listen(gt,ot=>{try{ct(ot)}catch(nt){setTimeout(()=>{throw nt},0)}})};return J(R,El.EventType.OPEN,()=>{j||(at(Ye,`RPC '${t}' stream ${o} transport opened.`),F.s_())}),J(R,El.EventType.CLOSE,()=>{j||(j=!0,at(Ye,`RPC '${t}' stream ${o} transport closed`),F.__(),this.I_(R))}),J(R,El.EventType.ERROR,Z=>{j||(j=!0,Lr(Ye,`RPC '${t}' stream ${o} transport errored. Name:`,Z.name,"Message:",Z.message),F.__(new st(Y.UNAVAILABLE,"The operation could not be completed")))}),J(R,El.EventType.MESSAGE,Z=>{var gt;if(!j){const ct=Z.data[0];Ht(!!ct,16349);const ot=ct,nt=ot?.error||((gt=ot[0])===null||gt===void 0?void 0:gt.error);if(nt){at(Ye,`RPC '${t}' stream ${o} received error:`,nt);const lt=nt.status;let ht=function(A){const N=_e[A];if(N!==void 0)return QE(N)}(lt),I=nt.message;ht===void 0&&(ht=Y.INTERNAL,I="Unknown error status: "+lt+" with message "+nt.message),j=!0,F.__(new st(ht,I)),R.close()}else at(Ye,`RPC '${t}' stream ${o} received:`,ct),F.a_(ct)}}),J(g,lE.STAT_EVENT,Z=>{Z.stat===tm.PROXY?at(Ye,`RPC '${t}' stream ${o} detected buffering proxy`):Z.stat===tm.NOPROXY&&at(Ye,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.o_()},0),F}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r){return new SI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Fi=t,this.timerId=n,this.d_=s,this.E_=o,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-s);o>0&&at("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="PersistentStream";class oT{constructor(t,n,s,o,u,f,g,p){this.Fi=t,this.w_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new aT(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===n&&this.W_(s,o)},s=>{t(()=>{const o=new st(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(t,n){const s=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return at(Yv,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(at(Yv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T2 extends oT{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=II(this.serializer,t),s=function(u){if(!("targetChange"in u))return St.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?St.min():f.readTime?hi(f.readTime):St.min()}(t);return this.listener.J_(n,s)}H_(t){const n={};n.database=hm(this.serializer),n.addTarget=function(u,f){let g;const p=f.target;if(g=sm(p)?{documents:xI(u,p)}:{query:DI(u,p).Vt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=XE(u,f.resumeToken);const y=lm(u,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(St.min())>0){g.readTime=nh(u,f.snapshotVersion.toTimestamp());const y=lm(u,f.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,t);const s=VI(this.serializer,t);s&&(n.labels=s),this.k_(n)}Y_(t){const n={};n.database=hm(this.serializer),n.removeTarget=t,this.k_(n)}}class b2 extends oT{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return Ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=NI(t.writeResults,t.commitTime),s=hi(t.commitTime);return this.listener.ta(s,n)}na(){const t={};t.database=hm(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>CI(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{}class S2 extends A2{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new st(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Wo(t,um(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new st(Y.UNKNOWN,u.toString())})}Jo(t,n,s,o,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Jo(t,um(n,s),o,f,g,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new st(Y.UNKNOWN,f.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class w2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qi(n),this._a=!1):at("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="RemoteStore";class R2{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo(f=>{s.enqueueAndForget(async()=>{qs(this)&&(at(Us,"Restarting streams for network reachability change."),await async function(p){const y=wt(p);y.Ia.add(4),await Xl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await bh(y)}(this))})}),this.Aa=new w2(s,o)}}async function bh(r){if(qs(r))for(const t of r.da)await t(!0)}async function Xl(r){for(const t of r.da)await t(!1)}function lT(r,t){const n=wt(r);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),$m(n)?Xm(n):so(n).x_()&&Ym(n,t))}function Km(r,t){const n=wt(r),s=so(n);n.Ta.delete(t),s.x_()&&uT(n,t),n.Ta.size===0&&(s.x_()?s.B_():qs(n)&&n.Aa.set("Unknown"))}function Ym(r,t){if(r.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}so(r).H_(t)}function uT(r,t){r.Ra.$e(t),so(r).Y_(t)}function Xm(r){r.Ra=new EI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>r.Ta.get(t)||null,lt:()=>r.datastore.serializer.databaseId}),so(r).start(),r.Aa.aa()}function $m(r){return qs(r)&&!so(r).M_()&&r.Ta.size>0}function qs(r){return wt(r).Ia.size===0}function cT(r){r.Ra=void 0}async function I2(r){r.Aa.set("Online")}async function C2(r){r.Ta.forEach((t,n)=>{Ym(r,t)})}async function N2(r,t){cT(r),$m(r)?(r.Aa.la(t),Xm(r)):r.Aa.set("Unknown")}async function x2(r,t,n){if(r.Aa.set("Online"),t instanceof YE&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ta.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ta.delete(g),o.Ra.removeTarget(g))}(r,t)}catch(s){at(Us,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await rh(r,s)}else if(t instanceof jc?r.Ra.Ye(t):t instanceof KE?r.Ra.it(t):r.Ra.et(t),!n.isEqual(St.min()))try{const s=await sT(r.localStore);n.compareTo(s)>=0&&await function(u,f){const g=u.Ra.Pt(f);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ta.get(y);T&&u.Ta.set(y,T.withResumeToken(p.resumeToken,f))}}),g.targetMismatches.forEach((p,y)=>{const T=u.Ta.get(p);if(!T)return;u.Ta.set(p,T.withResumeToken(Fe.EMPTY_BYTE_STRING,T.snapshotVersion)),uT(u,p);const R=new xr(T.target,p,y,T.sequenceNumber);Ym(u,R)}),u.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){at(Us,"Failed to raise snapshot:",s),await rh(r,s)}}async function rh(r,t,n){if(!ro(t))throw t;r.Ia.add(1),await Xl(r),r.Aa.set("Offline"),n||(n=()=>sT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(Us,"Retrying IndexedDB access"),await n(),r.Ia.delete(1),await bh(r)})}function hT(r,t){return t().catch(n=>rh(r,n,t))}async function Ah(r){const t=wt(r),n=Hr(t);let s=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Vm;for(;D2(t);)try{const o=await f2(t.localStore,s);if(o===null){t.Pa.length===0&&n.B_();break}s=o.batchId,O2(t,o)}catch(o){await rh(t,o)}fT(t)&&dT(t)}function D2(r){return qs(r)&&r.Pa.length<10}function O2(r,t){r.Pa.push(t);const n=Hr(r);n.x_()&&n.Z_&&n.X_(t.mutations)}function fT(r){return qs(r)&&!Hr(r).M_()&&r.Pa.length>0}function dT(r){Hr(r).start()}async function V2(r){Hr(r).na()}async function M2(r){const t=Hr(r);for(const n of r.Pa)t.X_(n.mutations)}async function P2(r,t,n){const s=r.Pa.shift(),o=zm.from(s,t,n);await hT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Ah(r)}async function k2(r,t){t&&Hr(r).Z_&&await async function(s,o){if(function(f){return _I(f)&&f!==Y.ABORTED}(o.code)){const u=s.Pa.shift();Hr(s).N_(),await hT(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Ah(s)}}(r,t),fT(r)&&dT(r)}async function Xv(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),at(Us,"RemoteStore received new credentials");const s=qs(n);n.Ia.add(3),await Xl(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await bh(n)}async function L2(r,t){const n=wt(r);t?(n.Ia.delete(2),await bh(n)):t||(n.Ia.add(2),await Xl(n),n.Aa.set("Unknown"))}function so(r){return r.Va||(r.Va=function(n,s,o){const u=wt(n);return u.ia(),new T2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Zo:I2.bind(null,r),e_:C2.bind(null,r),n_:N2.bind(null,r),J_:x2.bind(null,r)}),r.da.push(async t=>{t?(r.Va.N_(),$m(r)?Xm(r):r.Aa.set("Unknown")):(await r.Va.stop(),cT(r))})),r.Va}function Hr(r){return r.ma||(r.ma=function(n,s,o){const u=wt(n);return u.ia(),new b2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:V2.bind(null,r),n_:k2.bind(null,r),ea:M2.bind(null,r),ta:P2.bind(null,r)}),r.da.push(async t=>{t?(r.ma.N_(),await Ah(r)):(await r.ma.stop(),r.Pa.length>0&&(at(Us,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,g=new Zm(t,n,f,o,u);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(r,t){if(Qi("AsyncQueue",`${t}: ${r}`),ro(r))return new st(Y.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(t){return new Ha(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||mt.comparator(n.key,s.key):(n,s)=>mt.comparator(n.key,s.key),this.keyedMap=Tl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ha)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ha;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.fa=new se(mt.comparator)}track(t){const n=t.doc.key,s=this.fa.get(n);s?t.type!==0&&s.type===3?this.fa=this.fa.insert(n,t):t.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.fa=this.fa.remove(n):t.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):Tt(63341,{At:t,ga:s}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,s)=>{t.push(s)}),t}}class Za{constructor(t,n,s,o,u,f,g,p,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new Za(t,n,Ha.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ph(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class j2{constructor(){this.queries=Zv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const o=wt(n),u=o.queries;o.queries=Zv(),u.forEach((f,g)=>{for(const p of g.wa)p.onError(s)})})(this,new st(Y.ABORTED,"Firestore shutting down"))}}function Zv(){return new Bs(r=>VE(r),ph)}async function mT(r,t){const n=wt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.Sa()&&t.ba()&&(s=2):(u=new U2,s=t.ba()?0:1);try{switch(s){case 0:u.ya=await n.onListen(o,!0);break;case 1:u.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Wm(f,`Initialization of query '${ka(t.query)}' failed`);return void t.onError(g)}n.queries.set(o,u),u.wa.push(t),t.va(n.onlineState),u.ya&&t.Ca(u.ya)&&Jm(n)}async function gT(r,t){const n=wt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.wa.indexOf(t);f>=0&&(u.wa.splice(f,1),u.wa.length===0?o=t.ba()?0:1:!u.Sa()&&t.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function z2(r,t){const n=wt(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.wa)g.Ca(o)&&(s=!0);f.ya=o}}s&&Jm(n)}function B2(r,t,n){const s=wt(r),o=s.queries.get(t);if(o)for(const u of o.wa)u.onError(n);s.queries.delete(t)}function Jm(r){r.Da.forEach(t=>{t.next()})}var mm,Wv;(Wv=mm||(mm={})).Fa="default",Wv.Cache="cache";class pT{constructor(t,n,s){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.key=t}}class _T{constructor(t){this.key=t}}class q2{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Mt(),this.mutatedKeys=Mt(),this.Xa=ME(t),this.eu=new Ha(this.Xa)}get tu(){return this.Ha}nu(t,n){const s=n?n.ru:new $v,o=n?n.eu:this.eu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((T,R)=>{const D=o.get(T),j=yh(this.query,R)?R:null,F=!!D&&this.mutatedKeys.has(D.key),J=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Z=!1;D&&j?D.data.isEqual(j.data)?F!==J&&(s.track({type:3,doc:j}),Z=!0):this.iu(D,j)||(s.track({type:2,doc:j}),Z=!0,(p&&this.Xa(j,p)>0||y&&this.Xa(j,y)<0)&&(g=!0)):!D&&j?(s.track({type:0,doc:j}),Z=!0):D&&!j&&(s.track({type:1,doc:D}),Z=!0,(p||y)&&(g=!0)),Z&&(j?(f=f.add(j),u=J?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{eu:f,ru:s,Ds:g,mutatedKeys:u}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const f=t.ru.pa();f.sort((T,R)=>function(j,F){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{At:Z})}};return J(j)-J(F)}(T.type,R.type)||this.Xa(T.doc,R.doc)),this.su(s),o=o!=null&&o;const g=n&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,f.length!==0||y?{snapshot:new Za(this.query,t.eu,u,f,t.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $v,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Mt(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return t.forEach(s=>{this.Za.has(s)||n.push(new _T(s))}),this.Za.forEach(s=>{t.has(s)||n.push(new yT(s))}),n}uu(t){this.Ha=t.qs,this.Za=Mt();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Za.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const tg="SyncEngine";class H2{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class F2{constructor(t){this.key=t,this.lu=!1}}class G2{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new Bs(g=>VE(g),ph),this.Tu=new Map,this.Iu=new Set,this.du=new se(mt.comparator),this.Eu=new Map,this.Au=new Hm,this.Ru={},this.Vu=new Map,this.mu=$a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Q2(r,t,n=!0){const s=ST(r);let o;const u=s.Pu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.cu()):o=await vT(s,t,n,!0),o}async function K2(r,t){const n=ST(r);await vT(n,t,!0,!1)}async function vT(r,t,n,s){const o=await d2(r.localStore,ui(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await Y2(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&lT(r.remoteStore,o),g}async function Y2(r,t,n,s,o){r.gu=(R,D,j)=>async function(J,Z,gt,ct){let ot=Z.view.nu(gt);ot.Ds&&(ot=await Fv(J.localStore,Z.query,!1).then(({documents:I})=>Z.view.nu(I,ot)));const nt=ct&&ct.targetChanges.get(Z.targetId),lt=ct&&ct.targetMismatches.get(Z.targetId)!=null,ht=Z.view.applyChanges(ot,J.isPrimaryClient,nt,lt);return t0(J,Z.targetId,ht._u),ht.snapshot}(r,R,D,j);const u=await Fv(r.localStore,t,!0),f=new q2(t,u.qs),g=f.nu(u.documents),p=Yl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(g,r.isPrimaryClient,p);t0(r,n,y._u);const T=new H2(t,n,f);return r.Pu.set(t,T),r.Tu.has(n)?r.Tu.get(n).push(t):r.Tu.set(n,[t]),y.snapshot}async function X2(r,t,n){const s=wt(r),o=s.Pu.get(t),u=s.Tu.get(o.targetId);if(u.length>1)return s.Tu.set(o.targetId,u.filter(f=>!ph(f,t))),void s.Pu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await fm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Km(s.remoteStore,o.targetId),gm(s,o.targetId)}).catch(io)):(gm(s,o.targetId),await fm(s.localStore,o.targetId,!0))}async function $2(r,t){const n=wt(r),s=n.Pu.get(t),o=n.Tu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Km(n.remoteStore,s.targetId))}async function Z2(r,t,n){const s=rC(r);try{const o=await function(f,g){const p=wt(f),y=Wt.now(),T=g.reduce((j,F)=>j.add(F.key),Mt());let R,D;return p.persistence.runTransaction("Locally write mutations","readwrite",j=>{let F=Ki(),J=Mt();return p.Os.getEntries(j,T).next(Z=>{F=Z,F.forEach((gt,ct)=>{ct.isValidDocument()||(J=J.add(gt))})}).next(()=>p.localDocuments.getOverlayedDocuments(j,F)).next(Z=>{R=Z;const gt=[];for(const ct of g){const ot=dI(ct,R.get(ct.key).overlayedDocument);ot!=null&&gt.push(new Kr(ct.key,ot,wE(ot.value.mapValue),ci.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,gt,g)}).next(Z=>{D=Z;const gt=Z.applyToLocalDocumentSet(R,J);return p.documentOverlayCache.saveOverlays(j,Z.batchId,gt)})}).then(()=>({batchId:D.batchId,changes:kE(R)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(f,g,p){let y=f.Ru[f.currentUser.toKey()];y||(y=new se(Ct)),y=y.insert(g,p),f.Ru[f.currentUser.toKey()]=y}(s,o.batchId,n),await $l(s,o.changes),await Ah(s.remoteStore)}catch(o){const u=Wm(o,"Failed to persist write");n.reject(u)}}async function ET(r,t){const n=wt(r);try{const s=await c2(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(Ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.lu=!0:o.modifiedDocuments.size>0?Ht(f.lu,14607):o.removedDocuments.size>0&&(Ht(f.lu,42227),f.lu=!1))}),await $l(n,s,t)}catch(s){await io(s)}}function Jv(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Pu.forEach((u,f)=>{const g=f.view.va(t);g.snapshot&&o.push(g.snapshot)}),function(f,g){const p=wt(f);p.onlineState=g;let y=!1;p.queries.forEach((T,R)=>{for(const D of R.wa)D.va(g)&&(y=!0)}),y&&Jm(p)}(s.eventManager,t),o.length&&s.hu.J_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function W2(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Eu.get(t),u=o&&o.key;if(u){let f=new se(mt.comparator);f=f.insert(u,$e.newNoDocument(u,St.min()));const g=Mt().add(u),p=new Eh(St.min(),new Map,new se(Ct),f,g);await ET(s,p),s.du=s.du.remove(u),s.Eu.delete(t),eg(s)}else await fm(s.localStore,t,!1).then(()=>gm(s,t,n)).catch(io)}async function J2(r,t){const n=wt(r),s=t.batch.batchId;try{const o=await u2(n.localStore,t);bT(n,s,null),TT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await $l(n,o)}catch(o){await io(o)}}async function tC(r,t,n){const s=wt(r);try{const o=await function(f,g){const p=wt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next(R=>(Ht(R!==null,37113),T=R.keys(),p.mutationQueue.removeMutationBatch(y,R))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>p.localDocuments.getDocuments(y,T))})}(s.localStore,t);bT(s,t,n),TT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await $l(s,o)}catch(o){await io(o)}}function TT(r,t){(r.Vu.get(t)||[]).forEach(n=>{n.resolve()}),r.Vu.delete(t)}function bT(r,t,n){const s=wt(r);let o=s.Ru[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Ru[s.currentUser.toKey()]=o}}function gm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Tu.get(t))r.Pu.delete(s),n&&r.hu.pu(s,n);r.Tu.delete(t),r.isPrimaryClient&&r.Au.zr(t).forEach(s=>{r.Au.containsKey(s)||AT(r,s)})}function AT(r,t){r.Iu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Km(r.remoteStore,n),r.du=r.du.remove(t),r.Eu.delete(n),eg(r))}function t0(r,t,n){for(const s of n)s instanceof yT?(r.Au.addReference(s.key,t),eC(r,s)):s instanceof _T?(at(tg,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,t),r.Au.containsKey(s.key)||AT(r,s.key)):Tt(19791,{yu:s})}function eC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Iu.has(s)||(at(tg,"New document in limbo: "+n),r.Iu.add(s),eg(r))}function eg(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Iu.values().next().value;r.Iu.delete(t);const n=new mt(ee.fromString(t)),s=r.mu.next();r.Eu.set(s,new F2(n)),r.du=r.du.insert(n,s),lT(r.remoteStore,new xr(ui(Um(n.path)),s,"TargetPurposeLimboResolution",dh.ue))}}async function $l(r,t,n){const s=wt(r),o=[],u=[],f=[];s.Pu.isEmpty()||(s.Pu.forEach((g,p)=>{f.push(s.gu(p,t,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const R=y?!y.fromCache:(T=n?.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,R?"current":"not-current")}if(y){o.push(y);const R=Gm.Es(p.targetId,y);u.push(R)}}))}),await Promise.all(f),s.hu.J_(o),await async function(p,y){const T=wt(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>$.forEach(y,D=>$.forEach(D.Is,j=>T.persistence.referenceDelegate.addReference(R,D.targetId,j)).next(()=>$.forEach(D.ds,j=>T.persistence.referenceDelegate.removeReference(R,D.targetId,j)))))}catch(R){if(!ro(R))throw R;at(Qm,"Failed to update sequence numbers: "+R)}for(const R of y){const D=R.targetId;if(!R.fromCache){const j=T.Fs.get(D),F=j.snapshotVersion,J=j.withLastLimboFreeSnapshotVersion(F);T.Fs=T.Fs.insert(D,J)}}}(s.localStore,u))}async function nC(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){at(tg,"User change. New user:",t.toKey());const s=await rT(n.localStore,t);n.currentUser=t,function(u,f){u.Vu.forEach(g=>{g.forEach(p=>{p.reject(new st(Y.CANCELLED,f))})}),u.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await $l(n,s.Bs)}}function iC(r,t){const n=wt(r),s=n.Eu.get(t);if(s&&s.lu)return Mt().add(s.key);{let o=Mt();const u=n.Tu.get(t);if(!u)return o;for(const f of u){const g=n.Pu.get(f);o=o.unionWith(g.view.tu)}return o}}function ST(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=W2.bind(null,t),t.hu.J_=z2.bind(null,t.eventManager),t.hu.pu=B2.bind(null,t.eventManager),t}function rC(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=J2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tC.bind(null,t),t}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return l2(this.persistence,new s2,t.initialUser,this.serializer)}Du(t){return new iT(Fm.Vi,this.serializer)}bu(t){return new g2}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class sC extends sh{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){Ht(this.persistence.referenceDelegate instanceof ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FI(s,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new iT(s=>ih.Vi(s,n),this.serializer)}}class pm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,this.syncEngine),await L2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new j2}()}createDatastore(t){const n=Th(t.databaseInfo.databaseId),s=function(u){return new E2(u)}(t.databaseInfo);return function(u,f,g,p){return new S2(u,f,g,p)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,o,u,f,g){return new R2(s,o,u,f,g)}(this.localStore,this.datastore,t.asyncQueue,n=>Jv(this.syncEngine,n,0),function(){return Kv.C()?new Kv:new p2}())}createSyncEngine(t,n){return function(o,u,f,g,p,y,T){const R=new G2(o,u,f,g,p,y);return T&&(R.fu=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const u=wt(o);at(Us,"RemoteStore shutting down."),u.Ia.add(5),await Xl(u),u.Ea.shutdown(),u.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pm.provider={build:()=>new pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Qi("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class aC{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Xe.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{at(Fr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(at(Fr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Wm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Gd(r,t){r.asyncQueue.verifyOperationInProgress(),at(Fr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await rT(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>{Lr("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{at("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Lr("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=t}async function e0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await oC(r);at(Fr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>Xv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Xv(t.remoteStore,o)),r._onlineComponents=t}async function oC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Fr,"Using user provided OfflineComponentProvider");try{await Gd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Lr("Error using user provided cache. Falling back to memory cache: "+n),await Gd(r,new sh)}}else at(Fr,"Using default OfflineComponentProvider"),await Gd(r,new sC(void 0));return r._offlineComponents}async function RT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Fr,"Using user provided OnlineComponentProvider"),await e0(r,r._uninitializedComponentsProvider._online)):(at(Fr,"Using default OnlineComponentProvider"),await e0(r,new pm))),r._onlineComponents}function lC(r){return RT(r).then(t=>t.syncEngine)}async function IT(r){const t=await RT(r),n=t.eventManager;return n.onListen=Q2.bind(null,t.syncEngine),n.onUnlisten=X2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=K2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=$2.bind(null,t.syncEngine),n}function uC(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,g,p,y){const T=new wT({next:D=>{T.Ou(),f.enqueueAndForget(()=>gT(u,R));const j=D.docs.has(g);!j&&D.fromCache?y.reject(new st(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&D.fromCache&&p&&p.source==="server"?y.reject(new st(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(D)},error:D=>y.reject(D)}),R=new pT(Um(g.path),T,{includeMetadataChanges:!0,ka:!0});return mT(u,R)}(await IT(r),r.asyncQueue,t,n,s)),s.promise}function cC(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,g,p,y){const T=new wT({next:D=>{T.Ou(),f.enqueueAndForget(()=>gT(u,R)),D.fromCache&&p.source==="server"?y.reject(new st(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(D)},error:D=>y.reject(D)}),R=new pT(g,T,{includeMetadataChanges:!0,ka:!0});return mT(u,R)}(await IT(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firestore.googleapis.com",i0=!0;class r0{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new st(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NT,this.ssl=i0}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:i0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qI)throw new st(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CT((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new st(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new st(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new st(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sh{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new st(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _R;switch(s.type){case"firstParty":return new bR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new st(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=n0.get(n);s&&(at("ComponentProvider","Removing Datastore"),n0.delete(n),s.terminate())}(this),Promise.resolve()}}function hC(r,t,n,s={}){var o;r=Ur(r,Sh);const u=Ja(t),f=r._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),p=`${t}:${n}`;u&&(y0(`https://${p}`),_0("Firestore",!0)),f.host!==NT&&f.host!==p&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:s});if(!Ms(y,g)&&(r._setSettings(y),s.mockUserToken)){let T,R;if(typeof s.mockUserToken=="string")T=s.mockUserToken,R=Xe.MOCK_USER;else{T=xA(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new st(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Xe(D)}r._authCredentials=new vR(new fE(T,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ao(this.firestore,t,this._query)}}class Te{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Te(this.firestore,t,this._key)}toJSON(){return{type:Te._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Gl(n,Te._jsonSchema))return new Te(t,s||null,new mt(ee.fromString(n.referencePath)))}}Te._jsonSchemaVersion="firestore/documentReference/1.0",Te._jsonSchema={type:Ee("string",Te._jsonSchemaVersion),referencePath:Ee("string")};class kr extends ao{constructor(t,n,s){super(t,n,Um(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Te(this.firestore,null,new mt(t))}withConverter(t){return new kr(this.firestore,t,this._path)}}function Yi(r,t,...n){if(r=ke(r),mE("collection","path",t),r instanceof Sh){const s=ee.fromString(t,...n);return yv(s),new kr(r,null,s)}{if(!(r instanceof Te||r instanceof kr))throw new st(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return yv(s),new kr(r.firestore,null,s)}}function Zl(r,t,...n){if(r=ke(r),arguments.length===1&&(t=Om.newId()),mE("doc","path",t),r instanceof Sh){const s=ee.fromString(t,...n);return pv(s),new Te(r,null,new mt(s))}{if(!(r instanceof Te||r instanceof kr))throw new st(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return pv(s),new Te(r.firestore,r instanceof kr?r.converter:null,new mt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="AsyncQueue";class a0{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new aT(this,"async_queue_retry"),this.oc=()=>{const s=Fd();s&&at(s0,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=t;const n=Fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Hi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ro(t))throw t;at(s0,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(s=>{throw this.tc=s,this.nc=!1,Qi("INTERNAL UNHANDLED ERROR: ",o0(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(t,n,s){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const o=Zm.createAndSchedule(this,t,n,s,u=>this.lc(u));return this.ec.push(o),o}ac(){this.tc&&Tt(47125,{hc:o0(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function o0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Wl extends Sh{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new a0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new a0(t),this._firestoreClient=void 0,await t}}}function fC(r,t){const n=typeof r=="object"?r:b0(),s=typeof r=="string"?r:$c,o=Tm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=CA("firestore");u&&hC(o,...u)}return o}function ng(r){if(r._terminated)throw new st(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||dC(r),r._firestoreClient}function dC(r){var t,n,s;const o=r._freezeSettings(),u=function(g,p,y,T){return new UR(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,CT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new aC(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(g){const p=g?._online.build();return{_offline:g?._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._byteString=t}static fromBase64String(t){try{return new On(Fe.fromBase64String(t))}catch(n){throw new st(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new On(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Gl(t,On._jsonSchema))return On.fromBase64String(t.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Ee("string",On._jsonSchemaVersion),bytes:Ee("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new st(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new st(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new st(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ct(this._lat,t._lat)||Ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(t){if(Gl(t,fi._jsonSchema))return new fi(t.latitude,t.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Ee("string",fi._jsonSchemaVersion),latitude:Ee("number"),longitude:Ee("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,t._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Gl(t,di._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new di(t.vectorValues);throw new st(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Ee("string",di._jsonSchemaVersion),vectorValues:Ee("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=/^__.*__$/;class gC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Kr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(t,this.data,n,this.fieldTransforms)}}class xT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Kr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function DT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ec:r})}}class rg{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new rg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Rc({path:s,mc:!1});return o.fc(t),o}gc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return ah(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(DT(this.Ec)&&mC.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class pC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Th(t)}Dc(t,n,s,o=!1){return new rg({Ec:t,methodName:n,bc:s,path:He.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sg(r){const t=r._freezeSettings(),n=Th(r._databaseId);return new pC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function yC(r,t,n,s,o,u={}){const f=r.Dc(u.merge||u.mergeFields?2:0,t,n,o);ag("Data must be an object, but it was:",f,s);const g=OT(s,f);let p,y;if(u.merge)p=new yn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const R of u.mergeFields){const D=ym(t,R,n);if(!f.contains(D))throw new st(Y.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);MT(T,D)||T.push(D)}p=new yn(T),y=f.fieldTransforms.filter(R=>p.covers(R.field))}else p=null,y=f.fieldTransforms;return new gC(new on(g),p,y)}class Rh extends ig{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Rh}}function _C(r,t,n,s){const o=r.Dc(1,t,n);ag("Data must be an object, but it was:",o,s);const u=[],f=on.empty();Qr(s,(p,y)=>{const T=og(t,p,n);y=ke(y);const R=o.gc(T);if(y instanceof Rh)u.push(T);else{const D=Jl(y,R);D!=null&&(u.push(T),f.set(T,D))}});const g=new yn(u);return new xT(f,g,o.fieldTransforms)}function vC(r,t,n,s,o,u){const f=r.Dc(1,t,n),g=[ym(t,s,n)],p=[o];if(u.length%2!=0)throw new st(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)g.push(ym(t,u[D])),p.push(u[D+1]);const y=[],T=on.empty();for(let D=g.length-1;D>=0;--D)if(!MT(y,g[D])){const j=g[D];let F=p[D];F=ke(F);const J=f.gc(j);if(F instanceof Rh)y.push(j);else{const Z=Jl(F,J);Z!=null&&(y.push(j),T.set(j,Z))}}const R=new yn(y);return new xT(T,R,f.fieldTransforms)}function EC(r,t,n,s=!1){return Jl(n,r.Dc(s?4:3,t))}function Jl(r,t){if(VT(r=ke(r)))return ag("Unsupported field value:",t,r),OT(r,t);if(r instanceof ig)return function(s,o){if(!DT(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const g of s){let p=Jl(g,o.yc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,t)}return function(s,o){if((s=ke(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return oI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Wt.fromDate(s);return{timestampValue:nh(o.serializer,u)}}if(s instanceof Wt){const u=new Wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nh(o.serializer,u)}}if(s instanceof fi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof On)return{bytesValue:XE(o.serializer,s._byteString)};if(s instanceof Te){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:qm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof di)return function(f,g){return{mapValue:{fields:{[AE]:{stringValue:SE},[Zc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw g.wc("VectorValues must only contain numeric values.");return jm(g.serializer,y)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${fh(s)}`)}(r,t)}function OT(r,t){const n={};return yE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qr(r,(s,o)=>{const u=Jl(o,t.Vc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function VT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Wt||r instanceof fi||r instanceof On||r instanceof Te||r instanceof ig||r instanceof di)}function ag(r,t,n){if(!VT(n)||!gE(n)){const s=fh(n);throw s==="an object"?t.wc(r+" a custom object"):t.wc(r+" "+s)}}function ym(r,t,n){if((t=ke(t))instanceof wh)return t._internalPath;if(typeof t=="string")return og(r,t);throw ah("Field path arguments must be of type string or ",r,!1,void 0,n)}const TC=new RegExp("[~\\*/\\[\\]]");function og(r,t,n){if(t.search(TC)>=0)throw ah(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new wh(...t.split("."))._internalPath}catch{throw ah(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ah(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new st(Y.INVALID_ARGUMENT,g+r+p)}function MT(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bC extends PT{data(){return super.data()}}function lg(r,t){return typeof t=="string"?og(r,t):t instanceof wh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new st(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class SC extends ug{}function l0(r,t,...n){let s=[];t instanceof ug&&s.push(t),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof cg).length,g=u.filter(p=>p instanceof Ih).length;if(f>1||f>0&&g>0)throw new st(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Ih extends SC{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Ih(t,n,s)}_apply(t){const n=this._parse(t);return kT(t._query,n),new ao(t.firestore,t.converter,am(t._query,n))}_parse(t){const n=sg(t.firestore);return function(u,f,g,p,y,T,R){let D;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new st(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){c0(R,T);const F=[];for(const J of R)F.push(u0(p,u,J));D={arrayValue:{values:F}}}else D=u0(p,u,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||c0(R,T),D=EC(g,f,R,T==="in"||T==="not-in");return ve.create(y,T,D)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function xc(r,t,n){const s=t,o=lg("where",r);return Ih._create(o,s,n)}class cg extends ug{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new cg(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const g=u.getFlattenedFilters();for(const p of g)kT(f,p),f=am(f,p)}(t._query,n),new ao(t.firestore,t.converter,am(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function u0(r,t,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new st(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OE(t)&&n.indexOf("/")!==-1)throw new st(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ee.fromString(n));if(!mt.isDocumentKey(s))throw new st(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wv(r,new mt(s))}if(n instanceof Te)return wv(r,n._key);throw new st(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function c0(r,t){if(!Array.isArray(r)||r.length===0)throw new st(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kT(r,t){const n=function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new st(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new st(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class wC{convertValue(t,n="none"){switch(qr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Br(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Qr(t,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(t){var n,s,o;const u=(o=(s=(n=t.fields)===null||n===void 0?void 0:n[Zc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>de(f.doubleValue));return new di(u)}convertGeoPoint(t){return new fi(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=gh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ml(t));default:return null}}convertTimestamp(t){const n=zr(t);return new Wt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ee.fromString(t);Ht(eT(s),9688,{name:t});const o=new Pl(s.get(1),s.get(3)),u=new mt(s.popFirst(5));return o.isEqual(n)||Qi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Al{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vs extends PT{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(lg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:Ee("string",Vs._jsonSchemaVersion),bundleSource:Ee("string","DocumentSnapshot"),bundleName:Ee("string"),bundle:Ee("string")};class zc extends Vs{data(t={}){return super.data(t)}}class Fa{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Al(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new zc(this._firestore,this._userDataWriter,s.key,s,new Al(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(g=>{const p=new zc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Al(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||g.type!==3).map(g=>{const p=new zc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Al(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:IC(g.type),doc:p,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function IC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(r){r=Ur(r,Te);const t=Ur(r.firestore,Wl);return uC(ng(t),r._key).then(n=>NC(t,r,n))}Fa._jsonSchemaVersion="firestore/querySnapshot/1.0",Fa._jsonSchema={type:Ee("string",Fa._jsonSchemaVersion),bundleSource:Ee("string","QuerySnapshot"),bundleName:Ee("string"),bundle:Ee("string")};class LT extends wC{constructor(t){super(),this.firestore=t}convertBytes(t){return new On(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function Wa(r){r=Ur(r,ao);const t=Ur(r.firestore,Wl),n=ng(t),s=new LT(t);return AC(r._query),cC(n,r._query).then(o=>new Fa(t,s,r,o))}function hg(r,t,n,...s){r=Ur(r,Te);const o=Ur(r.firestore,Wl),u=sg(o);let f;return f=typeof(t=ke(t))=="string"||t instanceof wh?vC(u,"updateDoc",r._key,t,n,s):_C(u,"updateDoc",r._key,t),UT(o,[f.toMutation(r._key,ci.exists(!0))])}function fg(r,t){const n=Ur(r.firestore,Wl),s=Zl(r),o=RC(r.converter,t);return UT(n,[yC(sg(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,ci.exists(!1))]).then(()=>s)}function UT(r,t){return function(s,o){const u=new Hi;return s.asyncQueue.enqueueAndForget(async()=>Z2(await lC(s),o,u)),u.promise}(ng(r),t)}function NC(r,t,n){const s=n.docs.get(t._key),o=new LT(r);return new Vs(r,o,t._key,s,new Al(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){no=o})(to),Ga(new Ps("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new Wl(new ER(s.getProvider("auth-internal")),new AR(f,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new st(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(y.options.projectId,T)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),Vr(hv,fv,t),Vr(hv,fv,"esm2017")})();const xC={apiKey:"AIzaSyAjFHv1jOhULNpvcY4-SdR6zB8-U1-Sx6Q",authDomain:"salchipapon.firebaseapp.com",projectId:"salchipapon",storageBucket:"salchipapon.firebasestorage.app",messagingSenderId:"590878913280",appId:"1:590878913280:web:ad8d3fb7d39b1c48db39e5",measurementId:"G-39KL5ZL7G7"},jT=T0(xC),_n=fC(jT),jl=mR(jT),DC=({onLogin:r})=>{const[t,n]=vt.useState(""),[s,o]=vt.useState(""),[u,f]=vt.useState(""),g=async()=>{try{await tw(jl,t,s),r()}catch{f("Credenciales incorrectas")}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:w.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[w.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-orange-600",children:"Iniciar sesión"}),u&&w.jsx("div",{className:"mb-4 p-2 bg-red-100 border-l-4 border-red-500 text-red-700",children:w.jsx("p",{children:u})}),w.jsx("div",{className:"mb-4",children:w.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Email",value:t,onChange:p=>n(p.target.value)})}),w.jsx("div",{className:"mb-6",children:w.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Contraseña",type:"password",value:s,onChange:p=>o(p.target.value)})}),w.jsx("button",{className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:g,children:"Ingresar"})]})})},OC=()=>{const[r,t]=vt.useState([]),[n,s]=vt.useState(""),[o,u]=vt.useState(1),[f,g]=vt.useState([]),[p,y]=vt.useState(""),[T,R]=vt.useState(""),[D,j]=vt.useState(""),[F,J]=vt.useState([]),Z=(A,N=2500)=>{R(A),setTimeout(()=>R(""),N)},gt=A=>r.find(N=>N.id===A);vt.useEffect(()=>{(async()=>{const O=(await Wa(Yi(_n,"productos"))).docs.map(P=>({id:P.id,...P.data()}));t(O)})()},[]),vt.useEffect(()=>{const A=D.toLowerCase().split(" ").filter(Boolean);if(A.length===0){J([]);return}const N=r.filter(O=>A.every(P=>O.nombre.toLowerCase().includes(P)));J(N)},[D,r]);const ct=A=>{s(A.id),j(A.nombre),J([])},ot=()=>{const A=gt(n),N=parseInt(o);if(!(!A||N<1)){if(A.stock<N&&A.stock!==999)return Z(`❌ No hay stock suficiente para "${A.nombre}".`);g(O=>O.find(C=>C.id===A.id)?O.map(C=>C.id===A.id?{...C,cantidad:C.cantidad+N,subtotal:C.precio*(C.cantidad+N)}:C):[...O,{...A,cantidad:N,subtotal:A.precio*N}]),u(1),s(""),j("")}},nt=(A,N)=>{if(N<1)return;const O=gt(A);if(O&&O.stock<N&&O.stock!==999)return Z(`❌ No hay suficiente stock para "${O.nombre}".`);g(P=>P.map(C=>C.id===A?{...C,cantidad:N,subtotal:C.precio*N}:C))},lt=A=>{g(N=>N.filter(O=>O.id!==A))},ht=f.reduce((A,N)=>A+N.subtotal,0),I=async()=>{if(f.length===0)return Z("❌ No hay productos en la venta");R("Guardando venta...");const A={cliente:p.trim()||"Consumidor final",items:f.map(({id:N,nombre:O,precio:P,cantidad:C,subtotal:be})=>({id:N,nombre:O,precio:P,cantidad:C,subtotal:be})),total:ht,fecha:Wt.now(),estado:"pendiente",metodoPago:""};try{const N=await fg(Yi(_n,"ventas"),A);await Promise.all(f.map(O=>O.stock!==999?hg(Zl(_n,"productos",O.id),{stock:O.stock-O.cantidad}):null)),g([]),y(""),R("✅ Venta registrada correctamente!"),S(A)}catch(N){console.error("Error al guardar venta:",N),R(`❌ Error: ${N.message}`)}},S=A=>{const N=window.open("","","width=300,height=600");N.document.write(`
            <html>
                <head>
                    <title>Boleta de Venta</title>
                    <style>
                        body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
                        .boleta { width: 240px; margin: auto; text-align: center; }
                        .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
                        .linea { border-top: 1px dashed #000; margin: 8px 0; }
                        .producto { text-align: left; margin: 2px 0; }
                        .total { font-weight: bold; margin-top: 10px; }
                        .metodo { margin-top: 5px; }
                    </style>
                </head>
                <body onload="window.print(); setTimeout(() => window.close(), 500);">
                    <div class="boleta">
                        <div class="titulo">BOLETA DE VENTA</div>
                        <div>Cliente: <strong>${A.cliente}</strong></div>
                        <div>Fecha: ${new Date().toLocaleString()}</div>
                        <div class="linea"></div>
                        <div style="text-align:left">
                            ${A.items.map(O=>`
                                <div class="producto">
                                    ${O.nombre}<br />
                                    ${O.cantidad} x S/ ${O.precio.toFixed(2)} = S/ ${O.subtotal.toFixed(2)}
                                </div>
                            `).join("")}
                        </div>
                        <div class="linea"></div>
                        <div class="total">TOTAL: S/ ${A.total.toFixed(2)}</div>
                        <div class="metodo">Pago: ${A.metodoPago||"---"}</div>
                        <div>${A.estado==="completada"?"✅ Pagado":"❌ Pendiente"}</div>
                        <div class="linea"></div>
                        <div>Gracias por su compra</div>
                    </div>
                </body>
            </html>
        `),N.document.close()};return w.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[w.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Registro de Ventas"}),T&&w.jsx("div",{className:`mb-4 p-3 rounded-md ${T.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:T}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[w.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Cliente"}),w.jsx("input",{type:"text",value:p,placeholder:"Nombre del cliente",onChange:A=>y(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Agregar Productos"}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[w.jsxs("div",{className:"relative w-full",children:[w.jsx("input",{type:"text",value:D,onChange:A=>j(A.target.value),placeholder:"Buscar producto por nombre",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),F.length>0&&w.jsx("ul",{className:"absolute z-10 bg-white border border-gray-200 rounded-md shadow-md w-full max-h-48 overflow-y-auto mt-1",children:F.map(A=>w.jsxs("li",{onClick:()=>ct(A),className:"px-4 py-2 cursor-pointer hover:bg-orange-100 text-sm",children:[A.nombre," - S/ ",A.precio.toFixed(2)," ",A.stock!==999&&`(${A.stock} disp.)`]},A.id))})]}),w.jsx("input",{type:"number",value:o,min:1,placeholder:"Cantidad",onChange:A=>u(A.target.value),className:"w-24 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),w.jsx("button",{onClick:ot,disabled:!n||o<1,className:"bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition disabled:opacity-50",children:"Agregar"})]})]}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Productos en la venta"}),f.length===0?w.jsx("p",{className:"text-gray-500 italic",children:"No hay productos agregados"}):w.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(A=>w.jsxs("li",{className:"py-3",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-medium",children:A.nombre}),w.jsxs("span",{className:"text-gray-600 ml-2",children:["(S/ ",A.precio.toFixed(2),")"]})]}),w.jsxs("div",{className:"font-medium",children:["S/ ",A.subtotal.toFixed(2)]})]}),w.jsxs("div",{className:"flex items-center mt-2 gap-2",children:[w.jsx("button",{onClick:()=>nt(A.id,A.cantidad-1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"-"}),w.jsx("span",{className:"w-10 text-center",children:A.cantidad}),w.jsx("button",{onClick:()=>nt(A.id,A.cantidad+1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"+"}),w.jsx("button",{onClick:()=>lt(A.id),className:"ml-4 text-red-500 hover:text-red-700",children:"Eliminar"})]})]},A.id))}),w.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:w.jsxs("h3",{className:"text-xl font-bold text-right text-orange-600",children:["Total: S/ ",ht.toFixed(2)]})})]}),w.jsx("div",{className:"text-center",children:w.jsx("button",{onClick:I,disabled:f.length===0,className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Guardar Venta"})})]})},VC=()=>{const[r,t]=vt.useState(""),[n,s]=vt.useState(""),[o,u]=vt.useState([]),[f,g]=vt.useState(!1),[p,y]=vt.useState(""),T=async()=>{try{g(!0);const F=(await Wa(Yi(_n,"gastos"))).docs.map(J=>({id:J.id,...J.data(),fecha:J.data().fecha?.toDate()||new Date}));u(F.sort((J,Z)=>Z.fecha-J.fecha))}catch(j){console.error("Error cargando gastos:",j),y("❌ Error al cargar gastos")}finally{g(!1)}},R=async()=>{if(!r||!n){y("❌ Completa todos los campos"),setTimeout(()=>y(""),3e3);return}try{g(!0),await fg(Yi(_n,"gastos"),{descripcion:r,monto:parseFloat(n),fecha:Wt.now()}),t(""),s(""),y("✅ Gasto agregado correctamente"),setTimeout(()=>y(""),3e3),await T()}catch(j){console.error("Error agregando gasto:",j),y("❌ Error al agregar gasto"),setTimeout(()=>y(""),3e3)}finally{g(!1)}};vt.useEffect(()=>{T()},[]);const D=o.reduce((j,F)=>j+F.monto,0);return w.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[w.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Registro de Gastos"}),p&&w.jsx("div",{className:`mb-4 p-3 rounded-md ${p.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Agregar Nuevo Gasto"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Descripción"}),w.jsx("input",{placeholder:"Ej. Materiales de oficina",value:r,onChange:j=>t(j.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Monto (S/)"}),w.jsx("input",{placeholder:"0.00",value:n,onChange:j=>s(j.target.value),type:"number",step:"0.01",min:"0",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),w.jsx("button",{onClick:R,disabled:f,className:"bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition disabled:opacity-50",children:f?"Agregando...":"Agregar Gasto"})]}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Historial de Gastos"}),w.jsxs("div",{className:"text-xl font-bold text-red-600",children:["Total: S/ ",D.toFixed(2)]})]}),f&&o.length===0?w.jsx("div",{className:"flex justify-center items-center h-32",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500"})}):o.length===0?w.jsx("p",{className:"text-gray-500 italic py-4",children:"No hay gastos registrados"}):w.jsx("div",{className:"divide-y divide-gray-200",children:o.map(j=>w.jsxs("div",{className:"py-3 flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:j.descripcion}),w.jsx("p",{className:"text-sm text-gray-500",children:j.fecha.toLocaleDateString("es-PE",{day:"2-digit",month:"short",year:"numeric"})})]}),w.jsxs("div",{className:"text-red-600 font-medium",children:["S/ ",j.monto.toFixed(2)]})]},j.id))})]})]})},MC=()=>{const[r,t]=vt.useState(0),[n,s]=vt.useState(0),[o,u]=vt.useState(!0),[f,g]=vt.useState({mes:new Date().getMonth()+1,año:new Date().getFullYear()}),[p,y]=vt.useState([]),T=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],R=Array.from({length:5},(j,F)=>new Date().getFullYear()-F);vt.useEffect(()=>{(async()=>{try{u(!0);const F=new Date(f.año,f.mes-1,1),J=new Date(f.año,f.mes,0),Z=l0(Yi(_n,"ventas"),xc("fecha",">=",F),xc("fecha","<=",J)),ct=(await Wa(Z)).docs.map(A=>A.data()),ot=ct.reduce((A,N)=>A+N.total,0);t(ot);const nt=l0(Yi(_n,"gastos"),xc("fecha",">=",F),xc("fecha","<=",J)),ht=(await Wa(nt)).docs.reduce((A,N)=>A+N.data().monto,0);s(ht);const I={};ct.forEach(A=>{const N=A.fecha.toDate().toLocaleDateString("es-PE");I[N]=(I[N]||0)+A.total});const S=Object.entries(I).map(([A,N])=>({fecha:A,total:N}));S.sort((A,N)=>new Date(A.fecha)-new Date(N.fecha)),y(S)}catch(F){console.error("Error cargando datos:",F)}finally{u(!1)}})()},[f]);const D=j=>{const{name:F,value:J}=j.target;g(Z=>({...Z,[F]:parseInt(J)}))};return o?w.jsx("div",{className:"flex justify-center items-center h-64",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):w.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-2xl font-bold text-orange-600",children:"Dashboard Financiero"}),w.jsxs("div",{className:"flex gap-4",children:[w.jsx("select",{name:"mes",value:f.mes,onChange:D,className:"bg-white border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:T.map((j,F)=>w.jsx("option",{value:F+1,children:j},F))}),w.jsx("select",{name:"año",value:f.año,onChange:D,className:"bg-white border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:R.map(j=>w.jsx("option",{value:j,children:j},j))})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:[w.jsx("h3",{className:"text-gray-500 font-medium",children:"Ingresos"}),w.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["S/ ",r.toLocaleString("es-PE")]})]}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500",children:[w.jsx("h3",{className:"text-gray-500 font-medium",children:"Gastos"}),w.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["S/ ",n.toLocaleString("es-PE")]})]}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-orange-500",children:[w.jsx("h3",{className:"text-gray-500 font-medium",children:"Ganancia Neta"}),w.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["S/ ",(r-n).toLocaleString("es-PE")]})]})]}),w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-orange-400 mt-6",children:[w.jsx("h3",{className:"text-lg font-bold mb-4 text-orange-600",children:"Ventas por Día"}),w.jsxs("table",{className:"w-full table-auto text-sm border border-gray-200 rounded overflow-hidden",children:[w.jsx("thead",{className:"bg-orange-100 text-gray-700",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-4 py-2 text-left",children:"Fecha"}),w.jsx("th",{className:"px-4 py-2 text-left",children:"Total Ventas"})]})}),w.jsx("tbody",{children:p.map(({fecha:j,total:F},J)=>w.jsxs("tr",{className:"border-t hover:bg-orange-50",children:[w.jsx("td",{className:"px-4 py-2",children:j}),w.jsxs("td",{className:"px-4 py-2 font-semibold text-green-700",children:["S/ ",F.toFixed(2)]})]},J))})]})]}),w.jsx("div",{className:"mt-6 text-sm text-gray-500",children:w.jsxs("p",{children:["Última actualización: ",new Date().toLocaleString("es-PE")]})})]})},PC=()=>{const[r,t]=vt.useState([]),[n,s]=vt.useState(!0),[o,u]=vt.useState(null),[f,g]=vt.useState("Efectivo"),[p,y]=vt.useState(""),[T,R]=vt.useState(""),[D,j]=vt.useState("todos"),[F,J]=vt.useState("");vt.useEffect(()=>{(async()=>{try{s(!0);const ht=(await Wa(Yi(_n,"ventas"))).docs.map(I=>({id:I.id,...I.data(),fecha:I.data().fecha?.toDate()||new Date}));ht.sort((I,S)=>S.fecha-I.fecha),t(ht)}catch(lt){console.error("Error cargando ventas:",lt),R("❌ Error al cargar ventas")}finally{s(!1)}})()},[]);const Z=nt=>{const lt=window.open("","","width=300,height=600");lt.document.write(`
      <html>
        <head>
          <title>Boleta de Venta</title>
          <style>
            body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
            .boleta { width: 240px; margin: auto; text-align: center; }
            .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
            .linea { border-top: 1px dashed #000; margin: 8px 0; }
            .producto { text-align: left; margin: 2px 0; }
            .total { font-weight: bold; margin-top: 10px; }
            .metodo { margin-top: 5px; }
          </style>
        </head>
        <body onload="window.print(); setTimeout(() => window.close(), 500);">
          <div class="boleta">
            <div class="titulo">BOLETA DE VENTA</div>
            <div>Cliente: <strong>${nt.cliente||"Consumidor final"}</strong></div>
            <div>Fecha: ${new Date(nt.fecha?.seconds*1e3).toLocaleString()}</div>
            <div class="linea"></div>
            <div style="text-align:left">
              ${nt.items.map(ht=>`
                <div class="producto">
                  ${ht.nombre}<br />
                  ${ht.cantidad} x S/ ${ht.precio.toFixed(2)} = S/ ${ht.subtotal.toFixed(2)}
                </div>
              `).join("")}
            </div>
            <div class="linea"></div>
            <div class="total">TOTAL: S/ ${nt.total.toFixed(2)}</div>
            <div class="metodo">Pago: ${nt.metodoPago||"---"}</div>
            <div>${nt.estado==="completada"?"✅ Pagado":"❌ Pendiente"}</div>
            <div class="linea"></div>
            <div>Gracias por su compra</div>
          </div>
        </body>
      </html>
    `),lt.document.close()},gt=async()=>{if(o){if(f==="Efectivo"&&(!p||parseFloat(p)<o.total)){R("❌ El monto es insuficiente"),setTimeout(()=>R(""),2500);return}try{s(!0);const nt=Zl(_n,"ventas",o.id);await hg(nt,{estado:"completada",metodoPago:f}),t(lt=>lt.map(ht=>ht.id===o.id?{...ht,estado:"completada",metodoPago:f}:ht)),u(null),y(""),g("Efectivo"),R("✅ Venta completada")}catch(nt){console.error("Error completando venta:",nt),R("❌ Error al completar la venta")}finally{s(!1),setTimeout(()=>R(""),2500)}}},ct=r.filter(nt=>!(D!=="todos"&&nt.estado!==D||F&&!nt.cliente.toLowerCase().includes(F.toLowerCase()))),ot=f==="Efectivo"&&p?(parseFloat(p)-o?.total).toFixed(2):null;return w.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6",children:[w.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[w.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-4 md:mb-0",children:"📋 Lista de Pedidos"}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:F,onChange:nt=>J(nt.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 w-full"}),w.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),w.jsxs("select",{value:D,onChange:nt=>j(nt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[w.jsx("option",{value:"todos",children:"Todos los estados"}),w.jsx("option",{value:"pendiente",children:"Pendientes"}),w.jsx("option",{value:"completada",children:"Completados"})]})]})]}),T&&w.jsx("div",{className:`mb-6 p-3 rounded-md ${T.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:T}),n?w.jsx("div",{className:"flex justify-center items-center h-64",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):ct.length===0?w.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center",children:[w.jsx("p",{className:"text-gray-500 text-lg",children:"No se encontraron pedidos"}),w.jsx("p",{className:"text-gray-400 text-sm mt-2",children:D!=="todos"||F?"Intenta con otros filtros":"No hay pedidos registrados"})]}):w.jsx("div",{className:"space-y-4",children:ct.map(nt=>w.jsxs("div",{className:`bg-white p-4 md:p-6 rounded-lg shadow-sm border-l-4 ${nt.estado==="completada"?"border-green-500":"border-orange-500"} hover:shadow-md transition`,children:[w.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:nt.cliente||"Consumidor final"}),w.jsx("p",{className:"text-sm text-gray-500",children:nt.fecha.toLocaleString("es-PE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),w.jsxs("div",{className:"flex flex-col items-end",children:[w.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${nt.estado==="completada"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:nt.estado==="completada"?"Pagado":"Pendiente"}),w.jsxs("p",{className:"text-xl font-bold text-orange-600 mt-1",children:["S/ ",nt.total?.toFixed(2)]})]})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Productos:"}),w.jsx("ul",{className:"divide-y divide-gray-100",children:nt.items.map((lt,ht)=>w.jsxs("li",{className:"py-2 flex justify-between",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-medium",children:lt.nombre}),w.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:["x ",lt.cantidad]})]}),w.jsxs("span",{className:"font-medium",children:["S/ ",lt.subtotal.toFixed(2)]})]},ht))})]}),w.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[w.jsx("div",{className:"text-sm text-gray-500",children:nt.metodoPago&&w.jsxs("span",{children:["Método: ",nt.metodoPago]})}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("button",{onClick:()=>Z(nt),className:"text-orange-600 hover:text-orange-800 flex items-center text-sm font-medium",children:[w.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]}),nt.estado!=="completada"&&w.jsxs("button",{onClick:()=>u(nt),className:"text-green-600 hover:text-green-800 flex items-center text-sm font-medium",children:[w.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Completar"]})]})]})]},nt.id))}),o&&w.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm z-50 p-4",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden",children:[w.jsxs("div",{className:"p-6",children:[w.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:["Completar venta de ",o.cliente||"Consumidor final"]}),w.jsxs("p",{className:"text-gray-600 mb-6",children:["Total: ",w.jsxs("span",{className:"font-bold text-orange-600",children:["S/ ",o.total?.toFixed(2)]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Método de pago"}),w.jsxs("select",{value:f,onChange:nt=>g(nt.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[w.jsx("option",{value:"Efectivo",children:"Efectivo"}),w.jsx("option",{value:"Yape",children:"Yape"}),w.jsx("option",{value:"Transferencia",children:"Transferencia"})]})]}),f==="Efectivo"&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Monto recibido"}),w.jsx("input",{type:"number",placeholder:"0.00",value:p,onChange:nt=>y(nt.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",step:"0.01",min:"0"}),ot!==null&&w.jsxs("p",{className:"text-sm mt-1",children:["Vuelto: ",w.jsxs("span",{className:`font-medium ${ot>=0?"text-green-600":"text-red-600"}`,children:["S/ ",ot>=0?ot:"0.00"]})]})]})]})]}),w.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancelar"}),w.jsx("button",{onClick:gt,disabled:n||f==="Efectivo"&&(!p||parseFloat(p)<o.total),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Procesando...":"Confirmar Pago"})]})]})})]})},kC=()=>{const[r,t]=vt.useState(""),[n,s]=vt.useState(""),[o,u]=vt.useState(""),[f,g]=vt.useState(""),[p,y]=vt.useState([]),[T,R]=vt.useState(null),[D,j]=vt.useState(""),[F,J]=vt.useState("todos"),[Z,gt]=vt.useState(!1);vt.useEffect(()=>{ct()},[]);const ct=async()=>{gt(!0);try{const S=(await Wa(Yi(_n,"productos"))).docs.map(A=>({id:A.id,...A.data()}));y(S)}catch(I){g("❌ Error al cargar productos"),console.error(I)}finally{gt(!1)}},ot=async()=>{if(!r||!n||!o){g("❌ Completa todos los campos"),setTimeout(()=>g(""),2500);return}try{gt(!0),await fg(Yi(_n,"productos"),{nombre:r,precio:parseFloat(n),stock:parseInt(o)}),t(""),s(""),u(""),g("✅ Producto agregado correctamente"),await ct()}catch(I){g("❌ Error al guardar producto"),console.error(I)}finally{gt(!1),setTimeout(()=>g(""),2500)}},nt=async I=>{if(!D){g("❌ Ingresa tu contraseña para confirmar"),setTimeout(()=>g(""),2500);return}try{gt(!0);const S=zs.credential(jl.currentUser.email,D);await W1(jl.currentUser,S);const A=Zl(_n,"productos",I.id);await hg(A,{nombre:I.nombre,precio:parseFloat(I.precio),stock:parseInt(I.stock)}),g("✅ Producto actualizado"),R(null),j(""),await ct()}catch(S){g("❌ Contraseña incorrecta o error"),console.error(S)}finally{gt(!1),setTimeout(()=>g(""),2500)}},lt=(I,S,A)=>{y(N=>N.map(O=>O.id===I?{...O,[S]:A}:O))},ht=p.filter(I=>F==="todos"?!0:F==="platos"?I.stock===999:F==="bebidas"?I.stock!==999:!0);return w.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[w.jsx("h2",{className:"text-xl font-bold text-orange-600 mb-4 border-b pb-2",children:"Agregar Nuevo Producto"}),f&&w.jsx("div",{className:`mb-4 p-3 rounded-md ${f.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:f}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Nombre"}),w.jsx("input",{type:"text",placeholder:"Nombre del producto",value:r,onChange:I=>t(I.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Precio (S/)"}),w.jsx("input",{type:"number",placeholder:"0.00",step:"0.01",min:"0",value:n,onChange:I=>s(I.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Stock"}),w.jsx("input",{type:"number",placeholder:"Cantidad",min:"0",value:o,onChange:I=>u(I.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),w.jsx("button",{onClick:ot,disabled:Z,className:"w-full md:w-auto bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-6 rounded-md transition disabled:opacity-50",children:Z?"Guardando...":"Guardar Producto"})]}),w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[w.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[w.jsx("h2",{className:"text-xl font-bold text-orange-600 mb-2 md:mb-0",children:"Lista de Productos"}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("span",{className:"text-gray-700",children:"Filtrar:"}),w.jsxs("select",{value:F,onChange:I=>J(I.target.value),className:"border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[w.jsx("option",{value:"todos",children:"Todos"}),w.jsx("option",{value:"platos",children:"Platos"}),w.jsx("option",{value:"bebidas",children:"Bebidas"})]})]})]}),Z&&p.length===0?w.jsx("div",{className:"flex justify-center items-center h-32",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500"})}):ht.length===0?w.jsx("p",{className:"text-gray-500 italic py-4",children:"No hay productos registrados"}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ht.map(I=>w.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:T===I.id?w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm mb-1",children:"Nombre"}),w.jsx("input",{type:"text",value:I.nombre,onChange:S=>lt(I.id,"nombre",S.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm mb-1",children:"Precio"}),w.jsx("input",{type:"number",value:I.precio,onChange:S=>lt(I.id,"precio",S.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm mb-1",children:"Stock"}),w.jsx("input",{type:"number",value:I.stock,onChange:S=>lt(I.id,"stock",S.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-gray-700 text-sm mb-1",children:"Contraseña"}),w.jsx("input",{type:"password",placeholder:"Tu contraseña",value:D,onChange:S=>j(S.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),w.jsxs("div",{className:"flex space-x-2 pt-2",children:[w.jsx("button",{onClick:()=>nt(I),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md",children:"Guardar"}),w.jsx("button",{onClick:()=>R(null),className:"bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-md",children:"Cancelar"})]})]}):w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("h3",{className:"font-bold text-lg text-gray-800",children:I.nombre}),w.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.stock===999?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:I.stock===999?"Plato":"Bebida"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-gray-500 text-sm",children:"Precio"}),w.jsxs("p",{className:"font-medium",children:["S/ ",I.precio.toFixed(2)]})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-gray-500 text-sm",children:"Stock"}),w.jsx("p",{className:"font-medium",children:I.stock})]})]}),w.jsx("button",{onClick:()=>R(I.id),className:"text-orange-600 hover:text-orange-800 text-sm font-medium",children:"Editar Producto"})]})},I.id))})]})]})};function LC(){const[r,t]=vt.useState(null),[n,s]=vt.useState(""),[o,u]=vt.useState("ventas"),[f,g]=vt.useState(!0);return vt.useEffect(()=>{const p=iw(jl,async y=>{if(y){t(y);const T=Zl(_n,"usuarios",y.uid),R=await CC(T);R.exists()?s(R.data().rol):s("vendedor")}else t(null),s("");g(!1)});return()=>p()},[]),f?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:w.jsx("div",{className:"text-orange-600 text-lg font-medium",children:"Cargando..."})}):r?w.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:w.jsxs("div",{className:"max-w-7xl mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:[w.jsxs("div",{className:"bg-orange-600 px-6 py-4 flex justify-between items-center",children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"🍔 Salchipapon"}),w.jsx("button",{onClick:()=>jl.signOut(),className:"text-white hover:text-orange-200 text-sm font-medium transition",children:"Cerrar sesión"})]}),w.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex flex-wrap gap-2",children:[w.jsx("button",{onClick:()=>u("ventas"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${o==="ventas"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"🛒 Ventas"}),w.jsx("button",{onClick:()=>u("pedidos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${o==="pedidos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"📄 Lista pedidos"}),n==="admin"&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>u("gastos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${o==="gastos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"💸 Gastos"}),w.jsx("button",{onClick:()=>u("dashboard"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${o==="dashboard"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"📊 Dashboard"}),w.jsx("button",{onClick:()=>u("productos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${o==="productos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"➕ Productos"})]})]}),w.jsxs("div",{className:"p-6",children:[o==="ventas"&&w.jsx(OC,{}),o==="pedidos"&&w.jsx(PC,{}),o==="gastos"&&n==="admin"&&w.jsx(VC,{}),o==="dashboard"&&w.jsx(MC,{}),o==="productos"&&w.jsx(kC,{})]})]})}):w.jsx(DC,{onLogin:()=>{}})}vA.createRoot(document.getElementById("root")).render(w.jsx(vt.StrictMode,{children:w.jsx(LC,{})}));
