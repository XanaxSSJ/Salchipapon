(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function gx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cm={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function mx(){if(C0)return lc;C0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:o}}return lc.Fragment=t,lc.jsx=e,lc.jsxs=e,lc}var D0;function px(){return D0||(D0=1,cm.exports=mx()),cm.exports}var W=px(),um={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function _x(){if(O0)return It;O0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function M(V,it,ct){this.props=V,this.context=it,this.refs=k,this.updater=ct||A}M.prototype.isReactComponent={},M.prototype.setState=function(V,it){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,it,"setState")},M.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function K(){}K.prototype=M.prototype;function G(V,it,ct){this.props=V,this.context=it,this.refs=k,this.updater=ct||A}var J=G.prototype=new K;J.constructor=G,I(J,M.prototype),J.isPureReactComponent=!0;var q=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},st=Object.prototype.hasOwnProperty;function C(V,it,ct,at,dt,wt){return ct=wt.ref,{$$typeof:n,type:V,key:it,ref:ct!==void 0?ct:null,props:wt}}function x(V,it){return C(V.type,it,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var it={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return it[ct]})}var P=/\/+/g;function L(V,it){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):it.toString(36)}function D(){}function Wt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(D,D):(V.status="pending",V.then(function(it){V.status==="pending"&&(V.status="fulfilled",V.value=it)},function(it){V.status==="pending"&&(V.status="rejected",V.reason=it)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function At(V,it,ct,at,dt){var wt=typeof V;(wt==="undefined"||wt==="boolean")&&(V=null);var pt=!1;if(V===null)pt=!0;else switch(wt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(V.$$typeof){case n:case t:pt=!0;break;case _:return pt=V._init,At(pt(V._payload),it,ct,at,dt)}}if(pt)return dt=dt(V),pt=at===""?"."+L(V,0):at,q(dt)?(ct="",pt!=null&&(ct=pt.replace(P,"$&/")+"/"),At(dt,it,ct,"",function(ri){return ri})):dt!=null&&(R(dt)&&(dt=x(dt,ct+(dt.key==null||V&&V.key===dt.key?"":(""+dt.key).replace(P,"$&/")+"/")+pt)),it.push(dt)),1;pt=0;var Ve=at===""?".":at+":";if(q(V))for(var re=0;re<V.length;re++)at=V[re],wt=Ve+L(at,re),pt+=At(at,it,ct,wt,dt);else if(re=T(V),typeof re=="function")for(V=re.call(V),re=0;!(at=V.next()).done;)at=at.value,wt=Ve+L(at,re++),pt+=At(at,it,ct,wt,dt);else if(wt==="object"){if(typeof V.then=="function")return At(Wt(V),it,ct,at,dt);throw it=String(V),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return pt}function Q(V,it,ct){if(V==null)return V;var at=[],dt=0;return At(V,at,"","",function(wt){return it.call(ct,wt,dt++)}),at}function ot(V){if(V._status===-1){var it=V._result;it=it(),it.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=it)}if(V._status===1)return V._result.default;throw V._result}var gt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Nt(){}return It.Children={map:Q,forEach:function(V,it,ct){Q(V,function(){it.apply(this,arguments)},ct)},count:function(V){var it=0;return Q(V,function(){it++}),it},toArray:function(V){return Q(V,function(it){return it})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},It.Component=M,It.Fragment=e,It.Profiler=a,It.PureComponent=G,It.StrictMode=i,It.Suspense=d,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,It.__COMPILER_RUNTIME={__proto__:null,c:function(V){return X.H.useMemoCache(V)}},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cloneElement=function(V,it,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var at=I({},V.props),dt=V.key,wt=void 0;if(it!=null)for(pt in it.ref!==void 0&&(wt=void 0),it.key!==void 0&&(dt=""+it.key),it)!st.call(it,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&it.ref===void 0||(at[pt]=it[pt]);var pt=arguments.length-2;if(pt===1)at.children=ct;else if(1<pt){for(var Ve=Array(pt),re=0;re<pt;re++)Ve[re]=arguments[re+2];at.children=Ve}return C(V.type,dt,void 0,void 0,wt,at)},It.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},It.createElement=function(V,it,ct){var at,dt={},wt=null;if(it!=null)for(at in it.key!==void 0&&(wt=""+it.key),it)st.call(it,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(dt[at]=it[at]);var pt=arguments.length-2;if(pt===1)dt.children=ct;else if(1<pt){for(var Ve=Array(pt),re=0;re<pt;re++)Ve[re]=arguments[re+2];dt.children=Ve}if(V&&V.defaultProps)for(at in pt=V.defaultProps,pt)dt[at]===void 0&&(dt[at]=pt[at]);return C(V,wt,void 0,void 0,null,dt)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:h,render:V}},It.isValidElement=R,It.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ot}},It.memo=function(V,it){return{$$typeof:m,type:V,compare:it===void 0?null:it}},It.startTransition=function(V){var it=X.T,ct={};X.T=ct;try{var at=V(),dt=X.S;dt!==null&&dt(ct,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(Nt,gt)}catch(wt){gt(wt)}finally{X.T=it}},It.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},It.use=function(V){return X.H.use(V)},It.useActionState=function(V,it,ct){return X.H.useActionState(V,it,ct)},It.useCallback=function(V,it){return X.H.useCallback(V,it)},It.useContext=function(V){return X.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,it){return X.H.useDeferredValue(V,it)},It.useEffect=function(V,it,ct){var at=X.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(V,it)},It.useId=function(){return X.H.useId()},It.useImperativeHandle=function(V,it,ct){return X.H.useImperativeHandle(V,it,ct)},It.useInsertionEffect=function(V,it){return X.H.useInsertionEffect(V,it)},It.useLayoutEffect=function(V,it){return X.H.useLayoutEffect(V,it)},It.useMemo=function(V,it){return X.H.useMemo(V,it)},It.useOptimistic=function(V,it){return X.H.useOptimistic(V,it)},It.useReducer=function(V,it,ct){return X.H.useReducer(V,it,ct)},It.useRef=function(V){return X.H.useRef(V)},It.useState=function(V){return X.H.useState(V)},It.useSyncExternalStore=function(V,it,ct){return X.H.useSyncExternalStore(V,it,ct)},It.useTransition=function(){return X.H.useTransition()},It.version="19.1.0",It}var M0;function mp(){return M0||(M0=1,um.exports=_x()),um.exports}var Rt=mp();const wT=gx(Rt);var hm={exports:{}},cc={},fm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function yx(){return k0||(k0=1,function(n){function t(Q,ot){var gt=Q.length;Q.push(ot);t:for(;0<gt;){var Nt=gt-1>>>1,V=Q[Nt];if(0<a(V,ot))Q[Nt]=ot,Q[gt]=V,gt=Nt;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ot=Q[0],gt=Q.pop();if(gt!==ot){Q[0]=gt;t:for(var Nt=0,V=Q.length,it=V>>>1;Nt<it;){var ct=2*(Nt+1)-1,at=Q[ct],dt=ct+1,wt=Q[dt];if(0>a(at,gt))dt<V&&0>a(wt,at)?(Q[Nt]=wt,Q[dt]=gt,Nt=dt):(Q[Nt]=at,Q[ct]=gt,Nt=ct);else if(dt<V&&0>a(wt,gt))Q[Nt]=wt,Q[dt]=gt,Nt=dt;else break t}}return ot}function a(Q,ot){var gt=Q.sortIndex-ot.sortIndex;return gt!==0?gt:Q.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],_=1,v=null,T=3,A=!1,I=!1,k=!1,M=!1,K=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function q(Q){for(var ot=e(m);ot!==null;){if(ot.callback===null)i(m);else if(ot.startTime<=Q)i(m),ot.sortIndex=ot.expirationTime,t(d,ot);else break;ot=e(m)}}function X(Q){if(k=!1,q(Q),!I)if(e(d)!==null)I=!0,st||(st=!0,L());else{var ot=e(m);ot!==null&&At(X,ot.startTime-Q)}}var st=!1,C=-1,x=5,R=-1;function N(){return M?!0:!(n.unstable_now()-R<x)}function P(){if(M=!1,st){var Q=n.unstable_now();R=Q;var ot=!0;try{t:{I=!1,k&&(k=!1,G(C),C=-1),A=!0;var gt=T;try{e:{for(q(Q),v=e(d);v!==null&&!(v.expirationTime>Q&&N());){var Nt=v.callback;if(typeof Nt=="function"){v.callback=null,T=v.priorityLevel;var V=Nt(v.expirationTime<=Q);if(Q=n.unstable_now(),typeof V=="function"){v.callback=V,q(Q),ot=!0;break e}v===e(d)&&i(d),q(Q)}else i(d);v=e(d)}if(v!==null)ot=!0;else{var it=e(m);it!==null&&At(X,it.startTime-Q),ot=!1}}break t}finally{v=null,T=gt,A=!1}ot=void 0}}finally{ot?L():st=!1}}}var L;if(typeof J=="function")L=function(){J(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Wt=D.port2;D.port1.onmessage=P,L=function(){Wt.postMessage(null)}}else L=function(){K(P,0)};function At(Q,ot){C=K(function(){Q(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var ot=3;break;default:ot=T}var gt=T;T=ot;try{return Q()}finally{T=gt}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(Q,ot){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var gt=T;T=Q;try{return ot()}finally{T=gt}},n.unstable_scheduleCallback=function(Q,ot,gt){var Nt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?Nt+gt:Nt):gt=Nt,Q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=gt+V,Q={id:_++,callback:ot,priorityLevel:Q,startTime:gt,expirationTime:V,sortIndex:-1},gt>Nt?(Q.sortIndex=gt,t(m,Q),e(d)===null&&Q===e(m)&&(k?(G(C),C=-1):k=!0,At(X,gt-Nt))):(Q.sortIndex=V,t(d,Q),I||A||(I=!0,st||(st=!0,L()))),Q},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Q){var ot=T;return function(){var gt=T;T=ot;try{return Q.apply(this,arguments)}finally{T=gt}}}}(dm)),dm}var N0;function vx(){return N0||(N0=1,fm.exports=yx()),fm.exports}var gm={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function bx(){if(P0)return Je;P0=1;var n=mp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,_)},Je.flushSync=function(d){var m=c.T,_=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=m,i.p=_,i.d.f()}},Je.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},Je.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Je.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:A}):_==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Je.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},Je.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Je.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},Je.requestFormReset=function(d){i.d.r(d)},Je.unstable_batchedUpdates=function(d,m){return d(m)},Je.useFormState=function(d,m,_){return c.H.useFormState(d,m,_)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var V0;function Ex(){if(V0)return gm.exports;V0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),gm.exports=bx(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function Tx(){if(L0)return cc;L0=1;var n=vx(),t=mp(),e=Ex();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,u=r;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===u)return h(g),r;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=g,u=p;else{for(var E=!1,S=g.child;S;){if(S===l){E=!0,l=g,u=p;break}if(S===u){E=!0,u=g,l=p;break}S=S.sibling}if(!E){for(S=p.child;S;){if(S===l){E=!0,l=p,u=g;break}if(S===u){E=!0,u=p,l=g;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),J=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Wt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case X:return"Suspense";case st:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case J:return(s.displayName||"Context")+".Provider";case G:return(s._context.displayName||"Context")+".Consumer";case q:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return r=s.displayName||null,r!==null?r:Wt(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return Wt(s(r))}catch{}}return null}var At=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},Nt=[],V=-1;function it(s){return{current:s}}function ct(s){0>V||(s.current=Nt[V],Nt[V]=null,V--)}function at(s,r){V++,Nt[V]=s.current,s.current=r}var dt=it(null),wt=it(null),pt=it(null),Ve=it(null);function re(s,r){switch(at(pt,r),at(wt,s),at(dt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?i0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=i0(r),s=s0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(dt),at(dt,s)}function ri(){ct(dt),ct(wt),ct(pt)}function bs(s){s.memoizedState!==null&&at(Ve,s);var r=dt.current,l=s0(r,s.type);r!==l&&(at(wt,s),at(dt,l))}function Vi(s){wt.current===s&&(ct(dt),ct(wt)),Ve.current===s&&(ct(Ve),ic._currentValue=gt)}var Ar=Object.prototype.hasOwnProperty,wr=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,tl=n.unstable_shouldYield,au=n.unstable_requestPaint,Dn=n.unstable_now,cd=n.unstable_getCurrentPriorityLevel,el=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,Rr=n.unstable_NormalPriority,ud=n.unstable_LowPriority,Ia=n.unstable_IdlePriority,nl=n.log,ou=n.unstable_setDisableYieldValue,de=null,Kt=null;function bn(s){if(typeof nl=="function"&&ou(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(de,s)}catch{}}var We=Math.clz32?Math.clz32:Ir,lu=Math.log,hd=Math.LN2;function Ir(s){return s>>>=0,s===0?32:31-(lu(s)/hd|0)|0}var Cr=256,Dr=4194304;function Qn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ca(s,r,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,p=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?g=Qn(u):(E&=S,E!==0?g=Qn(E):l||(l=S&~s,l!==0&&(g=Qn(l))))):(S=u&~p,S!==0?g=Qn(S):E!==0?g=Qn(E):l||(l=u&~s,l!==0&&(g=Qn(l)))),g===0?0:r!==0&&r!==g&&(r&p)===0&&(p=g&-g,l=r&-r,p>=l||p===32&&(l&4194048)!==0)?r:g}function Or(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function il(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sl(){var s=Cr;return Cr<<=1,(Cr&4194048)===0&&(Cr=256),s}function rl(){var s=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),s}function Li(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Ui(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function al(s,r,l,u,g,p){var E=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,O=s.expirationTimes,F=s.hiddenUpdates;for(l=E&~l;0<l;){var Z=31-We(l),et=1<<Z;S[Z]=0,O[Z]=-1;var H=F[Z];if(H!==null)for(F[Z]=null,Z=0;Z<H.length;Z++){var Y=H[Z];Y!==null&&(Y.lane&=-536870913)}l&=~et}u!==0&&ai(s,u,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~r))}function ai(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-We(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function ol(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var u=31-We(l),g=1<<u;g&r|s[u]&r&&(s[u]|=r),l&=~g}}function Es(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Da(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ts(){var s=ot.p;return s!==0?s:(s=window.event,s===void 0?32:S0(s.type))}function cu(s,r){var l=ot.p;try{return ot.p=s,r()}finally{ot.p=l}}var ce=Math.random().toString(36).slice(2),Re="__reactFiber$"+ce,Ee="__reactProps$"+ce,On="__reactContainer$"+ce,ll="__reactEvents$"+ce,fd="__reactListeners$"+ce,Ss="__reactHandles$"+ce,uu="__reactResources$"+ce,Mr="__reactMarker$"+ce;function As(s){delete s[Re],delete s[Ee],delete s[ll],delete s[fd],delete s[Ss]}function zi(s){var r=s[Re];if(r)return r;for(var l=s.parentNode;l;){if(r=l[On]||l[Re]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=l0(s);s!==null;){if(l=s[Re])return l;s=l0(s)}return r}s=l,l=s.parentNode}return null}function oi(s){if(s=s[Re]||s[On]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function li(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function cn(s){var r=s[uu];return r||(r=s[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pe(s){s[Mr]=!0}var cl=new Set,Oa={};function Xn(s,r){Bi(s,r),Bi(s+"Capture",r)}function Bi(s,r){for(Oa[s]=r,s=0;s<r.length;s++)cl.add(r[s])}var hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},kr={};function du(s){return Ar.call(kr,s)?!0:Ar.call(fu,s)?!1:hu.test(s)?kr[s]=!0:(fu[s]=!0,!1)}function ws(s,r,l){if(du(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function ci(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function He(s,r,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+u)}}var Nr,gu;function ji(s){if(Nr===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Nr=r&&r[1]||"",gu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nr+s+gu}var Ma=!1;function ka(s,r){if(!s||Ma)return"";Ma=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Y){var H=Y}Reflect.construct(s,[],et)}else{try{et.call()}catch(Y){H=Y}s.call(et.prototype)}}else{try{throw Error()}catch(Y){H=Y}(et=s())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],S=p[1];if(E&&S){var O=E.split(`
`),F=S.split(`
`);for(g=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===O.length||g===F.length)for(u=O.length-1,g=F.length-1;1<=u&&0<=g&&O[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(O[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||O[u]!==F[g]){var Z=`
`+O[u].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=u&&0<=g);break}}}finally{Ma=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ji(l):""}function ul(s){switch(s.tag){case 26:case 27:case 5:return ji(s.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 15:return ka(s.type,!1);case 11:return ka(s.type.render,!1);case 1:return ka(s.type,!0);case 31:return ji("Activity");default:return""}}function Na(s){try{var r="";do r+=ul(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hl(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dd(s){var r=hl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),u=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Pa(s){s._valueTracker||(s._valueTracker=dd(s))}function fl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return s&&(u=hl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(r.setValue(s),!0):!1}function Pr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var gd=/[\n"\\]/g;function Te(s){return s.replace(gd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function En(s,r,l,u,g,p,E,S){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?xs(s,E,un(r)):l!=null?xs(s,E,un(l)):u!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+un(S):s.removeAttribute("name")}function Vr(s,r,l,u,g,p,E,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,S||r===s.value||(s.value=r),s.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=S?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function xs(s,r,l){r==="number"&&Pr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Fi(s,r,l,u){if(s=s.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=r.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function Zt(s,r,l){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+un(l):""}function Lr(s,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(i(92));if(At(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=un(r),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Mn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mu(s,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,l):typeof l!="number"||l===0||Ur.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function dl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&mu(s,g,u)}else for(var p in r)r.hasOwnProperty(p)&&mu(s,p,r[p])}function gl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(s){return pd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Hi=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var qi=null,Gi=null;function ml(s){var r=oi(s);if(r&&(s=r.stateNode)){var l=s[Ee]||null;t:switch(s=r.stateNode,r.type){case"input":if(En(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Te(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==s&&u.form===s.form){var g=u[Ee]||null;if(!g)throw Error(i(90));En(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===s.form&&fl(u)}break t;case"textarea":Zt(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&Fi(s,!!l.multiple,r,!1)}}}var ui=!1;function pu(s,r,l){if(ui)return s(r,l);ui=!0;try{var u=s(r);return u}finally{if(ui=!1,(qi!==null||Gi!==null)&&(ch(),qi&&(r=qi,s=Gi,Gi=qi=null,ml(r),s)))for(r=0;r<s.length;r++)ml(s[r])}}function zr(s,r){var l=s.stateNode;if(l===null)return null;var u=l[Ee]||null;if(u===null)return null;l=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if($n)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Nn=!1}var hi=null,Rs=null,Yi=null;function pl(){if(Yi)return Yi;var s,r=Rs,l=r.length,u,g="value"in hi?hi.value:hi.textContent,p=g.length;for(s=0;s<l&&r[s]===g[s];s++);var E=l-s;for(u=1;u<=E&&r[l-u]===g[p-u];u++);return Yi=g.slice(s,1<u?1-u:void 0)}function fi(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function di(){return!0}function _l(){return!1}function Le(s){function r(l,u,g,p,E){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?di:_l,this.isPropagationStopped=_l,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),r}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Le(Gt),jr=_({},Gt,{view:0,detail:0}),_u=Le(jr),Ua,za,gi,Fr=_({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Ua=s.screenX-gi.screenX,za=s.screenY-gi.screenY):za=Ua=0,gi=s),Ua)},movementY:function(s){return"movementY"in s?s.movementY:za}}),Pn=Le(Fr),yu=_({},Fr,{dataTransfer:0}),_d=Le(yu),Hr=_({},jr,{relatedTarget:0}),Ba=Le(Hr),yl=_({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Le(yl),vu=_({},Gt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Fa=Le(vu),yd=_({},Gt,{data:0}),vl=Le(yd),qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bl(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Eu[s])?!!r[s]:!1}function Gr(){return bl}var Tu=_({},jr,{key:function(s){if(s.key){var r=qr[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=fi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?bu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(s){return s.type==="keypress"?fi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ha=Le(Tu),Su=_({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),El=Le(Su),Ki=_({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Au=Le(Ki),wu=_({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Le(wu),Ru=_({},Fr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=Le(Ru),hn=_({},Gt,{newState:0,oldState:0}),Iu=Le(hn),Cu=[9,13,27,32],mi=$n&&"CompositionEvent"in window,f=null;$n&&"documentMode"in document&&(f=document.documentMode);var y=$n&&"TextEvent"in window&&!f,b=$n&&(!mi||f&&8<f&&11>=f),w=" ",B=!1;function $(s,r){switch(s){case"keyup":return Cu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function Ie(s,r){switch(s){case"compositionend":return lt(r);case"keypress":return r.which!==32?null:(B=!0,w);case"textInput":return s=r.data,s===w&&B?null:s;default:return null}}function Ut(s,r){if(Lt)return s==="compositionend"||!mi&&$(s,r)?(s=pl(),Yi=Rs=hi=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b&&r.locale!=="ko"?null:r.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Ue[s.type]:r==="textarea"}function Qi(s,r,l,u){qi?Gi?Gi.push(u):Gi=[u]:qi=u,r=mh(r,"onChange"),0<r.length&&(l=new La("onChange","change",null,l,u),s.push({event:l,listeners:r}))}var qe=null,pi=null;function Tl(s){Zv(s,0)}function Du(s){var r=li(s);if(fl(r))return s}function v_(s,r){if(s==="change")return r}var b_=!1;if($n){var vd;if($n){var bd="oninput"in document;if(!bd){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),bd=typeof E_.oninput=="function"}vd=bd}else vd=!1;b_=vd&&(!document.documentMode||9<document.documentMode)}function T_(){qe&&(qe.detachEvent("onpropertychange",S_),pi=qe=null)}function S_(s){if(s.propertyName==="value"&&Du(pi)){var r=[];Qi(r,pi,s,kn(s)),pu(Tl,r)}}function qw(s,r,l){s==="focusin"?(T_(),qe=r,pi=l,qe.attachEvent("onpropertychange",S_)):s==="focusout"&&T_()}function Gw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Du(pi)}function Yw(s,r){if(s==="click")return Du(r)}function Kw(s,r){if(s==="input"||s==="change")return Du(r)}function Qw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Tn=typeof Object.is=="function"?Object.is:Qw;function Sl(s,r){if(Tn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Ar.call(r,g)||!Tn(s[g],r[g]))return!1}return!0}function A_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function w_(s,r){var l=A_(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=r&&u>=r)return{node:l,offset:r-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=A_(l)}}function x_(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?x_(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function R_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Pr(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Pr(s.document)}return r}function Ed(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Xw=$n&&"documentMode"in document&&11>=document.documentMode,Ga=null,Td=null,Al=null,Sd=!1;function I_(s,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sd||Ga==null||Ga!==Pr(u)||(u=Ga,"selectionStart"in u&&Ed(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Al&&Sl(Al,u)||(Al=u,u=mh(Td,"onSelect"),0<u.length&&(r=new La("onSelect","select",null,r,l),s.push({event:r,listeners:u}),r.target=Ga)))}function Yr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Ya={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Ad={},C_={};$n&&(C_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Kr(s){if(Ad[s])return Ad[s];if(!Ya[s])return s;var r=Ya[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in C_)return Ad[s]=r[l];return s}var D_=Kr("animationend"),O_=Kr("animationiteration"),M_=Kr("animationstart"),$w=Kr("transitionrun"),Ww=Kr("transitionstart"),Zw=Kr("transitioncancel"),k_=Kr("transitionend"),N_=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function Wn(s,r){N_.set(s,r),Xn(r,[s])}var P_=new WeakMap;function Vn(s,r){if(typeof s=="object"&&s!==null){var l=P_.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Na(r)},P_.set(s,r),r)}return{value:s,source:r,stack:Na(r)}}var Ln=[],Ka=0,xd=0;function Ou(){for(var s=Ka,r=xd=Ka=0;r<s;){var l=Ln[r];Ln[r++]=null;var u=Ln[r];Ln[r++]=null;var g=Ln[r];Ln[r++]=null;var p=Ln[r];if(Ln[r++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}p!==0&&V_(l,g,p)}}function Mu(s,r,l,u){Ln[Ka++]=s,Ln[Ka++]=r,Ln[Ka++]=l,Ln[Ka++]=u,xd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Rd(s,r,l,u){return Mu(s,r,l,u),ku(s)}function Qa(s,r){return Mu(s,null,null,r),ku(s)}function V_(s,r,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&r!==null&&(g=31-We(l),s=p.hiddenUpdates,u=s[g],u===null?s[g]=[r]:u.push(r),r.lane=l|536870912),p):null}function ku(s){if(50<Xl)throw Xl=0,kg=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Xa={};function Jw(s,r,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(s,r,l,u){return new Jw(s,r,l,u)}function Id(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Xi(s,r){var l=s.alternate;return l===null?(l=Sn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function L_(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Nu(s,r,l,u,g,p){var E=0;if(u=s,typeof s=="function")Id(s)&&(E=1);else if(typeof s=="string")E=ex(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case R:return s=Sn(31,l,r,g),s.elementType=R,s.lanes=p,s;case I:return Qr(l.children,g,p,r);case k:E=8,g|=24;break;case M:return s=Sn(12,l,r,g|2),s.elementType=M,s.lanes=p,s;case X:return s=Sn(13,l,r,g),s.elementType=X,s.lanes=p,s;case st:return s=Sn(19,l,r,g),s.elementType=st,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:case J:E=10;break t;case G:E=9;break t;case q:E=11;break t;case C:E=14;break t;case x:E=16,u=null;break t}E=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=Sn(E,l,r,g),r.elementType=s,r.type=u,r.lanes=p,r}function Qr(s,r,l,u){return s=Sn(7,s,u,r),s.lanes=l,s}function Cd(s,r,l){return s=Sn(6,s,null,r),s.lanes=l,s}function Dd(s,r,l){return r=Sn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var $a=[],Wa=0,Pu=null,Vu=0,Un=[],zn=0,Xr=null,$i=1,Wi="";function $r(s,r){$a[Wa++]=Vu,$a[Wa++]=Pu,Pu=s,Vu=r}function U_(s,r,l){Un[zn++]=$i,Un[zn++]=Wi,Un[zn++]=Xr,Xr=s;var u=$i;s=Wi;var g=32-We(u)-1;u&=~(1<<g),l+=1;var p=32-We(r)+g;if(30<p){var E=g-g%5;p=(u&(1<<E)-1).toString(32),u>>=E,g-=E,$i=1<<32-We(r)+g|l<<g|u,Wi=p+s}else $i=1<<p|l<<g|u,Wi=s}function Od(s){s.return!==null&&($r(s,1),U_(s,1,0))}function Md(s){for(;s===Pu;)Pu=$a[--Wa],$a[Wa]=null,Vu=$a[--Wa],$a[Wa]=null;for(;s===Xr;)Xr=Un[--zn],Un[zn]=null,Wi=Un[--zn],Un[zn]=null,$i=Un[--zn],Un[zn]=null}var fn=null,ge=null,Ht=!1,Wr=null,_i=!1,kd=Error(i(519));function Zr(s){var r=Error(i(418,""));throw Rl(Vn(r,s)),kd}function z_(s){var r=s.stateNode,l=s.type,u=s.memoizedProps;switch(r[Re]=s,r[Ee]=u,l){case"dialog":kt("cancel",r),kt("close",r);break;case"iframe":case"object":case"embed":kt("load",r);break;case"video":case"audio":for(l=0;l<Wl.length;l++)kt(Wl[l],r);break;case"source":kt("error",r);break;case"img":case"image":case"link":kt("error",r),kt("load",r);break;case"details":kt("toggle",r);break;case"input":kt("invalid",r),Vr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Pa(r);break;case"select":kt("invalid",r);break;case"textarea":kt("invalid",r),Lr(r,u.value,u.defaultValue,u.children),Pa(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||n0(r.textContent,l)?(u.popover!=null&&(kt("beforetoggle",r),kt("toggle",r)),u.onScroll!=null&&kt("scroll",r),u.onScrollEnd!=null&&kt("scrollend",r),u.onClick!=null&&(r.onclick=ph),r=!0):r=!1,r||Zr(s)}function B_(s){for(fn=s.return;fn;)switch(fn.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:fn=fn.return}}function wl(s){if(s!==fn)return!1;if(!Ht)return B_(s),Ht=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Xg(s.type,s.memoizedProps)),l=!l),l&&ge&&Zr(s),B_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){ge=Jn(s.nextSibling);break t}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}ge=null}}else r===27?(r=ge,Hs(s.type)?(s=Jg,Jg=null,ge=s):ge=r):ge=fn?Jn(s.stateNode.nextSibling):null;return!0}function xl(){ge=fn=null,Ht=!1}function j_(){var s=Wr;return s!==null&&(mn===null?mn=s:mn.push.apply(mn,s),Wr=null),s}function Rl(s){Wr===null?Wr=[s]:Wr.push(s)}var Nd=it(null),Jr=null,Zi=null;function Is(s,r,l){at(Nd,r._currentValue),r._currentValue=l}function Ji(s){s._currentValue=Nd.current,ct(Nd)}function Pd(s,r,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===l)break;s=s.return}}function Vd(s,r,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var E=g.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=g;for(var O=0;O<r.length;O++)if(S.context===r[O]){p.lanes|=l,S=p.alternate,S!==null&&(S.lanes|=l),Pd(p.return,l,s),u||(E=null);break t}p=S.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=l,p=E.alternate,p!==null&&(p.lanes|=l),Pd(E,l,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Il(s,r,l,u){s=null;for(var g=r,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=g.type;Tn(g.pendingProps.value,E.value)||(s!==null?s.push(S):s=[S])}}else if(g===Ve.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(ic):s=[ic])}g=g.return}s!==null&&Vd(r,s,l,u),r.flags|=262144}function Lu(s){for(s=s.firstContext;s!==null;){if(!Tn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ta(s){Jr=s,Zi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ze(s){return F_(Jr,s)}function Uu(s,r){return Jr===null&&ta(s),F_(s,r)}function F_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Zi===null){if(s===null)throw Error(i(308));Zi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Zi=Zi.next=r;return l}var t1=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},e1=n.unstable_scheduleCallback,n1=n.unstable_NormalPriority,De={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new t1,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&e1(n1,function(){s.controller.abort()})}var Dl=null,Ud=0,Za=0,Ja=null;function i1(s,r){if(Dl===null){var l=Dl=[];Ud=0,Za=Bg(),Ja={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Ud++,r.then(H_,H_),r}function H_(){if(--Ud===0&&Dl!==null){Ja!==null&&(Ja.status="fulfilled");var s=Dl;Dl=null,Za=0,Ja=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function s1(s,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var q_=Q.S;Q.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&i1(s,r),q_!==null&&q_(s,r)};var ea=it(null);function zd(){var s=ea.current;return s!==null?s:ae.pooledCache}function zu(s,r){r===null?at(ea,ea.current):at(ea,r.pool)}function G_(){var s=zd();return s===null?null:{parent:De._currentValue,pool:s}}var Ol=Error(i(460)),Y_=Error(i(474)),Bu=Error(i(542)),Bd={then:function(){}};function K_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ju(){}function Q_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ju,ju),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,$_(s),s;default:if(typeof r.status=="string")r.then(ju,ju);else{if(s=ae,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,$_(s),s}throw Ml=r,Ol}}var Ml=null;function X_(){if(Ml===null)throw Error(i(459));var s=Ml;return Ml=null,s}function $_(s){if(s===Ol||s===Bu)throw Error(i(483))}var Cs=!1;function jd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ds(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Os(s,r,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=ku(s),V_(s,null,l),r}return Mu(s,u,r,l),ku(s)}function kl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,ol(s,l)}}function Hd(s,r){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=E:p=p.next=E,l=l.next}while(l!==null);p===null?g=p=r:p=p.next=r}else g=p=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var qd=!1;function Nl(){if(qd){var s=Ja;if(s!==null)throw s}}function Pl(s,r,l,u){qd=!1;var g=s.updateQueue;Cs=!1;var p=g.firstBaseUpdate,E=g.lastBaseUpdate,S=g.shared.pending;if(S!==null){g.shared.pending=null;var O=S,F=O.next;O.next=null,E===null?p=F:E.next=F,E=O;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==E&&(S===null?Z.firstBaseUpdate=F:S.next=F,Z.lastBaseUpdate=O))}if(p!==null){var et=g.baseState;E=0,Z=F=O=null,S=p;do{var H=S.lane&-536870913,Y=H!==S.lane;if(Y?(zt&H)===H:(u&H)===H){H!==0&&H===Za&&(qd=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Tt=s,yt=S;H=r;var ee=l;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){et=Tt.call(ee,et,H);break t}et=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,H=typeof Tt=="function"?Tt.call(ee,et,H):Tt,H==null)break t;et=_({},et,H);break t;case 2:Cs=!0}}H=S.callback,H!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=g.callbacks,Y===null?g.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(F=Z=Y,O=et):Z=Z.next=Y,E|=H;if(S=S.next,S===null){if(S=g.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,g.lastBaseUpdate=Y,g.shared.pending=null}}while(!0);Z===null&&(O=et),g.baseState=O,g.firstBaseUpdate=F,g.lastBaseUpdate=Z,p===null&&(g.shared.lanes=0),zs|=E,s.lanes=E,s.memoizedState=et}}function W_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Z_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)W_(l[s],r)}var to=it(null),Fu=it(0);function J_(s,r){s=as,at(Fu,s),at(to,r),as=s|r.baseLanes}function Gd(){at(Fu,as),at(to,to.current)}function Yd(){as=Fu.current,ct(to),ct(Fu)}var Ms=0,Ct=null,Jt=null,Se=null,Hu=!1,eo=!1,na=!1,qu=0,Vl=0,no=null,r1=0;function _e(){throw Error(i(321))}function Kd(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Tn(s[l],r[l]))return!1;return!0}function Qd(s,r,l,u,g,p){return Ms=p,Ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=s===null||s.memoizedState===null?Vy:Ly,na=!1,p=l(u,g),na=!1,eo&&(p=ey(r,l,u,g)),ty(s),p}function ty(s){Q.H=$u;var r=Jt!==null&&Jt.next!==null;if(Ms=0,Se=Jt=Ct=null,Hu=!1,Vl=0,no=null,r)throw Error(i(300));s===null||ze||(s=s.dependencies,s!==null&&Lu(s)&&(ze=!0))}function ey(s,r,l,u){Ct=s;var g=0;do{if(eo&&(no=null),Vl=0,eo=!1,25<=g)throw Error(i(301));if(g+=1,Se=Jt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Q.H=f1,p=r(l,u)}while(eo);return p}function a1(){var s=Q.H,r=s.useState()[0];return r=typeof r.then=="function"?Ll(r):r,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(Ct.flags|=1024),r}function Xd(){var s=qu!==0;return qu=0,s}function $d(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Wd(s){if(Hu){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Hu=!1}Ms=0,Se=Jt=Ct=null,eo=!1,Vl=qu=0,no=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Ct.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Jt===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var r=Se===null?Ct.memoizedState:Se.next;if(r!==null)Se=r,Jt=s;else{if(s===null)throw Ct.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?Ct.memoizedState=Se=s:Se=Se.next=s}return Se}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(s){var r=Vl;return Vl+=1,no===null&&(no=[]),s=Q_(no,s,r),r=Ct,(Se===null?r.memoizedState:Se.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?Vy:Ly),s}function Gu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ll(s);if(s.$$typeof===J)return Ze(s)}throw Error(i(438,String(s)))}function Jd(s){var r=null,l=Ct.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Zd(),Ct.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),u=0;u<s;u++)l[u]=N;return r.index++,l}function ts(s,r){return typeof r=="function"?r(s):r}function Yu(s){var r=Ae();return tg(r,Jt,s)}function tg(s,r,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var g=s.baseQueue,p=u.pending;if(p!==null){if(g!==null){var E=g.next;g.next=p.next,p.next=E}r.baseQueue=g=p,u.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{r=g.next;var S=E=null,O=null,F=r,Z=!1;do{var et=F.lane&-536870913;if(et!==F.lane?(zt&et)===et:(Ms&et)===et){var H=F.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),et===Za&&(Z=!0);else if((Ms&H)===H){F=F.next,H===Za&&(Z=!0);continue}else et={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(S=O=et,E=p):O=O.next=et,Ct.lanes|=H,zs|=H;et=F.action,na&&l(p,et),p=F.hasEagerState?F.eagerState:l(p,et)}else H={lane:et,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(S=O=H,E=p):O=O.next=H,Ct.lanes|=et,zs|=et;F=F.next}while(F!==null&&F!==r);if(O===null?E=p:O.next=S,!Tn(p,s.memoizedState)&&(ze=!0,Z&&(l=Ja,l!==null)))throw l;s.memoizedState=p,s.baseState=E,s.baseQueue=O,u.lastRenderedState=p}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function eg(s){var r=Ae(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,p=r.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do p=s(p,E.action),E=E.next;while(E!==g);Tn(p,r.memoizedState)||(ze=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),l.lastRenderedState=p}return[p,u]}function ny(s,r,l){var u=Ct,g=Ae(),p=Ht;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=r();var E=!Tn((Jt||g).memoizedState,l);E&&(g.memoizedState=l,ze=!0),g=g.queue;var S=ry.bind(null,u,g,s);if(Ul(2048,8,S,[s]),g.getSnapshot!==r||E||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,io(9,Ku(),sy.bind(null,u,g,l,r),null),ae===null)throw Error(i(349));p||(Ms&124)!==0||iy(u,r,l)}return l}function iy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Ct.updateQueue,r===null?(r=Zd(),Ct.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function sy(s,r,l,u){r.value=l,r.getSnapshot=u,ay(r)&&oy(s)}function ry(s,r,l){return l(function(){ay(r)&&oy(s)})}function ay(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Tn(s,l)}catch{return!0}}function oy(s){var r=Qa(s,2);r!==null&&In(r,s,2)}function ng(s){var r=dn();if(typeof s=="function"){var l=s;if(s=l(),na){bn(!0);try{l()}finally{bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},r}function ly(s,r,l,u){return s.baseState=l,tg(s,Jt,typeof u=="function"?u:ts)}function o1(s,r,l,u,g){if(Xu(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};Q.T!==null?l(!0):p.isTransition=!1,u(p),l=r.pending,l===null?(p.next=r.pending=p,cy(r,p)):(p.next=l.next,r.pending=l.next=p)}}function cy(s,r){var l=r.action,u=r.payload,g=s.state;if(r.isTransition){var p=Q.T,E={};Q.T=E;try{var S=l(g,u),O=Q.S;O!==null&&O(E,S),uy(s,r,S)}catch(F){ig(s,r,F)}finally{Q.T=p}}else try{p=l(g,u),uy(s,r,p)}catch(F){ig(s,r,F)}}function uy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){hy(s,r,u)},function(u){return ig(s,r,u)}):hy(s,r,l)}function hy(s,r,l){r.status="fulfilled",r.value=l,fy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,cy(s,l)))}function ig(s,r,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,fy(r),r=r.next;while(r!==u)}s.action=null}function fy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function dy(s,r){return r}function gy(s,r){if(Ht){var l=ae.formState;if(l!==null){t:{var u=Ct;if(Ht){if(ge){e:{for(var g=ge,p=_i;g.nodeType!==8;){if(!p){g=null;break e}if(g=Jn(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){ge=Jn(g.nextSibling),u=g.data==="F!";break t}}Zr(u)}u=!1}u&&(r=l[0])}}return l=dn(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},l.queue=u,l=ky.bind(null,Ct,u),u.dispatch=l,u=ng(!1),p=lg.bind(null,Ct,!1,u.queue),u=dn(),g={state:r,dispatch:null,action:s,pending:null},u.queue=g,l=o1.bind(null,Ct,g,p,l),g.dispatch=l,u.memoizedState=s,[r,l,!1]}function my(s){var r=Ae();return py(r,Jt,s)}function py(s,r,l){if(r=tg(s,r,dy)[0],s=Yu(ts)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ll(r)}catch(E){throw E===Ol?Bu:E}else u=r;r=Ae();var g=r.queue,p=g.dispatch;return l!==r.memoizedState&&(Ct.flags|=2048,io(9,Ku(),l1.bind(null,g,l),null)),[u,p,s]}function l1(s,r){s.action=r}function _y(s){var r=Ae(),l=Jt;if(l!==null)return py(r,l,s);Ae(),r=r.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[r,u,!1]}function io(s,r,l,u){return s={tag:s,create:l,deps:u,inst:r,next:null},r=Ct.updateQueue,r===null&&(r=Zd(),Ct.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,r.lastEffect=s),s}function Ku(){return{destroy:void 0,resource:void 0}}function yy(){return Ae().memoizedState}function Qu(s,r,l,u){var g=dn();u=u===void 0?null:u,Ct.flags|=s,g.memoizedState=io(1|r,Ku(),l,u)}function Ul(s,r,l,u){var g=Ae();u=u===void 0?null:u;var p=g.memoizedState.inst;Jt!==null&&u!==null&&Kd(u,Jt.memoizedState.deps)?g.memoizedState=io(r,p,l,u):(Ct.flags|=s,g.memoizedState=io(1|r,p,l,u))}function vy(s,r){Qu(8390656,8,s,r)}function by(s,r){Ul(2048,8,s,r)}function Ey(s,r){return Ul(4,2,s,r)}function Ty(s,r){return Ul(4,4,s,r)}function Sy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ay(s,r,l){l=l!=null?l.concat([s]):null,Ul(4,4,Sy.bind(null,r,s),l)}function sg(){}function wy(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Kd(r,u[1])?u[0]:(l.memoizedState=[s,r],s)}function xy(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Kd(r,u[1]))return u[0];if(u=s(),na){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,r],u}function rg(s,r,l){return l===void 0||(Ms&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=Cv(),Ct.lanes|=s,zs|=s,l)}function Ry(s,r,l,u){return Tn(l,r)?l:to.current!==null?(s=rg(s,l,u),Tn(s,r)||(ze=!0),s):(Ms&42)===0?(ze=!0,s.memoizedState=l):(s=Cv(),Ct.lanes|=s,zs|=s,r)}function Iy(s,r,l,u,g){var p=ot.p;ot.p=p!==0&&8>p?p:8;var E=Q.T,S={};Q.T=S,lg(s,!1,r,l);try{var O=g(),F=Q.S;if(F!==null&&F(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=s1(O,u);zl(s,r,Z,Rn(s))}else zl(s,r,u,Rn(s))}catch(et){zl(s,r,{then:function(){},status:"rejected",reason:et},Rn())}finally{ot.p=p,Q.T=E}}function c1(){}function ag(s,r,l,u){if(s.tag!==5)throw Error(i(476));var g=Cy(s).queue;Iy(s,g,r,gt,l===null?c1:function(){return Dy(s),l(u)})}function Cy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:gt},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Dy(s){var r=Cy(s).next.queue;zl(s,r,{},Rn())}function og(){return Ze(ic)}function Oy(){return Ae().memoizedState}function My(){return Ae().memoizedState}function u1(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Rn();s=Ds(l);var u=Os(r,s,l);u!==null&&(In(u,r,l),kl(u,r,l)),r={cache:Ld()},s.payload=r;return}r=r.return}}function h1(s,r,l){var u=Rn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Xu(s)?Ny(r,l):(l=Rd(s,r,l,u),l!==null&&(In(l,s,u),Py(l,r,u)))}function ky(s,r,l){var u=Rn();zl(s,r,l,u)}function zl(s,r,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Xu(s))Ny(r,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,S=p(E,l);if(g.hasEagerState=!0,g.eagerState=S,Tn(S,E))return Mu(s,r,g,0),ae===null&&Ou(),!1}catch{}finally{}if(l=Rd(s,r,g,u),l!==null)return In(l,s,u),Py(l,r,u),!0}return!1}function lg(s,r,l,u){if(u={lane:2,revertLane:Bg(),action:u,hasEagerState:!1,eagerState:null,next:null},Xu(s)){if(r)throw Error(i(479))}else r=Rd(s,l,u,2),r!==null&&In(r,s,2)}function Xu(s){var r=s.alternate;return s===Ct||r!==null&&r===Ct}function Ny(s,r){eo=Hu=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function Py(s,r,l){if((l&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,ol(s,l)}}var $u={readContext:Ze,use:Gu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Vy={readContext:Ze,use:Gu,useCallback:function(s,r){return dn().memoizedState=[s,r===void 0?null:r],s},useContext:Ze,useEffect:vy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Qu(4194308,4,Sy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Qu(4194308,4,s,r)},useInsertionEffect:function(s,r){Qu(4,2,s,r)},useMemo:function(s,r){var l=dn();r=r===void 0?null:r;var u=s();if(na){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,r],u},useReducer:function(s,r,l){var u=dn();if(l!==void 0){var g=l(r);if(na){bn(!0);try{l(r)}finally{bn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=h1.bind(null,Ct,s),[u.memoizedState,s]},useRef:function(s){var r=dn();return s={current:s},r.memoizedState=s},useState:function(s){s=ng(s);var r=s.queue,l=ky.bind(null,Ct,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:sg,useDeferredValue:function(s,r){var l=dn();return rg(l,s,r)},useTransition:function(){var s=ng(!1);return s=Iy.bind(null,Ct,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var u=Ct,g=dn();if(Ht){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ae===null)throw Error(i(349));(zt&124)!==0||iy(u,r,l)}g.memoizedState=l;var p={value:l,getSnapshot:r};return g.queue=p,vy(ry.bind(null,u,p,s),[s]),u.flags|=2048,io(9,Ku(),sy.bind(null,u,p,l,r),null),l},useId:function(){var s=dn(),r=ae.identifierPrefix;if(Ht){var l=Wi,u=$i;l=(u&~(1<<32-We(u)-1)).toString(32)+l,r="«"+r+"R"+l,l=qu++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=r1++,r="«"+r+"r"+l.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:og,useFormState:gy,useActionState:gy,useOptimistic:function(s){var r=dn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=lg.bind(null,Ct,!0,l),l.dispatch=r,[s,r]},useMemoCache:Jd,useCacheRefresh:function(){return dn().memoizedState=u1.bind(null,Ct)}},Ly={readContext:Ze,use:Gu,useCallback:wy,useContext:Ze,useEffect:by,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:Ty,useMemo:xy,useReducer:Yu,useRef:yy,useState:function(){return Yu(ts)},useDebugValue:sg,useDeferredValue:function(s,r){var l=Ae();return Ry(l,Jt.memoizedState,s,r)},useTransition:function(){var s=Yu(ts)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Ll(s),r]},useSyncExternalStore:ny,useId:Oy,useHostTransitionStatus:og,useFormState:my,useActionState:my,useOptimistic:function(s,r){var l=Ae();return ly(l,Jt,s,r)},useMemoCache:Jd,useCacheRefresh:My},f1={readContext:Ze,use:Gu,useCallback:wy,useContext:Ze,useEffect:by,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:Ty,useMemo:xy,useReducer:eg,useRef:yy,useState:function(){return eg(ts)},useDebugValue:sg,useDeferredValue:function(s,r){var l=Ae();return Jt===null?rg(l,s,r):Ry(l,Jt.memoizedState,s,r)},useTransition:function(){var s=eg(ts)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Ll(s),r]},useSyncExternalStore:ny,useId:Oy,useHostTransitionStatus:og,useFormState:_y,useActionState:_y,useOptimistic:function(s,r){var l=Ae();return Jt!==null?ly(l,Jt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:My},so=null,Bl=0;function Wu(s){var r=Bl;return Bl+=1,so===null&&(so=[]),Q_(so,s,r)}function jl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Zu(s,r){throw r.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Uy(s){var r=s._init;return r(s._payload)}function zy(s){function r(z,U){if(s){var j=z.deletions;j===null?(z.deletions=[U],z.flags|=16):j.push(U)}}function l(z,U){if(!s)return null;for(;U!==null;)r(z,U),U=U.sibling;return null}function u(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function g(z,U){return z=Xi(z,U),z.index=0,z.sibling=null,z}function p(z,U,j){return z.index=j,s?(j=z.alternate,j!==null?(j=j.index,j<U?(z.flags|=67108866,U):j):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function S(z,U,j,tt){return U===null||U.tag!==6?(U=Cd(j,z.mode,tt),U.return=z,U):(U=g(U,j),U.return=z,U)}function O(z,U,j,tt){var ht=j.type;return ht===I?Z(z,U,j.props.children,tt,j.key):U!==null&&(U.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&Uy(ht)===U.type)?(U=g(U,j.props),jl(U,j),U.return=z,U):(U=Nu(j.type,j.key,j.props,null,z.mode,tt),jl(U,j),U.return=z,U)}function F(z,U,j,tt){return U===null||U.tag!==4||U.stateNode.containerInfo!==j.containerInfo||U.stateNode.implementation!==j.implementation?(U=Dd(j,z.mode,tt),U.return=z,U):(U=g(U,j.children||[]),U.return=z,U)}function Z(z,U,j,tt,ht){return U===null||U.tag!==7?(U=Qr(j,z.mode,tt,ht),U.return=z,U):(U=g(U,j),U.return=z,U)}function et(z,U,j){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Cd(""+U,z.mode,j),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return j=Nu(U.type,U.key,U.props,null,z.mode,j),jl(j,U),j.return=z,j;case A:return U=Dd(U,z.mode,j),U.return=z,U;case x:var tt=U._init;return U=tt(U._payload),et(z,U,j)}if(At(U)||L(U))return U=Qr(U,z.mode,j,null),U.return=z,U;if(typeof U.then=="function")return et(z,Wu(U),j);if(U.$$typeof===J)return et(z,Uu(z,U),j);Zu(z,U)}return null}function H(z,U,j,tt){var ht=U!==null?U.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ht!==null?null:S(z,U,""+j,tt);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return j.key===ht?O(z,U,j,tt):null;case A:return j.key===ht?F(z,U,j,tt):null;case x:return ht=j._init,j=ht(j._payload),H(z,U,j,tt)}if(At(j)||L(j))return ht!==null?null:Z(z,U,j,tt,null);if(typeof j.then=="function")return H(z,U,Wu(j),tt);if(j.$$typeof===J)return H(z,U,Uu(z,j),tt);Zu(z,j)}return null}function Y(z,U,j,tt,ht){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return z=z.get(j)||null,S(U,z,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case T:return z=z.get(tt.key===null?j:tt.key)||null,O(U,z,tt,ht);case A:return z=z.get(tt.key===null?j:tt.key)||null,F(U,z,tt,ht);case x:var Ot=tt._init;return tt=Ot(tt._payload),Y(z,U,j,tt,ht)}if(At(tt)||L(tt))return z=z.get(j)||null,Z(U,z,tt,ht,null);if(typeof tt.then=="function")return Y(z,U,j,Wu(tt),ht);if(tt.$$typeof===J)return Y(z,U,j,Uu(U,tt),ht);Zu(U,tt)}return null}function Tt(z,U,j,tt){for(var ht=null,Ot=null,mt=U,vt=U=0,je=null;mt!==null&&vt<j.length;vt++){mt.index>vt?(je=mt,mt=null):je=mt.sibling;var jt=H(z,mt,j[vt],tt);if(jt===null){mt===null&&(mt=je);break}s&&mt&&jt.alternate===null&&r(z,mt),U=p(jt,U,vt),Ot===null?ht=jt:Ot.sibling=jt,Ot=jt,mt=je}if(vt===j.length)return l(z,mt),Ht&&$r(z,vt),ht;if(mt===null){for(;vt<j.length;vt++)mt=et(z,j[vt],tt),mt!==null&&(U=p(mt,U,vt),Ot===null?ht=mt:Ot.sibling=mt,Ot=mt);return Ht&&$r(z,vt),ht}for(mt=u(mt);vt<j.length;vt++)je=Y(mt,z,vt,j[vt],tt),je!==null&&(s&&je.alternate!==null&&mt.delete(je.key===null?vt:je.key),U=p(je,U,vt),Ot===null?ht=je:Ot.sibling=je,Ot=je);return s&&mt.forEach(function(Qs){return r(z,Qs)}),Ht&&$r(z,vt),ht}function yt(z,U,j,tt){if(j==null)throw Error(i(151));for(var ht=null,Ot=null,mt=U,vt=U=0,je=null,jt=j.next();mt!==null&&!jt.done;vt++,jt=j.next()){mt.index>vt?(je=mt,mt=null):je=mt.sibling;var Qs=H(z,mt,jt.value,tt);if(Qs===null){mt===null&&(mt=je);break}s&&mt&&Qs.alternate===null&&r(z,mt),U=p(Qs,U,vt),Ot===null?ht=Qs:Ot.sibling=Qs,Ot=Qs,mt=je}if(jt.done)return l(z,mt),Ht&&$r(z,vt),ht;if(mt===null){for(;!jt.done;vt++,jt=j.next())jt=et(z,jt.value,tt),jt!==null&&(U=p(jt,U,vt),Ot===null?ht=jt:Ot.sibling=jt,Ot=jt);return Ht&&$r(z,vt),ht}for(mt=u(mt);!jt.done;vt++,jt=j.next())jt=Y(mt,z,vt,jt.value,tt),jt!==null&&(s&&jt.alternate!==null&&mt.delete(jt.key===null?vt:jt.key),U=p(jt,U,vt),Ot===null?ht=jt:Ot.sibling=jt,Ot=jt);return s&&mt.forEach(function(dx){return r(z,dx)}),Ht&&$r(z,vt),ht}function ee(z,U,j,tt){if(typeof j=="object"&&j!==null&&j.type===I&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case T:t:{for(var ht=j.key;U!==null;){if(U.key===ht){if(ht=j.type,ht===I){if(U.tag===7){l(z,U.sibling),tt=g(U,j.props.children),tt.return=z,z=tt;break t}}else if(U.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&Uy(ht)===U.type){l(z,U.sibling),tt=g(U,j.props),jl(tt,j),tt.return=z,z=tt;break t}l(z,U);break}else r(z,U);U=U.sibling}j.type===I?(tt=Qr(j.props.children,z.mode,tt,j.key),tt.return=z,z=tt):(tt=Nu(j.type,j.key,j.props,null,z.mode,tt),jl(tt,j),tt.return=z,z=tt)}return E(z);case A:t:{for(ht=j.key;U!==null;){if(U.key===ht)if(U.tag===4&&U.stateNode.containerInfo===j.containerInfo&&U.stateNode.implementation===j.implementation){l(z,U.sibling),tt=g(U,j.children||[]),tt.return=z,z=tt;break t}else{l(z,U);break}else r(z,U);U=U.sibling}tt=Dd(j,z.mode,tt),tt.return=z,z=tt}return E(z);case x:return ht=j._init,j=ht(j._payload),ee(z,U,j,tt)}if(At(j))return Tt(z,U,j,tt);if(L(j)){if(ht=L(j),typeof ht!="function")throw Error(i(150));return j=ht.call(j),yt(z,U,j,tt)}if(typeof j.then=="function")return ee(z,U,Wu(j),tt);if(j.$$typeof===J)return ee(z,U,Uu(z,j),tt);Zu(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,U!==null&&U.tag===6?(l(z,U.sibling),tt=g(U,j),tt.return=z,z=tt):(l(z,U),tt=Cd(j,z.mode,tt),tt.return=z,z=tt),E(z)):l(z,U)}return function(z,U,j,tt){try{Bl=0;var ht=ee(z,U,j,tt);return so=null,ht}catch(mt){if(mt===Ol||mt===Bu)throw mt;var Ot=Sn(29,mt,null,z.mode);return Ot.lanes=tt,Ot.return=z,Ot}finally{}}}var ro=zy(!0),By=zy(!1),Bn=it(null),yi=null;function ks(s){var r=s.alternate;at(Oe,Oe.current&1),at(Bn,s),yi===null&&(r===null||to.current!==null||r.memoizedState!==null)&&(yi=s)}function jy(s){if(s.tag===22){if(at(Oe,Oe.current),at(Bn,s),yi===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(yi=s)}}else Ns()}function Ns(){at(Oe,Oe.current),at(Bn,Bn.current)}function es(s){ct(Bn),yi===s&&(yi=null),ct(Oe)}var Oe=it(0);function Ju(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Zg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function cg(s,r,l,u){r=s.memoizedState,l=l(u,r),l=l==null?r:_({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ug={enqueueSetState:function(s,r,l){s=s._reactInternals;var u=Rn(),g=Ds(u);g.payload=r,l!=null&&(g.callback=l),r=Os(s,g,u),r!==null&&(In(r,s,u),kl(r,s,u))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var u=Rn(),g=Ds(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Os(s,g,u),r!==null&&(In(r,s,u),kl(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Rn(),u=Ds(l);u.tag=2,r!=null&&(u.callback=r),r=Os(s,u,l),r!==null&&(In(r,s,l),kl(r,s,l))}};function Fy(s,r,l,u,g,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,E):r.prototype&&r.prototype.isPureReactComponent?!Sl(l,u)||!Sl(g,p):!0}function Hy(s,r,l,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==s&&ug.enqueueReplaceState(r,r.state,null)}function ia(s,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(s=s.defaultProps){l===r&&(l=_({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var th=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function qy(s){th(s)}function Gy(s){console.error(s)}function Yy(s){th(s)}function eh(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Ky(s,r,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function hg(s,r,l){return l=Ds(l),l.tag=3,l.payload={element:null},l.callback=function(){eh(s,r)},l}function Qy(s){return s=Ds(s),s.tag=3,s}function Xy(s,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;s.payload=function(){return g(p)},s.callback=function(){Ky(r,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){Ky(r,l,u),typeof g!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function d1(s,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Il(r,l,g,!0),l=Bn.current,l!==null){switch(l.tag){case 13:return yi===null?Pg():l.alternate===null&&me===0&&(me=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Bd?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),Lg(s,u,g)),!1;case 22:return l.flags|=65536,u===Bd?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),Lg(s,u,g)),!1}throw Error(i(435,l.tag))}return Lg(s,u,g),Pg(),!1}if(Ht)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==kd&&(s=Error(i(422),{cause:u}),Rl(Vn(s,l)))):(u!==kd&&(r=Error(i(423),{cause:u}),Rl(Vn(r,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Vn(u,l),g=hg(s.stateNode,u,g),Hd(s,g),me!==4&&(me=2)),!1;var p=Error(i(520),{cause:u});if(p=Vn(p,l),Ql===null?Ql=[p]:Ql.push(p),me!==4&&(me=2),r===null)return!0;u=Vn(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=hg(l.stateNode,u,s),Hd(l,s),!1;case 1:if(r=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Bs===null||!Bs.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Qy(g),Xy(g,s,l,u),Hd(l,g),!1}l=l.return}while(l!==null);return!1}var $y=Error(i(461)),ze=!1;function Ge(s,r,l,u){r.child=s===null?By(r,null,l,u):ro(r,s.child,l,u)}function Wy(s,r,l,u,g){l=l.render;var p=r.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return ta(r),u=Qd(s,r,l,E,p,g),S=Xd(),s!==null&&!ze?($d(s,r,g),ns(s,r,g)):(Ht&&S&&Od(r),r.flags|=1,Ge(s,r,u,g),r.child)}function Zy(s,r,l,u,g){if(s===null){var p=l.type;return typeof p=="function"&&!Id(p)&&p.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=p,Jy(s,r,p,u,g)):(s=Nu(l.type,null,u,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!vg(s,g)){var E=p.memoizedProps;if(l=l.compare,l=l!==null?l:Sl,l(E,u)&&s.ref===r.ref)return ns(s,r,g)}return r.flags|=1,s=Xi(p,u),s.ref=r.ref,s.return=r,r.child=s}function Jy(s,r,l,u,g){if(s!==null){var p=s.memoizedProps;if(Sl(p,u)&&s.ref===r.ref)if(ze=!1,r.pendingProps=u=p,vg(s,g))(s.flags&131072)!==0&&(ze=!0);else return r.lanes=s.lanes,ns(s,r,g)}return fg(s,r,l,u,g)}function tv(s,r,l){var u=r.pendingProps,g=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(g=r.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;r.childLanes=p&~u}else r.childLanes=0,r.child=null;return ev(s,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&zu(r,p!==null?p.cachePool:null),p!==null?J_(r,p):Gd(),jy(r);else return r.lanes=r.childLanes=536870912,ev(s,r,p!==null?p.baseLanes|l:l,l)}else p!==null?(zu(r,p.cachePool),J_(r,p),Ns(),r.memoizedState=null):(s!==null&&zu(r,null),Gd(),Ns());return Ge(s,r,g,l),r.child}function ev(s,r,l,u){var g=zd();return g=g===null?null:{parent:De._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},s!==null&&zu(r,null),Gd(),jy(r),s!==null&&Il(s,r,u,!0),null}function nh(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function fg(s,r,l,u,g){return ta(r),l=Qd(s,r,l,u,void 0,g),u=Xd(),s!==null&&!ze?($d(s,r,g),ns(s,r,g)):(Ht&&u&&Od(r),r.flags|=1,Ge(s,r,l,g),r.child)}function nv(s,r,l,u,g,p){return ta(r),r.updateQueue=null,l=ey(r,u,l,g),ty(s),u=Xd(),s!==null&&!ze?($d(s,r,p),ns(s,r,p)):(Ht&&u&&Od(r),r.flags|=1,Ge(s,r,l,p),r.child)}function iv(s,r,l,u,g){if(ta(r),r.stateNode===null){var p=Xa,E=l.contextType;typeof E=="object"&&E!==null&&(p=Ze(E)),p=new l(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ug,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},jd(r),E=l.contextType,p.context=typeof E=="object"&&E!==null?Ze(E):Xa,p.state=r.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(cg(r,l,E,u),p.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&ug.enqueueReplaceState(p,p.state,null),Pl(r,u,p,g),Nl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){p=r.stateNode;var S=r.memoizedProps,O=ia(l,S);p.props=O;var F=p.context,Z=l.contextType;E=Xa,typeof Z=="object"&&Z!==null&&(E=Ze(Z));var et=l.getDerivedStateFromProps;Z=typeof et=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||F!==E)&&Hy(r,p,u,E),Cs=!1;var H=r.memoizedState;p.state=H,Pl(r,u,p,g),Nl(),F=r.memoizedState,S||H!==F||Cs?(typeof et=="function"&&(cg(r,l,et,u),F=r.memoizedState),(O=Cs||Fy(r,l,O,u,H,F,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=F),p.props=u,p.state=F,p.context=E,u=O):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,Fd(s,r),E=r.memoizedProps,Z=ia(l,E),p.props=Z,et=r.pendingProps,H=p.context,F=l.contextType,O=Xa,typeof F=="object"&&F!==null&&(O=Ze(F)),S=l.getDerivedStateFromProps,(F=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==et||H!==O)&&Hy(r,p,u,O),Cs=!1,H=r.memoizedState,p.state=H,Pl(r,u,p,g),Nl();var Y=r.memoizedState;E!==et||H!==Y||Cs||s!==null&&s.dependencies!==null&&Lu(s.dependencies)?(typeof S=="function"&&(cg(r,l,S,u),Y=r.memoizedState),(Z=Cs||Fy(r,l,Z,u,H,Y,O)||s!==null&&s.dependencies!==null&&Lu(s.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Y,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Y,O)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Y),p.props=u,p.state=Y,p.context=O,u=Z):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),u=!1)}return p=u,nh(s,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&u?(r.child=ro(r,s.child,null,g),r.child=ro(r,null,l,g)):Ge(s,r,l,g),r.memoizedState=p.state,s=r.child):s=ns(s,r,g),s}function sv(s,r,l,u){return xl(),r.flags|=256,Ge(s,r,l,u),r.child}var dg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gg(s){return{baseLanes:s,cachePool:G_()}}function mg(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=jn),s}function rv(s,r,l){var u=r.pendingProps,g=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(Oe.current&2)!==0),E&&(g=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ht){if(g?ks(r):Ns(),Ht){var S=ge,O;if(O=S){t:{for(O=S,S=_i;O.nodeType!==8;){if(!S){S=null;break t}if(O=Jn(O.nextSibling),O===null){S=null;break t}}S=O}S!==null?(r.memoizedState={dehydrated:S,treeContext:Xr!==null?{id:$i,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},O=Sn(18,null,null,0),O.stateNode=S,O.return=r,r.child=O,fn=r,ge=null,O=!0):O=!1}O||Zr(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Zg(S)?r.lanes=32:r.lanes=536870912,null;es(r)}return S=u.children,u=u.fallback,g?(Ns(),g=r.mode,S=ih({mode:"hidden",children:S},g),u=Qr(u,g,l,null),S.return=r,u.return=r,S.sibling=u,r.child=S,g=r.child,g.memoizedState=gg(l),g.childLanes=mg(s,E,l),r.memoizedState=dg,u):(ks(r),pg(r,S))}if(O=s.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(p)r.flags&256?(ks(r),r.flags&=-257,r=_g(s,r,l)):r.memoizedState!==null?(Ns(),r.child=s.child,r.flags|=128,r=null):(Ns(),g=u.fallback,S=r.mode,u=ih({mode:"visible",children:u.children},S),g=Qr(g,S,l,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,ro(r,s.child,null,l),u=r.child,u.memoizedState=gg(l),u.childLanes=mg(s,E,l),r.memoizedState=dg,r=g);else if(ks(r),Zg(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(i(419)),u.stack="",u.digest=E,Rl({value:u,source:null,stack:null}),r=_g(s,r,l)}else if(ze||Il(s,r,l,!1),E=(l&s.childLanes)!==0,ze||E){if(E=ae,E!==null&&(u=l&-l,u=(u&42)!==0?1:Es(u),u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,Qa(s,u),In(E,s,u),$y;S.data==="$?"||Pg(),r=_g(s,r,l)}else S.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=O.treeContext,ge=Jn(S.nextSibling),fn=r,Ht=!0,Wr=null,_i=!1,s!==null&&(Un[zn++]=$i,Un[zn++]=Wi,Un[zn++]=Xr,$i=s.id,Wi=s.overflow,Xr=r),r=pg(r,u.children),r.flags|=4096);return r}return g?(Ns(),g=u.fallback,S=r.mode,O=s.child,F=O.sibling,u=Xi(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,F!==null?g=Xi(F,g):(g=Qr(g,S,l,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=s.child.memoizedState,S===null?S=gg(l):(O=S.cachePool,O!==null?(F=De._currentValue,O=O.parent!==F?{parent:F,pool:F}:O):O=G_(),S={baseLanes:S.baseLanes|l,cachePool:O}),g.memoizedState=S,g.childLanes=mg(s,E,l),r.memoizedState=dg,u):(ks(r),l=s.child,s=l.sibling,l=Xi(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=l,r.memoizedState=null,l)}function pg(s,r){return r=ih({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function ih(s,r){return s=Sn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function _g(s,r,l){return ro(r,s.child,null,l),s=pg(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function av(s,r,l){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),Pd(s.return,r,l)}function yg(s,r,l,u,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=g)}function ov(s,r,l){var u=r.pendingProps,g=u.revealOrder,p=u.tail;if(Ge(s,r,u.children,l),u=Oe.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&av(s,l,r);else if(s.tag===19)av(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(at(Oe,u),g){case"forwards":for(l=r.child,g=null;l!==null;)s=l.alternate,s!==null&&Ju(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),yg(r,!1,g,l,p);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&Ju(s)===null){r.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}yg(r,!0,l,null,p);break;case"together":yg(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ns(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),zs|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Il(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Xi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Xi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function vg(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Lu(s)))}function g1(s,r,l){switch(r.tag){case 3:re(r,r.stateNode.containerInfo),Is(r,De,s.memoizedState.cache),xl();break;case 27:case 5:bs(r);break;case 4:re(r,r.stateNode.containerInfo);break;case 10:Is(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ks(r),r.flags|=128,null):(l&r.child.childLanes)!==0?rv(s,r,l):(ks(r),s=ns(s,r,l),s!==null?s.sibling:null);ks(r);break;case 19:var g=(s.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Il(s,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return ov(s,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),at(Oe,Oe.current),u)break;return null;case 22:case 23:return r.lanes=0,tv(s,r,l);case 24:Is(r,De,s.memoizedState.cache)}return ns(s,r,l)}function lv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)ze=!0;else{if(!vg(s,l)&&(r.flags&128)===0)return ze=!1,g1(s,r,l);ze=(s.flags&131072)!==0}else ze=!1,Ht&&(r.flags&1048576)!==0&&U_(r,Vu,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var u=r.elementType,g=u._init;if(u=g(u._payload),r.type=u,typeof u=="function")Id(u)?(s=ia(u,s),r.tag=1,r=iv(null,r,u,s,l)):(r.tag=0,r=fg(null,r,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===q){r.tag=11,r=Wy(null,r,u,s,l);break t}else if(g===C){r.tag=14,r=Zy(null,r,u,s,l);break t}}throw r=Wt(u)||u,Error(i(306,r,""))}}return r;case 0:return fg(s,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=ia(u,r.pendingProps),iv(s,r,u,g,l);case 3:t:{if(re(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var p=r.memoizedState;g=p.element,Fd(s,r),Pl(r,u,null,l);var E=r.memoizedState;if(u=E.cache,Is(r,De,u),u!==p.cache&&Vd(r,[De],l,!0),Nl(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=sv(s,r,u,l);break t}else if(u!==g){g=Vn(Error(i(424)),r),Rl(g),r=sv(s,r,u,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=Jn(s.firstChild),fn=r,Ht=!0,Wr=null,_i=!0,l=By(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(xl(),u===g){r=ns(s,r,l);break t}Ge(s,r,u,l)}r=r.child}return r;case 26:return nh(s,r),s===null?(l=f0(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ht||(l=r.type,s=r.pendingProps,u=_h(pt.current).createElement(l),u[Re]=r,u[Ee]=s,Ke(u,l,s),pe(u),r.stateNode=u):r.memoizedState=f0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return bs(r),s===null&&Ht&&(u=r.stateNode=c0(r.type,r.pendingProps,pt.current),fn=r,_i=!0,g=ge,Hs(r.type)?(Jg=g,ge=Jn(u.firstChild)):ge=g),Ge(s,r,r.pendingProps.children,l),nh(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ht&&((g=u=ge)&&(u=F1(u,r.type,r.pendingProps,_i),u!==null?(r.stateNode=u,fn=r,ge=Jn(u.firstChild),_i=!1,g=!0):g=!1),g||Zr(r)),bs(r),g=r.type,p=r.pendingProps,E=s!==null?s.memoizedProps:null,u=p.children,Xg(g,p)?u=null:E!==null&&Xg(g,E)&&(r.flags|=32),r.memoizedState!==null&&(g=Qd(s,r,a1,null,null,l),ic._currentValue=g),nh(s,r),Ge(s,r,u,l),r.child;case 6:return s===null&&Ht&&((s=l=ge)&&(l=H1(l,r.pendingProps,_i),l!==null?(r.stateNode=l,fn=r,ge=null,s=!0):s=!1),s||Zr(r)),null;case 13:return rv(s,r,l);case 4:return re(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=ro(r,null,u,l):Ge(s,r,u,l),r.child;case 11:return Wy(s,r,r.type,r.pendingProps,l);case 7:return Ge(s,r,r.pendingProps,l),r.child;case 8:return Ge(s,r,r.pendingProps.children,l),r.child;case 12:return Ge(s,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,Is(r,r.type,u.value),Ge(s,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,ta(r),g=Ze(g),u=u(g),r.flags|=1,Ge(s,r,u,l),r.child;case 14:return Zy(s,r,r.type,r.pendingProps,l);case 15:return Jy(s,r,r.type,r.pendingProps,l);case 19:return ov(s,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},s===null?(l=ih(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Xi(s.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return tv(s,r,l);case 24:return ta(r),u=Ze(De),s===null?(g=zd(),g===null&&(g=ae,p=Ld(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),r.memoizedState={parent:u,cache:g},jd(r),Is(r,De,g)):((s.lanes&l)!==0&&(Fd(s,r),Pl(r,null,null,l),Nl()),g=s.memoizedState,p=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Is(r,De,u)):(u=p.cache,Is(r,De,u),u!==g.cache&&Vd(r,[De],l,!0))),Ge(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function is(s){s.flags|=4}function cv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!_0(r)){if(r=Bn.current,r!==null&&((zt&4194048)===zt?yi!==null:(zt&62914560)!==zt&&(zt&536870912)===0||r!==yi))throw Ml=Bd,Y_;s.flags|=8192}}function sh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?rl():536870912,s.lanes|=r,co|=r)}function Fl(s,r){if(!Ht)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(r)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,r}function m1(s,r,l){var u=r.pendingProps;switch(Md(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(r),null;case 1:return he(r),null;case 3:return l=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Ji(De),ri(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(wl(r)?is(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,j_())),he(r),null;case 26:return l=r.memoizedState,s===null?(is(r),l!==null?(he(r),cv(r,l)):(he(r),r.flags&=-16777217)):l?l!==s.memoizedState?(is(r),he(r),cv(r,l)):(he(r),r.flags&=-16777217):(s.memoizedProps!==u&&is(r),he(r),r.flags&=-16777217),null;case 27:Vi(r),l=pt.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==u&&is(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}s=dt.current,wl(r)?z_(r):(s=c0(g,u,l),r.stateNode=s,is(r))}return he(r),null;case 5:if(Vi(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&is(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}if(s=dt.current,wl(r))z_(r);else{switch(g=_h(pt.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[Re]=r,s[Ee]=u;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(Ke(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&is(r)}}return he(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&is(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=pt.current,wl(r)){if(s=r.stateNode,l=r.memoizedProps,u=null,g=fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Re]=r,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||n0(s.nodeValue,l)),s||Zr(r)}else s=_h(s).createTextNode(u),s[Re]=r,r.stateNode=s}return he(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=wl(r),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Re]=r}else xl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;he(r),g=!1}else g=j_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(es(r),r):(es(r),null)}if(es(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),sh(r,r.updateQueue),he(r),null;case 4:return ri(),s===null&&qg(r.stateNode.containerInfo),he(r),null;case 10:return Ji(r.type),he(r),null;case 19:if(ct(Oe),g=r.memoizedState,g===null)return he(r),null;if(u=(r.flags&128)!==0,p=g.rendering,p===null)if(u)Fl(g,!1);else{if(me!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=Ju(s),p!==null){for(r.flags|=128,Fl(g,!1),s=p.updateQueue,r.updateQueue=s,sh(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)L_(l,s),l=l.sibling;return at(Oe,Oe.current&1|2),r.child}s=s.sibling}g.tail!==null&&Dn()>oh&&(r.flags|=128,u=!0,Fl(g,!1),r.lanes=4194304)}else{if(!u)if(s=Ju(p),s!==null){if(r.flags|=128,u=!0,s=s.updateQueue,r.updateQueue=s,sh(r,s),Fl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!Ht)return he(r),null}else 2*Dn()-g.renderingStartTime>oh&&l!==536870912&&(r.flags|=128,u=!0,Fl(g,!1),r.lanes=4194304);g.isBackwards?(p.sibling=r.child,r.child=p):(s=g.last,s!==null?s.sibling=p:r.child=p,g.last=p)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Dn(),r.sibling=null,s=Oe.current,at(Oe,u?s&1|2:s&1),r):(he(r),null);case 22:case 23:return es(r),Yd(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(he(r),r.subtreeFlags&6&&(r.flags|=8192)):he(r),l=r.updateQueue,l!==null&&sh(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),s!==null&&ct(ea),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ji(De),he(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function p1(s,r){switch(Md(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Ji(De),ri(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Vi(r),null;case 13:if(es(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));xl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ct(Oe),null;case 4:return ri(),null;case 10:return Ji(r.type),null;case 22:case 23:return es(r),Yd(),s!==null&&ct(ea),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Ji(De),null;case 25:return null;default:return null}}function uv(s,r){switch(Md(r),r.tag){case 3:Ji(De),ri();break;case 26:case 27:case 5:Vi(r);break;case 4:ri();break;case 13:es(r);break;case 19:ct(Oe);break;case 10:Ji(r.type);break;case 22:case 23:es(r),Yd(),s!==null&&ct(ea);break;case 24:Ji(De)}}function Hl(s,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var p=l.create,E=l.inst;u=p(),E.destroy=u}l=l.next}while(l!==g)}}catch(S){ne(r,r.return,S)}}function Ps(s,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&s)===s){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,g=r;var O=l,F=S;try{F()}catch(Z){ne(g,O,Z)}}}u=u.next}while(u!==p)}}catch(Z){ne(r,r.return,Z)}}function hv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Z_(r,l)}catch(u){ne(s,s.return,u)}}}function fv(s,r,l){l.props=ia(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ne(s,r,u)}}function ql(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){ne(s,r,g)}}function vi(s,r){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ne(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ne(s,r,g)}else l.current=null}function dv(s){var r=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ne(s,s.return,g)}}function bg(s,r,l){try{var u=s.stateNode;L1(u,s.type,l,r),u[Ee]=r}catch(g){ne(s,s.return,g)}}function gv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Hs(s.type)||s.tag===4}function Eg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||gv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Hs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tg(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ph));else if(u!==4&&(u===27&&Hs(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Tg(s,r,l),s=s.sibling;s!==null;)Tg(s,r,l),s=s.sibling}function rh(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(u!==4&&(u===27&&Hs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(rh(s,r,l),s=s.sibling;s!==null;)rh(s,r,l),s=s.sibling}function mv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Ke(r,u,l),r[Re]=s,r[Ee]=l}catch(p){ne(s,s.return,p)}}var ss=!1,ye=!1,Sg=!1,pv=typeof WeakSet=="function"?WeakSet:Set,Be=null;function _1(s,r){if(s=s.containerInfo,Kg=Sh,s=R_(s),Ed(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var E=0,S=-1,O=-1,F=0,Z=0,et=s,H=null;e:for(;;){for(var Y;et!==l||g!==0&&et.nodeType!==3||(S=E+g),et!==p||u!==0&&et.nodeType!==3||(O=E+u),et.nodeType===3&&(E+=et.nodeValue.length),(Y=et.firstChild)!==null;)H=et,et=Y;for(;;){if(et===s)break e;if(H===l&&++F===g&&(S=E),H===p&&++Z===u&&(O=E),(Y=et.nextSibling)!==null)break;et=H,H=et.parentNode}et=Y}l=S===-1||O===-1?null:{start:S,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qg={focusedElem:s,selectionRange:l},Sh=!1,Be=r;Be!==null;)if(r=Be,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Be=s;else for(;Be!==null;){switch(r=Be,p=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=r,g=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var Tt=ia(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Tt,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(yt){ne(l,l.return,yt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Wg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Wg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Be=s;break}Be=r.return}}function _v(s,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Vs(s,l),u&4&&Hl(5,l);break;case 1:if(Vs(s,l),u&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(E){ne(l,l.return,E)}else{var g=ia(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ne(l,l.return,E)}}u&64&&hv(l),u&512&&ql(l,l.return);break;case 3:if(Vs(s,l),u&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Z_(s,r)}catch(E){ne(l,l.return,E)}}break;case 27:r===null&&u&4&&mv(l);case 26:case 5:Vs(s,l),r===null&&u&4&&dv(l),u&512&&ql(l,l.return);break;case 12:Vs(s,l);break;case 13:Vs(s,l),u&4&&bv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=x1.bind(null,l),q1(s,l))));break;case 22:if(u=l.memoizedState!==null||ss,!u){r=r!==null&&r.memoizedState!==null||ye,g=ss;var p=ye;ss=u,(ye=r)&&!p?Ls(s,l,(l.subtreeFlags&8772)!==0):Vs(s,l),ss=g,ye=p}break;case 30:break;default:Vs(s,l)}}function yv(s){var r=s.alternate;r!==null&&(s.alternate=null,yv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&As(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,gn=!1;function rs(s,r,l){for(l=l.child;l!==null;)vv(s,r,l),l=l.sibling}function vv(s,r,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:ye||vi(l,r),rs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ye||vi(l,r);var u=ue,g=gn;Hs(l.type)&&(ue=l.stateNode,gn=!1),rs(s,r,l),Jl(l.stateNode),ue=u,gn=g;break;case 5:ye||vi(l,r);case 6:if(u=ue,g=gn,ue=null,rs(s,r,l),ue=u,gn=g,ue!==null)if(gn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(p){ne(l,r,p)}else try{ue.removeChild(l.stateNode)}catch(p){ne(l,r,p)}break;case 18:ue!==null&&(gn?(s=ue,o0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),oc(s)):o0(ue,l.stateNode));break;case 4:u=ue,g=gn,ue=l.stateNode.containerInfo,gn=!0,rs(s,r,l),ue=u,gn=g;break;case 0:case 11:case 14:case 15:ye||Ps(2,l,r),ye||Ps(4,l,r),rs(s,r,l);break;case 1:ye||(vi(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&fv(l,r,u)),rs(s,r,l);break;case 21:rs(s,r,l);break;case 22:ye=(u=ye)||l.memoizedState!==null,rs(s,r,l),ye=u;break;default:rs(s,r,l)}}function bv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{oc(s)}catch(l){ne(r,r.return,l)}}function y1(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new pv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new pv),r;default:throw Error(i(435,s.tag))}}function Ag(s,r){var l=y1(s);r.forEach(function(u){var g=R1.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function An(s,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],p=s,E=r,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(Hs(S.type)){ue=S.stateNode,gn=!1;break t}break;case 5:ue=S.stateNode,gn=!1;break t;case 3:case 4:ue=S.stateNode.containerInfo,gn=!0;break t}S=S.return}if(ue===null)throw Error(i(160));vv(p,E,g),ue=null,gn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ev(r,s),r=r.sibling}var Zn=null;function Ev(s,r){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(r,s),wn(s),u&4&&(Ps(3,s,s.return),Hl(3,s),Ps(5,s,s.return));break;case 1:An(r,s),wn(s),u&512&&(ye||l===null||vi(l,l.return)),u&64&&ss&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Zn;if(An(r,s),wn(s),u&512&&(ye||l===null||vi(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Mr]||p[Re]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),Ke(p,u,l),p[Re]=s,pe(p),u=p;break t;case"link":var E=m0("link","href",g).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(p=E[S],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;case"meta":if(E=m0("meta","content",g).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(p=E[S],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;default:throw Error(i(468,u))}p[Re]=s,pe(p),u=p}s.stateNode=u}else p0(g,s.type,s.stateNode);else s.stateNode=g0(g,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?p0(g,s.type,s.stateNode):g0(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&bg(s,s.memoizedProps,l.memoizedProps)}break;case 27:An(r,s),wn(s),u&512&&(ye||l===null||vi(l,l.return)),l!==null&&u&4&&bg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(An(r,s),wn(s),u&512&&(ye||l===null||vi(l,l.return)),s.flags&32){g=s.stateNode;try{Mn(g,"")}catch(Y){ne(s,s.return,Y)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,bg(s,g,l!==null?l.memoizedProps:g)),u&1024&&(Sg=!0);break;case 6:if(An(r,s),wn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Y){ne(s,s.return,Y)}}break;case 3:if(bh=null,g=Zn,Zn=yh(r.containerInfo),An(r,s),Zn=g,wn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{oc(r.containerInfo)}catch(Y){ne(s,s.return,Y)}Sg&&(Sg=!1,Tv(s));break;case 4:u=Zn,Zn=yh(s.stateNode.containerInfo),An(r,s),wn(s),Zn=u;break;case 12:An(r,s),wn(s);break;case 13:An(r,s),wn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Dg=Dn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ag(s,u)));break;case 22:g=s.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,F=ss,Z=ye;if(ss=F||g,ye=Z||O,An(r,s),ye=Z,ss=F,wn(s),u&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||O||ss||ye||sa(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){O=l=r;try{if(p=O.stateNode,g)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=O.stateNode;var et=O.memoizedProps.style,H=et!=null&&et.hasOwnProperty("display")?et.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Y){ne(O,O.return,Y)}}}else if(r.tag===6){if(l===null){O=r;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(Y){ne(O,O.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ag(s,l))));break;case 19:An(r,s),wn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ag(s,u)));break;case 30:break;case 21:break;default:An(r,s),wn(s)}}function wn(s){var r=s.flags;if(r&2){try{for(var l,u=s.return;u!==null;){if(gv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,p=Eg(s);rh(s,p,g);break;case 5:var E=l.stateNode;l.flags&32&&(Mn(E,""),l.flags&=-33);var S=Eg(s);rh(s,S,E);break;case 3:case 4:var O=l.stateNode.containerInfo,F=Eg(s);Tg(s,F,O);break;default:throw Error(i(161))}}catch(Z){ne(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Tv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Tv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Vs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(s,r.alternate,r),r=r.sibling}function sa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ps(4,r,r.return),sa(r);break;case 1:vi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&fv(r,r.return,l),sa(r);break;case 27:Jl(r.stateNode);case 26:case 5:vi(r,r.return),sa(r);break;case 22:r.memoizedState===null&&sa(r);break;case 30:sa(r);break;default:sa(r)}s=s.sibling}}function Ls(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=s,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:Ls(g,p,l),Hl(4,p);break;case 1:if(Ls(g,p,l),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){ne(u,u.return,F)}if(u=p,g=u.updateQueue,g!==null){var S=u.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)W_(O[g],S)}catch(F){ne(u,u.return,F)}}l&&E&64&&hv(p),ql(p,p.return);break;case 27:mv(p);case 26:case 5:Ls(g,p,l),l&&u===null&&E&4&&dv(p),ql(p,p.return);break;case 12:Ls(g,p,l);break;case 13:Ls(g,p,l),l&&E&4&&bv(g,p);break;case 22:p.memoizedState===null&&Ls(g,p,l),ql(p,p.return);break;case 30:break;default:Ls(g,p,l)}r=r.sibling}}function wg(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Cl(l))}function xg(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Cl(s))}function bi(s,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sv(s,r,l,u),r=r.sibling}function Sv(s,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:bi(s,r,l,u),g&2048&&Hl(9,r);break;case 1:bi(s,r,l,u);break;case 3:bi(s,r,l,u),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Cl(s)));break;case 12:if(g&2048){bi(s,r,l,u),s=r.stateNode;try{var p=r.memoizedProps,E=p.id,S=p.onPostCommit;typeof S=="function"&&S(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){ne(r,r.return,O)}}else bi(s,r,l,u);break;case 13:bi(s,r,l,u);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?bi(s,r,l,u):Gl(s,r):p._visibility&2?bi(s,r,l,u):(p._visibility|=2,ao(s,r,l,u,(r.subtreeFlags&10256)!==0)),g&2048&&wg(E,r);break;case 24:bi(s,r,l,u),g&2048&&xg(r.alternate,r);break;default:bi(s,r,l,u)}}function ao(s,r,l,u,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=s,E=r,S=l,O=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:ao(p,E,S,O,g),Hl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?ao(p,E,S,O,g):Gl(p,E):(Z._visibility|=2,ao(p,E,S,O,g)),g&&F&2048&&wg(E.alternate,E);break;case 24:ao(p,E,S,O,g),g&&F&2048&&xg(E.alternate,E);break;default:ao(p,E,S,O,g)}r=r.sibling}}function Gl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,u=r,g=u.flags;switch(u.tag){case 22:Gl(l,u),g&2048&&wg(u.alternate,u);break;case 24:Gl(l,u),g&2048&&xg(u.alternate,u);break;default:Gl(l,u)}r=r.sibling}}var Yl=8192;function oo(s){if(s.subtreeFlags&Yl)for(s=s.child;s!==null;)Av(s),s=s.sibling}function Av(s){switch(s.tag){case 26:oo(s),s.flags&Yl&&s.memoizedState!==null&&ix(Zn,s.memoizedState,s.memoizedProps);break;case 5:oo(s);break;case 3:case 4:var r=Zn;Zn=yh(s.stateNode.containerInfo),oo(s),Zn=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Yl,Yl=16777216,oo(s),Yl=r):oo(s));break;default:oo(s)}}function wv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Kl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Be=u,Rv(u,s)}wv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xv(s),s=s.sibling}function xv(s){switch(s.tag){case 0:case 11:case 15:Kl(s),s.flags&2048&&Ps(9,s,s.return);break;case 3:Kl(s);break;case 12:Kl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,ah(s)):Kl(s);break;default:Kl(s)}}function ah(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Be=u,Rv(u,s)}wv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ps(8,r,r.return),ah(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,ah(r));break;default:ah(r)}s=s.sibling}}function Rv(s,r){for(;Be!==null;){var l=Be;switch(l.tag){case 0:case 11:case 15:Ps(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Cl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Be=u;else t:for(l=s;Be!==null;){u=Be;var g=u.sibling,p=u.return;if(yv(u),u===l){Be=null;break t}if(g!==null){g.return=p,Be=g;break t}Be=p}}}var v1={getCacheForType:function(s){var r=Ze(De),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},b1=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ae=null,Mt=null,zt=0,Xt=0,xn=null,Us=!1,lo=!1,Rg=!1,as=0,me=0,zs=0,ra=0,Ig=0,jn=0,co=0,Ql=null,mn=null,Cg=!1,Dg=0,oh=1/0,lh=null,Bs=null,Ye=0,js=null,uo=null,ho=0,Og=0,Mg=null,Iv=null,Xl=0,kg=null;function Rn(){if((Qt&2)!==0&&zt!==0)return zt&-zt;if(Q.T!==null){var s=Za;return s!==0?s:Bg()}return Ts()}function Cv(){jn===0&&(jn=(zt&536870912)===0||Ht?sl():536870912);var s=Bn.current;return s!==null&&(s.flags|=32),jn}function In(s,r,l){(s===ae&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(fo(s,0),Fs(s,zt,jn,!1)),Ui(s,l),((Qt&2)===0||s!==ae)&&(s===ae&&((Qt&2)===0&&(ra|=l),me===4&&Fs(s,zt,jn,!1)),Ei(s))}function Dv(s,r,l){if((Qt&6)!==0)throw Error(i(327));var u=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Or(s,r),g=u?S1(s,r):Vg(s,r,!0),p=u;do{if(g===0){lo&&!u&&Fs(s,r,0,!1);break}else{if(l=s.current.alternate,p&&!E1(l)){g=Vg(s,r,!1),p=!1;continue}if(g===2){if(p=r,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var S=s;g=Ql;var O=S.current.memoizedState.isDehydrated;if(O&&(fo(S,E).flags|=256),E=Vg(S,E,!1),E!==2){if(Rg&&!O){S.errorRecoveryDisabledLanes|=p,ra|=p,g=4;break t}p=mn,mn=g,p!==null&&(mn===null?mn=p:mn.push.apply(mn,p))}g=E}if(p=!1,g!==2)continue}}if(g===1){fo(s,0),Fs(s,r,0,!0);break}t:{switch(u=s,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Fs(u,r,jn,!Us);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=Dg+300-Dn(),10<g)){if(Fs(u,r,jn,!Us),Ca(u,0,!0)!==0)break t;u.timeoutHandle=r0(Ov.bind(null,u,l,mn,lh,Cg,r,jn,ra,co,Us,p,2,-0,0),g);break t}Ov(u,l,mn,lh,Cg,r,jn,ra,co,Us,p,0,-0,0)}}break}while(!0);Ei(s)}function Ov(s,r,l,u,g,p,E,S,O,F,Z,et,H,Y){if(s.timeoutHandle=-1,et=r.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(nc={stylesheets:null,count:0,unsuspend:nx},Av(r),et=sx(),et!==null)){s.cancelPendingCommit=et(Uv.bind(null,s,r,p,l,u,g,E,S,O,Z,1,H,Y)),Fs(s,p,E,!F);return}Uv(s,r,p,l,u,g,E,S,O)}function E1(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],p=g.getSnapshot;g=g.value;try{if(!Tn(p(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(s,r,l,u){r&=~Ig,r&=~ra,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var g=r;0<g;){var p=31-We(g),E=1<<p;u[p]=-1,g&=~E}l!==0&&ai(s,l,r)}function ch(){return(Qt&6)===0?($l(0),!1):!0}function Ng(){if(Mt!==null){if(Xt===0)var s=Mt.return;else s=Mt,Zi=Jr=null,Wd(s),so=null,Bl=0,s=Mt;for(;s!==null;)uv(s.alternate,s),s=s.return;Mt=null}}function fo(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,z1(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ng(),ae=s,Mt=l=Xi(s.current,null),zt=r,Xt=0,xn=null,Us=!1,lo=Or(s,r),Rg=!1,co=jn=Ig=ra=zs=me=0,mn=Ql=null,Cg=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var g=31-We(u),p=1<<g;r|=s[g],u&=~p}return as=r,Ou(),l}function Mv(s,r){Ct=null,Q.H=$u,r===Ol||r===Bu?(r=X_(),Xt=3):r===Y_?(r=X_(),Xt=4):Xt=r===$y?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xn=r,Mt===null&&(me=1,eh(s,Vn(r,s.current)))}function kv(){var s=Q.H;return Q.H=$u,s===null?$u:s}function Nv(){var s=Q.A;return Q.A=v1,s}function Pg(){me=4,Us||(zt&4194048)!==zt&&Bn.current!==null||(lo=!0),(zs&134217727)===0&&(ra&134217727)===0||ae===null||Fs(ae,zt,jn,!1)}function Vg(s,r,l){var u=Qt;Qt|=2;var g=kv(),p=Nv();(ae!==s||zt!==r)&&(lh=null,fo(s,r)),r=!1;var E=me;t:do try{if(Xt!==0&&Mt!==null){var S=Mt,O=xn;switch(Xt){case 8:Ng(),E=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var F=Xt;if(Xt=0,xn=null,go(s,S,O,F),l&&lo){E=0;break t}break;default:F=Xt,Xt=0,xn=null,go(s,S,O,F)}}T1(),E=me;break}catch(Z){Mv(s,Z)}while(!0);return r&&s.shellSuspendCounter++,Zi=Jr=null,Qt=u,Q.H=g,Q.A=p,Mt===null&&(ae=null,zt=0,Ou()),E}function T1(){for(;Mt!==null;)Pv(Mt)}function S1(s,r){var l=Qt;Qt|=2;var u=kv(),g=Nv();ae!==s||zt!==r?(lh=null,oh=Dn()+500,fo(s,r)):lo=Or(s,r);t:do try{if(Xt!==0&&Mt!==null){r=Mt;var p=xn;e:switch(Xt){case 1:Xt=0,xn=null,go(s,r,p,1);break;case 2:case 9:if(K_(p)){Xt=0,xn=null,Vv(r);break}r=function(){Xt!==2&&Xt!==9||ae!==s||(Xt=7),Ei(s)},p.then(r,r);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:K_(p)?(Xt=0,xn=null,Vv(r)):(Xt=0,xn=null,go(s,r,p,7));break;case 5:var E=null;switch(Mt.tag){case 26:E=Mt.memoizedState;case 5:case 27:var S=Mt;if(!E||_0(E)){Xt=0,xn=null;var O=S.sibling;if(O!==null)Mt=O;else{var F=S.return;F!==null?(Mt=F,uh(F)):Mt=null}break e}}Xt=0,xn=null,go(s,r,p,5);break;case 6:Xt=0,xn=null,go(s,r,p,6);break;case 8:Ng(),me=6;break t;default:throw Error(i(462))}}A1();break}catch(Z){Mv(s,Z)}while(!0);return Zi=Jr=null,Q.H=u,Q.A=g,Qt=l,Mt!==null?0:(ae=null,zt=0,Ou(),me)}function A1(){for(;Mt!==null&&!tl();)Pv(Mt)}function Pv(s){var r=lv(s.alternate,s,as);s.memoizedProps=s.pendingProps,r===null?uh(s):Mt=r}function Vv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=nv(l,r,r.pendingProps,r.type,void 0,zt);break;case 11:r=nv(l,r,r.pendingProps,r.type.render,r.ref,zt);break;case 5:Wd(r);default:uv(l,r),r=Mt=L_(r,as),r=lv(l,r,as)}s.memoizedProps=s.pendingProps,r===null?uh(s):Mt=r}function go(s,r,l,u){Zi=Jr=null,Wd(r),so=null,Bl=0;var g=r.return;try{if(d1(s,g,r,l,zt)){me=1,eh(s,Vn(l,s.current)),Mt=null;return}}catch(p){if(g!==null)throw Mt=g,p;me=1,eh(s,Vn(l,s.current)),Mt=null;return}r.flags&32768?(Ht||u===1?s=!0:lo||(zt&536870912)!==0?s=!1:(Us=s=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Lv(r,s)):uh(r)}function uh(s){var r=s;do{if((r.flags&32768)!==0){Lv(r,Us);return}s=r.return;var l=m1(r.alternate,r,as);if(l!==null){Mt=l;return}if(r=r.sibling,r!==null){Mt=r;return}Mt=r=s}while(r!==null);me===0&&(me=5)}function Lv(s,r){do{var l=p1(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);me=6,Mt=null}function Uv(s,r,l,u,g,p,E,S,O){s.cancelPendingCommit=null;do hh();while(Ye!==0);if((Qt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=xd,al(s,l,p,E,S,O),s===ae&&(Mt=ae=null,zt=0),uo=r,js=s,ho=l,Og=p,Mg=g,Iv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,I1(Rr,function(){return Hv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,g=ot.p,ot.p=2,E=Qt,Qt|=4;try{_1(s,r,l)}finally{Qt=E,ot.p=g,Q.T=u}}Ye=1,zv(),Bv(),jv()}}function zv(){if(Ye===1){Ye=0;var s=js,r=uo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var u=ot.p;ot.p=2;var g=Qt;Qt|=4;try{Ev(r,s);var p=Qg,E=R_(s.containerInfo),S=p.focusedElem,O=p.selectionRange;if(E!==S&&S&&S.ownerDocument&&x_(S.ownerDocument.documentElement,S)){if(O!==null&&Ed(S)){var F=O.start,Z=O.end;if(Z===void 0&&(Z=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(Z,S.value.length);else{var et=S.ownerDocument||document,H=et&&et.defaultView||window;if(H.getSelection){var Y=H.getSelection(),Tt=S.textContent.length,yt=Math.min(O.start,Tt),ee=O.end===void 0?yt:Math.min(O.end,Tt);!Y.extend&&yt>ee&&(E=ee,ee=yt,yt=E);var z=w_(S,yt),U=w_(S,ee);if(z&&U&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==U.node||Y.focusOffset!==U.offset)){var j=et.createRange();j.setStart(z.node,z.offset),Y.removeAllRanges(),yt>ee?(Y.addRange(j),Y.extend(U.node,U.offset)):(j.setEnd(U.node,U.offset),Y.addRange(j))}}}}for(et=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&et.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<et.length;S++){var tt=et[S];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Sh=!!Kg,Qg=Kg=null}finally{Qt=g,ot.p=u,Q.T=l}}s.current=r,Ye=2}}function Bv(){if(Ye===2){Ye=0;var s=js,r=uo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var u=ot.p;ot.p=2;var g=Qt;Qt|=4;try{_v(s,r.alternate,r)}finally{Qt=g,ot.p=u,Q.T=l}}Ye=3}}function jv(){if(Ye===4||Ye===3){Ye=0,au();var s=js,r=uo,l=ho,u=Iv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ye=5:(Ye=0,uo=js=null,Fv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Bs=null),Da(l),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Q.T,g=ot.p,ot.p=2,Q.T=null;try{for(var p=s.onRecoverableError,E=0;E<u.length;E++){var S=u[E];p(S.value,{componentStack:S.stack})}}finally{Q.T=r,ot.p=g}}(ho&3)!==0&&hh(),Ei(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===kg?Xl++:(Xl=0,kg=s):Xl=0,$l(0)}}function Fv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Cl(r)))}function hh(s){return zv(),Bv(),jv(),Hv()}function Hv(){if(Ye!==5)return!1;var s=js,r=Og;Og=0;var l=Da(ho),u=Q.T,g=ot.p;try{ot.p=32>l?32:l,Q.T=null,l=Mg,Mg=null;var p=js,E=ho;if(Ye=0,uo=js=null,ho=0,(Qt&6)!==0)throw Error(i(331));var S=Qt;if(Qt|=4,xv(p.current),Sv(p,p.current,E,l),Qt=S,$l(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(de,p)}catch{}return!0}finally{ot.p=g,Q.T=u,Fv(s,r)}}function qv(s,r,l){r=Vn(l,r),r=hg(s.stateNode,r,2),s=Os(s,r,2),s!==null&&(Ui(s,2),Ei(s))}function ne(s,r,l){if(s.tag===3)qv(s,s,l);else for(;r!==null;){if(r.tag===3){qv(r,s,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bs===null||!Bs.has(u))){s=Vn(l,s),l=Qy(2),u=Os(r,l,2),u!==null&&(Xy(l,u,r,s),Ui(u,2),Ei(u));break}}r=r.return}}function Lg(s,r,l){var u=s.pingCache;if(u===null){u=s.pingCache=new b1;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(Rg=!0,g.add(l),s=w1.bind(null,s,r,l),r.then(s,s))}function w1(s,r,l){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ae===s&&(zt&l)===l&&(me===4||me===3&&(zt&62914560)===zt&&300>Dn()-Dg?(Qt&2)===0&&fo(s,0):Ig|=l,co===zt&&(co=0)),Ei(s)}function Gv(s,r){r===0&&(r=rl()),s=Qa(s,r),s!==null&&(Ui(s,r),Ei(s))}function x1(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Gv(s,l)}function R1(s,r){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Gv(s,l)}function I1(s,r){return wr(s,r)}var fh=null,mo=null,Ug=!1,dh=!1,zg=!1,aa=0;function Ei(s){s!==mo&&s.next===null&&(mo===null?fh=mo=s:mo=mo.next=s),dh=!0,Ug||(Ug=!0,D1())}function $l(s,r){if(!zg&&dh){zg=!0;do for(var l=!1,u=fh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var E=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-We(42|s)+1)-1,p&=g&~(E&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,Xv(u,p))}else p=zt,p=Ca(u,u===ae?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Or(u,p)||(l=!0,Xv(u,p));u=u.next}while(l);zg=!1}}function C1(){Yv()}function Yv(){dh=Ug=!1;var s=0;aa!==0&&(U1()&&(s=aa),aa=0);for(var r=Dn(),l=null,u=fh;u!==null;){var g=u.next,p=Kv(u,r);p===0?(u.next=null,l===null?fh=g:l.next=g,g===null&&(mo=l)):(l=u,(s!==0||(p&3)!==0)&&(dh=!0)),u=g}$l(s)}function Kv(s,r){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-We(p),S=1<<E,O=g[E];O===-1?((S&l)===0||(S&u)!==0)&&(g[E]=il(S,r)):O<=r&&(s.expiredLanes|=S),p&=~S}if(r=ae,l=zt,l=Ca(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===r&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&xr(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Or(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(u!==null&&xr(u),Da(l)){case 2:case 8:l=Ra;break;case 32:l=Rr;break;case 268435456:l=Ia;break;default:l=Rr}return u=Qv.bind(null,s),l=wr(l,u),s.callbackPriority=r,s.callbackNode=l,r}return u!==null&&u!==null&&xr(u),s.callbackPriority=2,s.callbackNode=null,2}function Qv(s,r){if(Ye!==0&&Ye!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(hh()&&s.callbackNode!==l)return null;var u=zt;return u=Ca(s,s===ae?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Dv(s,u,r),Kv(s,Dn()),s.callbackNode!=null&&s.callbackNode===l?Qv.bind(null,s):null)}function Xv(s,r){if(hh())return null;Dv(s,r,!0)}function D1(){B1(function(){(Qt&6)!==0?wr(el,C1):Yv()})}function Bg(){return aa===0&&(aa=sl()),aa}function $v(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Va(""+s)}function Wv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function O1(s,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var p=$v((g[Ee]||null).action),E=u.submitter;E&&(r=(r=E[Ee]||null)?$v(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var S=new La("action","action",null,u,g);s.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(aa!==0){var O=E?Wv(g,E):new FormData(g);ag(l,{pending:!0,data:O,method:g.method,action:p},null,O)}}else typeof p=="function"&&(S.preventDefault(),O=E?Wv(g,E):new FormData(g),ag(l,{pending:!0,data:O,method:g.method,action:p},p,O))},currentTarget:g}]})}}for(var jg=0;jg<wd.length;jg++){var Fg=wd[jg],M1=Fg.toLowerCase(),k1=Fg[0].toUpperCase()+Fg.slice(1);Wn(M1,"on"+k1)}Wn(D_,"onAnimationEnd"),Wn(O_,"onAnimationIteration"),Wn(M_,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn($w,"onTransitionRun"),Wn(Ww,"onTransitionStart"),Wn(Zw,"onTransitionCancel"),Wn(k_,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function Zv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var E=u.length-1;0<=E;E--){var S=u[E],O=S.instance,F=S.currentTarget;if(S=S.listener,O!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=F;try{p(g)}catch(Z){th(Z)}g.currentTarget=null,p=O}else for(E=0;E<u.length;E++){if(S=u[E],O=S.instance,F=S.currentTarget,S=S.listener,O!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=F;try{p(g)}catch(Z){th(Z)}g.currentTarget=null,p=O}}}}function kt(s,r){var l=r[ll];l===void 0&&(l=r[ll]=new Set);var u=s+"__bubble";l.has(u)||(Jv(r,s,2,!1),l.add(u))}function Hg(s,r,l){var u=0;r&&(u|=4),Jv(l,s,u,r)}var gh="_reactListening"+Math.random().toString(36).slice(2);function qg(s){if(!s[gh]){s[gh]=!0,cl.forEach(function(l){l!=="selectionchange"&&(N1.has(l)||Hg(l,!1,s),Hg(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[gh]||(r[gh]=!0,Hg("selectionchange",!1,r))}}function Jv(s,r,l,u){switch(S0(r)){case 2:var g=ox;break;case 8:g=lx;break;default:g=sm}l=g.bind(null,r,l,s),g=void 0,!Nn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(r,l,{capture:!0,passive:g}):s.addEventListener(r,l,!0):g!==void 0?s.addEventListener(r,l,{passive:g}):s.addEventListener(r,l,!1)}function Gg(s,r,l,u,g){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===g)break;if(E===4)for(E=u.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;S!==null;){if(E=zi(S),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){u=p=E;continue t}S=S.parentNode}}u=u.return}pu(function(){var F=p,Z=kn(l),et=[];t:{var H=N_.get(s);if(H!==void 0){var Y=La,Tt=s;switch(s){case"keypress":if(fi(l)===0)break t;case"keydown":case"keyup":Y=Ha;break;case"focusin":Tt="focus",Y=Ba;break;case"focusout":Tt="blur",Y=Ba;break;case"beforeblur":case"afterblur":Y=Ba;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Au;break;case D_:case O_:case M_:Y=ja;break;case k_:Y=xu;break;case"scroll":case"scrollend":Y=_u;break;case"wheel":Y=qa;break;case"copy":case"cut":case"paste":Y=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=El;break;case"toggle":case"beforetoggle":Y=Iu}var yt=(r&4)!==0,ee=!yt&&(s==="scroll"||s==="scrollend"),z=yt?H!==null?H+"Capture":null:H;yt=[];for(var U=F,j;U!==null;){var tt=U;if(j=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||j===null||z===null||(tt=zr(U,z),tt!=null&&yt.push(Zl(U,tt,j))),ee)break;U=U.return}0<yt.length&&(H=new Y(H,Tt,null,l,Z),et.push({event:H,listeners:yt}))}}if((r&7)===0){t:{if(H=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",H&&l!==Hi&&(Tt=l.relatedTarget||l.fromElement)&&(zi(Tt)||Tt[On]))break t;if((Y||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(Tt=l.relatedTarget||l.toElement,Y=F,Tt=Tt?zi(Tt):null,Tt!==null&&(ee=o(Tt),yt=Tt.tag,Tt!==ee||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(Y=null,Tt=F),Y!==Tt)){if(yt=Pn,tt="onMouseLeave",z="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(yt=El,tt="onPointerLeave",z="onPointerEnter",U="pointer"),ee=Y==null?H:li(Y),j=Tt==null?H:li(Tt),H=new yt(tt,U+"leave",Y,l,Z),H.target=ee,H.relatedTarget=j,tt=null,zi(Z)===F&&(yt=new yt(z,U+"enter",Tt,l,Z),yt.target=j,yt.relatedTarget=ee,tt=yt),ee=tt,Y&&Tt)e:{for(yt=Y,z=Tt,U=0,j=yt;j;j=po(j))U++;for(j=0,tt=z;tt;tt=po(tt))j++;for(;0<U-j;)yt=po(yt),U--;for(;0<j-U;)z=po(z),j--;for(;U--;){if(yt===z||z!==null&&yt===z.alternate)break e;yt=po(yt),z=po(z)}yt=null}else yt=null;Y!==null&&t0(et,H,Y,yt,!1),Tt!==null&&ee!==null&&t0(et,ee,Tt,yt,!0)}}t:{if(H=F?li(F):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var ht=v_;else if(Ce(H))if(b_)ht=Kw;else{ht=Gw;var Ot=qw}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&gl(F.elementType)&&(ht=v_):ht=Yw;if(ht&&(ht=ht(s,F))){Qi(et,ht,l,Z);break t}Ot&&Ot(s,H,F),s==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&xs(H,"number",H.value)}switch(Ot=F?li(F):window,s){case"focusin":(Ce(Ot)||Ot.contentEditable==="true")&&(Ga=Ot,Td=F,Al=null);break;case"focusout":Al=Td=Ga=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,I_(et,l,Z);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":I_(et,l,Z)}var mt;if(mi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Lt?$(s,l)&&(vt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(b&&l.locale!=="ko"&&(Lt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lt&&(mt=pl()):(hi=Z,Rs="value"in hi?hi.value:hi.textContent,Lt=!0)),Ot=mh(F,vt),0<Ot.length&&(vt=new vl(vt,s,null,l,Z),et.push({event:vt,listeners:Ot}),mt?vt.data=mt:(mt=lt(l),mt!==null&&(vt.data=mt)))),(mt=y?Ie(s,l):Ut(s,l))&&(vt=mh(F,"onBeforeInput"),0<vt.length&&(Ot=new vl("onBeforeInput","beforeinput",null,l,Z),et.push({event:Ot,listeners:vt}),Ot.data=mt)),O1(et,s,F,l,Z)}Zv(et,r)})}function Zl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function mh(s,r){for(var l=r+"Capture",u=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=zr(s,l),g!=null&&u.unshift(Zl(s,g,p)),g=zr(s,r),g!=null&&u.push(Zl(s,g,p))),s.tag===3)return u;s=s.return}return[]}function po(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function t0(s,r,l,u,g){for(var p=r._reactName,E=[];l!==null&&l!==u;){var S=l,O=S.alternate,F=S.stateNode;if(S=S.tag,O!==null&&O===u)break;S!==5&&S!==26&&S!==27||F===null||(O=F,g?(F=zr(l,p),F!=null&&E.unshift(Zl(l,F,O))):g||(F=zr(l,p),F!=null&&E.push(Zl(l,F,O)))),l=l.return}E.length!==0&&s.push({event:r,listeners:E})}var P1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function e0(s){return(typeof s=="string"?s:""+s).replace(P1,`
`).replace(V1,"")}function n0(s,r){return r=e0(r),e0(s)===r}function ph(){}function te(s,r,l,u,g,p){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Mn(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Mn(s,""+u);break;case"className":ci(s,"class",u);break;case"tabIndex":ci(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ci(s,l,u);break;case"style":dl(s,u,p);break;case"data":if(r!=="object"){ci(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(r!=="input"&&te(s,r,"name",g.name,g,null),te(s,r,"formEncType",g.formEncType,g,null),te(s,r,"formMethod",g.formMethod,g,null),te(s,r,"formTarget",g.formTarget,g,null)):(te(s,r,"encType",g.encType,g,null),te(s,r,"method",g.method,g,null),te(s,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=ph);break;case"onScroll":u!=null&&kt("scroll",s);break;case"onScrollEnd":u!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Va(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":kt("beforetoggle",s),kt("toggle",s),ws(s,"popover",u);break;case"xlinkActuate":He(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ws(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=md.get(l)||l,ws(s,l,u))}}function Yg(s,r,l,u,g,p){switch(l){case"style":dl(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Mn(s,u):(typeof u=="number"||typeof u=="bigint")&&Mn(s,""+u);break;case"onScroll":u!=null&&kt("scroll",s);break;case"onScrollEnd":u!=null&&kt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=ph);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),p=s[Ee]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(r,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):ws(s,l,u)}}}function Ke(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var u=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var E=l[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,p,E,l,null)}}g&&te(s,r,"srcSet",l.srcSet,l,null),u&&te(s,r,"src",l.src,l,null);return;case"input":kt("invalid",s);var S=p=E=g=null,O=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var Z=l[u];if(Z!=null)switch(u){case"name":g=Z;break;case"type":E=Z;break;case"checked":O=Z;break;case"defaultChecked":F=Z;break;case"value":p=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:te(s,r,u,Z,l,null)}}Vr(s,p,S,O,F,E,g,!1),Pa(s);return;case"select":kt("invalid",s),u=E=p=null;for(g in l)if(l.hasOwnProperty(g)&&(S=l[g],S!=null))switch(g){case"value":p=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:te(s,r,g,S,l,null)}r=p,l=E,s.multiple=!!u,r!=null?Fi(s,!!u,r,!1):l!=null&&Fi(s,!!u,l,!0);return;case"textarea":kt("invalid",s),p=g=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":g=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:te(s,r,E,S,l,null)}Lr(s,u,g,p),Pa(s);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(u=l[O],u!=null))switch(O){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(s,r,O,u,l,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(u=0;u<Wl.length;u++)kt(Wl[u],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,F,u,l,null)}return;default:if(gl(r)){for(Z in l)l.hasOwnProperty(Z)&&(u=l[Z],u!==void 0&&Yg(s,r,Z,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&te(s,r,S,u,l,null))}function L1(s,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,E=null,S=null,O=null,F=null,Z=null;for(Y in l){var et=l[Y];if(l.hasOwnProperty(Y)&&et!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=et;default:u.hasOwnProperty(Y)||te(s,r,Y,null,u,et)}}for(var H in u){var Y=u[H];if(et=l[H],u.hasOwnProperty(H)&&(Y!=null||et!=null))switch(H){case"type":p=Y;break;case"name":g=Y;break;case"checked":F=Y;break;case"defaultChecked":Z=Y;break;case"value":E=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==et&&te(s,r,H,Y,u,et)}}En(s,E,S,O,F,Z,p,g);return;case"select":Y=E=S=H=null;for(p in l)if(O=l[p],l.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":Y=O;default:u.hasOwnProperty(p)||te(s,r,p,null,u,O)}for(g in u)if(p=u[g],O=l[g],u.hasOwnProperty(g)&&(p!=null||O!=null))switch(g){case"value":H=p;break;case"defaultValue":S=p;break;case"multiple":E=p;default:p!==O&&te(s,r,g,p,u,O)}r=S,l=E,u=Y,H!=null?Fi(s,!!l,H,!1):!!u!=!!l&&(r!=null?Fi(s,!!l,r,!0):Fi(s,!!l,l?[]:"",!1));return;case"textarea":Y=H=null;for(S in l)if(g=l[S],l.hasOwnProperty(S)&&g!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:te(s,r,S,null,u,g)}for(E in u)if(g=u[E],p=l[E],u.hasOwnProperty(E)&&(g!=null||p!=null))switch(E){case"value":H=g;break;case"defaultValue":Y=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&te(s,r,E,g,u,p)}Zt(s,H,Y);return;case"option":for(var Tt in l)if(H=l[Tt],l.hasOwnProperty(Tt)&&H!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:te(s,r,Tt,null,u,H)}for(O in u)if(H=u[O],Y=l[O],u.hasOwnProperty(O)&&H!==Y&&(H!=null||Y!=null))switch(O){case"selected":s.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:te(s,r,O,H,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)H=l[yt],l.hasOwnProperty(yt)&&H!=null&&!u.hasOwnProperty(yt)&&te(s,r,yt,null,u,H);for(F in u)if(H=u[F],Y=l[F],u.hasOwnProperty(F)&&H!==Y&&(H!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:te(s,r,F,H,u,Y)}return;default:if(gl(r)){for(var ee in l)H=l[ee],l.hasOwnProperty(ee)&&H!==void 0&&!u.hasOwnProperty(ee)&&Yg(s,r,ee,void 0,u,H);for(Z in u)H=u[Z],Y=l[Z],!u.hasOwnProperty(Z)||H===Y||H===void 0&&Y===void 0||Yg(s,r,Z,H,u,Y);return}}for(var z in l)H=l[z],l.hasOwnProperty(z)&&H!=null&&!u.hasOwnProperty(z)&&te(s,r,z,null,u,H);for(et in u)H=u[et],Y=l[et],!u.hasOwnProperty(et)||H===Y||H==null&&Y==null||te(s,r,et,H,u,Y)}var Kg=null,Qg=null;function _h(s){return s.nodeType===9?s:s.ownerDocument}function i0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Xg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $g=null;function U1(){var s=window.event;return s&&s.type==="popstate"?s===$g?!1:($g=s,!0):($g=null,!1)}var r0=typeof setTimeout=="function"?setTimeout:void 0,z1=typeof clearTimeout=="function"?clearTimeout:void 0,a0=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof a0<"u"?function(s){return a0.resolve(null).then(s).catch(j1)}:r0;function j1(s){setTimeout(function(){throw s})}function Hs(s){return s==="head"}function o0(s,r){var l=r,u=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var E=s.ownerDocument;if(l&1&&Jl(E.documentElement),l&2&&Jl(E.body),l&4)for(l=E.head,Jl(l),E=l.firstChild;E;){var S=E.nextSibling,O=E.nodeName;E[Mr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=S}}if(g===0){s.removeChild(p),oc(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);oc(r)}function Wg(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Wg(l),As(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function F1(s,r,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Mr])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function H1(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function Zg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function q1(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Jg=null;function l0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function c0(s,r,l){switch(r=_h(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);As(s)}var Fn=new Map,u0=new Set;function yh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=ot.d;ot.d={f:G1,r:Y1,D:K1,C:Q1,L:X1,m:$1,X:Z1,S:W1,M:J1};function G1(){var s=os.f(),r=ch();return s||r}function Y1(s){var r=oi(s);r!==null&&r.tag===5&&r.type==="form"?Dy(r):os.r(s)}var _o=typeof document>"u"?null:document;function h0(s,r,l){var u=_o;if(u&&typeof r=="string"&&r){var g=Te(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),u0.has(g)||(u0.add(g),s={rel:s,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Ke(r,"link",s),pe(r),u.head.appendChild(r)))}}function K1(s){os.D(s),h0("dns-prefetch",s,null)}function Q1(s,r){os.C(s,r),h0("preconnect",s,r)}function X1(s,r,l){os.L(s,r,l);var u=_o;if(u&&s&&r){var g='link[rel="preload"][as="'+Te(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Te(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Te(l.imageSizes)+'"]')):g+='[href="'+Te(s)+'"]';var p=g;switch(r){case"style":p=yo(s);break;case"script":p=vo(s)}Fn.has(p)||(s=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Fn.set(p,s),u.querySelector(g)!==null||r==="style"&&u.querySelector(tc(p))||r==="script"&&u.querySelector(ec(p))||(r=u.createElement("link"),Ke(r,"link",s),pe(r),u.head.appendChild(r)))}}function $1(s,r){os.m(s,r);var l=_o;if(l&&s){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(s)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(s)}if(!Fn.has(p)&&(s=_({rel:"modulepreload",href:s},r),Fn.set(p,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ec(p)))return}u=l.createElement("link"),Ke(u,"link",s),pe(u),l.head.appendChild(u)}}}function W1(s,r,l){os.S(s,r,l);var u=_o;if(u&&s){var g=cn(u).hoistableStyles,p=yo(s);r=r||"default";var E=g.get(p);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(tc(p)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Fn.get(p))&&tm(s,l);var O=E=u.createElement("link");pe(O),Ke(O,"link",s),O._p=new Promise(function(F,Z){O.onload=F,O.onerror=Z}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vh(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:S},g.set(p,E)}}}function Z1(s,r){os.X(s,r);var l=_o;if(l&&s){var u=cn(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(ec(g)),p||(s=_({src:s,async:!0},r),(r=Fn.get(g))&&em(s,r),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function J1(s,r){os.M(s,r);var l=_o;if(l&&s){var u=cn(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(ec(g)),p||(s=_({src:s,async:!0,type:"module"},r),(r=Fn.get(g))&&em(s,r),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function f0(s,r,l,u){var g=(g=pt.current)?yh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=yo(l.href),l=cn(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=yo(l.href);var p=cn(g).hoistableStyles,E=p.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=g.querySelector(tc(s)))&&!p._p&&(E.instance=p,E.state.loading=5),Fn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fn.set(s,l),p||tx(g,s,l,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=vo(l),l=cn(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function yo(s){return'href="'+Te(s)+'"'}function tc(s){return'link[rel="stylesheet"]['+s+"]"}function d0(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function tx(s,r,l,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ke(r,"link",l),pe(r),s.head.appendChild(r))}function vo(s){return'[src="'+Te(s)+'"]'}function ec(s){return"script[async]"+s}function g0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+Te(l.href)+'"]');if(u)return r.instance=u,pe(u),u;var g=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pe(u),Ke(u,"style",g),vh(u,l.precedence,s),r.instance=u;case"stylesheet":g=yo(l.href);var p=s.querySelector(tc(g));if(p)return r.state.loading|=4,r.instance=p,pe(p),p;u=d0(l),(g=Fn.get(g))&&tm(u,g),p=(s.ownerDocument||s).createElement("link"),pe(p);var E=p;return E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),Ke(p,"link",u),r.state.loading|=4,vh(p,l.precedence,s),r.instance=p;case"script":return p=vo(l.src),(g=s.querySelector(ec(p)))?(r.instance=g,pe(g),g):(u=l,(g=Fn.get(p))&&(u=_({},l),em(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),pe(g),Ke(g,"link",u),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,vh(u,l.precedence,s));return r.instance}function vh(s,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===r)p=S;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function tm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function em(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var bh=null;function m0(s,r,l){if(bh===null){var u=new Map,g=bh=new Map;g.set(l,u)}else g=bh,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[Mr]||p[Re]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=s+E;var S=u.get(E);S?S.push(p):u.set(E,[p])}}return u}function p0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function ex(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var nc=null;function nx(){}function ix(s,r,l){if(nc===null)throw Error(i(475));var u=nc;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=yo(l.href),p=s.querySelector(tc(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Eh.bind(u),s.then(u,u)),r.state.loading|=4,r.instance=p,pe(p);return}p=s.ownerDocument||s,l=d0(l),(g=Fn.get(g))&&tm(l,g),p=p.createElement("link"),pe(p);var E=p;E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),Ke(p,"link",l),r.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Eh.bind(u),s.addEventListener("load",r),s.addEventListener("error",r))}}function sx(){if(nc===null)throw Error(i(475));var s=nc;return s.stylesheets&&s.count===0&&nm(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&nm(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Eh(){if(this.count--,this.count===0){if(this.stylesheets)nm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Th=null;function nm(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Th=new Map,r.forEach(rx,s),Th=null,Eh.call(s))}function rx(s,r){if(!(r.state.loading&4)){var l=Th.get(s);if(l)var u=l.get(null);else{l=new Map,Th.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var E=g[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}g=r.instance,E=g.getAttribute("data-precedence"),p=l.get(E)||u,p===u&&l.set(null,g),l.set(E,g),this.count++,u=Eh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var ic={$$typeof:J,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function ax(s,r,l,u,g,p,E,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function y0(s,r,l,u,g,p,E,S,O,F,Z,et){return s=new ax(s,r,l,E,S,O,F,et),r=1,p===!0&&(r|=24),p=Sn(3,null,null,r),s.current=p,p.stateNode=s,r=Ld(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:r},jd(p),s}function v0(s){return s?(s=Xa,s):Xa}function b0(s,r,l,u,g,p){g=v0(g),u.context===null?u.context=g:u.pendingContext=g,u=Ds(r),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Os(s,u,r),l!==null&&(In(l,s,r),kl(l,s,r))}function E0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function im(s,r){E0(s,r),(s=s.alternate)&&E0(s,r)}function T0(s){if(s.tag===13){var r=Qa(s,67108864);r!==null&&In(r,s,67108864),im(s,67108864)}}var Sh=!0;function ox(s,r,l,u){var g=Q.T;Q.T=null;var p=ot.p;try{ot.p=2,sm(s,r,l,u)}finally{ot.p=p,Q.T=g}}function lx(s,r,l,u){var g=Q.T;Q.T=null;var p=ot.p;try{ot.p=8,sm(s,r,l,u)}finally{ot.p=p,Q.T=g}}function sm(s,r,l,u){if(Sh){var g=rm(u);if(g===null)Gg(s,r,u,Ah,l),A0(s,u);else if(ux(g,s,r,l,u))u.stopPropagation();else if(A0(s,u),r&4&&-1<cx.indexOf(s)){for(;g!==null;){var p=oi(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Qn(p.pendingLanes);if(E!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var O=1<<31-We(E);S.entanglements[1]|=O,E&=~O}Ei(p),(Qt&6)===0&&(oh=Dn()+500,$l(0))}}break;case 13:S=Qa(p,2),S!==null&&In(S,p,2),ch(),im(p,2)}if(p=rm(u),p===null&&Gg(s,r,u,Ah,l),p===g)break;g=p}g!==null&&u.stopPropagation()}else Gg(s,r,u,null,l)}}function rm(s){return s=kn(s),am(s)}var Ah=null;function am(s){if(Ah=null,s=zi(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Ah=s,null}function S0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cd()){case el:return 2;case Ra:return 8;case Rr:case ud:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var om=!1,qs=null,Gs=null,Ys=null,sc=new Map,rc=new Map,Ks=[],cx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A0(s,r){switch(s){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":sc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(r.pointerId)}}function ac(s,r,l,u,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},r!==null&&(r=oi(r),r!==null&&T0(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function ux(s,r,l,u,g){switch(r){case"focusin":return qs=ac(qs,s,r,l,u,g),!0;case"dragenter":return Gs=ac(Gs,s,r,l,u,g),!0;case"mouseover":return Ys=ac(Ys,s,r,l,u,g),!0;case"pointerover":var p=g.pointerId;return sc.set(p,ac(sc.get(p)||null,s,r,l,u,g)),!0;case"gotpointercapture":return p=g.pointerId,rc.set(p,ac(rc.get(p)||null,s,r,l,u,g)),!0}return!1}function w0(s){var r=zi(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,cu(s.priority,function(){if(l.tag===13){var u=Rn();u=Es(u);var g=Qa(l,u);g!==null&&In(g,l,u),im(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wh(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=rm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Hi=u,l.target.dispatchEvent(u),Hi=null}else return r=oi(l),r!==null&&T0(r),s.blockedOn=l,!1;r.shift()}return!0}function x0(s,r,l){wh(s)&&l.delete(r)}function hx(){om=!1,qs!==null&&wh(qs)&&(qs=null),Gs!==null&&wh(Gs)&&(Gs=null),Ys!==null&&wh(Ys)&&(Ys=null),sc.forEach(x0),rc.forEach(x0)}function xh(s,r){s.blockedOn===r&&(s.blockedOn=null,om||(om=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hx)))}var Rh=null;function R0(s){Rh!==s&&(Rh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rh===s&&(Rh=null);for(var r=0;r<s.length;r+=3){var l=s[r],u=s[r+1],g=s[r+2];if(typeof u!="function"){if(am(u||l)===null)continue;break}var p=oi(l);p!==null&&(s.splice(r,3),r-=3,ag(p,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function oc(s){function r(O){return xh(O,s)}qs!==null&&xh(qs,s),Gs!==null&&xh(Gs,s),Ys!==null&&xh(Ys,s),sc.forEach(r),rc.forEach(r);for(var l=0;l<Ks.length;l++){var u=Ks[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Ks.length&&(l=Ks[0],l.blockedOn===null);)w0(l),l.blockedOn===null&&Ks.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],p=l[u+1],E=g[Ee]||null;if(typeof p=="function")E||R0(l);else if(E){var S=null;if(p&&p.hasAttribute("formAction")){if(g=p,E=p[Ee]||null)S=E.formAction;else if(am(g)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),R0(l)}}}function lm(s){this._internalRoot=s}Ih.prototype.render=lm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,u=Rn();b0(l,u,s,r,null,null)},Ih.prototype.unmount=lm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;b0(s.current,2,null,s,null,null),ch(),r[On]=null}};function Ih(s){this._internalRoot=s}Ih.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ts();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Ks.length&&r!==0&&r<Ks[l].priority;l++);Ks.splice(l,0,s),l===0&&w0(s)}};var I0=t.version;if(I0!=="19.1.0")throw Error(i(527,I0,"19.1.0"));ot.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var fx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{de=Ch.inject(fx),Kt=Ch}catch{}}return cc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var l=!1,u="",g=qy,p=Gy,E=Yy,S=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=y0(s,1,!1,null,null,l,u,g,p,E,S,null),s[On]=r.current,qg(s),new lm(r)},cc.hydrateRoot=function(s,r,l){if(!a(s))throw Error(i(299));var u=!1,g="",p=qy,E=Gy,S=Yy,O=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),r=y0(s,1,!0,r,l??null,u,g,p,E,S,O,F),r.context=v0(null),l=r.current,u=Rn(),u=Es(u),g=Ds(u),g.callback=null,Os(l,g,u),l=u,r.current.lanes=l,Ui(r,l),Ei(r),s[On]=r.current,qg(s),new Ih(r)},cc.version="19.1.0",cc}var U0;function Sx(){if(U0)return hm.exports;U0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hm.exports=Tx(),hm.exports}var Ax=Sx();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=()=>{};var z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},xx=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const a=n[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[e++];t[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[e++],c=n[e++],h=n[e++],d=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return t.join("")},RT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,d=a+2<n.length,m=d?n[a+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,A=m&63;d||(A=64,c||(T=64)),i.push(e[_],e[v],e[T],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(xT(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):xx(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const m=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||v==null)throw new Rx;const T=o<<2|h>>4;if(i.push(T),m!==64){const A=h<<4&240|m>>2;if(i.push(A),v!==64){const I=m<<6&192|v;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ix=function(n){const t=xT(n);return RT.encodeByteArray(t,!0)},cf=function(n){return Ix(n).replace(/\./g,"")},IT=function(n){try{return RT.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=()=>Cx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof z0>"u")return;const n=z0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Mx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&IT(n[1]);return t&&JSON.parse(t)},Vf=()=>{try{return wx()||Dx()||Ox()||Mx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CT=n=>{var t,e;return(e=(t=Vf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},kx=n=>{const t=CT(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},DT=()=>{var n;return(n=Vf())===null||n===void 0?void 0:n.config},OT=n=>{var t;return(t=Vf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cf(JSON.stringify(e)),cf(JSON.stringify(c)),""].join(".")}const Ac={};function Vx(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ac))Ac[t]?n.emulator.push(t):n.prod.push(t);return n}function Lx(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let B0=!1;function kT(n,t){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||Ac[n]===t||Ac[n]||B0)return;Ac[n]=t;function e(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=Vx().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{B0=!0,c()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=Lx(i),A=e("text"),I=document.getElementById(A)||document.createElement("span"),k=e("learnmore"),M=document.getElementById(k)||document.createElement("a"),K=e("preprendIcon"),G=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const J=T.element;h(J),_(M,k);const q=m();d(G,K),J.append(G,I,M,q),document.body.appendChild(J)}o?(I.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ux(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function zx(){var n;const t=(n=Vf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hx(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qx(){return!zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gx(){try{return typeof indexedDB=="object"}catch{return!1}}function Yx(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var o;t(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="FirebaseError";class vs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Kx,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,o=this.errors[t],c=o?Qx(o,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new vs(a,h,i)}}function Qx(n,t){return n.replace(Xx,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const Xx=/\{\$([^}]+)}/g;function $x(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function _a(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const o=n[a],c=t[a];if(j0(o)&&j0(c)){if(!_a(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function j0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function mc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function pc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function Wx(n,t){const e=new Zx(n,t);return e.subscribe.bind(e)}class Zx{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Jx(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=mm),a.error===void 0&&(a.error=mm),a.complete===void 0&&(a.complete=mm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jx(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){return n&&n._delegate?n._delegate:n}class ya{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Nx;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),a=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(nR(t))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(t=ha){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ha){return this.instances.has(t)}getOptions(t=ha){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&t(c,a),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ha){return this.component?this.component.multipleInstances?t:ha:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eR(n){return n===ha?void 0:n}function nR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new tR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const sR={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},rR=Pt.INFO,aR={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},oR=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),a=aR[t];if(a)console[a](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pp{constructor(t){this.name=t,this._logLevel=rR,this._logHandler=oR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const lR=(n,t)=>t.some(e=>n instanceof e);let F0,H0;function cR(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uR(){return H0||(H0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NT=new WeakMap,Um=new WeakMap,PT=new WeakMap,pm=new WeakMap,_p=new WeakMap;function hR(n){const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(ir(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&NT.set(e,n)}).catch(()=>{}),_p.set(t,n),t}function fR(n){if(Um.has(n))return;const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Um.set(n,t)}let zm={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Um.get(n);if(t==="objectStoreNames")return n.objectStoreNames||PT.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ir(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function dR(n){zm=n(zm)}function gR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(_m(this),t,...e);return PT.set(i,t.sort?t.sort():[t]),ir(i)}:uR().includes(n)?function(...t){return n.apply(_m(this),t),ir(NT.get(this))}:function(...t){return ir(n.apply(_m(this),t))}}function mR(n){return typeof n=="function"?gR(n):(n instanceof IDBTransaction&&fR(n),lR(n,cR())?new Proxy(n,zm):n)}function ir(n){if(n instanceof IDBRequest)return hR(n);if(pm.has(n))return pm.get(n);const t=mR(n);return t!==n&&(pm.set(n,t),_p.set(t,n)),t}const _m=n=>_p.get(n);function pR(n,t,{blocked:e,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(n,t),h=ir(c);return i&&c.addEventListener("upgradeneeded",d=>{i(ir(c.result),d.oldVersion,d.newVersion,ir(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),a&&d.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const _R=["get","getKey","getAll","getAllKeys","count"],yR=["put","add","delete","clear"],ym=new Map;function q0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(ym.get(t))return ym.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=yR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||_R.includes(e)))return;const o=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),a&&d.done]))[0]};return ym.set(t,o),o}dR(n=>({...n,get:(t,e,i)=>q0(t,e)||n.get(t,e,i),has:(t,e)=>!!q0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(bR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function bR(n){const t=n.getComponent();return t?.type==="VERSION"}const Bm="@firebase/app",G0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new pp("@firebase/app"),ER="@firebase/app-compat",TR="@firebase/analytics-compat",SR="@firebase/analytics",AR="@firebase/app-check-compat",wR="@firebase/app-check",xR="@firebase/auth",RR="@firebase/auth-compat",IR="@firebase/database",CR="@firebase/data-connect",DR="@firebase/database-compat",OR="@firebase/functions",MR="@firebase/functions-compat",kR="@firebase/installations",NR="@firebase/installations-compat",PR="@firebase/messaging",VR="@firebase/messaging-compat",LR="@firebase/performance",UR="@firebase/performance-compat",zR="@firebase/remote-config",BR="@firebase/remote-config-compat",jR="@firebase/storage",FR="@firebase/storage-compat",HR="@firebase/firestore",qR="@firebase/ai",GR="@firebase/firestore-compat",YR="firebase",KR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",QR={[Bm]:"fire-core",[ER]:"fire-core-compat",[SR]:"fire-analytics",[TR]:"fire-analytics-compat",[wR]:"fire-app-check",[AR]:"fire-app-check-compat",[xR]:"fire-auth",[RR]:"fire-auth-compat",[IR]:"fire-rtdb",[CR]:"fire-data-connect",[DR]:"fire-rtdb-compat",[OR]:"fire-fn",[MR]:"fire-fn-compat",[kR]:"fire-iid",[NR]:"fire-iid-compat",[PR]:"fire-fcm",[VR]:"fire-fcm-compat",[LR]:"fire-perf",[UR]:"fire-perf-compat",[zR]:"fire-rc",[BR]:"fire-rc-compat",[jR]:"fire-gcs",[FR]:"fire-gcs-compat",[HR]:"fire-fst",[GR]:"fire-fst-compat",[qR]:"fire-vertex","fire-js":"fire-js",[YR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,XR=new Map,Fm=new Map;function Y0(n,t){try{n.container.addComponent(t)}catch(e){ms.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function No(n){const t=n.name;if(Fm.has(t))return ms.debug(`There were multiple attempts to register component ${t}.`),!1;Fm.set(t,n);for(const e of uf.values())Y0(e,n);for(const e of XR.values())Y0(e,n);return!0}function yp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ti(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Qc("app","Firebase",$R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=KR;function VT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:jm,automaticDataCollectionEnabled:!0},t),a=i.name;if(typeof a!="string"||!a)throw sr.create("bad-app-name",{appName:String(a)});if(e||(e=DT()),!e)throw sr.create("no-options");const o=uf.get(a);if(o){if(_a(e,o.options)&&_a(i,o.config))return o;throw sr.create("duplicate-app",{appName:a})}const c=new iR(a);for(const d of Fm.values())c.addComponent(d);const h=new WR(e,i,c);return uf.set(a,h),h}function LT(n=jm){const t=uf.get(n);if(!t&&n===jm&&DT())return VT();if(!t)throw sr.create("no-app",{appName:n});return t}function rr(n,t,e){var i;let a=(i=QR[n])!==null&&i!==void 0?i:n;e&&(a+=`-${e}`);const o=a.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${a}" with version "${t}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ms.warn(h.join(" "));return}No(new ya(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebase-heartbeat-database",JR=1,kc="firebase-heartbeat-store";let vm=null;function UT(){return vm||(vm=pR(ZR,JR,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(kc)}catch(e){console.warn(e)}}}}).catch(n=>{throw sr.create("idb-open",{originalErrorMessage:n.message})})),vm}async function tI(n){try{const e=(await UT()).transaction(kc),i=await e.objectStore(kc).get(zT(n));return await e.done,i}catch(t){if(t instanceof vs)ms.warn(t.message);else{const e=sr.create("idb-get",{originalErrorMessage:t?.message});ms.warn(e.message)}}}async function K0(n,t){try{const i=(await UT()).transaction(kc,"readwrite");await i.objectStore(kc).put(t,zT(n)),await i.done}catch(e){if(e instanceof vs)ms.warn(e.message);else{const i=sr.create("idb-set",{originalErrorMessage:e?.message});ms.warn(i.message)}}}function zT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=1024,nI=30;class iI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new rI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Q0();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>nI){const c=aI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ms.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q0(),{heartbeatsToSend:i,unsentEntries:a}=sI(this._heartbeatsCache.heartbeats),o=cf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ms.warn(e),""}}}function Q0(){return new Date().toISOString().substring(0,10)}function sI(n,t=eI){const e=[];let i=n.slice();for(const a of n){const o=e.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),X0(e)>t){o.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),X0(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class rI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gx()?Yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await tI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return K0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return K0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function X0(n){return cf(JSON.stringify({version:2,heartbeats:n})).length}function aI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){No(new ya("platform-logger",t=>new vR(t),"PRIVATE")),No(new ya("heartbeat",t=>new iI(t),"PRIVATE")),rr(Bm,G0,n),rr(Bm,G0,"esm2017"),rr("fire-js","")}oI("");function vp(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(e[i[a]]=n[i[a]]);return e}function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lI=BT,jT=new Qc("auth","Firebase",BT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new pp("@firebase/auth");function cI(n,...t){hf.logLevel<=Pt.WARN&&hf.warn(`Auth (${qo}): ${n}`,...t)}function Xh(n,...t){hf.logLevel<=Pt.ERROR&&hf.error(`Auth (${qo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,...t){throw bp(n,...t)}function xi(n,...t){return bp(n,...t)}function FT(n,t,e){const i=Object.assign(Object.assign({},lI()),{[t]:e});return new Qc("auth","Firebase",i).create(t,{appName:n.name})}function ar(n){return FT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bp(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return jT.create(n,...t)}function bt(n,t,...e){if(!n)throw bp(t,...e)}function fs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Xh(t),new Error(t)}function ps(n,t){n||fs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function uI(){return $0()==="http:"||$0()==="https:"}function $0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uI()||jx()||"connection"in navigator)?navigator.onLine:!0}function fI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e){this.shortDelay=t,this.longDelay=e,ps(e>t,"Short delay should be less than long delay!"),this.isMobile=Ux()||Fx()}get(){return hI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n,t){ps(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mI=new $c(3e4,6e4);function Aa(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Er(n,t,e,i,a={}){return qT(n,a,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=Xc(Object.assign({key:n.config.apiKey},c)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:t,headers:d},o);return Bx()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(m.credentials="include"),HT.fetch()(await GT(n,n.config.apiHost,e,h),m)})}async function qT(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},dI),t);try{const a=new _I(n),o=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Dh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Dh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Dh(n,"user-disabled",c);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw FT(n,_,m);si(n,_)}}catch(a){if(a instanceof vs)throw a;si(n,"network-request-failed",{message:String(a)})}}async function Lf(n,t,e,i,a={}){const o=await Er(n,t,e,i,a);return"mfaPendingCredential"in o&&si(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function GT(n,t,e,i){const a=`${t}${e}?${i}`,o=n,c=o.config.emulator?Ep(n.config,a):`${n.config.apiScheme}://${a}`;return gI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function pI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(xi(this.auth,"network-request-failed")),mI.get())})}}function Dh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=xi(n,t,i);return a.customData._tokenResponse=e,a}function W0(n){return n!==void 0&&n.enterprise!==void 0}class yI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return pI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vI(n,t){return Er(n,"GET","/v2/recaptchaConfig",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(n,t){return Er(n,"POST","/v1/accounts:delete",t)}async function ff(n,t){return Er(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function EI(n,t=!1){const e=ln(n),i=await e.getIdToken(t),a=Tp(i);bt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:wc(bm(a.auth_time)),issuedAtTime:wc(bm(a.iat)),expirationTime:wc(bm(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function bm(n){return Number(n)*1e3}function Tp(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const a=IT(e);return a?JSON.parse(a):(Xh("Failed to decode base64 JWT payload"),null)}catch(a){return Xh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Z0(n){const t=Tp(n);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof vs&&TI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function TI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(n){var t;const e=n.auth,i=await n.getIdToken(),a=await Nc(n,ff(e,{idToken:i}));bt(a?.users.length,e,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const c=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?YT(o.providerUserInfo):[],h=wI(n.providerData,c),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function AI(n){const t=ln(n);await df(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function wI(n,t){return[...n.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function YT(n){return n.map(t=>{var{providerId:e}=t,i=vp(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(n,t){const e=await qT(n,{},async()=>{const i=Xc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await GT(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(d.credentials="include"),HT.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function RI(n,t){return Er(n,"POST","/v2/accounts:revokeToken",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Z0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const e=Z0(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:o}=await xI(t,e);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:o}=e,c=new Ro;return i&&(bt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(bt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),o&&(bt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,t){bt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ei{constructor(t){var{uid:e,auth:i,stsTokenManager:a}=t,o=vp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Nc(this,this.stsTokenManager.getToken(this.auth,t));return bt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return EI(this,t)}reload(){return AI(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ei(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await df(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(ar(this.auth));const t=await this.getIdToken();return await Nc(this,bI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,a,o,c,h,d,m,_;const v=(i=e.displayName)!==null&&i!==void 0?i:void 0,T=(a=e.email)!==null&&a!==void 0?a:void 0,A=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,I=(c=e.photoURL)!==null&&c!==void 0?c:void 0,k=(h=e.tenantId)!==null&&h!==void 0?h:void 0,M=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,K=(m=e.createdAt)!==null&&m!==void 0?m:void 0,G=(_=e.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:J,emailVerified:q,isAnonymous:X,providerData:st,stsTokenManager:C}=e;bt(J&&C,t,"internal-error");const x=Ro.fromJSON(this.name,C);bt(typeof J=="string",t,"internal-error"),Xs(v,t.name),Xs(T,t.name),bt(typeof q=="boolean",t,"internal-error"),bt(typeof X=="boolean",t,"internal-error"),Xs(A,t.name),Xs(I,t.name),Xs(k,t.name),Xs(M,t.name),Xs(K,t.name),Xs(G,t.name);const R=new ei({uid:J,auth:t,email:T,emailVerified:q,displayName:v,isAnonymous:X,photoURL:I,phoneNumber:A,tenantId:k,stsTokenManager:x,createdAt:K,lastLoginAt:G});return st&&Array.isArray(st)&&(R.providerData=st.map(N=>Object.assign({},N))),M&&(R._redirectEventId=M),R}static async _fromIdTokenResponse(t,e,i=!1){const a=new Ro;a.updateFromServerResponse(e);const o=new ei({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await df(o),o}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];bt(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?YT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,h=new Ro;h.updateFromIdToken(i);const d=new ei({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new qm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;function ds(n){ps(n instanceof Function,"Expected a class definition");let t=J0.get(n);return t?(ps(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,J0.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}KT.type="NONE";const tb=KT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n,t,e){return`firebase:${n}:${t}:${e}`}class Io{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=$h(this.userKey,a.apiKey,o),this.fullPersistenceKey=$h("persistence",a.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await ff(this.auth,{idToken:t}).catch(()=>{});return e?ei._fromGetAccountInfoResponse(this.auth,e,t):null}return ei._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Io(ds(tb),t,i);const a=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||ds(tb);const c=$h(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const _=await m._get(c);if(_){let v;if(typeof _=="string"){const T=await ff(t,{idToken:_}).catch(()=>{});if(!T)break;v=await ei._fromGetAccountInfoResponse(t,T,_)}else v=ei._fromJSON(t,_);m!==o&&(h=v),o=m;break}}catch{}const d=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Io(o,t,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Io(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(WT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JT(t))return"Blackberry";if(tS(t))return"Webos";if(XT(t))return"Safari";if((t.includes("chrome/")||$T(t))&&!t.includes("edge/"))return"Chrome";if(ZT(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function QT(n=on()){return/firefox\//i.test(n)}function XT(n=on()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $T(n=on()){return/crios\//i.test(n)}function WT(n=on()){return/iemobile/i.test(n)}function ZT(n=on()){return/android/i.test(n)}function JT(n=on()){return/blackberry/i.test(n)}function tS(n=on()){return/webos/i.test(n)}function Sp(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function II(n=on()){var t;return Sp(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function CI(){return Hx()&&document.documentMode===10}function eS(n=on()){return Sp(n)||ZT(n)||tS(n)||JT(n)||/windows phone/i.test(n)||WT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n,t=[]){let e;switch(n){case"Browser":e=eb(on());break;case"Worker":e=`${eb(on())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const d=t(o);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(n,t={}){return Er(n,"GET","/v2/passwordPolicy",Aa(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=6;class kI{constructor(t){var e,i,a,o;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:MI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,a,o,c,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nb(this),this.idTokenSubscription=new nb(this),this.beforeStateQueue=new DI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ds(e)),this._initializationPromise=this.queue(async()=>{var i,a,o;if(!this._deleted&&(this.persistenceManager=await Io.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await ff(this,{idToken:t}),i=await ei._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=a?._redirectEventId,d=await this.tryRedirectSignIn(t);(!c||c===h)&&d?.user&&(a=d.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await df(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ti(this.app))return Promise.reject(ar(this));const e=t?ln(t):null;return e&&bt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ti(this.app)?Promise.reject(ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await OI(this),e=new kI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Qc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await RI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ds(t)||this._popupRedirectResolver;bt(e,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[ds(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=nS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&cI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Go(n){return ln(n)}class nb{constructor(t){this.auth=t,this.observer=null,this.addObserver=Wx(e=>this.observer=e)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PI(n){Uf=n}function iS(n){return Uf.loadJS(n)}function VI(){return Uf.recaptchaEnterpriseScript}function LI(){return Uf.gapiScript}function UI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class zI{constructor(){this.enterprise=new BI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class BI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const jI="recaptcha-enterprise",sS="NO_RECAPTCHA";class FI{constructor(t){this.type=jI,this.auth=Go(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{vI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new yI(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function a(o,c,h){const d=window.grecaptcha;W0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(m=>{c(m)}).catch(()=>{c(sS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zI().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!e&&W0(window.grecaptcha))a(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=VI();d.length!==0&&(d+=h),iS(d).then(()=>{a(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function ib(n,t,e,i=!1,a=!1){const o=new FI(n);let c;if(a)c=sS;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const h=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function sb(n,t,e,i,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ib(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ib(n,t,e,e==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,t){const e=yp(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),o=e.getOptions();if(_a(o,t??{}))return a;si(a,"already-initialized")}return e.initialize({options:t})}function qI(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ds);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function GI(n,t,e){const i=Go(n);bt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,o=rS(t),{host:c,port:h}=YI(t),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},_=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){bt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),bt(_a(m,i.config.emulator)&&_a(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ho(c)?(MT(`${o}//${c}${d}`),kT("Auth",!0)):KI()}function rS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function YI(n){const t=rS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:rb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:rb(c)}}}function rb(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function KI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return fs("not implemented")}_getIdTokenResponse(t){return fs("not implemented")}_linkToIdToken(t,e){return fs("not implemented")}_getReauthenticationResolver(t){return fs("not implemented")}}async function QI(n,t){return Er(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(n,t){return Lf(n,"POST","/v1/accounts:signInWithPassword",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,t){return Lf(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,t))}async function WI(n,t){return Lf(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Ap{constructor(t,e,i,a=null){super("password",i),this._email=t,this._password=e,this._tenantId=a}static _fromEmailAndPassword(t,e){return new Pc(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Pc(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sb(t,e,"signInWithPassword",XI);case"emailLink":return $I(t,{email:this._email,oobCode:this._password});default:si(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sb(t,i,"signUpPassword",QI);case"emailLink":return WI(t,{idToken:e,email:this._email,oobCode:this._password});default:si(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n,t){return Lf(n,"POST","/v1/accounts:signInWithIdp",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="http://localhost";class va extends Ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new va(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):si("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=e,o=vp(e,["providerId","signInMethod"]);if(!i||!a)return null;const c=new va(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Co(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Co(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Co(t,e)}buildRequest(){const t={requestUri:ZI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Xc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tC(n){const t=mc(pc(n)).link,e=t?mc(pc(t)).deep_link_id:null,i=mc(pc(n)).deep_link_id;return(i?mc(pc(i)).link:null)||i||e||t||n}class wp{constructor(t){var e,i,a,o,c,h;const d=mc(pc(t)),m=(e=d.apiKey)!==null&&e!==void 0?e:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,v=JI((a=d.mode)!==null&&a!==void 0?a:null);bt(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const e=tC(t);try{return new wp(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(t,e){return Pc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=wp.parseLink(e);return bt(i,"argument-error"),Pc._fromEmailAndCode(t,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends aS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Wc{constructor(){super("facebook.com")}static credential(t){return va._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $s.credential(t.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return va._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ws.credentialFromTaggedObject(t)}static credentialFromError(t){return Ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ws.credential(e,i)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Wc{constructor(){super("github.com")}static credential(t){return va._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Zs.credentialFromTaggedObject(t)}static credentialFromError(t){return Zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Zs.credential(t.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Wc{constructor(){super("twitter.com")}static credential(t,e){return va._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Js.credentialFromTaggedObject(t)}static credentialFromError(t){return Js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Js.credential(e,i)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const o=await ei._fromIdTokenResponse(t,i,a),c=ab(i);return new Po({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=ab(i);return new Po({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function ab(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends vs{constructor(t,e,i,a){var o;super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new gf(t,e,i,a)}}function oS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,o,t,i):o})}async function eC(n,t,e=!1){const i=await Nc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(n,t,e=!1){const{auth:i}=n;if(ti(i.app))return Promise.reject(ar(i));const a="reauthenticate";try{const o=await Nc(n,oS(i,a,t,n),e);bt(o.idToken,i,"internal-error");const c=Tp(o.idToken);bt(c,i,"internal-error");const{sub:h}=c;return bt(n.uid===h,i,"user-mismatch"),Po._forOperation(n,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&si(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(n,t,e=!1){if(ti(n.app))return Promise.reject(ar(n));const i="signIn",a=await oS(n,i,t),o=await Po._fromIdTokenResponse(n,i,a);return e||await n._updateCurrentUser(o.user),o}async function iC(n,t){return lS(Go(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(n){const t=Go(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function rC(n,t,e){return ti(n.app)?Promise.reject(ar(n)):iC(ln(n),Yo.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sC(n),i})}function aC(n,t,e,i){return ln(n).onIdTokenChanged(t,e,i)}function oC(n,t,e){return ln(n).beforeAuthStateChanged(t,e)}function lC(n,t,e,i){return ln(n).onAuthStateChanged(t,e,i)}const mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=1e3,uC=10;class uS extends cS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);CI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,uC):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}uS.type="LOCAL";const hC=uS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS extends cS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}hS.type="SESSION";const fS=hS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new zf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:o}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async m=>m(e.origin,o)),d=await fC(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=xp("",20);a.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function gC(n){Ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function mC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _C(){return dS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firebaseLocalStorageDb",yC=1,pf="firebaseLocalStorage",mS="fbase_key";class Zc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Bf(n,t){return n.transaction([pf],t?"readwrite":"readonly").objectStore(pf)}function vC(){const n=indexedDB.deleteDatabase(gS);return new Zc(n).toPromise()}function Gm(){const n=indexedDB.open(gS,yC);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(pf,{keyPath:mS})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(pf)?t(i):(i.close(),await vC(),t(await Gm()))})})}async function ob(n,t,e){const i=Bf(n,!0).put({[mS]:t,value:e});return new Zc(i).toPromise()}async function bC(n,t){const e=Bf(n,!1).get(t),i=await new Zc(e).toPromise();return i===void 0?null:i.value}function lb(n,t){const e=Bf(n,!0).delete(t);return new Zc(e).toPromise()}const EC=800,TC=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>TC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(_C()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await mC(),!this.activeServiceWorker)return;this.sender=new dC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||pC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Gm();return await ob(t,mf,"1"),await lb(t,mf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>ob(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>bC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>lb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const o=Bf(a,!1).getAll();return new Zc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:o}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const SC=pS;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n,t){return t?ds(t):(bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends Ap{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Co(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Co(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Co(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function wC(n){return lS(n.auth,new Rp(n),n.bypassAuthState)}function xC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),nC(e,new Rp(n),n.bypassAuthState)}async function RC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),eC(e,new Rp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,e,i,a,o=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return wC;case"linkViaPopup":case"linkViaRedirect":return RC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:si(this.auth,"internal-error")}}resolve(t){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new $c(2e3,1e4);class wo extends _S{constructor(t,e,i,a,o){super(t,e,a,o),this.provider=i,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const t=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,IC.get())};t()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="pendingRedirect",Wh=new Map;class DC extends _S{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Wh.get(this.auth._key());if(!t){try{const i=await OC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Wh.set(this.auth._key(),t)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OC(n,t){const e=NC(t),i=kC(n);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function MC(n,t){Wh.set(n._key(),t)}function kC(n){return ds(n._redirectPersistence)}function NC(n){return $h(CC,n.config.apiKey,n.name)}async function PC(n,t,e=!1){if(ti(n.app))return Promise.reject(ar(n));const i=Go(n),a=AC(i,t),c=await new DC(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=10*60*1e3;class LC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!UC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!yS(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(xi(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=VC&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(t))}saveEventToCache(t){this.cachedEventUids.add(cb(t)),this.lastProcessedEventTime=Date.now()}}function cb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function yS({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function UC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,t={}){return Er(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jC=/^https?/;async function FC(n){if(n.config.emulator)return;const{authorizedDomains:t}=await zC(n);for(const e of t)try{if(HC(e))return}catch{}si(n,"unauthorized-domain")}function HC(n){const t=Hm(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!jC.test(e))return!1;if(BC.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new $c(3e4,6e4);function ub(){const n=Ri().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function GC(n){return new Promise((t,e)=>{var i,a,o;function c(){ub(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ub(),e(xi(n,"network-request-failed"))},timeout:qC.get()})}if(!((a=(i=Ri().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((o=Ri().gapi)===null||o===void 0)&&o.load)c();else{const h=UI("iframefcb");return Ri()[h]=()=>{gapi.load?c():e(xi(n,"network-request-failed"))},iS(`${LI()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw Zh=null,t})}let Zh=null;function YC(n){return Zh=Zh||GC(n),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new $c(5e3,15e3),QC="__/auth/iframe",XC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZC(n){const t=n.config;bt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ep(t,XC):`https://${n.config.authDomain}/${QC}`,i={apiKey:t.apiKey,appName:n.name,v:qo},a=WC.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Xc(i).slice(1)}`}async function JC(n){const t=await YC(n),e=Ri().gapi;return bt(e,n,"internal-error"),t.open({where:document.body,url:ZC(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=xi(n,"network-request-failed"),h=Ri().setTimeout(()=>{o(c)},KC.get());function d(){Ri().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e2=500,n2=600,i2="_blank",s2="http://localhost";class hb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r2(n,t,e,i=e2,a=n2){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},t2),{width:i.toString(),height:a.toString(),top:o,left:c}),m=on().toLowerCase();e&&(h=$T(m)?i2:e),QT(m)&&(t=t||s2,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[A,I])=>`${T}${A}=${I},`,"");if(II(m)&&h!=="_self")return a2(t||"",h),new hb(null);const v=window.open(t||"",h,_);bt(v,n,"popup-blocked");try{v.focus()}catch{}return new hb(v)}function a2(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="__/auth/handler",l2="emulator/auth/handler",c2=encodeURIComponent("fac");async function fb(n,t,e,i,a,o){bt(n.config.authDomain,n,"auth-domain-config-required"),bt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:qo,eventId:a};if(t instanceof aS){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",$x(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(t instanceof Wc){const _=t.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${c2}=${encodeURIComponent(d)}`:"";return`${u2(n)}?${Xc(h).slice(1)}${m}`}function u2({config:n}){return n.emulator?Ep(n,l2):`https://${n.authDomain}/${o2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class h2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fS,this._completeRedirectFn=PC,this._overrideRedirectResult=MC}async _openPopup(t,e,i,a){var o;ps((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await fb(t,e,i,Hm(),a);return r2(t,c,xp())}async _openRedirect(t,e,i,a){await this._originValidation(t);const o=await fb(t,e,i,Hm(),a);return gC(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:o}=this.eventManagers[e];return a?Promise.resolve(a):(ps(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await JC(t),i=new LC(t);return e.register("authEvent",a=>(bt(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Em,{type:Em},a=>{var o;const c=(o=a?.[0])===null||o===void 0?void 0:o[Em];c!==void 0&&e(!!c),si(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=FC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return eS()||XT()||Sp()}}const f2=h2;var db="@firebase/auth",gb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m2(n){No(new ya("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nS(n)},m=new NI(i,a,o,d);return qI(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),No(new ya("auth-internal",t=>{const e=Go(t.getProvider("auth").getImmediate());return(i=>new d2(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(db,gb,g2(n)),rr(db,gb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=5*60,_2=OT("authIdTokenMaxAge")||p2;let mb=null;const y2=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>_2)return;const a=e?.token;mb!==a&&(mb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function v2(n=LT()){const t=yp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=HI(n,{popupRedirectResolver:f2,persistence:[SC,hC,fS]}),i=OT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=y2(o.toString());oC(e,c,()=>c(e.currentUser)),aC(e,h=>c(h))}}const a=CT("auth");return a&&GI(e,`http://${a}`),e}function b2(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}PI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=a=>{const o=xi("internal-error");o.customData=a,e(o)},i.type="text/javascript",i.charset="UTF-8",b2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m2("Browser");var E2="firebase",T2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(E2,T2,"app");var pb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,vS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,x){function R(){}R.prototype=x.prototype,C.D=x.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(N,P,L){for(var D=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)D[Wt-2]=arguments[Wt];return x.prototype[P].apply(N,D)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,x,R){R||(R=0);var N=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)N[P]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(P=0;16>P;++P)N[P]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=C.g[0],R=C.g[1],P=C.g[2];var L=C.g[3],D=x+(L^R&(P^L))+N[0]+3614090360&4294967295;x=R+(D<<7&4294967295|D>>>25),D=L+(P^x&(R^P))+N[1]+3905402710&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(R^L&(x^R))+N[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=R+(x^P&(L^x))+N[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(L^R&(P^L))+N[4]+4118548399&4294967295,x=R+(D<<7&4294967295|D>>>25),D=L+(P^x&(R^P))+N[5]+1200080426&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(R^L&(x^R))+N[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=R+(x^P&(L^x))+N[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(L^R&(P^L))+N[8]+1770035416&4294967295,x=R+(D<<7&4294967295|D>>>25),D=L+(P^x&(R^P))+N[9]+2336552879&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(R^L&(x^R))+N[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=R+(x^P&(L^x))+N[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(L^R&(P^L))+N[12]+1804603682&4294967295,x=R+(D<<7&4294967295|D>>>25),D=L+(P^x&(R^P))+N[13]+4254626195&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(R^L&(x^R))+N[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=R+(x^P&(L^x))+N[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(P^L&(R^P))+N[1]+4129170786&4294967295,x=R+(D<<5&4294967295|D>>>27),D=L+(R^P&(x^R))+N[6]+3225465664&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(L^x))+N[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=R+(L^x&(P^L))+N[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(R^P))+N[5]+3593408605&4294967295,x=R+(D<<5&4294967295|D>>>27),D=L+(R^P&(x^R))+N[10]+38016083&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(L^x))+N[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=R+(L^x&(P^L))+N[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(R^P))+N[9]+568446438&4294967295,x=R+(D<<5&4294967295|D>>>27),D=L+(R^P&(x^R))+N[14]+3275163606&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(L^x))+N[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=R+(L^x&(P^L))+N[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(R^P))+N[13]+2850285829&4294967295,x=R+(D<<5&4294967295|D>>>27),D=L+(R^P&(x^R))+N[2]+4243563512&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(L^x))+N[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=R+(L^x&(P^L))+N[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(R^P^L)+N[5]+4294588738&4294967295,x=R+(D<<4&4294967295|D>>>28),D=L+(x^R^P)+N[8]+2272392833&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^R)+N[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=R+(P^L^x)+N[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^L)+N[1]+2763975236&4294967295,x=R+(D<<4&4294967295|D>>>28),D=L+(x^R^P)+N[4]+1272893353&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^R)+N[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=R+(P^L^x)+N[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^L)+N[13]+681279174&4294967295,x=R+(D<<4&4294967295|D>>>28),D=L+(x^R^P)+N[0]+3936430074&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^R)+N[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=R+(P^L^x)+N[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^L)+N[9]+3654602809&4294967295,x=R+(D<<4&4294967295|D>>>28),D=L+(x^R^P)+N[12]+3873151461&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^R)+N[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=R+(P^L^x)+N[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(P^(R|~L))+N[0]+4096336452&4294967295,x=R+(D<<6&4294967295|D>>>26),D=L+(R^(x|~P))+N[7]+1126891415&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~R))+N[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=R+(L^(P|~x))+N[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~L))+N[12]+1700485571&4294967295,x=R+(D<<6&4294967295|D>>>26),D=L+(R^(x|~P))+N[3]+2399980690&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~R))+N[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=R+(L^(P|~x))+N[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~L))+N[8]+1873313359&4294967295,x=R+(D<<6&4294967295|D>>>26),D=L+(R^(x|~P))+N[15]+4264355552&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~R))+N[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=R+(L^(P|~x))+N[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~L))+N[4]+4149444226&4294967295,x=R+(D<<6&4294967295|D>>>26),D=L+(R^(x|~P))+N[11]+3174756917&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~R))+N[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=R+(L^(P|~x))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+L&4294967295}i.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var R=x-this.blockSize,N=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=R;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<x;)if(N[P++]=C.charCodeAt(L++),P==this.blockSize){a(this,N),P=0;break}}else for(;L<x;)if(N[P++]=C[L++],P==this.blockSize){a(this,N),P=0;break}}this.h=P,this.o+=x},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var R=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=R&255,R/=256;for(this.u(C),C=Array(16),x=R=0;4>x;++x)for(var N=0;32>N;N+=8)C[R++]=this.g[x]>>>N&255;return C};function o(C,x){var R=h;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=x(C)}function c(C,x){this.h=x;for(var R=[],N=!0,P=C.length-1;0<=P;P--){var L=C[P]|0;N&&L==x||(R[P]=L,N=!1)}this.g=R}var h={};function d(C){return-128<=C&&128>C?o(C,function(x){return new c([x|0],0>x?-1:0)}):new c([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return M(m(-C));for(var x=[],R=1,N=0;C>=R;N++)x[N]=C/R|0,R*=4294967296;return new c(x,0)}function _(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return M(_(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(x,8)),N=v,P=0;P<C.length;P+=8){var L=Math.min(8,C.length-P),D=parseInt(C.substring(P,P+L),x);8>L?(L=m(Math.pow(x,L)),N=N.j(L).add(m(D))):(N=N.j(R),N=N.add(m(D)))}return N}var v=d(0),T=d(1),A=d(16777216);n=c.prototype,n.m=function(){if(k(this))return-M(this).m();for(var C=0,x=1,R=0;R<this.g.length;R++){var N=this.i(R);C+=(0<=N?N:4294967296+N)*x,x*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(k(this))return"-"+M(this).toString(C);for(var x=m(Math.pow(C,6)),R=this,N="";;){var P=q(R,x).g;R=K(R,P.j(x));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=P,I(R))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function k(C){return C.h==-1}n.l=function(C){return C=K(this,C),k(C)?-1:I(C)?0:1};function M(C){for(var x=C.g.length,R=[],N=0;N<x;N++)R[N]=~C.g[N];return new c(R,~C.h).add(T)}n.abs=function(){return k(this)?M(this):this},n.add=function(C){for(var x=Math.max(this.g.length,C.g.length),R=[],N=0,P=0;P<=x;P++){var L=N+(this.i(P)&65535)+(C.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);N=D>>>16,L&=65535,D&=65535,R[P]=D<<16|L}return new c(R,R[R.length-1]&-2147483648?-1:0)};function K(C,x){return C.add(M(x))}n.j=function(C){if(I(this)||I(C))return v;if(k(this))return k(C)?M(this).j(M(C)):M(M(this).j(C));if(k(C))return M(this.j(M(C)));if(0>this.l(A)&&0>C.l(A))return m(this.m()*C.m());for(var x=this.g.length+C.g.length,R=[],N=0;N<2*x;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<C.g.length;P++){var L=this.i(N)>>>16,D=this.i(N)&65535,Wt=C.i(P)>>>16,At=C.i(P)&65535;R[2*N+2*P]+=D*At,G(R,2*N+2*P),R[2*N+2*P+1]+=L*At,G(R,2*N+2*P+1),R[2*N+2*P+1]+=D*Wt,G(R,2*N+2*P+1),R[2*N+2*P+2]+=L*Wt,G(R,2*N+2*P+2)}for(N=0;N<x;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=x;N<2*x;N++)R[N]=0;return new c(R,0)};function G(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function J(C,x){this.g=C,this.h=x}function q(C,x){if(I(x))throw Error("division by zero");if(I(C))return new J(v,v);if(k(C))return x=q(M(C),x),new J(M(x.g),M(x.h));if(k(x))return x=q(C,M(x)),new J(M(x.g),x.h);if(30<C.g.length){if(k(C)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var R=T,N=x;0>=N.l(C);)R=X(R),N=X(N);var P=st(R,1),L=st(N,1);for(N=st(N,2),R=st(R,2);!I(N);){var D=L.add(N);0>=D.l(C)&&(P=P.add(R),L=D),N=st(N,1),R=st(R,1)}return x=K(C,P.j(x)),new J(P,x)}for(P=v;0<=C.l(x);){for(R=Math.max(1,Math.floor(C.m()/x.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=m(R),D=L.j(x);k(D)||0<D.l(C);)R-=N,L=m(R),D=L.j(x);I(L)&&(L=T),P=P.add(L),C=K(C,D)}return new J(P,C)}n.A=function(C){return q(this,C).h},n.and=function(C){for(var x=Math.max(this.g.length,C.g.length),R=[],N=0;N<x;N++)R[N]=this.i(N)&C.i(N);return new c(R,this.h&C.h)},n.or=function(C){for(var x=Math.max(this.g.length,C.g.length),R=[],N=0;N<x;N++)R[N]=this.i(N)|C.i(N);return new c(R,this.h|C.h)},n.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),R=[],N=0;N<x;N++)R[N]=this.i(N)^C.i(N);return new c(R,this.h^C.h)};function X(C){for(var x=C.g.length+1,R=[],N=0;N<x;N++)R[N]=C.i(N)<<1|C.i(N-1)>>>31;return new c(R,C.h)}function st(C,x){var R=x>>5;x%=32;for(var N=C.g.length-R,P=[],L=0;L<N;L++)P[L]=0<x?C.i(L+R)>>>x|C.i(L+R+1)<<32-x:C.i(L+R);return new c(P,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,or=c}).apply(typeof pb<"u"?pb:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bS,_c,ES,Jh,Ym,TS,SS,AS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=e(this);function a(f,y){if(y)t:{var b=i;f=f.split(".");for(var w=0;w<f.length-1;w++){var B=f[w];if(!(B in b))break t;b=b[B]}f=f[f.length-1],w=b[f],y=y(w),y!=w&&y!=null&&t(b,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var b=0,w=!1,B={next:function(){if(!w&&b<f.length){var $=b++;return{value:y($,f[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(f){return f||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function v(f,y,b){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),f.apply(y,B)}}return function(){return f.apply(y,arguments)}}function T(f,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function A(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function I(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(w,B,$){for(var lt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)lt[Lt-2]=arguments[Lt];return y.prototype[B].apply(w,lt)}}function k(f){const y=f.length;if(0<y){const b=Array(y);for(let w=0;w<y;w++)b[w]=f[w];return b}return[]}function M(f,y){for(let b=1;b<arguments.length;b++){const w=arguments[b];if(d(w)){const B=f.length||0,$=w.length||0;f.length=B+$;for(let lt=0;lt<$;lt++)f[B+lt]=w[lt]}else f.push(w)}}class K{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function G(f){return/^[\s\xa0]*$/.test(f)}function J(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function q(f){return q[" "](f),f}q[" "]=function(){};var X=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function st(f,y,b){for(const w in f)y.call(b,f[w],w,f)}function C(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function x(f){const y={};for(const b in f)y[b]=f[b];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(f,y){let b,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(b in w)f[b]=w[b];for(let $=0;$<R.length;$++)b=R[$],Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}}function P(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function L(f){h.setTimeout(()=>{throw f},0)}function D(){var f=Nt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Wt{constructor(){this.h=this.g=null}add(y,b){const w=At.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var At=new K(()=>new Q,f=>f.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,gt=!1,Nt=new Wt,V=()=>{const f=h.Promise.resolve(void 0);ot=()=>{f.then(it)}};var it=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(b){L(b)}var y=At;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}gt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return f}();function wt(f,y){if(at.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(X){t:{try{q(y.nodeName);var B=!0;break t}catch{}B=!1}B||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:pt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&wt.aa.h.call(this)}}I(wt,at);var pt={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),re=0;function ri(f,y,b,w,B){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=B,this.key=++re,this.da=this.fa=!1}function bs(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Vi(f){this.src=f,this.g={},this.h=0}Vi.prototype.add=function(f,y,b,w,B){var $=f.toString();f=this.g[$],f||(f=this.g[$]=[],this.h++);var lt=wr(f,y,w,B);return-1<lt?(y=f[lt],b||(y.fa=!1)):(y=new ri(y,this.src,$,!!w,B),y.fa=b,f.push(y)),y};function Ar(f,y){var b=y.type;if(b in f.g){var w=f.g[b],B=Array.prototype.indexOf.call(w,y,void 0),$;($=0<=B)&&Array.prototype.splice.call(w,B,1),$&&(bs(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function wr(f,y,b,w){for(var B=0;B<f.length;++B){var $=f[B];if(!$.da&&$.listener==y&&$.capture==!!b&&$.ha==w)return B}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),tl={};function au(f,y,b,w,B){if(Array.isArray(y)){for(var $=0;$<y.length;$++)au(f,y[$],b,w,B);return null}return b=ou(b),f&&f[Ve]?f.K(y,b,m(w)?!!w.capture:!1,B):Dn(f,y,b,!1,w,B)}function Dn(f,y,b,w,B,$){if(!y)throw Error("Invalid event type");var lt=m(B)?!!B.capture:!!B,Lt=Ia(f);if(Lt||(f[xr]=Lt=new Vi(f)),b=Lt.add(y,b,w,lt,$),b.proxy)return b;if(w=cd(),b.proxy=w,w.src=f,w.listener=b,f.addEventListener)dt||(B=lt),B===void 0&&(B=!1),f.addEventListener(y.toString(),w,B);else if(f.attachEvent)f.attachEvent(Rr(y.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function cd(){function f(b){return y.call(f.src,f.listener,b)}const y=ud;return f}function el(f,y,b,w,B){if(Array.isArray(y))for(var $=0;$<y.length;$++)el(f,y[$],b,w,B);else w=m(w)?!!w.capture:!!w,b=ou(b),f&&f[Ve]?(f=f.i,y=String(y).toString(),y in f.g&&($=f.g[y],b=wr($,b,w,B),-1<b&&(bs($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete f.g[y],f.h--)))):f&&(f=Ia(f))&&(y=f.g[y.toString()],f=-1,y&&(f=wr(y,b,w,B)),(b=-1<f?y[f]:null)&&Ra(b))}function Ra(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Ve])Ar(y.i,f);else{var b=f.type,w=f.proxy;y.removeEventListener?y.removeEventListener(b,w,f.capture):y.detachEvent?y.detachEvent(Rr(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Ia(y))?(Ar(b,f),b.h==0&&(b.src=null,y[xr]=null)):bs(f)}}}function Rr(f){return f in tl?tl[f]:tl[f]="on"+f}function ud(f,y){if(f.da)f=!0;else{y=new wt(y,this);var b=f.listener,w=f.ha||f.src;f.fa&&Ra(f),f=b.call(w,y)}return f}function Ia(f){return f=f[xr],f instanceof Vi?f:null}var nl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(f){return typeof f=="function"?f:(f[nl]||(f[nl]=function(y){return f.handleEvent(y)}),f[nl])}function de(){ct.call(this),this.i=new Vi(this),this.M=this,this.F=null}I(de,ct),de.prototype[Ve]=!0,de.prototype.removeEventListener=function(f,y,b,w){el(this,f,y,b,w)};function Kt(f,y){var b,w=f.F;if(w)for(b=[];w;w=w.F)b.push(w);if(f=f.M,w=y.type||y,typeof y=="string")y=new at(y,f);else if(y instanceof at)y.target=y.target||f;else{var B=y;y=new at(w,f),N(y,B)}if(B=!0,b)for(var $=b.length-1;0<=$;$--){var lt=y.g=b[$];B=bn(lt,w,!0,y)&&B}if(lt=y.g=f,B=bn(lt,w,!0,y)&&B,B=bn(lt,w,!1,y)&&B,b)for($=0;$<b.length;$++)lt=y.g=b[$],B=bn(lt,w,!1,y)&&B}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],w=0;w<b.length;w++)bs(b[w]);delete f.g[y],f.h--}}this.F=null},de.prototype.K=function(f,y,b,w){return this.i.add(String(f),y,!1,b,w)},de.prototype.L=function(f,y,b,w){return this.i.add(String(f),y,!0,b,w)};function bn(f,y,b,w){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,$=0;$<y.length;++$){var lt=y[$];if(lt&&!lt.da&&lt.capture==b){var Lt=lt.listener,Ie=lt.ha||lt.src;lt.fa&&Ar(f.i,lt),B=Lt.call(Ie,w)!==!1&&B}}return B&&!w.defaultPrevented}function We(f,y,b){if(typeof f=="function")b&&(f=T(f,b));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function lu(f){f.g=We(()=>{f.g=null,f.i&&(f.i=!1,lu(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class hd extends ct{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(f){ct.call(this),this.h=f,this.g={}}I(Ir,ct);var Cr=[];function Dr(f){st(f.g,function(y,b){this.g.hasOwnProperty(b)&&Ra(y)},f),f.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),Dr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=h.JSON.stringify,Ca=h.JSON.parse,Or=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function il(){}il.prototype.h=null;function sl(f){return f.h||(f.h=f.i())}function rl(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ui(){at.call(this,"d")}I(Ui,at);function al(){at.call(this,"c")}I(al,at);var ai={},ol=null;function Es(){return ol=ol||new de}ai.La="serverreachability";function Da(f){at.call(this,ai.La,f)}I(Da,at);function Ts(f){const y=Es();Kt(y,new Da(y))}ai.STAT_EVENT="statevent";function cu(f,y){at.call(this,ai.STAT_EVENT,f),this.stat=y}I(cu,at);function ce(f){const y=Es();Kt(y,new cu(y,f))}ai.Ma="timingevent";function Re(f,y){at.call(this,ai.Ma,f),this.size=y}I(Re,at);function Ee(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function ll(f,y,b,w,B,$){f.info(function(){if(f.g)if($)for(var lt="",Lt=$.split("&"),Ie=0;Ie<Lt.length;Ie++){var Ut=Lt[Ie].split("=");if(1<Ut.length){var Ue=Ut[0];Ut=Ut[1];var Ce=Ue.split("_");lt=2<=Ce.length&&Ce[1]=="type"?lt+(Ue+"="+Ut+"&"):lt+(Ue+"=redacted&")}}else lt=null;else lt=$;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+b+`
`+lt})}function fd(f,y,b,w,B,$,lt){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+b+`
`+$+" "+lt})}function Ss(f,y,b,w){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Mr(f,b)+(w?" "+w:"")})}function uu(f,y){f.info(function(){return"TIMEOUT: "+y})}On.prototype.info=function(){};function Mr(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var w=b[f];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var lt=1;lt<B.length;lt++)B[lt]=""}}}}return Qn(b)}catch{return y}}var As={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oi;function li(){}I(li,il),li.prototype.g=function(){return new XMLHttpRequest},li.prototype.i=function(){return{}},oi=new li;function cn(f,y,b,w){this.j=f,this.i=y,this.l=b,this.R=w||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var cl={},Oa={};function Xn(f,y,b){f.L=1,f.v=Lr(En(y)),f.m=b,f.P=!0,Bi(f,null)}function Bi(f,y){f.F=Date.now(),kr(f),f.A=En(f.v);var b=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),ml(b.i,"t",w),f.C=0,b=f.j.J,f.h=new pe,f.g=xu(f.j,b?y:null,!f.m),0<f.O&&(f.M=new hd(T(f.Y,f,f.g),f.O)),y=f.U,b=f.g,w=f.ca;var B="readystatechange";Array.isArray(B)||(B&&(Cr[0]=B.toString()),B=Cr);for(var $=0;$<B.length;$++){var lt=au(b,B[$],w||y.handleEvent,!1,y.h||y);if(!lt)break;y.g[lt.key]=lt}y=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Ts(),ll(f.i,f.u,f.A,f.l,f.R,f.m)}cn.prototype.ca=function(f){f=f.target;const y=this.M;y&&Pn(f)==3?y.j():this.Y(f)},cn.prototype.Y=function(f){try{if(f==this.g)t:{const Ce=Pn(this.g);var y=this.g.Ba();const Qi=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||Ce!=4||y==7||(y==8||0>=Qi?Ts(3):Ts(2)),ws(this);var b=this.g.Z();this.X=b;e:if(hu(this)){var w=yu(this.g);f="";var B=w.length,$=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ci(this);var lt="";break e}this.h.i=new h.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,f+=this.h.i.decode(w[y],{stream:!($&&y==B-1)});w.length=0,this.h.g+=f,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=b==200,fd(this.i,this.u,this.A,this.l,this.R,Ce,b),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ie=this.g;if((Lt=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Lt)){var Ut=Lt;break e}}Ut=null}if(b=Ut)Ss(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,b);else{this.o=!1,this.s=3,ce(12),He(this),ci(this);break t}}if(this.P){b=!0;let qe;for(;!this.J&&this.C<lt.length;)if(qe=fu(this,lt),qe==Oa){Ce==4&&(this.s=4,ce(14),b=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==cl){this.s=4,ce(15),Ss(this.i,this.l,lt,"[Invalid Chunk]"),b=!1;break}else Ss(this.i,this.l,qe,null),Nr(this,qe);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||lt.length!=0||this.h.h||(this.s=1,ce(16),b=!1),this.o=this.o&&b,!b)Ss(this.i,this.l,lt,"[Invalid Chunked Response]"),He(this),ci(this);else if(0<lt.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),Gr(Ue),Ue.M=!0,ce(11))}}else Ss(this.i,this.l,lt,null),Nr(this,lt);Ce==4&&He(this),this.o&&!this.J&&(Ce==4?Su(this.j,this):(this.o=!1,kr(this)))}else _d(this.g),b==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),He(this),ci(this)}}}catch{}finally{}};function hu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function fu(f,y){var b=f.C,w=y.indexOf(`
`,b);return w==-1?Oa:(b=Number(y.substring(b,w)),isNaN(b)?cl:(w+=1,w+b>y.length?Oa:(y=y.slice(w,w+b),f.C=w+b,y)))}cn.prototype.cancel=function(){this.J=!0,He(this)};function kr(f){f.S=Date.now()+f.I,du(f,f.I)}function du(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ee(T(f.ba,f),y)}function ws(f){f.B&&(h.clearTimeout(f.B),f.B=null)}cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(uu(this.i,this.A),this.L!=2&&(Ts(),ce(17)),He(this),this.s=2,ci(this)):du(this,this.S-f)};function ci(f){f.j.G==0||f.J||Su(f.j,f)}function He(f){ws(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Dr(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Nr(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||ul(b.h,f))){if(!f.K&&ul(b.h,f)&&b.G==3){try{var w=b.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){t:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Ha(b),ja(b);else break t;bl(b),ce(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ee(T(b.Za,b),6e3));if(1>=ka(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ki(b,11)}else if((f.K||b.g==f)&&Ha(b),!G(y))for(B=b.Da.g.parse(y),y=0;y<B.length;y++){let Ut=B[y];if(b.T=Ut[0],Ut=Ut[1],b.G==2)if(Ut[0]=="c"){b.K=Ut[1],b.ia=Ut[2];const Ue=Ut[3];Ue!=null&&(b.la=Ue,b.j.info("VER="+b.la));const Ce=Ut[4];Ce!=null&&(b.Aa=Ce,b.j.info("SVER="+b.Aa));const Qi=Ut[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(w=1.5*Qi,b.L=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const qe=f.g;if(qe){const pi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var $=w.h;$.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Na($,$.h),$.h=null))}if(w.D){const Tl=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(w.ya=Tl,Zt(w.I,w.D,Tl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),w=b;var lt=f;if(w.qa=wu(w,w.J?w.ia:null,w.W),lt.K){un(w.h,lt);var Lt=lt,Ie=w.L;Ie&&(Lt.I=Ie),Lt.B&&(ws(Lt),kr(Lt)),w.g=lt}else Eu(w);0<b.i.length&&Fa(b)}else Ut[0]!="stop"&&Ut[0]!="close"||Ki(b,7);else b.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ki(b,7):yl(b):Ut[0]!="noop"&&b.l&&b.l.ta(Ut),b.v=0)}}Ts(4)}catch{}}var gu=class{constructor(f,y){this.g=f,this.map=y}};function ji(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ka(f){return f.h?1:f.g?f.g.size:0}function ul(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function Na(f,y){f.g?f.g.add(y):f.h=y}function un(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}ji.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function hl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return k(f.i)}function dd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],b=f.length,w=0;w<b;w++)y.push(f[w]);return y}y=[],b=0;for(w in f)y[b++]=f[w];return y}function Pa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const w in f)y[b++]=w;return y}}}function fl(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=Pa(f),w=dd(f),B=w.length,$=0;$<B;$++)y.call(void 0,w[$],b&&b[$],f)}var Pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var w=f[b].indexOf("="),B=null;if(0<=w){var $=f[b].substring(0,w);B=f[b].substring(w+1)}else $=f[b];y($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Te(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Te){this.h=f.h,Vr(this,f.j),this.o=f.o,this.g=f.g,xs(this,f.s),this.l=f.l;var y=f.i,b=new Hi;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Fi(this,b),this.m=f.m}else f&&(y=String(f).match(Pr))?(this.h=!1,Vr(this,y[1]||"",!0),this.o=Mn(y[2]||""),this.g=Mn(y[3]||"",!0),xs(this,y[4]),this.l=Mn(y[5]||"",!0),Fi(this,y[6]||"",!0),this.m=Mn(y[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}Te.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Ur(y,dl,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Ur(y,dl,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Ur(b,b.charAt(0)=="/"?md:gl,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Ur(b,Va)),f.join("")};function En(f){return new Te(f)}function Vr(f,y,b){f.j=b?Mn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function xs(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Fi(f,y,b){y instanceof Hi?(f.i=y,pu(f.i,f.h)):(b||(y=Ur(y,pd)),f.i=new Hi(y,f.h))}function Zt(f,y,b){f.i.set(y,b)}function Lr(f){return Zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Mn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ur(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,mu),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function mu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var dl=/[#\/\?@]/g,gl=/[#\?:]/g,md=/[#\?]/g,pd=/[#\?@]/g,Va=/#/g;function Hi(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function kn(f){f.g||(f.g=new Map,f.h=0,f.i&&gd(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Hi.prototype,n.add=function(f,y){kn(this),this.i=null,f=ui(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function qi(f,y){kn(f),y=ui(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Gi(f,y){return kn(f),y=ui(f,y),f.g.has(y)}n.forEach=function(f,y){kn(this),this.g.forEach(function(b,w){b.forEach(function(B){f.call(y,B,w,this)},this)},this)},n.na=function(){kn(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let w=0;w<y.length;w++){const B=f[w];for(let $=0;$<B.length;$++)b.push(y[w])}return b},n.V=function(f){kn(this);let y=[];if(typeof f=="string")Gi(this,f)&&(y=y.concat(this.g.get(ui(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return kn(this),this.i=null,f=ui(this,f),Gi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function ml(f,y,b){qi(f,y),0<b.length&&(f.i=null,f.g.set(ui(f,y),k(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var w=y[b];const $=encodeURIComponent(String(w)),lt=this.V(w);for(w=0;w<lt.length;w++){var B=$;lt[w]!==""&&(B+="="+encodeURIComponent(String(lt[w]))),f.push(B)}}return this.i=f.join("&")};function ui(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function pu(f,y){y&&!f.j&&(kn(f),f.i=null,f.g.forEach(function(b,w){var B=w.toLowerCase();w!=B&&(qi(this,w),ml(this,B,b))},f)),f.j=y}function zr(f,y){const b=new On;if(h.Image){const w=new Image;w.onload=A(Nn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=A(Nn,b,"TestLoadImage: error",!1,y,w),w.onabort=A(Nn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=A(Nn,b,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else y(!1)}function $n(f,y){const b=new On,w=new AbortController,B=setTimeout(()=>{w.abort(),Nn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:w.signal}).then($=>{clearTimeout(B),$.ok?Nn(b,"TestPingServer: ok",!0,y):Nn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Nn(b,"TestPingServer: error",!1,y)})}function Nn(f,y,b,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(b)}catch{}}function Br(){this.g=new Or}function hi(f,y,b){const w=b||"";try{fl(f,function(B,$){let lt=B;m(B)&&(lt=Qn(B)),y.push(w+$+"="+encodeURIComponent(lt))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function Rs(f){this.l=f.Ub||null,this.j=f.eb||!1}I(Rs,il),Rs.prototype.g=function(){return new Yi(this.l,this.j)},Rs.prototype.i=function(f){return function(){return f}}({});function Yi(f,y){de.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Yi,de),n=Yi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,di(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?fi(this):di(this),this.readyState==3&&pl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,fi(this))},n.Qa=function(f){this.g&&(this.response=f,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,di(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function di(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _l(f){let y="";return st(f,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function Le(f,y,b){t:{for(w in b){var w=!1;break t}w=!0}w||(b=_l(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Zt(f,y,b))}function Gt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Gt,de);var La=/^https?$/i,jr=["POST","PUT"];n=Gt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oi.g(),this.v=this.o?sl(this.o):sl(oi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch($){_u(this,$);return}if(f=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)b.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())b.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),B=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(jr,y,void 0))||w||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,lt]of b)this.g.setRequestHeader($,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fr(this),this.u=!0,this.g.send(f),this.u=!1}catch($){_u(this,$)}};function _u(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Ua(f),gi(f)}function Ua(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Kt(this,"complete"),Kt(this,"abort"),gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),Gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},n.bb=function(){za(this)};function za(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Pn(f)!=4||f.Z()!=2)){if(f.u&&Pn(f)==4)We(f.Ea,0,f);else if(Kt(f,"readystatechange"),Pn(f)==4){f.h=!1;try{const lt=f.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var b;if(!(b=y)){var w;if(w=lt===0){var B=String(f.D).match(Pr)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),w=!La.test(B?B.toLowerCase():"")}b=w}if(b)Kt(f,"complete"),Kt(f,"success");else{f.m=6;try{var $=2<Pn(f)?f.g.statusText:""}catch{$=""}f.l=$+" ["+f.Z()+"]",Ua(f)}}finally{gi(f)}}}}function gi(f,y){if(f.g){Fr(f);const b=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Kt(f,"ready");try{b.onreadystatechange=w}catch{}}}function Fr(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Pn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ca(y)}};function yu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function _d(f){const y={};f=(f.g&&2<=Pn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(G(f[w]))continue;var b=P(f[w]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=y[B]||[];y[B]=$,$.push(b)}C(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function Ba(f){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,f),this.cb=Hr("retryDelaySeedMs",1e4,f),this.Wa=Hr("forwardChannelMaxRetries",2,f),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ji(f&&f.concurrentRequestLimit),this.Da=new Br,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ba.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,w){ce(0),this.W=f,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.I=wu(this,null,this.W),Fa(this)};function yl(f){if(vu(f),f.G==3){var y=f.U++,b=En(f.I);if(Zt(b,"SID",f.K),Zt(b,"RID",y),Zt(b,"TYPE","terminate"),qr(f,b),y=new cn(f,f.j,y),y.L=2,y.v=Lr(En(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=xu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),kr(y)}Au(f)}function ja(f){f.g&&(Gr(f),f.g.cancel(),f.g=null)}function vu(f){ja(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ha(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Fa(f){if(!Ma(f.h)&&!f.s){f.s=!0;var y=f.Ga;ot||V(),gt||(ot(),gt=!0),Nt.add(y,f),f.B=0}}function yd(f,y){return ka(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ee(T(f.Ga,f,y),El(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const B=new cn(this,this.j,f);let $=this.o;if(this.S&&($?($=x($),N($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)t:{for(var y=0,b=0;b<this.i.length;b++){e:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=b;break t}if(y===4096||b===this.i.length-1){y=b+1;break t}}y=1e3}else y=1e3;y=bu(this,B,y),b=En(this.I),Zt(b,"RID",f),Zt(b,"CVER",22),this.D&&Zt(b,"X-HTTP-Session-Id",this.D),qr(this,b),$&&(this.O?y="headers="+encodeURIComponent(String(_l($)))+"&"+y:this.m&&Le(b,this.m,$)),Na(this.h,B),this.Ua&&Zt(b,"TYPE","init"),this.P?(Zt(b,"$req",y),Zt(b,"SID","null"),B.T=!0,Xn(B,b,null)):Xn(B,b,y),this.G=2}}else this.G==3&&(f?vl(this,f):this.i.length==0||Ma(this.h)||vl(this))};function vl(f,y){var b;y?b=y.l:b=f.U++;const w=En(f.I);Zt(w,"SID",f.K),Zt(w,"RID",b),Zt(w,"AID",f.T),qr(f,w),f.m&&f.o&&Le(w,f.m,f.o),b=new cn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=bu(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Na(f.h,b),Xn(b,w,y)}function qr(f,y){f.H&&st(f.H,function(b,w){Zt(y,w,b)}),f.l&&fl({},function(b,w){Zt(y,w,b)})}function bu(f,y,b){b=Math.min(f.i.length,b);var w=f.l?T(f.l.Na,f.l,f):null;t:{var B=f.i;let $=-1;for(;;){const lt=["count="+b];$==-1?0<b?($=B[0].g,lt.push("ofs="+$)):$=0:lt.push("ofs="+$);let Lt=!0;for(let Ie=0;Ie<b;Ie++){let Ut=B[Ie].g;const Ue=B[Ie].map;if(Ut-=$,0>Ut)$=Math.max(0,B[Ie].g-100),Lt=!1;else try{hi(Ue,lt,"req"+Ut+"_")}catch{w&&w(Ue)}}if(Lt){w=lt.join("&");break t}}}return f=f.i.splice(0,b),y.D=f,w}function Eu(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;ot||V(),gt||(ot(),gt=!0),Nt.add(y,f),f.v=0}}function bl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ee(T(f.Fa,f),El(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ee(T(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ja(this),Tu(this))};function Gr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Tu(f){f.g=new cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=En(f.qa);Zt(y,"RID","rpc"),Zt(y,"SID",f.K),Zt(y,"AID",f.T),Zt(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Zt(y,"TO",f.ja),Zt(y,"TYPE","xmlhttp"),qr(f,y),f.m&&f.o&&Le(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Lr(En(y)),b.m=null,b.P=!0,Bi(b,f)}n.Za=function(){this.C!=null&&(this.C=null,ja(this),bl(this),ce(19))};function Ha(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Su(f,y){var b=null;if(f.g==y){Ha(f),Gr(f),f.g=null;var w=2}else if(ul(f.h,y))b=y.D,un(f.h,y),w=1;else return;if(f.G!=0){if(y.o)if(w==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var B=f.B;w=Es(),Kt(w,new Re(w,b)),Fa(f)}else Eu(f);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&yd(f,y)||w==2&&bl(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),B){case 1:Ki(f,5);break;case 4:Ki(f,10);break;case 3:Ki(f,6);break;default:Ki(f,2)}}}function El(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function Ki(f,y){if(f.j.info("Error code "+y),y==2){var b=T(f.fb,f),w=f.Xa;const B=!w;w=new Te(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vr(w,"https"),Lr(w),B?zr(w.toString(),b):$n(w.toString(),b)}else ce(2);f.G=0,f.l&&f.l.sa(y),Au(f),vu(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Au(f){if(f.G=0,f.ka=[],f.l){const y=hl(f.h);(y.length!=0||f.i.length!=0)&&(M(f.ka,y),M(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function wu(f,y,b){var w=b instanceof Te?En(b):new Te(b);if(w.g!="")y&&(w.g=y+"."+w.g),xs(w,w.s);else{var B=h.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var $=new Te(null);w&&Vr($,w),y&&($.g=y),B&&xs($,B),b&&($.l=b),w=$}return b=f.D,y=f.ya,b&&y&&Zt(w,b,y),Zt(w,"VER",f.la),qr(f,w),w}function xu(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Gt(new Rs({eb:b})):new Gt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}n=Ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qa(){}qa.prototype.g=function(f,y){return new hn(f,y)};function hn(f,y){de.call(this),this.g=new Ba(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!G(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!G(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new mi(this)}I(hn,de),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){yl(this.g)},hn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=Qn(f),f=b);y.i.push(new gu(y.Ya++,f)),y.G==3&&Fa(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,hn.aa.N.call(this)};function Iu(f){Ui.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){t:{for(const b in y){f=b;break t}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}I(Iu,Ui);function Cu(){al.call(this),this.status=1}I(Cu,al);function mi(f){this.g=f}I(mi,Ru),mi.prototype.ua=function(){Kt(this.g,"a")},mi.prototype.ta=function(f){Kt(this.g,new Iu(f))},mi.prototype.sa=function(f){Kt(this.g,new Cu)},mi.prototype.ra=function(){Kt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,AS=function(){return new qa},SS=function(){return Es()},TS=ai,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Jh=As,zi.COMPLETE="complete",ES=zi,rl.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",de.prototype.listen=de.prototype.K,_c=rl,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,bS=Gt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const _b="@firebase/firestore",yb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new pp("@firebase/firestore");function Eo(){return ba.logLevel}function ut(n,...t){if(ba.logLevel<=Pt.DEBUG){const e=t.map(Ip);ba.debug(`Firestore (${Ko}): ${n}`,...e)}}function _s(n,...t){if(ba.logLevel<=Pt.ERROR){const e=t.map(Ip);ba.error(`Firestore (${Ko}): ${n}`,...e)}}function fr(n,...t){if(ba.logLevel<=Pt.WARN){const e=t.map(Ip);ba.warn(`Firestore (${Ko}): ${n}`,...e)}}function Ip(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,wS(n,i,e)}function wS(n,t,e){let i=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw _s(i),new Error(i)}function Yt(n,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,n||wS(t,a,i)}function xt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends vs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class S2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(nn.UNAUTHENTICATED))}shutdown(){}}class A2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class w2{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0,42304);let i=this.i;const a=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gs,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await a(this.currentUser)})},h=d=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gs)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string",31837,{l:i}),new xS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class x2{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R2{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0,3512);const i=o=>{o.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ut("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const a=o=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Yt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new vb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=C2(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<e&&(i+=t.charAt(a[o]%62))}return i}}function Dt(n,t){return n<t?-1:n>t?1:0}function Km(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),a=t.codePointAt(e);if(i!==a){if(i<128&&a<128)return Dt(i,a);{const o=RS(),c=D2(o.encode(bb(n,e)),o.encode(bb(t,e)));return c!==0?c:Dt(i,a)}}e+=i>65535?2:1}return Dt(n.length,t.length)}function bb(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function D2(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Dt(n[e],t[e]);return Dt(n.length,t.length)}function Vo(n,t,e){return n.length===t.length&&n.every((i,a)=>e(i,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="__name__";class wi{constructor(t,e,i){e===void 0?e=0:e>t.length&&Et(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Et(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return wi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof wi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const o=wi.compareSegments(t.get(a),e.get(a));if(o!==0)return o}return Dt(t.length,e.length)}static compareSegments(t,e){const i=wi.isNumericId(t),a=wi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?wi.extractNumericId(t).compare(wi.extractNumericId(e)):Km(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return or.fromString(t.substring(4,t.length-2))}}class le extends wi{construct(t,e,i){return new le(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ft(rt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new le(e)}static emptyPath(){return new le([])}}const O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends wi{construct(t,e,i){return new Xe(t,e,i)}static isValidIdentifier(t){return O2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Eb}static keyField(){return new Xe([Eb])}static fromServerFormat(t){const e=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ft(rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new ft(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ft(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(o(),a++)}if(o(),c)throw new ft(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(e)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(le.fromString(t))}static fromName(t){return new _t(le.fromString(t).popFirst(5))}static empty(){return new _t(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&le.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return le.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new le(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n,t,e){if(!e)throw new ft(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function M2(n,t,e,i){if(t===!0&&i===!0)throw new ft(rt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Tb(n){if(!_t.isDocumentKey(n))throw new ft(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sb(n){if(_t.isDocumentKey(n))throw new ft(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Dp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function dr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ft(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Dp(n);throw new ft(rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,t){const e={typeString:n};return t&&(e.value=t),e}function Jc(n,t){if(!CS(n))throw new ft(rt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ft(rt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=-62135596800,wb=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*wb);return new ie(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ft(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ft(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Ab)throw new ft(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Jc(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ab;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:xe("string",ie._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new ie(0,0))}static max(){return new St(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=-1;function k2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=St.fromTimestamp(i===1e9?new ie(e+1,0):new ie(e,i));return new gr(a,_t.empty(),t)}function N2(n){return new gr(n.readTime,n.key,Vc)}class gr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new gr(St.min(),_t.empty(),Vc)}static max(){return new gr(St.max(),_t.empty(),Vc)}}function P2(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=_t.comparator(n.documentKey,t.documentKey),e!==0?e:Dt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==V2)throw n;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,i)=>{e(t)})}static reject(t){return new nt((e,i)=>{i(t)})}static waitFor(t){return new nt((e,i)=>{let a=0,o=0,c=!1;t.forEach(h=>{++a,h.next(()=>{++o,c&&o===a&&e()},d=>i(d))}),c=!0,o===a&&e()})}static or(t){let e=nt.resolve(!1);for(const i of t)e=e.next(a=>a?nt.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,o)=>{i.push(e.call(this,a,o))}),this.waitFor(i)}static mapArray(t,e){return new nt((i,a)=>{const o=t.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(_=>{c[m]=_,++h,h===o&&i(c)},_=>a(_))}})}static doWhile(t,e){return new nt((i,a)=>{const o=()=>{t()===!0?e().next(()=>{o()},a):i()};o()})}}function U2(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Xo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}jf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function Ff(n){return n==null}function _f(n){return n===0&&1/n==-1/0}function z2(n){return typeof n=="number"&&Number.isInteger(n)&&!_f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="";function B2(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xb(t)),t=j2(n.get(e),t);return xb(t)}function j2(n,t){let e=t;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":e+="";break;case DS:e+="";break;default:e+=o}}return e}function xb(n){return n+DS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Tr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function OS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||Qe.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mh(this.root,t,this.comparator,!0)}}class Mh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,e,i,a,o){this.key=t,this.value=e,this.color=i??Qe.RED,this.left=a??Qe.EMPTY,this.right=o??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,o){return new Qe(t??this.key,e??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const o=i(t,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(t,e,i),null):o===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Qe.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,e,i,a,o){return this}insert(t,e,i){return new Qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ib(this.data.getIterator())}getIteratorFrom(t){return new Ib(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class Ib{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new Cn([])}unionWith(t){let e=new Pe(Xe.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Cn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Vo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new MS("Invalid base64 string: "+o):o}}(t);return new $e(e)}static fromUint8Array(t){const e=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(t);return new $e(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(Yt(!!n,39018),typeof n=="string"){let t=0;const e=F2.exec(n);if(Yt(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pr(n){return typeof n=="string"?$e.fromBase64String(n):$e.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="server_timestamp",NS="__type__",PS="__previous_value__",VS="__local_write_time__";function Mp(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[NS])===null||e===void 0?void 0:e.stringValue)===kS}function Hf(n){const t=n.mapValue.fields[PS];return Mp(t)?Hf(t):t}function Lc(n){const t=mr(n.mapValue.fields[VS].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,e,i,a,o,c,h,d,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=_}}const yf="(default)";class Uc{constructor(t,e){this.projectId=t,this.database=e||yf}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===yf}isEqual(t){return t instanceof Uc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="__type__",q2="__max__",kh={mapValue:{}},US="__vector__",vf="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:Y2(n)?9007199254740991:G2(n)?10:11:Et(28295,{value:n})}function Ni(n,t){if(n===t)return!0;const e=_r(n);if(e!==_r(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Lc(n).isEqual(Lc(t));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=mr(a.timestampValue),h=mr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(a,o){return pr(a.bytesValue).isEqual(pr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(a,o){return ve(a.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(a.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return ve(a.integerValue)===ve(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=ve(a.doubleValue),h=ve(o.doubleValue);return c===h?_f(c)===_f(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return Vo(n.arrayValue.values||[],t.arrayValue.values||[],Ni);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Rb(c)!==Rb(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Ni(c[d],h[d])))return!1;return!0}(n,t);default:return Et(52216,{left:n})}}function zc(n,t){return(n.values||[]).find(e=>Ni(e,t))!==void 0}function Lo(n,t){if(n===t)return 0;const e=_r(n),i=_r(t);if(e!==i)return Dt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),d=ve(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Cb(n.timestampValue,t.timestampValue);case 4:return Cb(Lc(n),Lc(t));case 5:return Km(n.stringValue,t.stringValue);case 6:return function(o,c){const h=pr(o),d=pr(c);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Dt(h[m],d[m]);if(_!==0)return _}return Dt(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Dt(ve(o.latitude),ve(c.latitude));return h!==0?h:Dt(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Db(n.arrayValue,t.arrayValue);case 10:return function(o,c){var h,d,m,_;const v=o.fields||{},T=c.fields||{},A=(h=v[vf])===null||h===void 0?void 0:h.arrayValue,I=(d=T[vf])===null||d===void 0?void 0:d.arrayValue,k=Dt(((m=A?.values)===null||m===void 0?void 0:m.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return k!==0?k:Db(A,I)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===kh.mapValue&&c===kh.mapValue)return 0;if(o===kh.mapValue)return 1;if(c===kh.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=Km(d[v],_[v]);if(T!==0)return T;const A=Lo(h[d[v]],m[_[v]]);if(A!==0)return A}return Dt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw Et(23264,{le:e})}}function Cb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Dt(n,t);const e=mr(n),i=mr(t),a=Dt(e.seconds,i.seconds);return a!==0?a:Dt(e.nanos,i.nanos)}function Db(n,t){const e=n.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const o=Lo(e[a],i[a]);if(o)return o}return Dt(e.length,i.length)}function Uo(n){return Qm(n)}function Qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=mr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return pr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return _t.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",a=!0;for(const o of e.values||[])a?a=!1:i+=",",i+=Qm(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${Qm(e.fields[c])}`;return a+"}"}(n.mapValue):Et(61005,{value:n})}function tf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hf(n);return t?16+tf(t):16;case 5:return 2*n.stringValue.length;case 6:return pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+tf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Tr(i.fields,(o,c)=>{a+=o.length+tf(c)}),a}(n.mapValue);default:throw Et(13486,{value:n})}}function Xm(n){return!!n&&"integerValue"in n}function kp(n){return!!n&&"arrayValue"in n}function Ob(n){return!!n&&"nullValue"in n}function Mb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ef(n){return!!n&&"mapValue"in n}function G2(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[LS])===null||e===void 0?void 0:e.stringValue)===US}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Tr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=xc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=xc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Y2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!ef(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=xc(e)}setAll(t){let e=Xe.emptyPath(),i={},a=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,a),i={},a=[],e=h.popLast()}c?i[h.lastSegment()]=xc(c):a.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,a)}delete(t){const e=this.field(t.popLast());ef(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ni(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){Tr(e,(a,o)=>t[a]=o);for(const a of i)delete t[a]}clone(){return new yn(xc(this.value))}}function zS(n){const t=[];return Tr(n.fields,(e,i)=>{const a=new Xe([e]);if(ef(i)){const o=zS(i.mapValue).fields;if(o.length===0)t.push(a);else for(const c of o)t.push(a.child(c))}else t.push(a)}),new Cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,e,i,a,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new sn(t,0,St.min(),St.min(),St.min(),yn.empty(),0)}static newFoundDocument(t,e,i,a){return new sn(t,1,e,St.min(),i,a,0)}static newNoDocument(t,e){return new sn(t,2,e,St.min(),St.min(),yn.empty(),0)}static newUnknownDocument(t,e){return new sn(t,3,e,St.min(),St.min(),yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,e){this.position=t,this.inclusive=e}}function kb(n,t,e){let i=0;for(let a=0;a<n.position.length;a++){const o=t[a],c=n.position[a];if(o.field.isKeyField()?i=_t.comparator(_t.fromName(c.referenceValue),e.key):i=Lo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Nb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ni(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e="asc"){this.field=t,this.dir=e}}function K2(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{}class Me extends BS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new X2(t,e,i):e==="array-contains"?new Z2(t,i):e==="in"?new J2(t,i):e==="not-in"?new tD(t,i):e==="array-contains-any"?new eD(t,i):new Me(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new $2(t,i):new W2(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Lo(e,this.value)):e!==null&&_r(this.value)===_r(e)&&this.matchesComparison(Lo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends BS{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Pi(t,e)}matches(t){return jS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function jS(n){return n.op==="and"}function FS(n){return Q2(n)&&jS(n)}function Q2(n){for(const t of n.filters)if(t instanceof Pi)return!1;return!0}function $m(n){if(n instanceof Me)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(FS(n))return n.filters.map(t=>$m(t)).join(",");{const t=n.filters.map(e=>$m(e)).join(",");return`${n.op}(${t})`}}function HS(n,t){return n instanceof Me?function(i,a){return a instanceof Me&&i.op===a.op&&i.field.isEqual(a.field)&&Ni(i.value,a.value)}(n,t):n instanceof Pi?function(i,a){return a instanceof Pi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,c,h)=>o&&HS(c,a.filters[h]),!0):!1}(n,t):void Et(19439)}function qS(n){return n instanceof Me?function(e){return`${e.field.canonicalString()} ${e.op} ${Uo(e.value)}`}(n):n instanceof Pi?function(e){return e.op.toString()+" {"+e.getFilters().map(qS).join(" ,")+"}"}(n):"Filter"}class X2 extends Me{constructor(t,e,i){super(t,e,i),this.key=_t.fromName(i.referenceValue)}matches(t){const e=_t.comparator(t.key,this.key);return this.matchesComparison(e)}}class $2 extends Me{constructor(t,e){super(t,"in",e),this.keys=GS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class W2 extends Me{constructor(t,e){super(t,"not-in",e),this.keys=GS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function GS(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>_t.fromName(i.referenceValue))}class Z2 extends Me{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return kp(e)&&zc(e.arrayValue,this.value)}}class J2 extends Me{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&zc(this.value.arrayValue,e)}}class tD extends Me{constructor(t,e){super(t,"not-in",e)}matches(t){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!zc(this.value.arrayValue,e)}}class eD extends Me{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!kp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>zc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t,e=null,i=[],a=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Pe=null}}function Pb(n,t=null,e=[],i=[],a=null,o=null,c=null){return new nD(n,t,e,i,a,o,c)}function Np(n){const t=xt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>$m(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ff(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Uo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Uo(i)).join(",")),t.Pe=e}return t.Pe}function Pp(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!K2(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!HS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Nb(n.startAt,t.startAt)&&Nb(n.endAt,t.endAt)}function Wm(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,e=null,i=[],a=[],o=null,c="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function iD(n,t,e,i,a,o,c,h){return new qf(n,t,e,i,a,o,c,h)}function Vp(n){return new qf(n)}function Vb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sD(n){return n.collectionGroup!==null}function Rc(n){const t=xt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const o of t.explicitOrderBy)t.Te.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Pe(Xe.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Te.push(new Ef(o,i))}),e.has(Xe.keyField().canonicalString())||t.Te.push(new Ef(Xe.keyField(),i))}return t.Te}function Ii(n){const t=xt(n);return t.Ie||(t.Ie=rD(t,Rc(n))),t.Ie}function rD(n,t){if(n.limitType==="F")return Pb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Ef(a.field,o)});const e=n.endAt?new bf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new bf(n.startAt.position,n.startAt.inclusive):null;return Pb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Zm(n,t,e){return new qf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Gf(n,t){return Pp(Ii(n),Ii(t))&&n.limitType===t.limitType}function YS(n){return`${Np(Ii(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>qS(a)).join(", ")}]`),Ff(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Uo(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Uo(a)).join(",")),`Target(${i})`}(Ii(n))}; limitType=${n.limitType})`}function Yf(n,t){return t.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_t.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,a){for(const o of Rc(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,t)&&function(i,a){return!(i.startAt&&!function(c,h,d){const m=kb(c,h,d);return c.inclusive?m<=0:m<0}(i.startAt,Rc(i),a)||i.endAt&&!function(c,h,d){const m=kb(c,h,d);return c.inclusive?m>=0:m>0}(i.endAt,Rc(i),a))}(n,t)}function aD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KS(n){return(t,e)=>{let i=!1;for(const a of Rc(n)){const o=oD(a,t,e);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function oD(n,t,e){const i=n.field.isKeyField()?_t.comparator(t.key,e.key):function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Lo(d,m):Et(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],t))return void(a[o]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Tr(this.inner,(e,i)=>{for(const[a,o]of i)t(a,o)})}isEmpty(){return OS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new fe(_t.comparator);function ys(){return lD}const QS=new fe(_t.comparator);function yc(...n){let t=QS;for(const e of n)t=t.insert(e.key,e);return t}function XS(n){let t=QS;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function da(){return Ic()}function $S(){return Ic()}function Ic(){return new wa(n=>n.toString(),(n,t)=>n.isEqual(t))}const cD=new fe(_t.comparator),uD=new Pe(_t.comparator);function Vt(...n){let t=uD;for(const e of n)t=t.add(e);return t}const hD=new Pe(Dt);function fD(){return hD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(t)?"-0":t}}function WS(n){return{integerValue:""+n}}function dD(n,t){return z2(t)?WS(t):Lp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._=void 0}}function gD(n,t,e){return n instanceof Tf?function(a,o){const c={fields:{[NS]:{stringValue:kS},[VS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Mp(o)&&(o=Hf(o)),o&&(c.fields[PS]=o),{mapValue:c}}(e,t):n instanceof Bc?JS(n,t):n instanceof jc?tA(n,t):function(a,o){const c=ZS(a,o),h=Lb(c)+Lb(a.Ee);return Xm(c)&&Xm(a.Ee)?WS(h):Lp(a.serializer,h)}(n,t)}function mD(n,t,e){return n instanceof Bc?JS(n,t):n instanceof jc?tA(n,t):e}function ZS(n,t){return n instanceof Sf?function(i){return Xm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class Tf extends Kf{}class Bc extends Kf{constructor(t){super(),this.elements=t}}function JS(n,t){const e=eA(t);for(const i of n.elements)e.some(a=>Ni(a,i))||e.push(i);return{arrayValue:{values:e}}}class jc extends Kf{constructor(t){super(),this.elements=t}}function tA(n,t){let e=eA(t);for(const i of n.elements)e=e.filter(a=>!Ni(a,i));return{arrayValue:{values:e}}}class Sf extends Kf{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function Lb(n){return ve(n.integerValue||n.doubleValue)}function eA(n){return kp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pD(n,t){return n.field.isEqual(t.field)&&function(i,a){return i instanceof Bc&&a instanceof Bc||i instanceof jc&&a instanceof jc?Vo(i.elements,a.elements,Ni):i instanceof Sf&&a instanceof Sf?Ni(i.Ee,a.Ee):i instanceof Tf&&a instanceof Tf}(n.transform,t.transform)}class _D{constructor(t,e){this.version=t,this.transformResults=e}}class Ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ci}static exists(t){return new Ci(void 0,t)}static updateTime(t){return new Ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function nf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Qf{}function nA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new sA(n.key,Ci.none()):new tu(n.key,n.data,Ci.none());{const e=n.data,i=yn.empty();let a=new Pe(Xe.comparator);for(let o of t.fields)if(!a.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new Sr(n.key,i,new Cn(a.toArray()),Ci.none())}}function yD(n,t,e){n instanceof tu?function(a,o,c){const h=a.value.clone(),d=zb(a.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Sr?function(a,o,c){if(!nf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=zb(a.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(iA(a)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Cc(n,t,e,i){return n instanceof tu?function(o,c,h,d){if(!nf(o.precondition,c))return h;const m=o.value.clone(),_=Bb(o.fieldTransforms,d,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof Sr?function(o,c,h,d){if(!nf(o.precondition,c))return h;const m=Bb(o.fieldTransforms,d,c),_=c.data;return _.setAll(iA(o)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return nf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function vD(n,t){let e=null;for(const i of n.fieldTransforms){const a=t.data.field(i.field),o=ZS(i.transform,a||null);o!=null&&(e===null&&(e=yn.empty()),e.set(i.field,o))}return e||null}function Ub(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Vo(i,a,(o,c)=>pD(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class tu extends Qf{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Sr extends Qf{constructor(t,e,i,a,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function zb(n,t,e){const i=new Map;Yt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let a=0;a<e.length;a++){const o=n[a],c=o.transform,h=t.data.field(o.field);i.set(o.field,mD(c,h,e[a]))}return i}function Bb(n,t,e){const i=new Map;for(const a of n){const o=a.transform,c=e.data.field(a.field);i.set(a.field,gD(o,c,t))}return i}class sA extends Qf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bD extends Qf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(t.key)&&yD(o,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Cc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Cc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=$S();return this.mutations.forEach(a=>{const o=t.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(a.key)?null:h;const d=nA(c,h);d!==null&&i.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(St.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Vo(this.mutations,t.mutations,(e,i)=>Ub(e,i))&&Vo(this.baseMutations,t.baseMutations,(e,i)=>Ub(e,i))}}class Up{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){Yt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let a=function(){return cD}();const o=t.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Up(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Bt;function AD(n){switch(n){case rt.OK:return Et(64938);case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function rA(n){if(n===void 0)return _s("GRPC error has no .code"),rt.UNKNOWN;switch(n){case we.OK:return rt.OK;case we.CANCELLED:return rt.CANCELLED;case we.UNKNOWN:return rt.UNKNOWN;case we.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case we.INTERNAL:return rt.INTERNAL;case we.UNAVAILABLE:return rt.UNAVAILABLE;case we.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case we.NOT_FOUND:return rt.NOT_FOUND;case we.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case we.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case we.ABORTED:return rt.ABORTED;case we.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case we.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case we.DATA_LOSS:return rt.DATA_LOSS;default:return Et(39323,{code:n})}}(Bt=we||(we={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new or([4294967295,4294967295],0);function jb(n){const t=RS().encode(n),e=new vS;return e.update(t),new Uint8Array(e.digest())}function Fb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new or([e,i],0),new or([a,o],0)]}class zp{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new vc(`Invalid padding: ${e}`);if(i<0)throw new vc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new vc(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=or.fromNumber(this.fe)}pe(t,e,i){let a=t.add(e.multiply(or.fromNumber(i)));return a.compare(wD)===1&&(a=new or([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=jb(t),[i,a]=Fb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,a,o);if(!this.ye(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new zp(o,a,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.fe===0)return;const e=jb(t),[i,a]=Fb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,a,o);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t,e,i,a,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,eu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Xf(St.min(),a,new fe(Dt),ys(),Vt())}}class eu{constructor(t,e,i,a,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new eu(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,e,i,a){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=a}}class aA{constructor(t,e){this.targetId=t,this.De=e}}class oA{constructor(t,e,i=$e.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class Hb{constructor(){this.ve=0,this.Ce=qb(),this.Fe=$e.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Vt(),e=Vt(),i=Vt();return this.Ce.forEach((a,o)=>{switch(o){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:Et(38017,{changeType:o})}}),new eu(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=qb()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class xD{constructor(t){this.We=t,this.Ge=new Map,this.ze=ys(),this.je=Nh(),this.Je=Nh(),this.He=new fe(Dt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,a)=>{this.nt(a)&&e(a)})}it(t){const e=t.targetId,i=t.De.count,a=this.st(e);if(a){const o=a.target;if(Wm(o))if(i===0){const c=new _t(o.path);this.Xe(e,c,sn.newNoDocument(c,St.min()))}else Yt(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const h=this._t(t),d=h?this.ut(h,t,c):1;if(d!==0){this.rt(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,m)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=e;let c,h;try{c=pr(i).toUint8Array()}catch(d){if(d instanceof MS)return fr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new zp(c,a,o)}catch(d){return fr(d instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let a=0;return i.forEach(o=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.Xe(e,o,null),a++)}),a}Pt(t){const e=new Map;this.Ge.forEach((o,c)=>{const h=this.st(c);if(h){if(o.current&&Wm(h.target)){const d=new _t(h.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,sn.newNoDocument(d,t))}o.Ne&&(e.set(c,o.Le()),o.ke())}});let i=Vt();this.Je.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const m=this.st(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(t));const a=new Xf(t,e,this.He,this.ze,i);return this.ze=ys(),this.je=Nh(),this.Je=Nh(),this.He=new fe(Dt),a}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const a=this.tt(t);this.It(t,e)?a.qe(e,1):a.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Hb,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Pe(Dt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Pe(Dt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||ut("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Hb),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Nh(){return new fe(_t.comparator)}function qb(){return new fe(_t.comparator)}const RD={asc:"ASCENDING",desc:"DESCENDING"},ID={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CD={and:"AND",or:"OR"};class DD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Jm(n,t){return n.useProto3Json||Ff(t)?t:{value:t}}function Af(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function OD(n,t){return Af(n,t.toTimestamp())}function Di(n){return Yt(!!n,49232),St.fromTimestamp(function(e){const i=mr(e);return new ie(i.seconds,i.nanos)}(n))}function Bp(n,t){return tp(n,t).canonicalString()}function tp(n,t){const e=function(a){return new le(["projects",a.projectId,"databases",a.database])}(n).child("documents");return t===void 0?e:e.child(t)}function cA(n){const t=le.fromString(n);return Yt(gA(t),10190,{key:t.toString()}),t}function ep(n,t){return Bp(n.databaseId,t.path)}function Tm(n,t){const e=cA(t);if(e.get(1)!==n.databaseId.projectId)throw new ft(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ft(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new _t(hA(e))}function uA(n,t){return Bp(n.databaseId,t)}function MD(n){const t=cA(n);return t.length===4?le.emptyPath():hA(t)}function np(n){return new le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hA(n){return Yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gb(n,t,e){return{name:ep(n,t),fields:e.value.mapValue.fields}}function kD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Et(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Yt(_===void 0||typeof _=="string",58123),$e.fromBase64String(_||"")):(Yt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),$e.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(m){const _=m.code===void 0?rt.UNKNOWN:rA(m.code);return new ft(_,m.message||"")}(c);e=new oA(i,a,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Tm(n,i.document.name),o=Di(i.document.updateTime),c=i.document.createTime?Di(i.document.createTime):St.min(),h=new yn({mapValue:{fields:i.document.fields}}),d=sn.newFoundDocument(a,o,c,h),m=i.targetIds||[],_=i.removedTargetIds||[];e=new sf(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Tm(n,i.document),o=i.readTime?Di(i.readTime):St.min(),c=sn.newNoDocument(a,o),h=i.removedTargetIds||[];e=new sf([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Tm(n,i.document),o=i.removedTargetIds||[];e=new sf([],o,a,null)}else{if(!("filter"in t))return Et(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new SD(a,o),h=i.targetId;e=new aA(h,c)}}return e}function ND(n,t){let e;if(t instanceof tu)e={update:Gb(n,t.key,t.value)};else if(t instanceof sA)e={delete:ep(n,t.key)};else if(t instanceof Sr)e={update:Gb(n,t.key,t.data),updateMask:HD(t.fieldMask)};else{if(!(t instanceof bD))return Et(16599,{Rt:t.type});e={verify:ep(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof Tf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof jc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Sf)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Et(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:OD(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et(27497)}(n,t.precondition)),e}function PD(n,t){return n&&n.length>0?(Yt(t!==void 0,14353),n.map(e=>function(a,o){let c=a.updateTime?Di(a.updateTime):Di(o);return c.isEqual(St.min())&&(c=Di(o)),new _D(c,a.transformResults||[])}(e,t))):[]}function VD(n,t){return{documents:[uA(n,t.path)]}}function LD(n,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=uA(n,a);const o=function(m){if(m.length!==0)return dA(Pi.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(_=>function(T){return{field:So(T.field),direction:BD(T.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=Jm(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{Vt:e,parent:a}}function UD(n){let t=MD(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){Yt(i===1,65062);const _=e.from[0];_.allDescendants?a=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(v){const T=fA(v);return T instanceof Pi&&FS(T)?T.getFilters():[T]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(T=>function(I){return new Ef(Ao(I.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(T))}(e.orderBy));let h=null;e.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,Ff(T)?null:T}(e.limit));let d=null;e.startAt&&(d=function(v){const T=!!v.before,A=v.values||[];return new bf(A,T)}(e.startAt));let m=null;return e.endAt&&(m=function(v){const T=!v.before,A=v.values||[];return new bf(A,T)}(e.endAt)),iD(t,a,c,o,h,"F",d,m)}function zD(n,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:a})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function fA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ao(e.unaryFilter.field);return Me.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Ao(e.unaryFilter.field);return Me.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ao(e.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(e.unaryFilter.field);return Me.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(n):n.fieldFilter!==void 0?function(e){return Me.create(Ao(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Pi.create(e.compositeFilter.filters.map(i=>fA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(e.compositeFilter.op))}(n):Et(30097,{filter:n})}function BD(n){return RD[n]}function jD(n){return ID[n]}function FD(n){return CD[n]}function So(n){return{fieldPath:n.canonicalString()}}function Ao(n){return Xe.fromServerFormat(n.fieldPath)}function dA(n){return n instanceof Me?function(e){if(e.op==="=="){if(Mb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NAN"}};if(Ob(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Mb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NAN"}};if(Ob(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(e.field),op:jD(e.op),value:e.value}}}(n):n instanceof Pi?function(e){const i=e.getFilters().map(a=>dA(a));return i.length===1?i[0]:{compositeFilter:{op:FD(e.op),filters:i}}}(n):Et(54877,{filter:n})}function HD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t,e,i,a,o=St.min(),c=St.min(),h=$e.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t){this.gt=t}}function GD(n){const t=UD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.Dn=new KD}addToCollectionParentIndex(t,e){return this.Dn.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(gr.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(gr.min())}updateCollectionGroup(t,e,i){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class KD{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new Pe(le.comparator),o=!a.has(i);return this.index[e]=a.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new Pe(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mA=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(mA,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new zo(0)}static ur(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="LruGarbageCollector",QD=1048576;function Qb([n,t],[e,i]){const a=Dt(n,e);return a===0?Dt(t,i):a}class XD{constructor(t){this.Tr=t,this.buffer=new Pe(Qb),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Qb(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class $D{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ut(Kb,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xo(e)?ut(Kb,"Ignoring IndexedDB error during garbage collection: ",e):await Qo(e)}await this.Rr(3e5)})}}class WD{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return nt.resolve(jf.ue);const i=new XD(e);return this.Vr.forEachTarget(t,a=>i.Er(a.sequenceNumber)).next(()=>this.Vr.gr(t,a=>i.Er(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(Yb)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yb):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,a,o,c,h,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(m=Date.now(),Eo()<=Pt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function ZD(n,t){return new WD(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.changes=new wa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,sn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?nt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Cc(i.mutation,a,Cn.empty(),ie.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const a=da();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(o=>{let c=yc();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=da();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const a=[];return i.forEach(o=>{e.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(t,a).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,a){let o=ys();const c=Ic(),h=function(){return Ic()}();return e.forEach((d,m)=>{const _=i.get(m.key);a.has(m.key)&&(_===void 0||_.mutation instanceof Sr)?o=o.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),Cc(_.mutation,m,_.mutation.getFieldMask(),ie.now())):c.set(m.key,Cn.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,_)=>c.set(m,_)),e.forEach((m,_)=>{var v;return h.set(m,new tO(_,(v=c.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Ic();let a=new fe((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let _=i.get(d)||Cn.empty();_=h.applyToLocalView(m,_),i.set(d,_);const v=(a.get(h.batchId)||Vt()).add(d);a=a.insert(h.batchId,v)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=$S();_.forEach(T=>{if(!o.has(T)){const A=nA(e.get(T),i.get(T));A!==null&&v.set(T,A),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return nt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return _t.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):sD(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-o.size):nt.resolve(da());let h=Vc,d=o;return c.next(m=>nt.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?nt.resolve():this.remoteDocumentCache.getEntry(t,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,Vt())).next(_=>({batchId:h,changes:XS(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new _t(e)).next(i=>{let a=yc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const o=e.collectionGroup;let c=yc();return this.indexManager.getCollectionParents(t,o).next(h=>nt.forEach(h,d=>{const m=function(v,T){return new qf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,a).next(_=>{_.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,a))).next(c=>{o.forEach((d,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,sn.newInvalidDocument(_)))});let h=yc();return c.forEach((d,m)=>{const _=o.get(d);_!==void 0&&Cc(_.mutation,m,Cn.empty(),ie.now()),Yf(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return nt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Di(a.createTime)}}(e)),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(a){return{name:a.name,query:GD(a.bundledQuery),readTime:Di(a.readTime)}}(e)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.overlays=new fe(_t.comparator),this.kr=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=da();return nt.forEach(e,a=>this.getOverlay(t,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,o)=>{this.wt(t,e,o)}),nt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),nt.resolve()}getOverlaysForCollection(t,e,i){const a=da(),o=e.length+1,c=new _t(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&a.set(d.getKey(),d)}return nt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let o=new fe((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=da(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=da(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=a)););return nt.resolve(h)}wt(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new TD(e,i));let o=this.kr.get(e);o===void 0&&(o=Vt(),this.kr.set(e,o)),this.kr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.qr=new Pe(Fe.Qr),this.$r=new Pe(Fe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new Fe(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new Fe(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new _t(new le([])),i=new Fe(e,t),a=new Fe(e,t+1),o=[];return this.$r.forEachInRange([i,a],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new _t(new le([])),i=new Fe(e,t),a=new Fe(e,t+1);let o=Vt();return this.$r.forEachInRange([i,a],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Fe(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Fe{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return _t.comparator(t.key,e.key)||Dt(t.Hr,e.Hr)}static Ur(t,e){return Dt(t.Hr,e.Hr)||_t.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Pe(Fe.Qr)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ED(o,e,i,a);this.mutationQueue.push(c);for(const h of a)this.Yr=this.Yr.add(new Fe(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return nt.resolve(c)}lookupMutationBatch(t,e){return nt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.Xr(i),o=a<0?0:a;return nt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?Op:this.er-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Fe(e,0),a=new Fe(e,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,a],c=>{const h=this.Zr(c.Hr);o.push(h)}),nt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Pe(Dt);return e.forEach(a=>{const o=new Fe(a,0),c=new Fe(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],h=>{i=i.add(h.Hr)})}),nt.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let o=i;_t.isDocumentKey(o)||(o=o.child(""));const c=new Fe(new _t(o),0);let h=new Pe(Dt);return this.Yr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(d.Hr)),!0)},c),nt.resolve(this.ei(h))}ei(t){const e=[];return t.forEach(i=>{const a=this.Zr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){Yt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return nt.forEach(e.mutations,a=>{const o=new Fe(a.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new Fe(e,0),a=this.Yr.firstAfterOrEqual(i);return nt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t){this.ni=t,this.docs=function(){return new fe(_t.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),o=a?a.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return nt.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(e))}getEntries(t,e){let i=ys();return e.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():sn.newInvalidDocument(a))}),nt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let o=ys();const c=e.path,h=new _t(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||P2(N2(_),i)<=0||(a.has(_.key)||Yf(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return nt.resolve(o)}getAllFromCollectionGroup(t,e,i,a){Et(9500)}ri(t,e){return nt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new oO(this)}getSize(t){return nt.resolve(this.size)}}class oO extends JD{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Or.addEntry(t,a)):this.Or.removeEntry(i)}),nt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(t){this.persistence=t,this.ii=new wa(e=>Np(e),Pp),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.si=0,this.oi=new jp,this.targetCount=0,this._i=zo.ar()}forEachTarget(t,e){return this.ii.forEach((i,a)=>e(a)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),nt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new zo(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.hr(e),nt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,i){let a=0;const o=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)}),nt.waitFor(o).next(()=>a)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return nt.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),nt.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const a=this.persistence.referenceDelegate,o=[];return a&&e.forEach(c=>{o.push(a.markPotentiallyOrphaned(t,c))}),nt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return nt.resolve(i)}containsKey(t,e){return nt.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,e){this.ai={},this.overlays={},this.ui=new jf(0),this.ci=!1,this.ci=!0,this.li=new sO,this.referenceDelegate=t(this),this.hi=new lO(this),this.indexManager=new YD,this.remoteDocumentCache=function(a){return new aO(a)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new qD(e),this.Ti=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new iO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new rO(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){ut("MemoryPersistence","Starting transaction:",t);const a=new cO(this.ui.next());return this.referenceDelegate.Ii(),i(a).next(o=>this.referenceDelegate.di(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ei(t,e){return nt.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class cO extends L2{constructor(t){super(),this.currentSequenceNumber=t}}class Fp{constructor(t){this.persistence=t,this.Ai=new jp,this.Ri=null}static Vi(t){return new Fp(t)}get mi(){if(this.Ri)return this.Ri;throw Et(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),nt.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(a=>this.mi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.mi,i=>{const a=_t.fromPath(i);return this.fi(t,a).next(o=>{o||e.removeEntry(a,St.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return nt.or([()=>nt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class wf{constructor(t,e){this.persistence=t,this.gi=new wa(i=>B2(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=ZD(this,e)}static Vi(t,e){return new wf(t,e)}Ii(){}di(t){return nt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return nt.forEach(this.gi,(i,a)=>this.Sr(t,i,a).next(o=>o?nt.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ri(t,c=>this.Sr(t,c,e).next(h=>{h||(i++,o.removeEntry(c,St.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),nt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),nt.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),nt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),nt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=tf(t.data.value)),e}Sr(t,e,i){return nt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.gi.get(e);return nt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=a}static Es(t,e){let i=Vt(),a=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Hp(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return qx()?8:U2(on())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,a){const o={result:null};return this.ps(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(t,e,a,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new uO;return this.ws(t,e,c).next(h=>{if(o.result=h,this.Rs)return this.Ss(t,e,c,h.size)})}).next(()=>o.result)}Ss(t,e,i,a){return i.documentReadCount<this.Vs?(Eo()<=Pt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",To(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),nt.resolve()):(Eo()<=Pt.DEBUG&&ut("QueryEngine","Query:",To(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(Eo()<=Pt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",To(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ii(e))):nt.resolve())}ps(t,e){if(Vb(e))return nt.resolve(null);let i=Ii(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=Zm(e,null,"F"),i=Ii(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.gs.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.bs(e,h);return this.Ds(e,m,c,d.readTime)?this.ps(t,Zm(e,null,"F")):this.vs(t,m,e,d)}))})))}ys(t,e,i,a){return Vb(e)||a.isEqual(St.min())?nt.resolve(null):this.gs.getDocuments(t,i).next(o=>{const c=this.bs(e,o);return this.Ds(e,c,i,a)?nt.resolve(null):(Eo()<=Pt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),To(e)),this.vs(t,c,e,k2(a,Vc)).next(h=>h))})}bs(t,e){let i=new Pe(KS(t));return e.forEach((a,o)=>{Yf(t,o)&&(i=i.add(o))}),i}Ds(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}ws(t,e,i){return Eo()<=Pt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",To(e)),this.gs.getDocumentsMatchingQuery(t,e,gr.min(),i)}vs(t,e,i,a){return this.gs.getDocumentsMatchingQuery(t,i,a).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",fO=3e8;class dO{constructor(t,e,i,a){this.persistence=t,this.Cs=e,this.serializer=a,this.Fs=new fe(Dt),this.Ms=new wa(o=>Np(o),Pp),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function gO(n,t,e,i){return new dO(n,t,e,i)}async function _A(n,t){const e=xt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=Vt();for(const m of a){c.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(i,d).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:h}))})})}function mO(n,t){const e=xt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),o=e.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,T=v.keys();let A=nt.resolve();return T.forEach(I=>{A=A.next(()=>_.getEntry(d,I)).next(k=>{const M=m.docVersions.get(I);Yt(M!==null,48541),k.version.compareTo(M)<0&&(v.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),_.addEntry(k)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Vt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function yA(n){const t=xt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function pO(n,t){const e=xt(n),i=t.snapshotVersion;let a=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});a=e.Fs;const h=[];t.targetChanges.forEach((_,v)=>{const T=a.get(v);if(!T)return;h.push(e.hi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>e.hi.addMatchingKeys(o,_.addedDocuments,v)));let A=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?A=A.withResumeToken($e.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),a=a.insert(v,A),function(k,M,K){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=fO?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(T,A,_)&&h.push(e.hi.updateTargetData(o,A))});let d=ys(),m=Vt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(_O(o,c,t.documentUpdates).next(_=>{d=_.Ls,m=_.ks})),!i.isEqual(St.min())){const _=e.hi.getLastRemoteSnapshotVersion(o).next(v=>e.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return nt.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.Fs=a,o))}function _O(n,t,e){let i=Vt(),a=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=ys();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(St.min())?(t.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),c=c.insert(h,d)):ut(qp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ls:c,ks:a}})}function yO(n,t){const e=xt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Op),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function vO(n,t){const e=xt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.hi.getTargetData(i,t).next(o=>o?(a=o,nt.resolve(a)):e.hi.allocateTargetId(i).next(c=>(a=new tr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function ip(n,t,e){const i=xt(n),a=i.Fs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Xo(c))throw c;ut(qp,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(a.target)}function Xb(n,t,e){const i=xt(n);let a=St.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,m,_){const v=xt(d),T=v.Ms.get(_);return T!==void 0?nt.resolve(v.Fs.get(T)):v.hi.getTargetData(m,_)}(i,c,Ii(t)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,t,e?a:St.min(),e?o:Vt())).next(h=>(bO(i,aD(t),h),{documents:h,qs:o})))}function bO(n,t,e){let i=n.xs.get(t)||St.min();e.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(t,i)}class $b{constructor(){this.activeTargetIds=fD()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EO{constructor(){this.Fo=new $b,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new $b,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="ConnectivityMonitor";class Zb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ut(Wb,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ut(Wb,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function sp(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",SO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AO{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===yf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(t,e,i,a,o){const c=sp(),h=this.Go(t,e.toUriEncodedString());ut(Sm,`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,a,o);const{host:m}=new URL(h),_=Ho(m);return this.jo(t,h,d,i,_).then(v=>(ut(Sm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw fr(Sm,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Jo(t,e,i,a,o,c){return this.Wo(t,e,i,a,o)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}Go(t,e){const i=SO[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class xO extends AO{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,a,o){const c=sp();return new Promise((h,d)=>{const m=new bS;m.setWithCredentials(!0),m.listenOnce(ES.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Jh.NO_ERROR:const v=m.getResponseJson();ut(tn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case Jh.TIMEOUT:ut(tn,`RPC '${t}' ${c} timed out`),d(new ft(rt.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const T=m.getStatus();if(ut(tn,`RPC '${t}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const k=function(K){const G=K.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(G)>=0?G:rt.UNKNOWN}(I.status);d(new ft(k,I.message))}else d(new ft(rt.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ft(rt.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{c_:t,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ut(tn,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(a);ut(tn,`RPC '${t}' ${c} sending request:`,a),m.send(e,"POST",_,i,15)})}P_(t,e,i){const a=sp(),o=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=AS(),h=SS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ut(tn,`Creating RPC '${t}' stream ${a}: ${_}`,d);const v=c.createWebChannel(_,d);this.T_(v);let T=!1,A=!1;const I=new wO({Ho:M=>{A?ut(tn,`Not sending because RPC '${t}' stream ${a} is closed:`,M):(T||(ut(tn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),ut(tn,`RPC '${t}' stream ${a} sending:`,M),v.send(M))},Yo:()=>v.close()}),k=(M,K,G)=>{M.listen(K,J=>{try{G(J)}catch(q){setTimeout(()=>{throw q},0)}})};return k(v,_c.EventType.OPEN,()=>{A||(ut(tn,`RPC '${t}' stream ${a} transport opened.`),I.s_())}),k(v,_c.EventType.CLOSE,()=>{A||(A=!0,ut(tn,`RPC '${t}' stream ${a} transport closed`),I.__(),this.I_(v))}),k(v,_c.EventType.ERROR,M=>{A||(A=!0,fr(tn,`RPC '${t}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),I.__(new ft(rt.UNAVAILABLE,"The operation could not be completed")))}),k(v,_c.EventType.MESSAGE,M=>{var K;if(!A){const G=M.data[0];Yt(!!G,16349);const J=G,q=J?.error||((K=J[0])===null||K===void 0?void 0:K.error);if(q){ut(tn,`RPC '${t}' stream ${a} received error:`,q);const X=q.status;let st=function(R){const N=we[R];if(N!==void 0)return rA(N)}(X),C=q.message;st===void 0&&(st=rt.INTERNAL,C="Unknown error status: "+X+" with message "+q.message),A=!0,I.__(new ft(st,C)),v.close()}else ut(tn,`RPC '${t}' stream ${a} received:`,G),I.a_(G)}}),k(h,TS.STAT_EVENT,M=>{M.stat===Ym.PROXY?ut(tn,`RPC '${t}' stream ${a} detected buffering proxy`):M.stat===Ym.NOPROXY&&ut(tn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n){return new DD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,e,i=1e3,a=1.5,o=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=a,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,e-i);a>0&&ut("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="PersistentStream";class bA{constructor(t,e,i,a,o,c,h,d){this.Fi=t,this.w_=i,this.S_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vA(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===rt.RESOURCE_EXHAUSTED?(_s(e.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.b_===e&&this.W_(i,a)},i=>{t(()=>{const a=new ft(rt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{i(()=>this.G_(a))}),this.stream.onMessage(a=>{i(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ut(Jb,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(ut(Jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RO extends bA{constructor(t,e,i,a,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=kD(this.serializer,t),i=function(o){if(!("targetChange"in o))return St.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?St.min():c.readTime?Di(c.readTime):St.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=np(this.serializer),e.addTarget=function(o,c){let h;const d=c.target;if(h=Wm(d)?{documents:VD(o,d)}:{query:LD(o,d).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=lA(o,c.resumeToken);const m=Jm(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(St.min())>0){h.readTime=Af(o,c.snapshotVersion.toTimestamp());const m=Jm(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=zD(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=np(this.serializer),e.removeTarget=t,this.k_(e)}}class IO extends bA{constructor(t,e,i,a,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=PD(t.writeResults,t.commitTime),i=Di(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=np(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>ND(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{}class DO extends CO{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ft(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(t,tp(e,i),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ft(rt.UNKNOWN,o.toString())})}Jo(t,e,i,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(t,tp(e,i),a,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(rt.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class OO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(e),this._a=!1):ut("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class MO{constructor(t,e,i,a,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{xa(this)&&(ut(Ea,"Restarting streams for network reachability change."),await async function(d){const m=xt(d);m.Ia.add(4),await nu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Wf(m)}(this))})}),this.Aa=new OO(i,a)}}async function Wf(n){if(xa(n))for(const t of n.da)await t(!0)}async function nu(n){for(const t of n.da)await t(!1)}function EA(n,t){const e=xt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Qp(e)?Kp(e):$o(e).x_()&&Yp(e,t))}function Gp(n,t){const e=xt(n),i=$o(e);e.Ta.delete(t),i.x_()&&TA(e,t),e.Ta.size===0&&(i.x_()?i.B_():xa(e)&&e.Aa.set("Unknown"))}function Yp(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}$o(n).H_(t)}function TA(n,t){n.Ra.$e(t),$o(n).Y_(t)}function Kp(n){n.Ra=new xD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),$o(n).start(),n.Aa.aa()}function Qp(n){return xa(n)&&!$o(n).M_()&&n.Ta.size>0}function xa(n){return xt(n).Ia.size===0}function SA(n){n.Ra=void 0}async function kO(n){n.Aa.set("Online")}async function NO(n){n.Ta.forEach((t,e)=>{Yp(n,t)})}async function PO(n,t){SA(n),Qp(n)?(n.Aa.la(t),Kp(n)):n.Aa.set("Unknown")}async function VO(n,t,e){if(n.Aa.set("Online"),t instanceof oA&&t.state===2&&t.cause)try{await async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ta.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ta.delete(h),a.Ra.removeTarget(h))}(n,t)}catch(i){ut(Ea,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await xf(n,i)}else if(t instanceof sf?n.Ra.Ye(t):t instanceof aA?n.Ra.it(t):n.Ra.et(t),!e.isEqual(St.min()))try{const i=await yA(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Ra.Pt(c);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ta.get(m);_&&o.Ta.set(m,_.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,m)=>{const _=o.Ta.get(d);if(!_)return;o.Ta.set(d,_.withResumeToken($e.EMPTY_BYTE_STRING,_.snapshotVersion)),TA(o,d);const v=new tr(_.target,d,m,_.sequenceNumber);Yp(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ut(Ea,"Failed to raise snapshot:",i),await xf(n,i)}}async function xf(n,t,e){if(!Xo(t))throw t;n.Ia.add(1),await nu(n),n.Aa.set("Offline"),e||(e=()=>yA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ut(Ea,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Wf(n)})}function AA(n,t){return t().catch(e=>xf(n,e,t))}async function Zf(n){const t=xt(n),e=yr(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Op;for(;LO(t);)try{const a=await yO(t.localStore,i);if(a===null){t.Pa.length===0&&e.B_();break}i=a.batchId,UO(t,a)}catch(a){await xf(t,a)}wA(t)&&xA(t)}function LO(n){return xa(n)&&n.Pa.length<10}function UO(n,t){n.Pa.push(t);const e=yr(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function wA(n){return xa(n)&&!yr(n).M_()&&n.Pa.length>0}function xA(n){yr(n).start()}async function zO(n){yr(n).na()}async function BO(n){const t=yr(n);for(const e of n.Pa)t.X_(e.mutations)}async function jO(n,t,e){const i=n.Pa.shift(),a=Up.from(i,t,e);await AA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Zf(n)}async function FO(n,t){t&&yr(n).Z_&&await async function(i,a){if(function(c){return AD(c)&&c!==rt.ABORTED}(a.code)){const o=i.Pa.shift();yr(i).N_(),await AA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Zf(i)}}(n,t),wA(n)&&xA(n)}async function tE(n,t){const e=xt(n);e.asyncQueue.verifyOperationInProgress(),ut(Ea,"RemoteStore received new credentials");const i=xa(e);e.Ia.add(3),await nu(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Wf(e)}async function HO(n,t){const e=xt(n);t?(e.Ia.delete(2),await Wf(e)):t||(e.Ia.add(2),await nu(e),e.Aa.set("Unknown"))}function $o(n){return n.Va||(n.Va=function(e,i,a){const o=xt(e);return o.ia(),new RO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Zo:kO.bind(null,n),e_:NO.bind(null,n),n_:PO.bind(null,n),J_:VO.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Qp(n)?Kp(n):n.Aa.set("Unknown")):(await n.Va.stop(),SA(n))})),n.Va}function yr(n){return n.ma||(n.ma=function(e,i,a){const o=xt(e);return o.ia(),new IO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:zO.bind(null,n),n_:FO.bind(null,n),ea:BO.bind(null,n),ta:jO.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await Zf(n)):(await n.ma.stop(),n.Pa.length>0&&(ut(Ea,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,e,i,a,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,o){const c=Date.now()+i,h=new Xp(t,e,c,a,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(n,t){if(_s("AsyncQueue",`${t}: ${n}`),Xo(n))return new ft(rt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(t){return new Do(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||_t.comparator(e.key,i.key):(e,i)=>_t.comparator(e.key,i.key),this.keyedMap=yc(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Do;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.fa=new fe(_t.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Et(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Bo{constructor(t,e,i,a,o,c,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,a,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Bo(t,e,Do.emptySet(e),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class GO{constructor(){this.queries=nE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const a=xt(e),o=a.queries;a.queries=nE(),o.forEach((c,h)=>{for(const d of h.wa)d.onError(i)})})(this,new ft(rt.ABORTED,"Firestore shutting down"))}}function nE(){return new wa(n=>YS(n),Gf)}async function RA(n,t){const e=xt(n);let i=3;const a=t.query;let o=e.queries.get(a);o?!o.Sa()&&t.ba()&&(i=2):(o=new qO,i=t.ba()?0:1);try{switch(i){case 0:o.ya=await e.onListen(a,!0);break;case 1:o.ya=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const h=$p(c,`Initialization of query '${To(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,o),o.wa.push(t),t.va(e.onlineState),o.ya&&t.Ca(o.ya)&&Wp(e)}async function IA(n,t){const e=xt(n),i=t.query;let a=3;const o=e.queries.get(i);if(o){const c=o.wa.indexOf(t);c>=0&&(o.wa.splice(c,1),o.wa.length===0?a=t.ba()?0:1:!o.Sa()&&t.ba()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function YO(n,t){const e=xt(n);let i=!1;for(const a of t){const o=a.query,c=e.queries.get(o);if(c){for(const h of c.wa)h.Ca(a)&&(i=!0);c.ya=a}}i&&Wp(e)}function KO(n,t,e){const i=xt(n),a=i.queries.get(t);if(a)for(const o of a.wa)o.onError(e);i.queries.delete(t)}function Wp(n){n.Da.forEach(t=>{t.next()})}var rp,iE;(iE=rp||(rp={})).Fa="default",iE.Cache="cache";class CA{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Bo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Bo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(t){this.key=t}}class OA{constructor(t){this.key=t}}class QO{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Vt(),this.mutatedKeys=Vt(),this.Xa=KS(t),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new eE,a=e?e.eu:this.eu;let o=e?e.mutatedKeys:this.mutatedKeys,c=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((_,v)=>{const T=a.get(_),A=Yf(this.query,v)?v:null,I=!!T&&this.mutatedKeys.has(T.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let M=!1;T&&A?T.data.isEqual(A.data)?I!==k&&(i.track({type:3,doc:A}),M=!0):this.iu(T,A)||(i.track({type:2,doc:A}),M=!0,(d&&this.Xa(A,d)>0||m&&this.Xa(A,m)<0)&&(h=!0)):!T&&A?(i.track({type:0,doc:A}),M=!0):T&&!A&&(i.track({type:1,doc:T}),M=!0,(d||m)&&(h=!0)),M&&(A?(c=c.add(A),o=k?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:o}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const o=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort((_,v)=>function(A,I){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{At:M})}};return k(A)-k(I)}(_.type,v.type)||this.Xa(_.doc,v.doc)),this.su(i),a=a!=null&&a;const h=e&&!a?this.ou():[],d=this.Za.size===0&&this.current&&!a?1:0,m=d!==this.Ya;return this.Ya=d,c.length!==0||m?{snapshot:new Bo(this.query,t.eu,o,c,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new eE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Vt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new OA(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new DA(i))}),e}uu(t){this.Ha=t.qs,this.Za=Vt();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Bo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zp="SyncEngine";class XO{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class $O{constructor(t){this.key=t,this.lu=!1}}class WO{constructor(t,e,i,a,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new wa(h=>YS(h),Gf),this.Tu=new Map,this.Iu=new Set,this.du=new fe(_t.comparator),this.Eu=new Map,this.Au=new jp,this.Ru={},this.Vu=new Map,this.mu=zo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function ZO(n,t,e=!0){const i=LA(n);let a;const o=i.Pu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.cu()):a=await MA(i,t,e,!0),a}async function JO(n,t){const e=LA(n);await MA(e,t,!0,!1)}async function MA(n,t,e,i){const a=await vO(n.localStore,Ii(t)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await tM(n,t,o,c==="current",a.resumeToken)),n.isPrimaryClient&&e&&EA(n.remoteStore,a),h}async function tM(n,t,e,i,a){n.gu=(v,T,A)=>async function(k,M,K,G){let J=M.view.nu(K);J.Ds&&(J=await Xb(k.localStore,M.query,!1).then(({documents:C})=>M.view.nu(C,J)));const q=G&&G.targetChanges.get(M.targetId),X=G&&G.targetMismatches.get(M.targetId)!=null,st=M.view.applyChanges(J,k.isPrimaryClient,q,X);return rE(k,M.targetId,st._u),st.snapshot}(n,v,T,A);const o=await Xb(n.localStore,t,!0),c=new QO(t,o.qs),h=c.nu(o.documents),d=eu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",a),m=c.applyChanges(h,n.isPrimaryClient,d);rE(n,e,m._u);const _=new XO(t,e,c);return n.Pu.set(t,_),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),m.snapshot}async function eM(n,t,e){const i=xt(n),a=i.Pu.get(t),o=i.Tu.get(a.targetId);if(o.length>1)return i.Tu.set(a.targetId,o.filter(c=>!Gf(c,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await ip(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Gp(i.remoteStore,a.targetId),ap(i,a.targetId)}).catch(Qo)):(ap(i,a.targetId),await ip(i.localStore,a.targetId,!0))}async function nM(n,t){const e=xt(n),i=e.Pu.get(t),a=e.Tu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Gp(e.remoteStore,i.targetId))}async function iM(n,t,e){const i=uM(n);try{const a=await function(c,h){const d=xt(c),m=ie.now(),_=h.reduce((A,I)=>A.add(I.key),Vt());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let I=ys(),k=Vt();return d.Os.getEntries(A,_).next(M=>{I=M,I.forEach((K,G)=>{G.isValidDocument()||(k=k.add(K))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,I)).next(M=>{v=M;const K=[];for(const G of h){const J=vD(G,v.get(G.key).overlayedDocument);J!=null&&K.push(new Sr(G.key,J,zS(J.value.mapValue),Ci.exists(!0)))}return d.mutationQueue.addMutationBatch(A,m,K,h)}).next(M=>{T=M;const K=M.applyToLocalDocumentSet(v,k);return d.documentOverlayCache.saveOverlays(A,M.batchId,K)})}).then(()=>({batchId:T.batchId,changes:XS(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,d){let m=c.Ru[c.currentUser.toKey()];m||(m=new fe(Dt)),m=m.insert(h,d),c.Ru[c.currentUser.toKey()]=m}(i,a.batchId,e),await iu(i,a.changes),await Zf(i.remoteStore)}catch(a){const o=$p(a,"Failed to persist write");e.reject(o)}}async function kA(n,t){const e=xt(n);try{const i=await pO(e.localStore,t);t.targetChanges.forEach((a,o)=>{const c=e.Eu.get(o);c&&(Yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?Yt(c.lu,14607):a.removedDocuments.size>0&&(Yt(c.lu,42227),c.lu=!1))}),await iu(e,i,t)}catch(i){await Qo(i)}}function sE(n,t,e){const i=xt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Pu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&a.push(h.snapshot)}),function(c,h){const d=xt(c);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const T of v.wa)T.va(h)&&(m=!0)}),m&&Wp(d)}(i.eventManager,t),a.length&&i.hu.J_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function sM(n,t,e){const i=xt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Eu.get(t),o=a&&a.key;if(o){let c=new fe(_t.comparator);c=c.insert(o,sn.newNoDocument(o,St.min()));const h=Vt().add(o),d=new Xf(St.min(),new Map,new fe(Dt),c,h);await kA(i,d),i.du=i.du.remove(o),i.Eu.delete(t),Jp(i)}else await ip(i.localStore,t,!1).then(()=>ap(i,t,e)).catch(Qo)}async function rM(n,t){const e=xt(n),i=t.batch.batchId;try{const a=await mO(e.localStore,t);PA(e,i,null),NA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await iu(e,a)}catch(a){await Qo(a)}}async function aM(n,t,e){const i=xt(n);try{const a=await function(c,h){const d=xt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Yt(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(i.localStore,t);PA(i,t,e),NA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await iu(i,a)}catch(a){await Qo(a)}}function NA(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function PA(n,t,e){const i=xt(n);let a=i.Ru[i.currentUser.toKey()];if(a){const o=a.get(t);o&&(e?o.reject(e):o.resolve(),a=a.remove(t)),i.Ru[i.currentUser.toKey()]=a}}function ap(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||VA(n,i)})}function VA(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Gp(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),Jp(n))}function rE(n,t,e){for(const i of e)i instanceof DA?(n.Au.addReference(i.key,t),oM(n,i)):i instanceof OA?(ut(Zp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||VA(n,i.key)):Et(19791,{yu:i})}function oM(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(ut(Zp,"New document in limbo: "+e),n.Iu.add(i),Jp(n))}function Jp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new _t(le.fromString(t)),i=n.mu.next();n.Eu.set(i,new $O(e)),n.du=n.du.insert(e,i),EA(n.remoteStore,new tr(Ii(Vp(e.path)),i,"TargetPurposeLimboResolution",jf.ue))}}async function iu(n,t,e){const i=xt(n),a=[],o=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{c.push(i.gu(d,t,e).then(m=>{var _;if((m||e)&&i.isPrimaryClient){const v=m?!m.fromCache:(_=e?.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){a.push(m);const v=Hp.Es(d.targetId,m);o.push(v)}}))}),await Promise.all(c),i.hu.J_(a),await async function(d,m){const _=xt(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>nt.forEach(m,T=>nt.forEach(T.Is,A=>_.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>nt.forEach(T.ds,A=>_.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!Xo(v))throw v;ut(qp,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const A=_.Fs.get(T),I=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(I);_.Fs=_.Fs.insert(T,k)}}}(i.localStore,o))}async function lM(n,t){const e=xt(n);if(!e.currentUser.isEqual(t)){ut(Zp,"User change. New user:",t.toKey());const i=await _A(e.localStore,t);e.currentUser=t,function(o,c){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new ft(rt.CANCELLED,c))})}),o.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await iu(e,i.Bs)}}function cM(n,t){const e=xt(n),i=e.Eu.get(t);if(i&&i.lu)return Vt().add(i.key);{let a=Vt();const o=e.Tu.get(t);if(!o)return a;for(const c of o){const h=e.Pu.get(c);a=a.unionWith(h.view.tu)}return a}}function LA(n){const t=xt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=kA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sM.bind(null,t),t.hu.J_=YO.bind(null,t.eventManager),t.hu.pu=KO.bind(null,t.eventManager),t}function uM(n){const t=xt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aM.bind(null,t),t}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$f(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return gO(this.persistence,new hO,t.initialUser,this.serializer)}Du(t){return new pA(Fp.Vi,this.serializer)}bu(t){return new EO}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class hM extends Rf{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Yt(this.persistence.referenceDelegate instanceof wf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $D(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new pA(i=>wf.Vi(i,e),this.serializer)}}class op{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lM.bind(null,this.syncEngine),await HO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new GO}()}createDatastore(t){const e=$f(t.databaseInfo.databaseId),i=function(o){return new xO(o)}(t.databaseInfo);return function(o,c,h,d){return new DO(o,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,o,c,h){return new MO(i,a,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>sE(this.syncEngine,e,0),function(){return Zb.C()?new Zb:new TO}())}createSyncEngine(t,e){return function(a,o,c,h,d,m,_){const v=new WO(a,o,c,h,d,m);return _&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const o=xt(a);ut(Ea,"RemoteStore shutting down."),o.Ia.add(5),await nu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}op.provider={build:()=>new op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):_s("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class fM{constructor(t,e,i,a,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=nn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ut(vr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ut(vr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=$p(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function wm(n,t){n.asyncQueue.verifyOperationInProgress(),ut(vr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await _A(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>{fr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ut("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{fr("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=t}async function aE(n,t){n.asyncQueue.verifyOperationInProgress();const e=await dM(n);ut(vr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>tE(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>tE(t.remoteStore,a)),n._onlineComponents=t}async function dM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ut(vr,"Using user provided OfflineComponentProvider");try{await wm(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===rt.FAILED_PRECONDITION||a.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;fr("Error using user provided cache. Falling back to memory cache: "+e),await wm(n,new Rf)}}else ut(vr,"Using default OfflineComponentProvider"),await wm(n,new hM(void 0));return n._offlineComponents}async function zA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ut(vr,"Using user provided OnlineComponentProvider"),await aE(n,n._uninitializedComponentsProvider._online)):(ut(vr,"Using default OnlineComponentProvider"),await aE(n,new op))),n._onlineComponents}function gM(n){return zA(n).then(t=>t.syncEngine)}async function BA(n){const t=await zA(n),e=t.eventManager;return e.onListen=ZO.bind(null,t.syncEngine),e.onUnlisten=eM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=JO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=nM.bind(null,t.syncEngine),e}function mM(n,t,e={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new UA({next:T=>{_.Ou(),c.enqueueAndForget(()=>IA(o,v));const A=T.docs.has(h);!A&&T.fromCache?m.reject(new ft(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&d&&d.source==="server"?m.reject(new ft(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new CA(Vp(h.path),_,{includeMetadataChanges:!0,ka:!0});return RA(o,v)}(await BA(n),n.asyncQueue,t,e,i)),i.promise}function pM(n,t,e={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new UA({next:T=>{_.Ou(),c.enqueueAndForget(()=>IA(o,v)),T.fromCache&&d.source==="server"?m.reject(new ft(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new CA(h,_,{includeMetadataChanges:!0,ka:!0});return RA(o,v)}(await BA(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="firestore.googleapis.com",lE=!0;class cE{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ft(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FA,this.ssl=lE}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:lE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<QD)throw new ft(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ft(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ft(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ft(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jf{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new S2;switch(i.type){case"firstParty":return new R2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ft(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=oE.get(e);i&&(ut("ComponentProvider","Removing Datastore"),oE.delete(e),i.terminate())}(this),Promise.resolve()}}function _M(n,t,e,i={}){var a;n=dr(n,Jf);const o=Ho(t),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;o&&(MT(`https://${d}`),kT("Firestore",!0)),c.host!==FA&&c.host!==d&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:d,ssl:o,emulatorOptions:i});if(!_a(m,h)&&(n._setSettings(m),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=nn.MOCK_USER;else{_=Px(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ft(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(T)}n._authCredentials=new A2(new xS(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new td(this.firestore,t,this._query)}}class Ne{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ne(this.firestore,t,this._key)}toJSON(){return{type:Ne._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Jc(e,Ne._jsonSchema))return new Ne(t,i||null,new _t(le.fromString(e.referencePath)))}}Ne._jsonSchemaVersion="firestore/documentReference/1.0",Ne._jsonSchema={type:xe("string",Ne._jsonSchemaVersion),referencePath:xe("string")};class lr extends td{constructor(t,e,i){super(t,e,Vp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ne(this.firestore,null,new _t(t))}withConverter(t){return new lr(this.firestore,t,this._path)}}function Ta(n,t,...e){if(n=ln(n),IS("collection","path",t),n instanceof Jf){const i=le.fromString(t,...e);return Sb(i),new lr(n,null,i)}{if(!(n instanceof Ne||n instanceof lr))throw new ft(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(le.fromString(t,...e));return Sb(i),new lr(n.firestore,null,i)}}function ed(n,t,...e){if(n=ln(n),arguments.length===1&&(t=Cp.newId()),IS("doc","path",t),n instanceof Jf){const i=le.fromString(t,...e);return Tb(i),new Ne(n,null,new _t(i))}{if(!(n instanceof Ne||n instanceof lr))throw new ft(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(le.fromString(t,...e));return Tb(i),new Ne(n.firestore,n instanceof lr?n.converter:null,new _t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="AsyncQueue";class hE{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vA(this,"async_queue_retry"),this.oc=()=>{const i=Am();i&&ut(uE,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=Am();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=Am();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new gs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Xo(t))throw t;ut(uE,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",fE(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const a=Xp.createAndSchedule(this,t,e,i,o=>this.lc(o));return this.ec.push(a),a}ac(){this.tc&&Et(47125,{hc:fE(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function fE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class su extends Jf{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new hE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hE(t),this._firestoreClient=void 0,await t}}}function yM(n,t){const e=typeof n=="object"?n:LT(),i=typeof n=="string"?n:yf,a=yp(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=kx("firestore");o&&_M(a,...o)}return a}function t_(n){if(n._terminated)throw new ft(rt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vM(n),n._firestoreClient}function vM(n){var t,e,i;const a=n._freezeSettings(),o=function(h,d,m,_){return new H2(h,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,jA(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new fM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn($e.fromBase64String(t))}catch(e){throw new ft(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new qn($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Jc(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:xe("string",qn._jsonSchemaVersion),bytes:xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ft(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ft(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ft(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(t){if(Jc(t,Oi._jsonSchema))return new Oi(t.latitude,t.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:xe("string",Oi._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Jc(t,Mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Mi(t.vectorValues);throw new ft(rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:xe("string",Mi._jsonSchemaVersion),vectorValues:xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=/^__.*__$/;class EM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Sr(t,this.data,this.fieldMask,e,this.fieldTransforms):new tu(t,this.data,e,this.fieldTransforms)}}class HA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Sr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function qA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ec:n})}}class n_{constructor(t,e,i,a,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new n_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Rc({path:i,mc:!1});return a.fc(t),a}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return If(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(qA(this.Ec)&&bM.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class TM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||$f(t)}Dc(t,e,i,a=!1){return new n_({Ec:t,methodName:e,bc:i,path:Xe.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GA(n){const t=n._freezeSettings(),e=$f(n._databaseId);return new TM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function SM(n,t,e,i,a,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,t,e,a);i_("Data must be an object, but it was:",c,i);const h=YA(i,c);let d,m;if(o.merge)d=new Cn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=lp(t,v,e);if(!c.contains(T))throw new ft(rt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);QA(_,T)||_.push(T)}d=new Cn(_),m=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=c.fieldTransforms;return new EM(new yn(h),d,m)}class id extends e_{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof id}}function AM(n,t,e,i){const a=n.Dc(1,t,e);i_("Data must be an object, but it was:",a,i);const o=[],c=yn.empty();Tr(i,(d,m)=>{const _=s_(t,d,e);m=ln(m);const v=a.gc(_);if(m instanceof id)o.push(_);else{const T=sd(m,v);T!=null&&(o.push(_),c.set(_,T))}});const h=new Cn(o);return new HA(c,h,a.fieldTransforms)}function wM(n,t,e,i,a,o){const c=n.Dc(1,t,e),h=[lp(t,i,e)],d=[a];if(o.length%2!=0)throw new ft(rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(lp(t,o[T])),d.push(o[T+1]);const m=[],_=yn.empty();for(let T=h.length-1;T>=0;--T)if(!QA(m,h[T])){const A=h[T];let I=d[T];I=ln(I);const k=c.gc(A);if(I instanceof id)m.push(A);else{const M=sd(I,k);M!=null&&(m.push(A),_.set(A,M))}}const v=new Cn(m);return new HA(_,v,c.fieldTransforms)}function sd(n,t){if(KA(n=ln(n)))return i_("Unsupported field value:",t,n),YA(n,t);if(n instanceof e_)return function(i,a){if(!qA(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,a){const o=[];let c=0;for(const h of i){let d=sd(h,a.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,a){if((i=ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ie.fromDate(i);return{timestampValue:Af(a.serializer,o)}}if(i instanceof ie){const o=new ie(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Af(a.serializer,o)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qn)return{bytesValue:lA(a.serializer,i._byteString)};if(i instanceof Ne){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Mi)return function(c,h){return{mapValue:{fields:{[LS]:{stringValue:US},[vf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return Lp(h.serializer,m)})}}}}}}(i,a);throw a.wc(`Unsupported field value: ${Dp(i)}`)}(n,t)}function YA(n,t){const e={};return OS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tr(n,(i,a)=>{const o=sd(a,t.Vc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function KA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ie||n instanceof Oi||n instanceof qn||n instanceof Ne||n instanceof e_||n instanceof Mi)}function i_(n,t,e){if(!KA(e)||!CS(e)){const i=Dp(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function lp(n,t,e){if((t=ln(t))instanceof nd)return t._internalPath;if(typeof t=="string")return s_(n,t);throw If("Field path arguments must be of type string or ",n,!1,void 0,e)}const xM=new RegExp("[~\\*/\\[\\]]");function s_(n,t,e){if(t.search(xM)>=0)throw If(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new nd(...t.split("."))._internalPath}catch{throw If(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function If(n,t,e,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${a}`),d+=")"),new ft(rt.INVALID_ARGUMENT,h+n+d)}function QA(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,e,i,a,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field($A("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class RM extends XA{data(){return super.data()}}function $A(n,t){return typeof t=="string"?s_(n,t):t instanceof nd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ft(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CM{convertValue(t,e="none"){switch(_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Tr(t,(a,o)=>{i[a]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,a;const o=(a=(i=(e=t.fields)===null||e===void 0?void 0:e[vf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>ve(c.doubleValue));return new Mi(o)}convertGeoPoint(t){return new Oi(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Hf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Lc(t));default:return null}}convertTimestamp(t){const e=mr(t);return new ie(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=le.fromString(t);Yt(gA(i),9688,{name:t});const a=new Uc(i.get(1),i.get(3)),o=new _t(i.popFirst(5));return a.isEqual(e)||_s(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class bc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ma extends XA{constructor(t,e,i,a,o,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field($A("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ma._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:xe("string",ma._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class rf extends ma{data(t={}){return super.data(t)}}class Oo{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new bc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new rf(this._firestore,this._userDataWriter,i.key,i,new bc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ft(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const d=new rf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new rf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,_=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:OM(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Oo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function OM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n){n=dr(n,Ne);const t=dr(n.firestore,su);return mM(t_(t),n._key).then(e=>kM(t,n,e))}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:xe("string",Oo._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class WA extends CM{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ne(this.firestore,null,e)}}function Fc(n){n=dr(n,td);const t=dr(n.firestore,su),e=t_(t),i=new WA(t);return IM(n._query),pM(e,n._query).then(a=>new Oo(t,i,n,a))}function ZA(n,t,e,...i){n=dr(n,Ne);const a=dr(n.firestore,su),o=GA(a);let c;return c=typeof(t=ln(t))=="string"||t instanceof nd?wM(o,"updateDoc",n._key,t,e,i):AM(o,"updateDoc",n._key,t),tw(a,[c.toMutation(n._key,Ci.exists(!0))])}function JA(n,t){const e=dr(n.firestore,su),i=ed(n),a=DM(n.converter,t);return tw(e,[SM(GA(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Ci.exists(!1))]).then(()=>i)}function tw(n,t){return function(i,a){const o=new gs;return i.asyncQueue.enqueueAndForget(async()=>iM(await gM(i),a,o)),o.promise}(t_(n),t)}function kM(n,t,e){const i=e.docs.get(t._key),a=new WA(n);return new ma(n,a,t._key,i,new bc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){Ko=a})(qo),No(new ya("firestore",(i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new su(new w2(i.getProvider("auth-internal")),new I2(c,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ft(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(m.options.projectId,_)}(c,a),c);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),rr(_b,yb,t),rr(_b,yb,"esm2017")})();const NM={apiKey:"AIzaSyAjFHv1jOhULNpvcY4-SdR6zB8-U1-Sx6Q",authDomain:"salchipapon.firebaseapp.com",projectId:"salchipapon",storageBucket:"salchipapon.firebasestorage.app",messagingSenderId:"590878913280",appId:"1:590878913280:web:ad8d3fb7d39b1c48db39e5",measurementId:"G-39KL5ZL7G7"},ew=VT(NM),ki=yM(ew),cp=v2(ew),PM=({onLogin:n})=>{const[t,e]=Rt.useState(""),[i,a]=Rt.useState(""),[o,c]=Rt.useState(""),h=async()=>{try{await rC(cp,t,i),n()}catch{c("Credenciales incorrectas")}};return W.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:W.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[W.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-orange-600",children:"Iniciar sesión"}),o&&W.jsx("div",{className:"mb-4 p-2 bg-red-100 border-l-4 border-red-500 text-red-700",children:W.jsx("p",{children:o})}),W.jsx("div",{className:"mb-4",children:W.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Email",value:t,onChange:d=>e(d.target.value)})}),W.jsx("div",{className:"mb-6",children:W.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Contraseña",type:"password",value:i,onChange:d=>a(d.target.value)})}),W.jsx("button",{className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:h,children:"Ingresar"})]})})},VM=()=>{const[n,t]=Rt.useState([]),[e,i]=Rt.useState(""),[a,o]=Rt.useState(1),[c,h]=Rt.useState([]),[d,m]=Rt.useState(""),[_,v]=Rt.useState(""),T=(q,X=2500)=>{v(q),setTimeout(()=>v(""),X)},A=q=>n.find(X=>X.id===q);Rt.useEffect(()=>{(async()=>{const st=(await Fc(Ta(ki,"productos"))).docs.map(C=>({id:C.id,...C.data()}));t(st)})()},[]);const I=()=>{const q=A(e),X=parseInt(a);if(!(!q||X<1)){if(q.stock<X)return T(`❌ No hay stock suficiente para "${q.nombre}".`);h(st=>st.find(x=>x.id===q.id)?st.map(x=>x.id===q.id?{...x,cantidad:x.cantidad+X,subtotal:x.precio*(x.cantidad+X)}:x):[...st,{...q,cantidad:X,subtotal:q.precio*X}]),o(1),i("")}},k=(q,X)=>{if(X<1)return;const st=A(q);if(st&&st.stock<X)return T(`❌ No hay suficiente stock para "${st.nombre}".`);h(C=>C.map(x=>x.id===q?{...x,cantidad:X,subtotal:x.precio*X}:x))},M=q=>{h(X=>X.filter(st=>st.id!==q))},K=c.reduce((q,X)=>q+X.subtotal,0),G=async()=>{if(c.length===0)return T("❌ No hay productos en la venta");v("Guardando venta...");const q={cliente:d.trim()||"Consumidor final",items:c.map(({id:X,nombre:st,precio:C,cantidad:x,subtotal:R})=>({id:X,nombre:st,precio:C,cantidad:x,subtotal:R})),total:K,fecha:ie.now(),estado:"pendiente",metodoPago:""};try{const X=await JA(Ta(ki,"ventas"),q);await Promise.all(c.map(st=>ZA(ed(ki,"productos",st.id),{stock:st.stock-st.cantidad}))),h([]),m(""),v("✅ Venta registrada correctamente!"),J(q)}catch(X){console.error("Error al guardar venta:",X),v(`❌ Error: ${X.message}`)}},J=q=>{const X=window.open("","","width=300,height=600");X.document.write(`
            <html>
                <head>
                    <title>Boleta de Venta</title>
                    <style>
                        body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
                        .boleta { width: 240px; margin: auto; text-align: center; }
                        .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
                        .linea { border-top: 1px dashed #000; margin: 8px 0; }
                        .producto { text-align: left; margin: 2px 0; }
                        .total { font-weight: bold; margin-top: 10px; }
                        .metodo { margin-top: 5px; }
                    </style>
                </head>
                <body onload="window.print(); setTimeout(() => window.close(), 500);">
                    <div class="boleta">
                        <div class="titulo">BOLETA DE VENTA</div>
                        <div>Cliente: <strong>${q.cliente}</strong></div>
                        <div>Fecha: ${new Date().toLocaleString()}</div>
                        <div class="linea"></div>
                        <div style="text-align:left">
                            ${q.items.map(st=>`
                                <div class="producto">
                                    ${st.nombre}<br />
                                    ${st.cantidad} x S/ ${st.precio.toFixed(2)} = S/ ${st.subtotal.toFixed(2)}
                                </div>
                            `).join("")}
                        </div>
                        <div class="linea"></div>
                        <div class="total">TOTAL: S/ ${q.total.toFixed(2)}</div>
                        <div class="metodo">Pago: ${q.metodoPago||"---"}</div>
                        <div>${q.estado==="completada"?"✅ Pagado":"❌ Pendiente"}</div>
                        <div class="linea"></div>
                        <div>Gracias por su compra</div>
                    </div>
                </body>
            </html>
        `),X.document.close()};return W.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[W.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Registro de Ventas"}),_&&W.jsx("div",{className:`mb-4 p-3 rounded-md ${_.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_}),W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[W.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Cliente"}),W.jsx("input",{type:"text",value:d,placeholder:"Nombre del cliente",onChange:q=>m(q.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Agregar Productos"}),W.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[W.jsxs("select",{value:e,onChange:q=>i(q.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[W.jsx("option",{value:"",children:"Seleccionar producto"}),n.map(q=>W.jsxs("option",{value:q.id,children:[q.nombre," - S/ ",q.precio.toFixed(2)," (",q.stock," disp.)"]},q.id))]}),W.jsx("input",{type:"number",value:a,min:1,placeholder:"Cantidad",onChange:q=>o(q.target.value),className:"w-24 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),W.jsx("button",{onClick:I,disabled:!e||a<1,className:"bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition disabled:opacity-50",children:"Agregar"})]})]}),W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[W.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Productos en la venta"}),c.length===0?W.jsx("p",{className:"text-gray-500 italic",children:"No hay productos agregados"}):W.jsx("ul",{className:"divide-y divide-gray-200",children:c.map(q=>W.jsxs("li",{className:"py-3",children:[W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsxs("div",{children:[W.jsx("span",{className:"font-medium",children:q.nombre}),W.jsxs("span",{className:"text-gray-600 ml-2",children:["(S/ ",q.precio.toFixed(2),")"]})]}),W.jsxs("div",{className:"font-medium",children:["S/ ",q.subtotal.toFixed(2)]})]}),W.jsxs("div",{className:"flex items-center mt-2 gap-2",children:[W.jsx("button",{onClick:()=>k(q.id,q.cantidad-1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"-"}),W.jsx("span",{className:"w-10 text-center",children:q.cantidad}),W.jsx("button",{onClick:()=>k(q.id,q.cantidad+1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"+"}),W.jsx("button",{onClick:()=>M(q.id),className:"ml-4 text-red-500 hover:text-red-700",children:"Eliminar"})]})]},q.id))}),W.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:W.jsxs("h3",{className:"text-xl font-bold text-right text-orange-600",children:["Total: S/ ",K.toFixed(2)]})})]}),W.jsx("div",{className:"text-center",children:W.jsx("button",{onClick:G,disabled:c.length===0,className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Guardar Venta"})})]})},LM=()=>{const[n,t]=Rt.useState(""),[e,i]=Rt.useState(""),[a,o]=Rt.useState([]),c=async()=>{const _=(await Fc(Ta(ki,"gastos"))).docs.map(v=>({id:v.id,...v.data()}));o(_)},h=async()=>{await JA(Ta(ki,"gastos"),{descripcion:n,monto:parseFloat(e),fecha:ie.now()}),t(""),i(""),c()};Rt.useEffect(()=>{c()},[]);const d=a.reduce((m,_)=>m+_.monto,0);return W.jsxs("div",{children:[W.jsx("h2",{children:"Gastos del mes"}),W.jsx("input",{placeholder:"Descripción",value:n,onChange:m=>t(m.target.value)}),W.jsx("input",{placeholder:"Monto",value:e,onChange:m=>i(m.target.value),type:"number"}),W.jsx("button",{onClick:h,children:"Agregar gasto"}),W.jsx("ul",{children:a.map(m=>W.jsxs("li",{children:[m.descripcion," - S/ ",m.monto.toFixed(2)]},m.id))}),W.jsxs("h3",{children:["Total gastos: S/ ",d.toFixed(2)]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ru(n){return n+.5|0}const er=(n,t,e)=>Math.max(Math.min(n,e),t);function Ec(n){return er(ru(n*2.55),0,255)}function cr(n){return er(ru(n*255),0,255)}function hs(n){return er(ru(n/2.55)/100,0,1)}function dE(n){return er(ru(n*100),0,100)}const Hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},up=[..."0123456789ABCDEF"],UM=n=>up[n&15],zM=n=>up[(n&240)>>4]+up[n&15],Vh=n=>(n&240)>>4===(n&15),BM=n=>Vh(n.r)&&Vh(n.g)&&Vh(n.b)&&Vh(n.a);function jM(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Hn[n[1]]*17,g:255&Hn[n[2]]*17,b:255&Hn[n[3]]*17,a:t===5?Hn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Hn[n[1]]<<4|Hn[n[2]],g:Hn[n[3]]<<4|Hn[n[4]],b:Hn[n[5]]<<4|Hn[n[6]],a:t===9?Hn[n[7]]<<4|Hn[n[8]]:255})),e}const FM=(n,t)=>n<255?t(n):"";function HM(n){var t=BM(n)?UM:zM;return n?"#"+t(n.r)+t(n.g)+t(n.b)+FM(n.a,t):void 0}const qM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nw(n,t,e){const i=t*Math.min(e,1-e),a=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[a(0),a(8),a(4)]}function GM(n,t,e){const i=(a,o=(a+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function YM(n,t,e){const i=nw(n,1,.5);let a;for(t+e>1&&(a=1/(t+e),t*=a,e*=a),a=0;a<3;a++)i[a]*=1-t-e,i[a]+=t;return i}function KM(n,t,e,i,a){return n===a?(t-e)/i+(t<e?6:0):t===a?(e-n)/i+2:(n-t)/i+4}function r_(n){const e=n.r/255,i=n.g/255,a=n.b/255,o=Math.max(e,i,a),c=Math.min(e,i,a),h=(o+c)/2;let d,m,_;return o!==c&&(_=o-c,m=h>.5?_/(2-o-c):_/(o+c),d=KM(e,i,a,_,o),d=d*60+.5),[d|0,m||0,h]}function a_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(cr)}function o_(n,t,e){return a_(nw,n,t,e)}function QM(n,t,e){return a_(YM,n,t,e)}function XM(n,t,e){return a_(GM,n,t,e)}function iw(n){return(n%360+360)%360}function $M(n){const t=qM.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Ec(+t[5]):cr(+t[5]));const a=iw(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=QM(a,o,c):t[1]==="hsv"?i=XM(a,o,c):i=o_(a,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function WM(n,t){var e=r_(n);e[0]=iw(e[0]+t),e=o_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function ZM(n){if(!n)return;const t=r_(n),e=t[0],i=dE(t[1]),a=dE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${a}%, ${hs(n.a)})`:`hsl(${e}, ${i}%, ${a}%)`}const gE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function JM(){const n={},t=Object.keys(mE),e=Object.keys(gE);let i,a,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],a=0;a<e.length;a++)o=e[a],h=h.replace(o,gE[o]);o=parseInt(mE[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let Lh;function tk(n){Lh||(Lh=JM(),Lh.transparent=[0,0,0,0]);const t=Lh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ek=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nk(n){const t=ek.exec(n);let e=255,i,a,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Ec(c):er(c*255,0,255)}return i=+t[1],a=+t[3],o=+t[5],i=255&(t[2]?Ec(i):er(i,0,255)),a=255&(t[4]?Ec(a):er(a,0,255)),o=255&(t[6]?Ec(o):er(o,0,255)),{r:i,g:a,b:o,a:e}}}function ik(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${hs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const xm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function sk(n,t,e){const i=bo(hs(n.r)),a=bo(hs(n.g)),o=bo(hs(n.b));return{r:cr(xm(i+e*(bo(hs(t.r))-i))),g:cr(xm(a+e*(bo(hs(t.g))-a))),b:cr(xm(o+e*(bo(hs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Uh(n,t,e){if(n){let i=r_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=o_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function sw(n,t){return n&&Object.assign(t||{},n)}function pE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=cr(n[3]))):(t=sw(n,{r:0,g:0,b:0,a:1}),t.a=cr(t.a)),t}function rk(n){return n.charAt(0)==="r"?nk(n):$M(n)}class Hc{constructor(t){if(t instanceof Hc)return t;const e=typeof t;let i;e==="object"?i=pE(t):e==="string"&&(i=jM(t)||tk(t)||rk(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=sw(this._rgb);return t&&(t.a=hs(t.a)),t}set rgb(t){this._rgb=pE(t)}rgbString(){return this._valid?ik(this._rgb):void 0}hexString(){return this._valid?HM(this._rgb):void 0}hslString(){return this._valid?ZM(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,a=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,d=i.a-a.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*a.r+.5,i.g=255&m*i.g+o*a.g+.5,i.b=255&m*i.b+o*a.b+.5,i.a=c*i.a+(1-c)*a.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=sk(this._rgb,t._rgb,e)),this}clone(){return new Hc(this.rgb)}alpha(t){return this._rgb.a=cr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ru(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Uh(this._rgb,2,t),this}darken(t){return Uh(this._rgb,2,-t),this}saturate(t){return Uh(this._rgb,1,t),this}desaturate(t){return Uh(this._rgb,1,-t),this}rotate(t){return WM(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const ak=(()=>{let n=0;return()=>n++})();function se(n){return n==null}function ke(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Yn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ti(n,t){return Yn(n)?n:t}function qt(n,t){return typeof n>"u"?t:n}const ok=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function $t(n,t,e,i){let a,o,c;if(ke(n))for(o=n.length,a=0;a<o;a++)t.call(e,n[a],a);else if(Ft(n))for(c=Object.keys(n),o=c.length,a=0;a<o;a++)t.call(e,n[c[a]],c[a])}function Cf(n,t){let e,i,a,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(a=n[e],o=t[e],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Df(n){if(ke(n))return n.map(Df);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let a=0;for(;a<i;++a)t[e[a]]=Df(n[e[a]]);return t}return n}function rw(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function lk(n,t,e,i){if(!rw(n))return;const a=t[n],o=e[n];Ft(a)&&Ft(o)?qc(a,o,i):t[n]=Df(o)}function qc(n,t,e){const i=ke(t)?t:[t],a=i.length;if(!Ft(n))return n;e=e||{};const o=e.merger||lk;let c;for(let h=0;h<a;++h){if(c=i[h],!Ft(c))continue;const d=Object.keys(c);for(let m=0,_=d.length;m<_;++m)o(d[m],n,c,e)}return n}function Dc(n,t){return qc(n,t,{merger:ck})}function ck(n,t,e){if(!rw(n))return;const i=t[n],a=e[n];Ft(i)&&Ft(a)?Dc(i,a):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Df(a))}const _E={"":n=>n,x:n=>n.x,y:n=>n.y};function uk(n){const t=n.split("."),e=[];let i="";for(const a of t)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function hk(n){const t=uk(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function jo(n,t){return(_E[t]||(_E[t]=hk(t)))(n)}function l_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Gc=n=>typeof n<"u",br=n=>typeof n=="function",yE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function fk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const an=Math.PI,ur=2*an,Of=Number.POSITIVE_INFINITY,dk=an/180,ni=an/2,oa=an/4,vE=an*2/3,aw=Math.log10,hr=Math.sign;function af(n,t,e){return Math.abs(n-t)<e}function bE(n){const t=Math.round(n);n=af(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(aw(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function gk(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((a,o)=>a-o).pop(),t}function mk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Mf(n){return!mk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function pk(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function _k(n,t,e){let i,a,o;for(i=0,a=n.length;i<a;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ga(n){return n*(an/180)}function yk(n){return n*(180/an)}function EE(n){if(!Yn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function vk(n,t){const e=t.x-n.x,i=t.y-n.y,a=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*an&&(o+=ur),{angle:o,distance:a}}function bk(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function la(n){return(n%ur+ur)%ur}function Ek(n,t,e,i){const a=la(n),o=la(t),c=la(e),h=la(o-a),d=la(c-a),m=la(a-o),_=la(a-c);return a===o||a===c||i||h>d&&m<_}function ii(n,t,e){return Math.max(t,Math.min(e,n))}function Tk(n){return ii(n,-32768,32767)}function xo(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function c_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,e(o)?a=o:i=o;return{lo:a,hi:i}}const hp=(n,t,e,i)=>c_(n,e,i?a=>{const o=n[a][t];return o<e||o===e&&n[a+1][t]===e}:a=>n[a][t]<e),Sk=(n,t,e)=>c_(n,e,i=>n[i][t]>=e);function Ak(n,t,e){let i=0,a=n.length;for(;i<a&&n[i]<t;)i++;for(;a>i&&n[a-1]>e;)a--;return i>0||a<n.length?n.slice(i,a):n}const ow=["push","pop","shift","splice","unshift"];function wk(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ow.forEach(e=>{const i="_onData"+l_(e),a=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=a.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function TE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,a=i.indexOf(t);a!==-1&&i.splice(a,1),!(i.length>0)&&(ow.forEach(o=>{delete n[o]}),delete n._chartjs)}function lw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const cw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function uw(n,t){let e=[],i=!1;return function(...a){e=a,i||(i=!0,cw.call(window,()=>{i=!1,n.apply(t,e)}))}}function xk(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const u_=n=>n==="start"?"left":n==="end"?"right":"center",en=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Rk=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,zh=n=>n===0||n===1,SE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ur/e)),AE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ur/e)+1,Oc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ni)+1,easeOutSine:n=>Math.sin(n*ni),easeInOutSine:n=>-.5*(Math.cos(an*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>zh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>zh(n)?n:SE(n,.075,.3),easeOutElastic:n=>zh(n)?n:AE(n,.075,.3),easeInOutElastic(n){return zh(n)?n:n<.5?.5*SE(n*2,.1125,.45):.5+.5*AE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Oc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Oc.easeInBounce(n*2)*.5:Oc.easeOutBounce(n*2-1)*.5+.5};function hw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function wE(n){return hw(n)?n:new Hc(n)}function Rm(n){return hw(n)?n:new Hc(n).saturate(.5).darken(.1).hexString()}const Ik=["x","y","borderWidth","radius","tension"],Ck=["color","borderColor","backgroundColor"];function Dk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Ck},numbers:{type:"number",properties:Ik}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ok(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const xE=new Map;function Mk(n,t){t=t||{};const e=n+JSON.stringify(t);let i=xE.get(e);return i||(i=new Intl.NumberFormat(n,t),xE.set(e,i)),i}function fw(n,t,e){return Mk(t,e).format(n)}const kk={values(n){return ke(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let a,o=n;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),o=Nk(n,e)}const c=aw(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:a,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),fw(n,i,d)}};function Nk(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var dw={formatters:kk};function Pk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Sa=Object.create(null),fp=Object.create(null);function Mc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,a=e.length;i<a;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Im(n,t,e){return typeof t=="string"?qc(Mc(n,t),e):qc(Mc(n,""),t)}class Vk{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Rm(a.backgroundColor),this.hoverBorderColor=(i,a)=>Rm(a.borderColor),this.hoverColor=(i,a)=>Rm(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Im(this,t,e)}get(t){return Mc(this,t)}describe(t,e){return Im(fp,t,e)}override(t,e){return Im(Sa,t,e)}route(t,e,i,a){const o=Mc(this,t),c=Mc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=c[a];return Ft(d)?Object.assign({},m,d):qt(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var be=new Vk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Dk,Ok,Pk]);function Lk(n){return!n||se(n.size)||se(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function RE(n,t,e,i,a){let o=t[a];return o||(o=t[a]=n.measureText(a).width,e.push(a)),o>i&&(i=o),i}function ca(n,t,e){const i=n.currentDevicePixelRatio,a=e!==0?Math.max(e/2,.5):0;return Math.round((t-a)*i)/i+a}function IE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function CE(n,t,e,i){gw(n,t,e,i,null)}function gw(n,t,e,i,a){let o,c,h,d,m,_,v,T;const A=t.pointStyle,I=t.rotation,k=t.radius;let M=(I||0)*dk;if(A&&typeof A=="object"&&(o=A.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(M),n.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),A){default:a?n.ellipse(e,i,a/2,k,0,0,ur):n.arc(e,i,k,0,ur),n.closePath();break;case"triangle":_=a?a/2:k,n.moveTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=vE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=vE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),n.closePath();break;case"rectRounded":m=k*.516,d=k-m,c=Math.cos(M+oa)*d,v=Math.cos(M+oa)*(a?a/2-m:d),h=Math.sin(M+oa)*d,T=Math.sin(M+oa)*(a?a/2-m:d),n.arc(e-v,i-h,m,M-an,M-ni),n.arc(e+T,i-c,m,M-ni,M),n.arc(e+v,i+h,m,M,M+ni),n.arc(e-T,i+c,m,M+ni,M+an),n.closePath();break;case"rect":if(!I){d=Math.SQRT1_2*k,_=a?a/2:d,n.rect(e-_,i-d,2*_,2*d);break}M+=oa;case"rectRot":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+T,i-c),n.lineTo(e+v,i+h),n.lineTo(e-T,i+c),n.closePath();break;case"crossRot":M+=oa;case"cross":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"star":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c),M+=oa,v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"line":c=a?a/2:Math.cos(M)*k,h=Math.sin(M)*k,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(M)*(a?a/2:k),i+Math.sin(M)*k);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function mw(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function h_(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function f_(n){n.restore()}function Uk(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),se(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function zk(n,t,e,i,a){if(a.strikethrough||a.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,_=a.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(c,_),n.lineTo(h,_),n.stroke()}}function Bk(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Yc(n,t,e,i,a,o={}){const c=ke(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=a.string,Uk(n,o),d=0;d<c.length;++d)m=c[d],o.backdrop&&Bk(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),se(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),zk(n,e,i,m,o),i+=Number(a.lineHeight);n.restore()}function kf(n,t){const{x:e,y:i,w:a,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*an,an,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,an,ni,!0),n.lineTo(e+a-c.bottomRight,i+o),n.arc(e+a-c.bottomRight,i+o-c.bottomRight,c.bottomRight,ni,0,!0),n.lineTo(e+a,i+c.topRight),n.arc(e+a-c.topRight,i+c.topRight,c.topRight,0,-ni,!0),n.lineTo(e+c.topLeft,i)}const jk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Fk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hk(n,t){const e=(""+n).match(jk);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const qk=n=>+n||0;function pw(n,t){const e={},i=Ft(t),a=i?Object.keys(t):t,o=Ft(n)?i?c=>qt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of a)e[c]=qk(o(c));return e}function _w(n){return pw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Mo(n){return pw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Kn(n){const t=_w(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function rn(n,t){n=n||{},t=t||be.font;let e=qt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=qt(n.style,t.style);i&&!(""+i).match(Fk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:qt(n.family,t.family),lineHeight:Hk(qt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:qt(n.weight,t.weight),string:""};return a.string=Lk(a),a}function Bh(n,t,e,i){let a,o,c;for(a=0,o=n.length;a<o;++a)if(c=n[a],c!==void 0&&c!==void 0)return c}function Gk(n,t,e){const{min:i,max:a}=n,o=ok(t,(a-i)/2),c=(h,d)=>e&&h===0?0:h+d;return{min:c(i,-Math.abs(o)),max:c(a,o)}}function Wo(n,t){return Object.assign(Object.create(n),t)}function d_(n,t=[""],e,i,a=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Ew("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:a,override:h=>d_([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return vw(h,d,()=>Jk(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return OE(h).includes(d)},ownKeys(h){return OE(h)},set(h,d,m){const _=h._storage||(h._storage=a());return h[d]=_[d]=m,delete h._keys,!0}})}function Fo(n,t,e,i){const a={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:yw(n,i),setContext:o=>Fo(n,o,e,i),override:o=>Fo(n.override(o),t,e,i)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return vw(o,c,()=>Kk(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function yw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:a=t.allKeys}=n;return{allKeys:a,scriptable:e,indexable:i,isScriptable:br(e)?e:()=>e,isIndexable:br(i)?i:()=>i}}const Yk=(n,t)=>n?n+l_(t):t,g_=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function vw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Kk(n,t,e){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=n;let h=i[t];return br(h)&&c.isScriptable(t)&&(h=Qk(t,h,n,e)),ke(h)&&h.length&&(h=Xk(t,h,n,c.isIndexable)),g_(t,h)&&(h=Fo(h,a,o&&o[t],c)),h}function Qk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,c||i);return h.delete(n),g_(n,d)&&(d=m_(a._scopes,a,n,d)),d}function Xk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ft(t[0])){const d=t,m=a._scopes.filter(_=>_!==d);t=[];for(const _ of d){const v=m_(m,a,n,_);t.push(Fo(v,o,c&&c[n],h))}}return t}function bw(n,t,e){return br(n)?n(t,e):n}const $k=(n,t)=>n===!0?t:typeof n=="string"?jo(t,n):void 0;function Wk(n,t,e,i,a){for(const o of t){const c=$k(e,o);if(c){n.add(c);const h=bw(c._fallback,e,a);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function m_(n,t,e,i){const a=t._rootScopes,o=bw(t._fallback,e,i),c=[...n,...a],h=new Set;h.add(i);let d=DE(h,c,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=DE(h,c,o,d,i),d===null)?!1:d_(Array.from(h),[""],a,o,()=>Zk(t,e,i))}function DE(n,t,e,i,a){for(;e;)e=Wk(n,t,e,i,a);return e}function Zk(n,t,e){const i=n._getTarget();t in i||(i[t]={});const a=i[t];return ke(a)&&Ft(e)?e:a||{}}function Jk(n,t,e,i){let a;for(const o of t)if(a=Ew(Yk(o,n),e),typeof a<"u")return g_(n,a)?m_(e,i,n,a):a}function Ew(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function OE(n){let t=n._keys;return t||(t=n._keys=tN(n._scopes)),t}function tN(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(a=>!a.startsWith("_")))t.add(i);return Array.from(t)}function p_(){return typeof window<"u"&&typeof document<"u"}function __(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Nf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const rd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function eN(n,t){return rd(n).getPropertyValue(t)}const nN=["top","right","bottom","left"];function pa(n,t,e){const i={};e=e?"-"+e:"";for(let a=0;a<4;a++){const o=nN[a];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const iN=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function sN(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:a,offsetY:o}=i;let c=!1,h,d;if(iN(a,o,n.target))h=a,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,c=!0}return{x:h,y:d,box:c}}function fa(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,a=rd(e),o=a.boxSizing==="border-box",c=pa(a,"padding"),h=pa(a,"border","width"),{x:d,y:m,box:_}=sN(n,e),v=c.left+(_&&h.left),T=c.top+(_&&h.top);let{width:A,height:I}=t;return o&&(A-=c.width+h.width,I-=c.height+h.height),{x:Math.round((d-v)/A*e.width/i),y:Math.round((m-T)/I*e.height/i)}}function rN(n,t,e){let i,a;if(t===void 0||e===void 0){const o=n&&__(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=rd(o),d=pa(h,"border","width"),m=pa(h,"padding");t=c.width-m.width-d.width,e=c.height-m.height-d.height,i=Nf(h.maxWidth,o,"clientWidth"),a=Nf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Of,maxHeight:a||Of}}const jh=n=>Math.round(n*10)/10;function aN(n,t,e,i){const a=rd(n),o=pa(a,"margin"),c=Nf(a.maxWidth,n,"clientWidth")||Of,h=Nf(a.maxHeight,n,"clientHeight")||Of,d=rN(n,t,e);let{width:m,height:_}=d;if(a.boxSizing==="content-box"){const T=pa(a,"border","width"),A=pa(a,"padding");m-=A.width+T.width,_-=A.height+T.height}return m=Math.max(0,m-o.width),_=Math.max(0,i?m/i:_-o.height),m=jh(Math.min(m,c,d.maxWidth)),_=jh(Math.min(_,h,d.maxHeight)),m&&!_&&(_=jh(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&_>d.height&&(_=d.height,m=jh(Math.floor(_*i))),{width:m,height:_}}function ME(n,t,e){const i=t||1,a=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==a||c.width!==o?(n.currentDevicePixelRatio=i,c.height=a,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const oN=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};p_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function kE(n,t){const e=eN(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const lN=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},cN=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ko(n,t,e){return n?lN(t,e):cN()}function Tw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Sw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Fh(n,t,e){return n.options.clip?n[e]:t[e]}function uN(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Fh(e,t,"left"),right:Fh(e,t,"right"),top:Fh(i,t,"top"),bottom:Fh(i,t,"bottom")}:t}function hN(n,t){const e=t._clip;if(e.disabled)return!1;const i=uN(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class fN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,a){const o=e.listeners[a],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=cw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(a.draw(),this._notify(a,i,t,"progress")),o.length||(i.running=!1,this._notify(a,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var cs=new fN;const NE="transparent",dN={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=wE(n||NE),a=i.valid&&wE(t||NE);return a&&a.valid?a.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class gN{constructor(t,e,i,a){const o=e[i];a=Bh([t.to,a,o,t.from]);const c=Bh([t.from,o,a]);this._active=!0,this._fn=t.fn||dN[t.type||typeof c],this._easing=Oc[t.easing]||Oc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=a,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Bh([t.to,e,a,t.from]),this._from=Bh([t.from,a,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,a=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||e<i),!this._active){this._target[a]=h,this._notify(!0);return}if(e<0){this._target[a]=o;return}d=e/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][e]()}}class Aw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const o=t[a];if(!Ft(o))return;const c={};for(const h of e)c[h]=o[h];(ke(o.properties)&&o.properties||[a]).forEach(h=>{(h===a||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,a=pN(t,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&mN(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,a=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const m=c[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(t,e));continue}const _=e[m];let v=o[m];const T=i.get(m);if(v)if(T&&v.active()){v.update(T,_,h);continue}else v.cancel();if(!T||!T.duration){t[m]=_;continue}o[m]=v=new gN(T,t,m,_),a.push(v)}return a}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return cs.add(this._chart,i),!0}}function mN(n,t){const e=[],i=Object.keys(t);for(let a=0;a<i.length;a++){const o=n[i[a]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function pN(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function PE(n,t){const e=n&&n.options||{},i=e.reverse,a=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:a,end:i?a:o}}function _N(n,t,e){if(e===!1)return!1;const i=PE(n,e),a=PE(t,e);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function yN(n){let t,e,i,a;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,a=n.left):t=e=i=a=n,{top:t,right:e,bottom:i,left:a,disabled:n===!1}}function ww(n,t){const e=[],i=n._getSortedDatasetMetas(t);let a,o;for(a=0,o=i.length;a<o;++a)e.push(i[a].index);return e}function VE(n,t,e,i={}){const a=n.keys,o=i.mode==="single";let c,h,d,m;if(t===null)return;let _=!1;for(c=0,h=a.length;c<h;++c){if(d=+a[c],d===e){if(_=!0,i.all)continue;break}m=n.values[d],Yn(m)&&(o||t===0||hr(t)===hr(m))&&(t+=m)}return!_&&!i.all?0:t}function vN(n,t){const{iScale:e,vScale:i}=t,a=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let d,m,_;for(d=0,m=c.length;d<m;++d)_=c[d],h[d]={[a]:_,[o]:n[_]};return h}function Cm(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function bN(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function EN(n){const{min:t,max:e,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:a?e:Number.POSITIVE_INFINITY}}function TN(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function LE(n,t,e,i){for(const a of t.getMatchingVisibleMetas(i).reverse()){const o=n[a.index];if(e&&o>0||!e&&o<0)return a.index}return null}function UE(n,t){const{chart:e,_cachedMeta:i}=n,a=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,d=o.axis,m=c.axis,_=bN(o,c,i),v=t.length;let T;for(let A=0;A<v;++A){const I=t[A],{[d]:k,[m]:M}=I,K=I._stacks||(I._stacks={});T=K[m]=TN(a,_,k),T[h]=M,T._top=LE(T,c,!0,i.type),T._bottom=LE(T,c,!1,i.type);const G=T._visualValues||(T._visualValues={});G[h]=M}}function Dm(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function SN(n,t){return Wo(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function AN(n,t,e){return Wo(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function uc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const a of t){const o=a._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Om=n=>n==="reset"||n==="none",zE=(n,t)=>t?n:Object.assign({},n),wN=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:ww(e,!0),values:null};class xw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Cm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&uc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),a=(v,T,A,I)=>v==="x"?T:v==="r"?I:A,o=e.xAxisID=qt(i.xAxisID,Dm(t,"x")),c=e.yAxisID=qt(i.yAxisID,Dm(t,"y")),h=e.rAxisID=qt(i.rAxisID,Dm(t,"r")),d=e.indexAxis,m=e.iAxisID=a(d,o,c,h),_=e.vAxisID=a(d,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&TE(this._data,this),t._stacked&&uc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e)){const a=this._cachedMeta;this._data=vN(e,a)}else if(i!==e){if(i){TE(i,this);const a=this._cachedMeta;uc(a),a._parsed=[]}e&&Object.isExtensible(e)&&wk(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=e._stacked;e._stacked=Cm(e.vScale,e),e.stack!==i.stack&&(a=!0,uc(e),e.stack=i.stack),this._resyncElements(t),(a||o!==e._stacked)&&(UE(this,e._parsed),e._stacked=Cm(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:c}=i,h=o.axis;let d=t===0&&e===a.length?!0:i._sorted,m=t>0&&i._parsed[t-1],_,v,T;if(this._parsing===!1)i._parsed=a,i._sorted=!0,T=a;else{ke(a[t])?T=this.parseArrayData(i,a,t,e):Ft(a[t])?T=this.parseObjectData(i,a,t,e):T=this.parsePrimitiveData(i,a,t,e);const A=()=>v[h]===null||m&&v[h]<m[h];for(_=0;_<e;++_)i._parsed[_+t]=v=T[_],d&&(A()&&(d=!1),m=v);i._sorted=d}c&&UE(this,T)}parsePrimitiveData(t,e,i,a){const{iScale:o,vScale:c}=t,h=o.axis,d=c.axis,m=o.getLabels(),_=o===c,v=new Array(a);let T,A,I;for(T=0,A=a;T<A;++T)I=T+i,v[T]={[h]:_||o.parse(m[I],I),[d]:c.parse(e[I],I)};return v}parseArrayData(t,e,i,a){const{xScale:o,yScale:c}=t,h=new Array(a);let d,m,_,v;for(d=0,m=a;d<m;++d)_=d+i,v=e[_],h[d]={x:o.parse(v[0],_),y:c.parse(v[1],_)};return h}parseObjectData(t,e,i,a){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let _,v,T,A;for(_=0,v=a;_<v;++_)T=_+i,A=e[T],m[_]={x:o.parse(jo(A,h),T),y:c.parse(jo(A,d),T)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const a=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:ww(a,!0),values:e._stacks[t.axis]._visualValues};return VE(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,a){const o=i[e.axis];let c=o===null?NaN:o;const h=a&&i._stacks[e.axis];a&&h&&(a.values=h,c=VE(a,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&t===i.iScale,c=a.length,h=this._getOtherScale(t),d=wN(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:v}=EN(h);let T,A;function I(){A=a[T];const k=A[h.axis];return!Yn(A[t.axis])||_>k||v<k}for(T=0;T<c&&!(!I()&&(this.updateRangeFromParsed(m,t,A,d),o));++T);if(o){for(T=c-1;T>=0;--T)if(!I()){this.updateRangeFromParsed(m,t,A,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let a,o,c;for(a=0,o=e.length;a<o;++a)c=e[a][t.axis],Yn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,a=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=yN(qt(this.options.clip,_N(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,a=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||a.length-h,m=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,h,d),_=h;_<h+d;++_){const v=a[_];v.hidden||(v.active&&m?c.push(v):v.draw(t,o))}for(_=0;_<c.length;++_)c[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const a=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=AN(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=a.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=SN(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const a=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],d=this.enableOptionSharing&&Gc(i);if(h)return zE(h,d);const m=this.chart.config,_=m.datasetElementScopeKeys(this._type,t),v=a?[`${t}Hover`,"hover",t,""]:[t,""],T=m.getOptionScopes(this.getDataset(),_),A=Object.keys(be.elements[t]),I=()=>this.getContext(i,a,e),k=m.resolveNamedOptions(T,A,I,v);return k.$shared&&(k.$shared=d,o[c]=Object.freeze(zE(k,d))),k}_resolveAnimations(t,e,i){const a=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let d;if(a.options.animation!==!1){const _=this.chart.config,v=_.datasetAnimationScopeKeys(this._type,e),T=_.getOptionScopes(this.getDataset(),v);d=_.createResolver(T,this.getContext(t,i,e))}const m=new Aw(a,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Om(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),a=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==a;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,a){Om(a)?Object.assign(t,i):this._resolveAnimations(e,a).update(t,i)}updateSharedOptions(t,e,i){t&&!Om(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,a){t.active=a;const o=this.getStyle(e,a);this._resolveAnimations(e,i,a).update(t,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const a=i.length,o=e.length,c=Math.min(o,a);c&&this.parse(0,c),o>a?this._insertElements(a,o-a,t):o<a&&this._removeElements(o,a-o)}_insertElements(t,e,i=!0){const a=this._cachedMeta,o=a.data,c=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=c;h--)m[h]=m[h-e]};for(d(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,a){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(t,e);i._stacked&&uc(i,a)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,a]=t;this[e](i,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function xN(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let a=0,o=e.length;a<o;a++)i=i.concat(e[a].controller.getAllParsedValues(n));n._cache.$bar=lw(i.sort((a,o)=>a-o))}return n._cache.$bar}function RN(n){const t=n.iScale,e=xN(t,n.type);let i=t._length,a,o,c,h;const d=()=>{c===32767||c===-32768||(Gc(h)&&(i=Math.min(i,Math.abs(c-h)||i)),h=c)};for(a=0,o=e.length;a<o;++a)c=t.getPixelForValue(e[a]),d();for(h=void 0,a=0,o=t.ticks.length;a<o;++a)c=t.getPixelForTick(a),d();return i}function IN(n,t,e,i){const a=e.barThickness;let o,c;return se(a)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=a*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function CN(n,t,e,i){const a=t.pixels,o=a[n];let c=n>0?a[n-1]:null,h=n<a.length-1?a[n+1]:null;const d=e.categoryPercentage;c===null&&(c=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-c);const m=o-(o-Math.min(c,h))/2*d;return{chunk:Math.abs(h-c)/2*d/i,ratio:e.barPercentage,start:m}}function DN(n,t,e,i){const a=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(a,o),h=Math.max(a,o);let d=c,m=h;Math.abs(c)>Math.abs(h)&&(d=h,m=c),t[e.axis]=m,t._custom={barStart:d,barEnd:m,start:a,end:o,min:c,max:h}}function Rw(n,t,e,i){return ke(n)?DN(n,t,e,i):t[e.axis]=e.parse(n,i),t}function BE(n,t,e,i){const a=n.iScale,o=n.vScale,c=a.getLabels(),h=a===o,d=[];let m,_,v,T;for(m=e,_=e+i;m<_;++m)T=t[m],v={},v[a.axis]=h||a.parse(c[m],m),d.push(Rw(T,v,o,m));return d}function Mm(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function ON(n,t,e){return n!==0?hr(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function MN(n){let t,e,i,a,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(a="end",o="start"):(a="start",o="end"),{start:e,end:i,reverse:t,top:a,bottom:o}}function kN(n,t,e,i){let a=t.borderSkipped;const o={};if(!a){n.borderSkipped=o;return}if(a===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:h,reverse:d,top:m,bottom:_}=MN(n);a==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?a=m:(e._bottom||0)===i?a=_:(o[jE(_,c,h,d)]=!0,a=m)),o[jE(a,c,h,d)]=!0,n.borderSkipped=o}function jE(n,t,e,i){return i?(n=NN(n,t,e),n=FE(n,e,t)):n=FE(n,t,e),n}function NN(n,t,e){return n===t?e:n===e?t:n}function FE(n,t,e){return n==="start"?t:n==="end"?e:n}function PN(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class VN extends xw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,a){return BE(t,e,i,a)}parseArrayData(t,e,i,a){return BE(t,e,i,a)}parseObjectData(t,e,i,a){const{iScale:o,vScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=o.axis==="x"?h:d,_=c.axis==="x"?h:d,v=[];let T,A,I,k;for(T=i,A=i+a;T<A;++T)k=e[T],I={},I[o.axis]=o.parse(jo(k,m),T),v.push(Rw(jo(k,_),I,c,T));return v}updateRangeFromParsed(t,e,i,a){super.updateRangeFromParsed(t,e,i,a);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:a}=e,o=this.getParsed(t),c=o._custom,h=Mm(c)?"["+c.start+", "+c.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,a){const o=a==="reset",{index:c,_cachedMeta:{vScale:h}}=this,d=h.getBasePixel(),m=h.isHorizontal(),_=this._getRuler(),{sharedOptions:v,includeOptions:T}=this._getSharedOptions(e,a);for(let A=e;A<e+i;A++){const I=this.getParsed(A),k=o||se(I[h.axis])?{base:d,head:d}:this._calculateBarValuePixels(A),M=this._calculateBarIndexPixels(A,_),K=(I._stacks||{})[h.axis],G={horizontal:m,base:k.base,enableBorderRadius:!K||Mm(I._custom)||c===K._top||c===K._bottom,x:m?k.head:M.center,y:m?M.center:k.head,height:m?M.size:Math.abs(k.size),width:m?Math.abs(k.size):M.size};T&&(G.options=v||this.resolveDataElementOptions(A,t[A].active?"active":a));const J=G.options||t[A].options;kN(G,J,K,c),PN(G,J,_.ratio),this.updateElement(t[A],A,G,a)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,a=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),o=i.options.stacked,c=[],h=this._cachedMeta.controller.getParsed(e),d=h&&h[i.axis],m=_=>{const v=_._parsed.find(A=>A[i.axis]===d),T=v&&v[_.vScale.axis];if(se(T)||isNaN(T))return!0};for(const _ of a)if(!(e!==void 0&&m(_))&&((o===!1||c.indexOf(_.stack)===-1||o===void 0&&_.stack===void 0)&&c.push(_.stack),_.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[qt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const a=this._getStacks(t,i),o=e!==void 0?a.indexOf(e):-1;return o===-1?a.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,a=[];let o,c;for(o=0,c=e.data.length;o<c;++o)a.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const h=t.barThickness;return{min:h||RN(e),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:a},options:{base:o,minBarLength:c}}=this,h=o||0,d=this.getParsed(t),m=d._custom,_=Mm(m);let v=d[e.axis],T=0,A=i?this.applyStack(e,d,i):v,I,k;A!==v&&(T=A-v,A=v),_&&(v=m.barStart,A=m.barEnd-m.barStart,v!==0&&hr(v)!==hr(m.barEnd)&&(T=0),T+=v);const M=!se(o)&&!_?o:T;let K=e.getPixelForValue(M);if(this.chart.getDataVisibility(t)?I=e.getPixelForValue(T+A):I=K,k=I-K,Math.abs(k)<c){k=ON(k,e,h)*c,v===h&&(K-=k/2);const G=e.getPixelForDecimal(0),J=e.getPixelForDecimal(1),q=Math.min(G,J),X=Math.max(G,J);K=Math.max(Math.min(K,X),q),I=K+k,i&&!_&&(d._stacks[e.axis]._visualValues[a]=e.getValueForPixel(I)-e.getValueForPixel(K))}if(K===e.getPixelForValue(h)){const G=hr(k)*e.getLineWidthForValue(h)/2;K+=G,k-=G}return{size:k,base:K,head:I,center:I+k/2}}_calculateBarIndexPixels(t,e){const i=e.scale,a=this.options,o=a.skipNull,c=qt(a.maxBarThickness,1/0);let h,d;const m=this._getAxisCount();if(e.grouped){const _=o?this._getStackCount(t):e.stackCount,v=a.barThickness==="flex"?CN(t,e,a,_*m):IN(t,e,a,_*m),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,A=this._getAxis().indexOf(qt(T,this.getFirstScaleIdForIndexAxis())),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+A;h=v.start+v.chunk*I+v.chunk/2,d=Math.min(c,v.chunk*v.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),d=Math.min(c,e.min*e.ratio);return{base:h-d/2,head:h+d/2,center:h,size:d}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,a=i.length;let o=0;for(;o<a;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function ua(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class y_{static override(t){Object.assign(y_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ua()}parse(){return ua()}format(){return ua()}add(){return ua()}diff(){return ua()}startOf(){return ua()}endOf(){return ua()}}var LN={_date:y_};function UN(n,t,e,i){const{controller:a,data:o,_sorted:c}=n,h=a._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const m=h._reversePixels?Sk:hp;if(i){if(a._sharedOptions){const _=o[0],v=typeof _.getRange=="function"&&_.getRange(t);if(v){const T=m(o,t,e-v),A=m(o,t,e+v);return{lo:T.lo,hi:A.hi}}}}else{const _=m(o,t,e);if(d){const{vScale:v}=a._cachedMeta,{_parsed:T}=n,A=T.slice(0,_.lo+1).reverse().findIndex(k=>!se(k[v.axis]));_.lo-=Math.max(0,A);const I=T.slice(_.hi).findIndex(k=>!se(k[v.axis]));_.hi+=Math.max(0,I)}return _}}return{lo:0,hi:o.length-1}}function ad(n,t,e,i,a){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:_}=o[h],{lo:v,hi:T}=UN(o[h],t,c,a);for(let A=v;A<=T;++A){const I=_[A];I.skip||i(I,m,A)}}}function zN(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,a){const o=t?Math.abs(i.x-a.x):0,c=e?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function km(n,t,e,i,a){const o=[];return!a&&!n.isPointInArea(t)||ad(n,e,t,function(h,d,m){!a&&!mw(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function BN(n,t,e,i){let a=[];function o(c,h,d){const{startAngle:m,endAngle:_}=c.getProps(["startAngle","endAngle"],i),{angle:v}=vk(c,{x:t.x,y:t.y});Ek(v,m,_)&&a.push({element:c,datasetIndex:h,index:d})}return ad(n,e,t,o),a}function jN(n,t,e,i,a,o){let c=[];const h=zN(e);let d=Number.POSITIVE_INFINITY;function m(_,v,T){const A=_.inRange(t.x,t.y,a);if(i&&!A)return;const I=_.getCenterPoint(a);if(!(!!o||n.isPointInArea(I))&&!A)return;const M=h(t,I);M<d?(c=[{element:_,datasetIndex:v,index:T}],d=M):M===d&&c.push({element:_,datasetIndex:v,index:T})}return ad(n,e,t,m),c}function Nm(n,t,e,i,a,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?BN(n,t,e,a):jN(n,t,e,i,a,o)}function HE(n,t,e,i,a){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return ad(n,e,t,(d,m,_)=>{d[c]&&d[c](t[e],a)&&(o.push({element:d,datasetIndex:m,index:_}),h=h||d.inRange(t.x,t.y,a))}),i&&!h?[]:o}var FN={modes:{index(n,t,e,i){const a=fa(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?km(n,a,o,i,c):Nm(n,a,o,!1,i,c),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const _=h[0].index,v=m.data[_];v&&!v.skip&&d.push({element:v,datasetIndex:m.index,index:_})}),d):[]},dataset(n,t,e,i){const a=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?km(n,a,o,i,c):Nm(n,a,o,!1,i,c);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let _=0;_<m.length;++_)h.push({element:m[_],datasetIndex:d,index:_})}return h},point(n,t,e,i){const a=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return km(n,a,o,i,c)},nearest(n,t,e,i){const a=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Nm(n,a,o,e.intersect,i,c)},x(n,t,e,i){const a=fa(t,n);return HE(n,a,"x",e.intersect,i)},y(n,t,e,i){const a=fa(t,n);return HE(n,a,"y",e.intersect,i)}}};const Iw=["left","top","right","bottom"];function hc(n,t){return n.filter(e=>e.pos===t)}function qE(n,t){return n.filter(e=>Iw.indexOf(e.pos)===-1&&e.box.axis===t)}function fc(n,t){return n.sort((e,i)=>{const a=t?i:e,o=t?e:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function HN(n){const t=[];let e,i,a,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)a=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=a,t.push({index:e,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:c&&o+c,stackWeight:h});return t}function qN(n){const t={};for(const e of n){const{stack:i,pos:a,stackWeight:o}=e;if(!i||!Iw.includes(a))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function GN(n,t){const e=qN(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],_=m&&h.stackWeight/m.weight;h.horizontal?(h.width=_?_*i:d&&t.availableWidth,h.height=a):(h.width=i,h.height=_?_*a:d&&t.availableHeight)}return e}function YN(n){const t=HN(n),e=fc(t.filter(m=>m.box.fullSize),!0),i=fc(hc(t,"left"),!0),a=fc(hc(t,"right")),o=fc(hc(t,"top"),!0),c=fc(hc(t,"bottom")),h=qE(t,"x"),d=qE(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(c).concat(h),chartArea:hc(t,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(c).concat(h)}}function GE(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Cw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function KN(n,t,e,i){const{pos:a,box:o}=e,c=n.maxPadding;if(!Ft(a)){e.size&&(n[a]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[a]+=e.size}o.getPadding&&Cw(c,o.getPadding());const h=Math.max(0,t.outerWidth-GE(c,n,"left","right")),d=Math.max(0,t.outerHeight-GE(c,n,"top","bottom")),m=h!==n.w,_=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:_}:{same:_,other:m}}function QN(n){const t=n.maxPadding;function e(i){const a=Math.max(t[i]-n[i],0);return n[i]+=a,a}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function XN(n,t){const e=t.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Tc(n,t,e,i){const a=[];let o,c,h,d,m,_;for(o=0,c=n.length,m=0;o<c;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,XN(h.horizontal,t));const{same:v,other:T}=KN(t,e,h,i);m|=v&&a.length,_=_||T,d.fullSize||a.push(h)}return m&&Tc(a,t,e,i)||_}function Hh(n,t,e,i,a){n.top=e,n.left=t,n.right=t+i,n.bottom=e+a,n.width=i,n.height=a}function YE(n,t,e,i){const a=e.padding;let{x:o,y:c}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/m.weight||1;if(h.horizontal){const v=t.w*_,T=m.size||d.height;Gc(m.start)&&(c=m.start),d.fullSize?Hh(d,a.left,c,e.outerWidth-a.right-a.left,T):Hh(d,t.left+m.placed,c,v,T),m.start=c,m.placed+=v,c=d.bottom}else{const v=t.h*_,T=m.size||d.width;Gc(m.start)&&(o=m.start),d.fullSize?Hh(d,o,a.top,T,e.outerHeight-a.bottom-a.top):Hh(d,o,t.top+m.placed,T,v),m.start=o,m.placed+=v,o=d.right}}t.x=o,t.y=c}var Gn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const a=Kn(n.options.layout.padding),o=Math.max(t-a.width,0),c=Math.max(e-a.height,0),h=YN(n.boxes),d=h.vertical,m=h.horizontal;$t(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const _=d.reduce((k,M)=>M.box.options&&M.box.options.display===!1?k:k+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/_,hBoxMaxHeight:c/2}),T=Object.assign({},a);Cw(T,Kn(i));const A=Object.assign({maxPadding:T,w:o,h:c,x:a.left,y:a.top},a),I=GN(d.concat(m),v);Tc(h.fullSize,A,v,I),Tc(d,A,v,I),Tc(m,A,v,I)&&Tc(d,A,v,I),QN(A),YE(h.leftAndTop,A,v,I),A.x+=A.w,A.y+=A.h,YE(h.rightAndBottom,A,v,I),n.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},$t(h.chartArea,k=>{const M=k.box;Object.assign(M,n.chartArea),M.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class Dw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,a){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,a?Math.floor(e/a):i)}}isAttached(t){return!0}updateConfig(t){}}class $N extends Dw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const of="$chartjs",WN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},KE=n=>n===null||n==="";function ZN(n,t){const e=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[of]={initial:{height:i,width:a,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",KE(a)){const o=kE(n,"width");o!==void 0&&(n.width=o)}if(KE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=kE(n,"height");o!==void 0&&(n.height=o)}return n}const Ow=oN?{passive:!0}:!1;function JN(n,t,e){n&&n.addEventListener(t,e,Ow)}function tP(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Ow)}function eP(n,t){const e=WN[n.type]||n.type,{x:i,y:a}=fa(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Pf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function nP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Pf(h.addedNodes,i),c=c&&!Pf(h.removedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}function iP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Pf(h.removedNodes,i),c=c&&!Pf(h.addedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}const Kc=new Map;let QE=0;function Mw(){const n=window.devicePixelRatio;n!==QE&&(QE=n,Kc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function sP(n,t){Kc.size||window.addEventListener("resize",Mw),Kc.set(n,t)}function rP(n){Kc.delete(n),Kc.size||window.removeEventListener("resize",Mw)}function aP(n,t,e){const i=n.canvas,a=i&&__(i);if(!a)return;const o=uw((h,d)=>{const m=a.clientWidth;e(h,d),m<a.clientWidth&&e()},window),c=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,_=d.contentRect.height;m===0&&_===0||o(m,_)});return c.observe(a),sP(n,o),c}function Pm(n,t,e){e&&e.disconnect(),t==="resize"&&rP(n)}function oP(n,t,e){const i=n.canvas,a=uw(o=>{n.ctx!==null&&e(eP(o,n))},n);return JN(i,t,a),a}class lP extends Dw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(ZN(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[of])return!1;const i=e[of].initial;["height","width"].forEach(o=>{const c=i[o];se(c)?e.removeAttribute(o):e.setAttribute(o,c)});const a=i.style||{};return Object.keys(a).forEach(o=>{e.style[o]=a[o]}),e.width=e.width,delete e[of],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const a=t.$proxies||(t.$proxies={}),c={attach:nP,detach:iP,resize:aP}[e]||oP;a[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),a=i[e];if(!a)return;({attach:Pm,detach:Pm,resize:Pm}[e]||tP)(t,e,a),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,a){return aN(t,e,i,a)}isAttached(t){const e=t&&__(t);return!!(e&&e.isConnected)}}function cP(n){return!p_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$N:lP}class Zo{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Mf(this.x)&&Mf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const a={};return t.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function uP(n,t){const e=n.options.ticks,i=hP(n),a=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?dP(t):[],c=o.length,h=o[0],d=o[c-1],m=[];if(c>a)return gP(t,m,o,c/a),m;const _=fP(o,t,a);if(c>0){let v,T;const A=c>1?Math.round((d-h)/(c-1)):null;for(qh(t,m,_,se(A)?0:h-A,h),v=0,T=c-1;v<T;v++)qh(t,m,_,o[v],o[v+1]);return qh(t,m,_,d,se(A)?t.length:d+A),m}return qh(t,m,_),m}function hP(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),a=n._maxLength/e;return Math.floor(Math.min(i,a))}function fP(n,t,e){const i=mP(n),a=t.length/e;if(!i)return Math.max(a,1);const o=gk(i);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>a)return d}return Math.max(a,1)}function dP(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function gP(n,t,e,i){let a=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),a++,o=e[a*i])}function qh(n,t,e,i,a){const o=qt(i,0),c=Math.min(qt(a,n.length),n.length);let h=0,d,m,_;for(e=Math.ceil(e),a&&(d=a-i,e=d/Math.floor(d/e)),_=o;_<0;)h++,_=Math.round(o+h*e);for(m=Math.max(o,0);m<c;m++)m===_&&(t.push(n[m]),h++,_=Math.round(o+h*e))}function mP(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const pP=n=>n==="left"?"right":n==="right"?"left":n,XE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,$E=(n,t)=>Math.min(t||n,n);function WE(n,t){const e=[],i=n.length/t,a=n.length;let o=0;for(;o<a;o+=i)e.push(n[Math.floor(o)]);return e}function _P(n,t,e){const i=n.ticks.length,a=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let d=n.getPixelForTick(a),m;if(!(e&&(i===1?m=Math.max(d-o,c-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(a-1))/2,d+=a<t?m:-m,d<o-h||d>c+h)))return d}function yP(n,t){$t(n,e=>{const i=e.gc,a=i.length/2;let o;if(a>t){for(o=0;o<a;++o)delete e.data[i[o]];i.splice(0,a)}})}function dc(n){return n.drawTicks?n.tickLength:0}function ZE(n,t){if(!n.display)return 0;const e=rn(n.font,t),i=Kn(n.padding);return(ke(n.text)?n.text.length:1)*e.lineHeight+i.height}function vP(n,t){return Wo(n,{scale:t,type:"scale"})}function bP(n,t,e){return Wo(n,{tick:e,index:t,type:"tick"})}function EP(n,t,e){let i=u_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=pP(i)),i}function TP(n,t,e,i){const{top:a,left:o,bottom:c,right:h,chart:d}=n,{chartArea:m,scales:_}=d;let v=0,T,A,I;const k=c-a,M=h-o;if(n.isHorizontal()){if(A=en(i,o,h),Ft(e)){const K=Object.keys(e)[0],G=e[K];I=_[K].getPixelForValue(G)+k-t}else e==="center"?I=(m.bottom+m.top)/2+k-t:I=XE(n,e,t);T=h-o}else{if(Ft(e)){const K=Object.keys(e)[0],G=e[K];A=_[K].getPixelForValue(G)-M+t}else e==="center"?A=(m.left+m.right)/2-M+t:A=XE(n,e,t);I=en(i,c,a),v=e==="left"?-ni:ni}return{titleX:A,titleY:I,maxWidth:T,rotation:v}}class Jo extends Zo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:a}=this;return t=Ti(t,Number.POSITIVE_INFINITY),e=Ti(e,Number.NEGATIVE_INFINITY),i=Ti(i,Number.POSITIVE_INFINITY),a=Ti(a,Number.NEGATIVE_INFINITY),{min:Ti(t,i),max:Ti(e,a),minDefined:Yn(t),maxDefined:Yn(e)}}getMinMax(t){let{min:e,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),c;if(a&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)c=h[d].controller.getMinMax(this,t),a||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=a&&e>i?e:i,{min:Ti(e,Ti(i,e)),max:Ti(i,Ti(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:a,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Gk(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?WE(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=uP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i],o.label=oe(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=$E(this.ticks.length,t.ticks.maxTicksLimit),a=e.minRotation||0,o=e.maxRotation;let c=a,h,d,m;if(!this._isVisible()||!e.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const _=this._getLabelSizes(),v=_.widest.width,T=_.highest.height,A=ii(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:A/(i-1),v+6>h&&(h=A/(i-(t.offset?.5:1)),d=this.maxHeight-dc(t.grid)-e.padding-ZE(t.title,this.chart.options.font),m=Math.sqrt(v*v+T*T),c=yk(Math.min(Math.asin(ii((_.highest.height+6)/h,-1,1)),Math.asin(ii(d/m,-1,1))-Math.asin(ii(T/m,-1,1)))),c=Math.max(a,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:a,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=ZE(a,e.options.font);if(h?(t.width=this.maxWidth,t.height=dc(o)+d):(t.height=this.maxHeight,t.width=dc(o)+d),i.display&&this.ticks.length){const{first:m,last:_,widest:v,highest:T}=this._getLabelSizes(),A=i.padding*2,I=ga(this.labelRotation),k=Math.cos(I),M=Math.sin(I);if(h){const K=i.mirror?0:M*v.width+k*T.height;t.height=Math.min(this.maxHeight,t.height+K+A)}else{const K=i.mirror?0:k*v.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+K+A)}this._calculatePadding(m,_,M,k)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,a){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,A=0;d?m?(T=a*t.width,A=i*e.height):(T=i*t.height,A=a*e.width):o==="start"?A=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,A=e.width/2),this.paddingLeft=Math.max((T-_+c)*this.width/(this.width-_),0),this.paddingRight=Math.max((A-v+c)*this.width/(this.width-v),0)}else{let _=e.height/2,v=t.height/2;o==="start"?(_=0,v=t.height):o==="end"&&(_=e.height,v=0),this.paddingTop=_+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)se(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=WE(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:a,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(e/$E(e,i));let m=0,_=0,v,T,A,I,k,M,K,G,J,q,X;for(v=0;v<e;v+=d){if(I=t[v].label,k=this._resolveTickFontOptions(v),a.font=M=k.string,K=o[M]=o[M]||{data:{},gc:[]},G=k.lineHeight,J=q=0,!se(I)&&!ke(I))J=RE(a,K.data,K.gc,J,I),q=G;else if(ke(I))for(T=0,A=I.length;T<A;++T)X=I[T],!se(X)&&!ke(X)&&(J=RE(a,K.data,K.gc,J,X),q+=G);c.push(J),h.push(q),m=Math.max(J,m),_=Math.max(q,_)}yP(o,e);const st=c.indexOf(m),C=h.indexOf(_),x=R=>({width:c[R]||0,height:h[R]||0});return{first:x(0),last:x(e-1),widest:x(st),highest:x(C),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Tk(this._alignToPixels?ca(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=bP(this.getContext(),t,i))}return this.$context||(this.$context=vP(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ga(this.labelRotation),i=Math.abs(Math.cos(e)),a=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>h*a?h/i:d/a:d*a<h*i?d/i:h/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,a=this.options,{grid:o,position:c,border:h}=a,d=o.offset,m=this.isHorizontal(),v=this.ticks.length+(d?1:0),T=dc(o),A=[],I=h.setContext(this.getContext()),k=I.display?I.width:0,M=k/2,K=function(Q){return ca(i,Q,k)};let G,J,q,X,st,C,x,R,N,P,L,D;if(c==="top")G=K(this.bottom),C=this.bottom-T,R=G-M,P=K(t.top)+M,D=t.bottom;else if(c==="bottom")G=K(this.top),P=t.top,D=K(t.bottom)-M,C=G+M,R=this.top+T;else if(c==="left")G=K(this.right),st=this.right-T,x=G-M,N=K(t.left)+M,L=t.right;else if(c==="right")G=K(this.left),N=t.left,L=K(t.right)-M,st=G+M,x=this.left+T;else if(e==="x"){if(c==="center")G=K((t.top+t.bottom)/2+.5);else if(Ft(c)){const Q=Object.keys(c)[0],ot=c[Q];G=K(this.chart.scales[Q].getPixelForValue(ot))}P=t.top,D=t.bottom,C=G+M,R=C+T}else if(e==="y"){if(c==="center")G=K((t.left+t.right)/2);else if(Ft(c)){const Q=Object.keys(c)[0],ot=c[Q];G=K(this.chart.scales[Q].getPixelForValue(ot))}st=G-M,x=st-T,N=t.left,L=t.right}const Wt=qt(a.ticks.maxTicksLimit,v),At=Math.max(1,Math.ceil(v/Wt));for(J=0;J<v;J+=At){const Q=this.getContext(J),ot=o.setContext(Q),gt=h.setContext(Q),Nt=ot.lineWidth,V=ot.color,it=gt.dash||[],ct=gt.dashOffset,at=ot.tickWidth,dt=ot.tickColor,wt=ot.tickBorderDash||[],pt=ot.tickBorderDashOffset;q=_P(this,J,d),q!==void 0&&(X=ca(i,q,Nt),m?st=x=N=L=X:C=R=P=D=X,A.push({tx1:st,ty1:C,tx2:x,ty2:R,x1:N,y1:P,x2:L,y2:D,width:Nt,color:V,borderDash:it,borderDashOffset:ct,tickWidth:at,tickColor:dt,tickBorderDash:wt,tickBorderDashOffset:pt}))}return this._ticksLength=v,this._borderValue=G,A}_computeLabelItems(t){const e=this.axis,i=this.options,{position:a,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:_,mirror:v}=o,T=dc(i.grid),A=T+_,I=v?-_:A,k=-ga(this.labelRotation),M=[];let K,G,J,q,X,st,C,x,R,N,P,L,D="middle";if(a==="top")st=this.bottom-I,C=this._getXAxisLabelAlignment();else if(a==="bottom")st=this.top+I,C=this._getXAxisLabelAlignment();else if(a==="left"){const At=this._getYAxisLabelAlignment(T);C=At.textAlign,X=At.x}else if(a==="right"){const At=this._getYAxisLabelAlignment(T);C=At.textAlign,X=At.x}else if(e==="x"){if(a==="center")st=(t.top+t.bottom)/2+A;else if(Ft(a)){const At=Object.keys(a)[0],Q=a[At];st=this.chart.scales[At].getPixelForValue(Q)+A}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(a==="center")X=(t.left+t.right)/2-A;else if(Ft(a)){const At=Object.keys(a)[0],Q=a[At];X=this.chart.scales[At].getPixelForValue(Q)}C=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(d==="start"?D="top":d==="end"&&(D="bottom"));const Wt=this._getLabelSizes();for(K=0,G=h.length;K<G;++K){J=h[K],q=J.label;const At=o.setContext(this.getContext(K));x=this.getPixelForTick(K)+o.labelOffset,R=this._resolveTickFontOptions(K),N=R.lineHeight,P=ke(q)?q.length:1;const Q=P/2,ot=At.color,gt=At.textStrokeColor,Nt=At.textStrokeWidth;let V=C;c?(X=x,C==="inner"&&(K===G-1?V=this.options.reverse?"left":"right":K===0?V=this.options.reverse?"right":"left":V="center"),a==="top"?m==="near"||k!==0?L=-P*N+N/2:m==="center"?L=-Wt.highest.height/2-Q*N+N:L=-Wt.highest.height+N/2:m==="near"||k!==0?L=N/2:m==="center"?L=Wt.highest.height/2-Q*N:L=Wt.highest.height-P*N,v&&(L*=-1),k!==0&&!At.showLabelBackdrop&&(X+=N/2*Math.sin(k))):(st=x,L=(1-P)*N/2);let it;if(At.showLabelBackdrop){const ct=Kn(At.backdropPadding),at=Wt.heights[K],dt=Wt.widths[K];let wt=L-ct.top,pt=0-ct.left;switch(D){case"middle":wt-=at/2;break;case"bottom":wt-=at;break}switch(C){case"center":pt-=dt/2;break;case"right":pt-=dt;break;case"inner":K===G-1?pt-=dt:K>0&&(pt-=dt/2);break}it={left:pt,top:wt,width:dt+ct.width,height:at+ct.height,color:At.backdropColor}}M.push({label:q,font:R,textOffset:L,options:{rotation:k,color:ot,strokeColor:gt,strokeWidth:Nt,textAlign:V,textBaseline:D,translation:[X,st],backdrop:it}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ga(this.labelRotation))return t==="top"?"left":"right";let a="center";return e.align==="start"?a="left":e.align==="end"?a="right":e.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,d=c.widest.width;let m,_;return e==="left"?a?(_=this.right+o,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_+=d)):(_=this.right-h,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_=this.left)):e==="right"?a?(_=this.left+o,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_-=d)):(_=this.left+h,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_=this.right)):m="right",{textAlign:m,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:a,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,a,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const a=this.ticks.findIndex(o=>o.value===t);return a>=0?e.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(d,m,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=a.length;o<c;++o){const d=a[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,_,v,T;this.isHorizontal()?(m=ca(t,this.left,c)-c/2,_=ca(t,this.right,h)+h/2,v=T=d):(v=ca(t,this.top,c)-c/2,T=ca(t,this.bottom,h)+h/2,m=_=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,v),e.lineTo(_,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&h_(i,a);const o=this.getLabelItems(t);for(const c of o){const h=c.options,d=c.font,m=c.label,_=c.textOffset;Yc(i,m,0,_,d,h)}a&&f_(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:a}}=this;if(!i.display)return;const o=rn(i.font),c=Kn(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(d+=c.bottom,ke(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:m,titleY:_,maxWidth:v,rotation:T}=TP(this,d,e,h);Yc(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:T,textAlign:EP(h,e,a),textBaseline:"middle",translation:[m,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=qt(t.grid&&t.grid.z,-1),a=qt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Jo.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&a.push(h)}return a}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return rn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;wP(e)&&(i=this.register(e));const a=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in a||(a[o]=t,SP(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,a=this.scope;i in e&&delete e[i],a&&i in be[a]&&(delete be[a][i],this.override&&delete Sa[i])}}function SP(n,t,e){const i=qc(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&AP(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function AP(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),a=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),d=c.join(".");be.route(o,a,d,h)})}function wP(n){return"id"in n&&"defaults"in n}class xP{constructor(){this.controllers=new Gh(xw,"datasets",!0),this.elements=new Gh(Zo,"elements"),this.plugins=new Gh(Object,"plugins"),this.scales=new Gh(Jo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(t,o,a):$t(a,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const a=l_(t);oe(i["before"+a],[],i),e[t](i),oe(i["after"+a],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const a=e.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return a}}var Ai=new xP;class RP{constructor(){this._init=[]}notify(t,e,i,a){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=a?this._descriptors(t).filter(a):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,a){a=a||{};for(const o of t){const c=o.plugin,h=c[i],d=[e,a,o.options];if(oe(h,d,c)===!1&&a.cancelable)return!1}return!0}invalidate(){se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,a=qt(i.options&&i.options.plugins,{}),o=IP(i);return a===!1&&!e?[]:DP(t,o,a,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,a=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(a(e,i),t,"stop"),this._notify(a(i,e),t,"start")}}function IP(n){const t={},e=[],i=Object.keys(Ai.plugins.items);for(let o=0;o<i.length;o++)e.push(Ai.getPlugin(i[o]));const a=n.plugins||[];for(let o=0;o<a.length;o++){const c=a[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function CP(n,t){return!t&&n===!1?null:n===!0?{}:n}function DP(n,{plugins:t,localIds:e},i,a){const o=[],c=n.getContext();for(const h of t){const d=h.id,m=CP(i[d],a);m!==null&&o.push({plugin:h,options:OP(n.config,{plugin:h,local:e[d]},m,c)})}return o}function OP(n,{plugin:t,local:e},i,a){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dp(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function MP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function kP(n,t){return n===t?"_index_":"_value_"}function JE(n){if(n==="x"||n==="y"||n==="r")return n}function NP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function gp(n,...t){if(JE(n))return n;for(const e of t){const i=e.axis||NP(e.position)||n.length>1&&JE(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function tT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function PP(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return tT(n,"x",e[0])||tT(n,"y",e[0])}return{}}function VP(n,t){const e=Sa[n.type]||{scales:{}},i=t.scales||{},a=dp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!Ft(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=gp(c,h,PP(c,n),be.scales[h.type]),m=kP(d,a),_=e.scales||{};o[c]=Dc(Object.create(null),[{axis:d},h,_[d],_[m]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,d=c.indexAxis||dp(h,t),_=(Sa[h]||{}).scales||{};Object.keys(_).forEach(v=>{const T=MP(v,d),A=c[T+"AxisID"]||T;o[A]=o[A]||Object.create(null),Dc(o[A],[{axis:T},i[A],_[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Dc(h,[be.scales[h.type],be.scale])}),o}function kw(n){const t=n.options||(n.options={});t.plugins=qt(t.plugins,{}),t.scales=VP(n,t)}function Nw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function LP(n){return n=n||{},n.data=Nw(n.data),kw(n),n}const eT=new Map,Pw=new Set;function Yh(n,t){let e=eT.get(n);return e||(e=t(),eT.set(n,e),Pw.add(e)),e}const gc=(n,t,e)=>{const i=jo(t,e);i!==void 0&&n.add(i)};class UP{constructor(t){this._config=LP(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Nw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Yh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Yh(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Yh(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Yh(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let a=i.get(t);return(!a||e)&&(a=new Map,i.set(t,a)),a}getOptionScopes(t,e,i){const{options:a,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const d=new Set;e.forEach(_=>{t&&(d.add(t),_.forEach(v=>gc(d,t,v))),_.forEach(v=>gc(d,a,v)),_.forEach(v=>gc(d,Sa[o]||{},v)),_.forEach(v=>gc(d,be,v)),_.forEach(v=>gc(d,fp,v))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),Pw.has(e)&&c.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,Sa[e]||{},be.datasets[e]||{},{type:e},be,fp]}resolveNamedOptions(t,e,i,a=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=nT(this._resolverCache,t,a);let d=c;if(BP(c,e)){o.$shared=!1,i=br(i)?i():i;const m=this.createResolver(t,i,h);d=Fo(c,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],a){const{resolver:o}=nT(this._resolverCache,t,i);return Ft(e)?Fo(o,e,void 0,a):o}}function nT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const a=e.join();let o=i.get(a);return o||(o={resolver:d_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(a,o)),o}const zP=n=>Ft(n)&&Object.getOwnPropertyNames(n).some(t=>br(n[t]));function BP(n,t){const{isScriptable:e,isIndexable:i}=yw(n);for(const a of t){const o=e(a),c=i(a),h=(c||o)&&n[a];if(o&&(br(h)||zP(h))||c&&ke(h))return!0}return!1}var jP="4.5.0";const FP=["top","bottom","left","right","chartArea"];function iT(n,t){return n==="top"||n==="bottom"||FP.indexOf(n)===-1&&t==="x"}function sT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function rT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function HP(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function Vw(n){return p_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const lf={},aT=n=>{const t=Vw(n);return Object.values(lf).filter(e=>e.canvas===t).pop()};function qP(n,t,e){const i=Object.keys(n);for(const a of i){const o=+a;if(o>=t){const c=n[a];delete n[a],(e>0||o>t)&&(n[o+e]=c)}}}function GP(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let od=class{static defaults=be;static instances=lf;static overrides=Sa;static registry=Ai;static version=jP;static getChart=aT;static register(...t){Ai.add(...t),oT()}static unregister(...t){Ai.remove(...t),oT()}constructor(t,e){const i=this.config=new UP(e),a=Vw(t),o=aT(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||cP(a)),this.platform.updateConfig(i);const h=this.platform.acquireContext(a,c.aspectRatio),d=h&&h.canvas,m=d&&d.height,_=d&&d.width;if(this.id=ak(),this.ctx=h,this.canvas=d,this.width=_,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xk(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],lf[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}cs.listen(this,"complete",rT),cs.listen(this,"progress",HP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:a,_aspectRatio:o}=this;return se(t)?e&&o?o:a?i/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ME(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return IE(this.canvas,this.ctx),this}stop(){return cs.stop(this),this}resize(t,e){cs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(a,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,ME(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),oe(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};$t(e,(i,a)=>{i.id=a})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,a=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],d=gp(c,h),m=d==="r",_=d==="x";return{options:h,dposition:m?"chartArea":_?"bottom":"left",dtype:m?"radialLinear":_?"category":"linear"}}))),$t(o,c=>{const h=c.options,d=h.id,m=gp(d,h),_=qt(h.type,c.dtype);(h.position===void 0||iT(h.position,m)!==iT(c.dposition))&&(h.position=c.dposition),a[d]=!0;let v=null;if(d in i&&i[d].type===_)v=i[d];else{const T=Ai.getScale(_);v=new T({id:d,type:_,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),$t(a,(c,h)=>{c||delete i[h]}),$t(i,c=>{Gn.configure(this,c,c.options),Gn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((a,o)=>a.index-o.index),i>e){for(let a=e;a<i;++a)this._destroyDatasetMeta(a);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(sT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,a)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=e.length;i<a;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||dp(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=Ai.getController(h),{datasetElementType:m,dataElementType:_}=be.datasets[h];Object.assign(d,{dataElementType:Ai.getElement(_),datasetElementType:m&&Ai.getElement(m)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){$t(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,_=this.data.datasets.length;m<_;m++){const{controller:v}=this.getDatasetMeta(m),T=!a&&o.indexOf(v)===-1;v.buildOrUpdateElements(T),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),a||$t(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sT("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){$t(this.scales,t=>{Gn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!yE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of e){const c=i==="_removeElements"?-o:o;qP(t,a,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),a=i(0);for(let o=1;o<e;o++)if(!yE(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],$t(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,br(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),a={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(e),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cs.has(this)?this.attached&&!cs.running(this)&&cs.start(this):(this.draw(),rT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let a,o;for(a=0,o=e.length;a<o;++a){const c=e[a];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},a=hN(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&h_(e,a),t.controller.draw(),a&&f_(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return mw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,a){const o=FN.modes[e];return typeof o=="function"?o(this,t,i,a):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let a=i.filter(o=>o&&o._dataset===e).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Wo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const a=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,a);Gc(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?a:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),cs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),IE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete lf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},a=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};$t(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},a=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let c;const h=()=>{a("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){$t(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},$t(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const a=i?"set":"remove";let o,c,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){c=t[h];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[a+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Cf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const a=this.options.hover,o=(d,m)=>d.filter(_=>!m.some(v=>_.datasetIndex===v.datasetIndex&&_.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},a=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:a=[],options:o}=this,c=e,h=this._getActiveElements(t,a,i,c),d=fk(t),m=GP(t,this._lastEvent,i,d);i&&(this._lastEvent=null,oe(o.onHover,[t,h,this],this),d&&oe(o.onClick,[t,h,this],this));const _=!Cf(h,a);return(_||e)&&(this._active=h,this._updateHoverStyles(h,a,e)),this._lastEvent=m,_}_getActiveElements(t,e,i,a){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,a)}};function oT(){return $t(od.instances,n=>n._plugins.invalidate())}function Lw(n,t){const{x:e,y:i,base:a,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let h,d,m,_,v;return n.horizontal?(v=c/2,h=Math.min(e,a),d=Math.max(e,a),m=i-v,_=i+v):(v=o/2,h=e-v,d=e+v,m=Math.min(i,a),_=Math.max(i,a)),{left:h,top:m,right:d,bottom:_}}function nr(n,t,e,i){return n?0:ii(t,e,i)}function YP(n,t,e){const i=n.options.borderWidth,a=n.borderSkipped,o=_w(i);return{t:nr(a.top,o.top,0,e),r:nr(a.right,o.right,0,t),b:nr(a.bottom,o.bottom,0,e),l:nr(a.left,o.left,0,t)}}function KP(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),a=n.options.borderRadius,o=Mo(a),c=Math.min(t,e),h=n.borderSkipped,d=i||Ft(a);return{topLeft:nr(!d||h.top||h.left,o.topLeft,0,c),topRight:nr(!d||h.top||h.right,o.topRight,0,c),bottomLeft:nr(!d||h.bottom||h.left,o.bottomLeft,0,c),bottomRight:nr(!d||h.bottom||h.right,o.bottomRight,0,c)}}function QP(n){const t=Lw(n),e=t.right-t.left,i=t.bottom-t.top,a=YP(n,e/2,i/2),o=KP(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+a.l,y:t.top+a.t,w:e-a.l-a.r,h:i-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function Vm(n,t,e,i){const a=t===null,o=e===null,h=n&&!(a&&o)&&Lw(n,i);return h&&(a||xo(t,h.left,h.right))&&(o||xo(e,h.top,h.bottom))}function XP(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function $P(n,t){n.rect(t.x,t.y,t.w,t.h)}function Lm(n,t,e={}){const i=n.x!==e.x?-t:0,a=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-a;return{x:n.x+i,y:n.y+a,w:n.w+o,h:n.h+c,radius:n.radius}}class WP extends Zo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:a}}=this,{inner:o,outer:c}=QP(this),h=XP(c.radius)?kf:$P;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),h(t,Lm(c,e,o)),t.clip(),h(t,Lm(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,Lm(o,e)),t.fillStyle=a,t.fill(),t.restore()}inRange(t,e,i){return Vm(this,t,e,i)}inXRange(t,e){return Vm(this,t,null,e)}inYRange(t,e){return Vm(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+a)/2:e,y:o?i:(i+a)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const lT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},ZP=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class cT extends Zo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=oe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,a)=>t.sort(i,a,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,a=rn(i.font),o=a.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=lT(i,o);let m,_;e.font=a.string,this.isHorizontal()?(m=this.maxWidth,_=this._fitRows(c,o,h,d)+10):(_=this.maxHeight,m=this._fitCols(c,a,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,a){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],_=a+h;let v=t;o.textAlign="left",o.textBaseline="middle";let T=-1,A=-_;return this.legendItems.forEach((I,k)=>{const M=i+e/2+o.measureText(I.text).width;(k===0||m[m.length-1]+M+2*h>c)&&(v+=_,m[m.length-(k>0?0:1)]=0,A+=_,T++),d[k]={left:0,top:A,row:T,width:M,height:a},m[m.length-1]+=M+h}),v}_fitCols(t,e,i,a){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],_=c-t;let v=h,T=0,A=0,I=0,k=0;return this.legendItems.forEach((M,K)=>{const{itemWidth:G,itemHeight:J}=JP(i,e,o,M,a);K>0&&A+J+2*h>_&&(v+=T+h,m.push({width:T,height:A}),I+=T+h,k++,T=A=0),d[K]={left:I,top:A,col:k,width:G,height:J},T=Math.max(T,G),A+=J+h}),v+=T,m.push({width:T,height:A}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:a},rtl:o}}=this,c=ko(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=en(i,this.left+a,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=en(i,this.left+a,this.right-this.lineWidths[h])),m.top+=this.top+t+a,m.left=c.leftForLtr(c.x(d),m.width),d+=m.width+a}else{let h=0,d=en(i,this.top+t+a,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=en(i,this.top+t+a,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+a,m.left=c.leftForLtr(c.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;h_(t,this),this._draw(),f_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:a}=this,{align:o,labels:c}=t,h=be.color,d=ko(t.rtl,this.left,this.width),m=rn(c.font),{padding:_}=c,v=m.size,T=v/2;let A;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:I,boxHeight:k,itemHeight:M}=lT(c,v),K=function(st,C,x){if(isNaN(I)||I<=0||isNaN(k)||k<0)return;a.save();const R=qt(x.lineWidth,1);if(a.fillStyle=qt(x.fillStyle,h),a.lineCap=qt(x.lineCap,"butt"),a.lineDashOffset=qt(x.lineDashOffset,0),a.lineJoin=qt(x.lineJoin,"miter"),a.lineWidth=R,a.strokeStyle=qt(x.strokeStyle,h),a.setLineDash(qt(x.lineDash,[])),c.usePointStyle){const N={radius:k*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:R},P=d.xPlus(st,I/2),L=C+T;gw(a,N,P,L,c.pointStyleWidth&&I)}else{const N=C+Math.max((v-k)/2,0),P=d.leftForLtr(st,I),L=Mo(x.borderRadius);a.beginPath(),Object.values(L).some(D=>D!==0)?kf(a,{x:P,y:N,w:I,h:k,radius:L}):a.rect(P,N,I,k),a.fill(),R!==0&&a.stroke()}a.restore()},G=function(st,C,x){Yc(a,x.text,st,C+M/2,m,{strikethrough:x.hidden,textAlign:d.textAlign(x.textAlign)})},J=this.isHorizontal(),q=this._computeTitleHeight();J?A={x:en(o,this.left+_,this.right-i[0]),y:this.top+_+q,line:0}:A={x:this.left+_,y:en(o,this.top+q+_,this.bottom-e[0].height),line:0},Tw(this.ctx,t.textDirection);const X=M+_;this.legendItems.forEach((st,C)=>{a.strokeStyle=st.fontColor,a.fillStyle=st.fontColor;const x=a.measureText(st.text).width,R=d.textAlign(st.textAlign||(st.textAlign=c.textAlign)),N=I+T+x;let P=A.x,L=A.y;d.setWidth(this.width),J?C>0&&P+N+_>this.right&&(L=A.y+=X,A.line++,P=A.x=en(o,this.left+_,this.right-i[A.line])):C>0&&L+X>this.bottom&&(P=A.x=P+e[A.line].width+_,A.line++,L=A.y=en(o,this.top+q+_,this.bottom-e[A.line].height));const D=d.x(P);if(K(D,L,st),P=Rk(R,P+I+T,J?P+N:this.right,t.rtl),G(d.x(P),L,st),J)A.x+=N+_;else if(typeof st.text!="string"){const Wt=m.lineHeight;A.y+=Uw(st,Wt)+_}else A.y+=X}),Sw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=rn(e.font),a=Kn(e.padding);if(!e.display)return;const o=ko(t.rtl,this.left,this.width),c=this.ctx,h=e.position,d=i.size/2,m=a.top+d;let _,v=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+m,v=en(t.align,v,this.right-T);else{const I=this.columnSizes.reduce((k,M)=>Math.max(k,M.height),0);_=m+en(t.align,this.top,this.bottom-I-t.labels.padding-this._computeTitleHeight())}const A=en(h,v,v+T);c.textAlign=o.textAlign(u_(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Yc(c,e.text,A,_,i)}_computeTitleHeight(){const t=this.options.title,e=rn(t.font),i=Kn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,a,o;if(xo(t,this.left,this.right)&&xo(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],xo(t,a.left,a.left+a.width)&&xo(e,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!nV(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,o=ZP(a,i);a&&!o&&oe(e.onLeave,[t,a,this],this),this._hoveredItem=i,i&&!o&&oe(e.onHover,[t,i,this],this)}else i&&oe(e.onClick,[t,i,this],this)}}function JP(n,t,e,i,a){const o=tV(i,n,t,e),c=eV(a,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function tV(n,t,e,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(a).width}function eV(n,t,e){let i=n;return typeof t.text!="string"&&(i=Uw(t,e)),i}function Uw(n,t){const e=n.text?n.text.length:0;return t*e}function nV(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var iV={id:"legend",_element:cT,start(n,t,e){const i=n.legend=new cT({ctx:n.ctx,options:e,chart:n});Gn.configure(n,i,e),Gn.addBox(n,i)},stop(n){Gn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Gn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,a=e.chart;a.isDatasetVisible(i)?(a.hide(i),t.hidden=!0):(a.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:a,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),_=Kn(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:c&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class zw extends Zo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const a=ke(i.text)?i.text.length:1;this._padding=Kn(i.padding);const o=a*rn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:a,right:o,options:c}=this,h=c.align;let d=0,m,_,v;return this.isHorizontal()?(_=en(h,i,o),v=e+t,m=o-i):(c.position==="left"?(_=i+t,v=en(h,a,e),d=an*-.5):(_=o-t,v=en(h,e,a),d=an*.5),m=a-e),{titleX:_,titleY:v,maxWidth:m,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=rn(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:d,rotation:m}=this._drawArgs(o);Yc(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:m,textAlign:u_(e.align),textBaseline:"middle",translation:[c,h]})}}function sV(n,t){const e=new zw({ctx:n.ctx,options:t,chart:n});Gn.configure(n,e,t),Gn.addBox(n,e),n.titleBlock=e}var rV={id:"title",_element:zw,start(n,t,e){sV(n,e)},stop(n){const t=n.titleBlock;Gn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Gn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sc={average(n){if(!n.length)return!1;let t,e,i=new Set,a=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:a/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,a=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),_=bk(t,m);_<a&&(a=_,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Si(n,t){return t&&(ke(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function us(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function aV(n,t){const{element:e,datasetIndex:i,index:a}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(a);return{chart:n,label:c,parsed:o.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:h,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:e}}function uT(n,t){const e=n.chart.ctx,{body:i,footer:a,title:o}=n,{boxWidth:c,boxHeight:h}=t,d=rn(t.bodyFont),m=rn(t.titleFont),_=rn(t.footerFont),v=o.length,T=a.length,A=i.length,I=Kn(t.padding);let k=I.height,M=0,K=i.reduce((q,X)=>q+X.before.length+X.lines.length+X.after.length,0);if(K+=n.beforeBody.length+n.afterBody.length,v&&(k+=v*m.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),K){const q=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;k+=A*q+(K-A)*d.lineHeight+(K-1)*t.bodySpacing}T&&(k+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let G=0;const J=function(q){M=Math.max(M,e.measureText(q).width+G)};return e.save(),e.font=m.string,$t(n.title,J),e.font=d.string,$t(n.beforeBody.concat(n.afterBody),J),G=t.displayColors?c+2+t.boxPadding:0,$t(i,q=>{$t(q.before,J),$t(q.lines,J),$t(q.after,J)}),G=0,e.font=_.string,$t(n.footer,J),e.restore(),M+=I.width,{width:M,height:k}}function oV(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function lV(n,t,e,i){const{x:a,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&a+o+c>t.width||n==="right"&&a-o-c<0)return!0}function cV(n,t,e,i){const{x:a,width:o}=e,{width:c,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=a<=(h+d)/2?"left":"right":a<=o/2?m="left":a>=c-o/2&&(m="right"),lV(m,n,t,e)&&(m="center"),m}function hT(n,t,e){const i=e.yAlign||t.yAlign||oV(n,e);return{xAlign:e.xAlign||t.xAlign||cV(n,t,e,i),yAlign:i}}function uV(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function hV(n,t,e){let{y:i,height:a}=n;return t==="top"?i+=e:t==="bottom"?i-=a+e:i-=a/2,i}function fT(n,t,e,i){const{caretSize:a,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:d}=e,m=a+o,{topLeft:_,topRight:v,bottomLeft:T,bottomRight:A}=Mo(c);let I=uV(t,h);const k=hV(t,d,m);return d==="center"?h==="left"?I+=m:h==="right"&&(I-=m):h==="left"?I-=Math.max(_,T)+a:h==="right"&&(I+=Math.max(v,A)+a),{x:ii(I,0,i.width-t.width),y:ii(k,0,i.height-t.height)}}function Kh(n,t,e){const i=Kn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function dT(n){return Si([],us(n))}function fV(n,t,e){return Wo(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function gT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Bw={beforeTitle:ls,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return se(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function pn(n,t,e,i){const a=n[t].call(e,i);return typeof a>"u"?Bw[t].call(e,i):a}class mT extends Zo{static positioners=Sc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&e.options.animation&&i.animations,o=new Aw(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=fV(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,a=pn(i,"beforeTitle",this,t),o=pn(i,"title",this,t),c=pn(i,"afterTitle",this,t);let h=[];return h=Si(h,us(a)),h=Si(h,us(o)),h=Si(h,us(c)),h}getBeforeBody(t,e){return dT(pn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,a=[];return $t(t,o=>{const c={before:[],lines:[],after:[]},h=gT(i,o);Si(c.before,us(pn(h,"beforeLabel",this,o))),Si(c.lines,pn(h,"label",this,o)),Si(c.after,us(pn(h,"afterLabel",this,o))),a.push(c)}),a}getAfterBody(t,e){return dT(pn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,a=pn(i,"beforeFooter",this,t),o=pn(i,"footer",this,t),c=pn(i,"afterFooter",this,t);let h=[];return h=Si(h,us(a)),h=Si(h,us(o)),h=Si(h,us(c)),h}_createItems(t){const e=this._active,i=this.chart.data,a=[],o=[],c=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(aV(this.chart,e[d]));return t.filter&&(h=h.filter((_,v,T)=>t.filter(_,v,T,i))),t.itemSort&&(h=h.sort((_,v)=>t.itemSort(_,v,i))),$t(h,_=>{const v=gT(t.callbacks,_);a.push(pn(v,"labelColor",this,_)),o.push(pn(v,"labelPointStyle",this,_)),c.push(pn(v,"labelTextColor",this,_))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),a=this._active;let o,c=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const h=Sc[i.position].call(this,a,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=uT(this,i),m=Object.assign({},h,d),_=hT(this.chart,i,m),v=fT(i,m,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,a){const o=this.getCaretPosition(t,i,a);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:a,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=Mo(h),{x:T,y:A}=t,{width:I,height:k}=e;let M,K,G,J,q,X;return o==="center"?(q=A+k/2,a==="left"?(M=T,K=M-c,J=q+c,X=q-c):(M=T+I,K=M+c,J=q-c,X=q+c),G=M):(a==="left"?K=T+Math.max(d,_)+c:a==="right"?K=T+I-Math.max(m,v)-c:K=this.caretX,o==="top"?(J=A,q=J-c,M=K-c,G=K+c):(J=A+k,q=J+c,M=K+c,G=K-c),X=J),{x1:M,x2:K,x3:G,y1:J,y2:q,y3:X}}drawTitle(t,e,i){const a=this.title,o=a.length;let c,h,d;if(o){const m=ko(i.rtl,this.x,this.width);for(t.x=Kh(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",c=rn(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,d=0;d<o;++d)e.fillText(a[d],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,a,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,_=rn(o.bodyFont),v=Kh(this,"left",o),T=a.x(v),A=d<_.lineHeight?(_.lineHeight-d)/2:0,I=e.y+A;if(o.usePointStyle){const k={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=a.leftForLtr(T,m)+m/2,K=I+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,CE(t,k,M,K),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,CE(t,k,M,K)}else{t.lineWidth=Ft(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const k=a.leftForLtr(T,m),M=a.leftForLtr(a.xPlus(T,1),m-2),K=Mo(c.borderRadius);Object.values(K).some(G=>G!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,kf(t,{x:k,y:I,w:m,h:d,radius:K}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),kf(t,{x:M,y:I+1,w:m-2,h:d-2,radius:K}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(k,I,m,d),t.strokeRect(k,I,m,d),t.fillStyle=c.backgroundColor,t.fillRect(M,I+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:a}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:_}=i,v=rn(i.bodyFont);let T=v.lineHeight,A=0;const I=ko(i.rtl,this.x,this.width),k=function(x){e.fillText(x,I.x(t.x+A),t.y+T/2),t.y+=T+o},M=I.textAlign(c);let K,G,J,q,X,st,C;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=Kh(this,M,i),e.fillStyle=i.bodyColor,$t(this.beforeBody,k),A=h&&M!=="right"?c==="center"?m/2+_:m+2+_:0,q=0,st=a.length;q<st;++q){for(K=a[q],G=this.labelTextColors[q],e.fillStyle=G,$t(K.before,k),J=K.lines,h&&J.length&&(this._drawColorBox(e,t,q,I,i),T=Math.max(v.lineHeight,d)),X=0,C=J.length;X<C;++X)k(J[X]),T=v.lineHeight;$t(K.after,k)}A=0,T=v.lineHeight,$t(this.afterBody,k),t.y-=o}drawFooter(t,e,i){const a=this.footer,o=a.length;let c,h;if(o){const d=ko(i.rtl,this.x,this.width);for(t.x=Kh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",c=rn(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(a[h],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,a){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=t,{width:m,height:_}=i,{topLeft:v,topRight:T,bottomLeft:A,bottomRight:I}=Mo(a.cornerRadius);e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.beginPath(),e.moveTo(h+v,d),c==="top"&&this.drawCaret(t,e,i,a),e.lineTo(h+m-T,d),e.quadraticCurveTo(h+m,d,h+m,d+T),c==="center"&&o==="right"&&this.drawCaret(t,e,i,a),e.lineTo(h+m,d+_-I),e.quadraticCurveTo(h+m,d+_,h+m-I,d+_),c==="bottom"&&this.drawCaret(t,e,i,a),e.lineTo(h+A,d+_),e.quadraticCurveTo(h,d+_,h,d+_-A),c==="center"&&o==="left"&&this.drawCaret(t,e,i,a),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),a.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const c=Sc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=uT(this,t),d=Object.assign({},c,this._size),m=hT(e,t,d),_=fT(t,d,m,e);(a._to!==_.x||o._to!==_.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Kn(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,a,e),Tw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Sw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,a=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!Cf(i,a),c=this._positionChanged(a,e);(o||c)&&(this._active=a,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),d=e||!Cf(c,o)||h;return d&&(this._active=c,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,a){const o=this.options;if(t.type==="mouseout")return[];if(!a)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:a,options:o}=this,c=Sc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||a!==c.y)}}var dV={id:"tooltip",_element:mT,positioners:Sc,afterInit(n,t,e){e&&(n.tooltip=new mT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Bw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gV=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function mV(n,t,e,i){const a=n.indexOf(t);if(a===-1)return gV(n,t,e,i);const o=n.lastIndexOf(t);return a!==o?e:a}const pV=(n,t)=>n===null?null:ii(Math.round(n),0,t);function pT(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class _V extends Jo{static id="category";static defaults={ticks:{callback:pT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:a,label:o}of e)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(se(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:mV(i,t,qt(e,t),this._addedLabels),pV(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)a.push({value:c});return a}getLabelForValue(t){return pT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function yV(n,t){const e=[],{bounds:a,step:o,min:c,max:h,precision:d,count:m,maxTicks:_,maxDigits:v,includeBounds:T}=n,A=o||1,I=_-1,{min:k,max:M}=t,K=!se(c),G=!se(h),J=!se(m),q=(M-k)/(v+1);let X=bE((M-k)/I/A)*A,st,C,x,R;if(X<1e-14&&!K&&!G)return[{value:k},{value:M}];R=Math.ceil(M/X)-Math.floor(k/X),R>I&&(X=bE(R*X/I/A)*A),se(d)||(st=Math.pow(10,d),X=Math.ceil(X*st)/st),a==="ticks"?(C=Math.floor(k/X)*X,x=Math.ceil(M/X)*X):(C=k,x=M),K&&G&&o&&pk((h-c)/o,X/1e3)?(R=Math.round(Math.min((h-c)/X,_)),X=(h-c)/R,C=c,x=h):J?(C=K?c:C,x=G?h:x,R=m-1,X=(x-C)/R):(R=(x-C)/X,af(R,Math.round(R),X/1e3)?R=Math.round(R):R=Math.ceil(R));const N=Math.max(EE(X),EE(C));st=Math.pow(10,se(d)?N:d),C=Math.round(C*st)/st,x=Math.round(x*st)/st;let P=0;for(K&&(T&&C!==c?(e.push({value:c}),C<c&&P++,af(Math.round((C+P*X)*st)/st,c,_T(c,q,n))&&P++):C<c&&P++);P<R;++P){const L=Math.round((C+P*X)*st)/st;if(G&&L>h)break;e.push({value:L})}return G&&T&&x!==h?e.length&&af(e[e.length-1].value,h,_T(h,q,n))?e[e.length-1].value=h:e.push({value:h}):(!G||x===h)&&e.push({value:x}),e}function _T(n,t,{horizontal:e,minRotation:i}){const a=ga(i),o=(e?Math.sin(a):Math.cos(a))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class vV extends Jo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return se(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const c=d=>a=e?a:d,h=d=>o=i?o:d;if(t){const d=hr(a),m=hr(o);d<0&&m<0?h(0):d>0&&m>0&&c(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||c(a-d)}this.min=a,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),e=e||11),e&&(a=Math.min(e,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=yV(a,o);return t.bounds==="ticks"&&_k(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const a=(i-e)/Math.max(t.length-1,1)/2;e-=a,i+=a}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return fw(t,this.chart.options.locale,this.options.ticks.format)}}class bV extends vV{static id="linear";static defaults={ticks:{callback:dw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Yn(t)?t:0,this.max=Yn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ga(this.options.ticks.minRotation),a=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ld={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vn=Object.keys(ld);function yT(n,t){return n-t}function vT(n,t){if(se(t))return null;const e=n._adapter,{parser:i,round:a,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Yn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(a&&(c=a==="week"&&(Mf(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,a)),+c)}function bT(n,t,e,i){const a=vn.length;for(let o=vn.indexOf(n);o<a-1;++o){const c=ld[vn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return vn[o]}return vn[a-1]}function EV(n,t,e,i,a){for(let o=vn.length-1;o>=vn.indexOf(e);o--){const c=vn[o];if(ld[c].common&&n._adapter.diff(a,i,c)>=t-1)return c}return vn[e?vn.indexOf(e):0]}function TV(n){for(let t=vn.indexOf(n)+1,e=vn.length;t<e;++t)if(ld[vn[t]].common)return vn[t]}function ET(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:a}=c_(e,t),o=e[i]>=t?e[i]:e[a];n[o]=!0}}function SV(n,t,e,i){const a=n._adapter,o=+a.startOf(t[0].value,i),c=t[t.length-1].value;let h,d;for(h=o;h<=c;h=+a.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function TT(n,t,e){const i=[],a={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],a[h]=c,i.push({value:h,major:!1});return o===0||!e?i:SV(n,i,a,e)}class ST extends Jo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),a=this._adapter=new LN._date(t.adapters.date);a.init(e),Dc(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:vT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:a,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(m){!c&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!c||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Yn(a)&&!isNaN(a)?a:+e.startOf(Date.now(),i),o=Yn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,c=this.max,h=Ak(a,o,c);return this._unit=e.unit||(i.autoSkip?bT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):EV(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:TV(this._unit),this.initOffsets(a),t.reverse&&h.reverse(),TT(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,a,o;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?e=1-a:e=(this.getDecimalForValue(t[1])-a)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=ii(e,0,c),i=ii(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,a=this.options,o=a.time,c=o.unit||bT(o.minUnit,e,i,this._getLabelCapacity(e)),h=qt(a.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,m=Mf(d)||d===!0,_={};let v=e,T,A;if(m&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,m?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const I=a.ticks.source==="data"&&this.getDataTimestamps();for(T=v,A=0;T<i;T=+t.add(T,h,c),A++)ET(_,T,I);return(T===i||a.bounds==="ticks"||A===1)&&ET(_,T,I),Object.keys(_).sort(yT).map(k=>+k)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const a=this.options.time.displayFormats,o=this._unit,c=e||a[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,a){const o=this.options,c=o.ticks.callback;if(c)return oe(c,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,_=d&&h[d],v=m&&h[m],T=i[e],A=m&&v&&T&&T.major;return this._adapter.format(t,a||(A?v:_))}generateTickLabels(t){let e,i,a;for(e=0,i=t.length;e<i;++e)a=t[e],a.label=this._tickFormatFunction(a.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,a=ga(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(a),c=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,a=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,TT(this,[t],this._majorUnit),a),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,i=a.length;e<i;++e)t=t.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const a=this.getLabels();for(e=0,i=a.length;e<i;++e)t.push(vT(this,a[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lw(t.sort(yT))}}function Qh(n,t,e){let i=0,a=n.length-1,o,c,h,d;e?(t>=n[i].pos&&t<=n[a].pos&&({lo:i,hi:a}=hp(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:d}=n[a]):(t>=n[i].time&&t<=n[a].time&&({lo:i,hi:a}=hp(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:d}=n[a]);const m=c-o;return m?h+(d-h)*(t-o)/m:h}class PV extends ST{static id="timeseries";static defaults=ST.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Qh(e,this.min),this._tableRange=Qh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,a=[],o=[];let c,h,d,m,_;for(c=0,h=t.length;c<h;++c)m=t[c],m>=e&&m<=i&&a.push(m);if(a.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=a.length;c<h;++c)_=a[c+1],d=a[c-1],m=a[c],Math.round((_+d)/2)!==m&&o.push({time:m,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Qh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Qh(this._table,i*this._tableRange+this._minPos,!0)}}const jw="label";function AT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function AV(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Fw(n,t){n.labels=t}function Hw(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jw;const i=[];n.datasets=t.map(a=>{const o=n.datasets.find(c=>c[e]===a[e]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function wV(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jw;const e={labels:[],datasets:[]};return Fw(e,n.labels),Hw(e,n.datasets,t),e}function xV(n,t){const{height:e=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:m=[],fallbackContent:_,updateMode:v,...T}=n,A=Rt.useRef(null),I=Rt.useRef(null),k=()=>{A.current&&(I.current=new od(A.current,{type:c,data:wV(h,o),options:d&&{...d},plugins:m}),AT(t,I.current))},M=()=>{AT(t,null),I.current&&(I.current.destroy(),I.current=null)};return Rt.useEffect(()=>{!a&&I.current&&d&&AV(I.current,d)},[a,d]),Rt.useEffect(()=>{!a&&I.current&&Fw(I.current.config.data,h.labels)},[a,h.labels]),Rt.useEffect(()=>{!a&&I.current&&h.datasets&&Hw(I.current.config.data,h.datasets,o)},[a,h.datasets]),Rt.useEffect(()=>{I.current&&(a?(M(),setTimeout(k)):I.current.update(v))},[a,d,h.labels,h.datasets,v]),Rt.useEffect(()=>{I.current&&(M(),setTimeout(k))},[c]),Rt.useEffect(()=>(k(),()=>M()),[]),wT.createElement("canvas",{ref:A,role:"img",height:e,width:i,...T},_)}const RV=Rt.forwardRef(xV);function IV(n,t){return od.register(t),Rt.forwardRef((e,i)=>wT.createElement(RV,{...e,ref:i,type:n}))}const CV=IV("bar",VN);od.register(_V,bV,WP,rV,dV,iV);const DV=()=>{const[n,t]=Rt.useState(0),[e,i]=Rt.useState(0),[a,o]=Rt.useState(!0);Rt.useEffect(()=>{(async()=>{try{const _=(await Fc(Ta(ki,"ventas"))).docs.reduce((A,I)=>A+I.data().total,0);t(_);const T=(await Fc(Ta(ki,"gastos"))).docs.reduce((A,I)=>A+I.data().monto,0);i(T)}catch(m){console.error("Error cargando datos:",m)}finally{o(!1)}})()},[]);const c={labels:["Ingresos","Gastos","Ganancia"],datasets:[{label:"Soles (S/)",data:[n,e,n-e],backgroundColor:["rgba(76, 175, 80, 0.7)","rgba(244, 67, 54, 0.7)","rgba(255, 152, 0, 0.7)"],borderColor:["rgba(76, 175, 80, 1)","rgba(244, 67, 54, 1)","rgba(255, 152, 0, 1)"],borderWidth:1,borderRadius:4}]},h={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Resumen Financiero",font:{size:16}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(d){return"S/ "+d.toLocaleString("es-PE")}}}}};return a?W.jsx("div",{className:"flex justify-center items-center h-64",children:W.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):W.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:[W.jsx("h3",{className:"text-gray-500 font-medium",children:"Ingresos"}),W.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["S/ ",n.toLocaleString("es-PE")]})]}),W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500",children:[W.jsx("h3",{className:"text-gray-500 font-medium",children:"Gastos"}),W.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["S/ ",e.toLocaleString("es-PE")]})]}),W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-orange-500",children:[W.jsx("h3",{className:"text-gray-500 font-medium",children:"Ganancia Neta"}),W.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["S/ ",(n-e).toLocaleString("es-PE")]})]})]}),W.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:W.jsx(CV,{data:c,options:h})}),W.jsx("div",{className:"mt-6 text-sm text-gray-500",children:W.jsxs("p",{children:["Última actualización: ",new Date().toLocaleString("es-PE")]})})]})},OV=()=>{const[n,t]=Rt.useState([]),[e,i]=Rt.useState(!0),[a,o]=Rt.useState(null),[c,h]=Rt.useState("Efectivo"),[d,m]=Rt.useState(""),[_,v]=Rt.useState(""),[T,A]=Rt.useState("todos");Rt.useEffect(()=>{(async()=>{const q=(await Fc(Ta(ki,"ventas"))).docs.map(X=>({id:X.id,...X.data()}));q.sort((X,st)=>st.fecha?.seconds-X.fecha?.seconds),t(q),i(!1)})()},[]);const I=G=>{const J=window.open("","","width=300,height=600");J.document.write(`
      <html>
        <head>
          <title>Boleta de Venta</title>
          <style>
            body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
            .boleta { width: 240px; margin: auto; text-align: center; }
            .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
            .linea { border-top: 1px dashed #000; margin: 8px 0; }
            .producto { text-align: left; margin: 2px 0; }
            .total { font-weight: bold; margin-top: 10px; }
            .metodo { margin-top: 5px; }
          </style>
        </head>
        <body onload="window.print(); setTimeout(() => window.close(), 500);">
          <div class="boleta">
            <div class="titulo">BOLETA DE VENTA</div>
            <div>Cliente: <strong>${G.cliente||"Consumidor final"}</strong></div>
            <div>Fecha: ${new Date(G.fecha?.seconds*1e3).toLocaleString()}</div>
            <div class="linea"></div>
            <div style="text-align:left">
              ${G.items.map(q=>`
                <div class="producto">
                  ${q.nombre}<br />
                  ${q.cantidad} x S/ ${q.precio.toFixed(2)} = S/ ${q.subtotal.toFixed(2)}
                </div>
              `).join("")}
            </div>
            <div class="linea"></div>
            <div class="total">TOTAL: S/ ${G.total.toFixed(2)}</div>
            <div class="metodo">Pago: ${G.metodoPago||"---"}</div>
            <div>${G.estado==="completada"?"✅ Pagado":"❌ Pendiente"}</div>
            <div class="linea"></div>
            <div>Gracias por su compra</div>
          </div>
        </body>
      </html>
    `),J.document.close()},k=async()=>{if(a){if(c==="Efectivo"&&(!d||parseFloat(d)<a.total)){v("❌ El monto es insuficiente"),setTimeout(()=>v(""),2500);return}try{const G=ed(ki,"ventas",a.id);await ZA(G,{estado:"completada",metodoPago:c}),t(J=>J.map(q=>q.id===a.id?{...q,estado:"completada",metodoPago:c}:q)),o(null),m(""),h("Efectivo"),v("✅ Venta completada"),setTimeout(()=>v(""),2500)}catch{v("❌ Error al completar la venta")}}},M=n.filter(G=>T==="todos"?!0:G.estado===T),K=c==="Efectivo"&&d?(parseFloat(d)-a?.total).toFixed(2):null;return W.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[W.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"📋 Lista de Pedidos"}),W.jsxs("div",{className:"mb-4",children:[W.jsx("label",{className:"mr-2 font-medium",children:"Filtrar por estado:"}),W.jsxs("select",{value:T,onChange:G=>A(G.target.value),className:"p-2 border rounded",children:[W.jsx("option",{value:"todos",children:"Todos"}),W.jsx("option",{value:"pendiente",children:"Pendientes"}),W.jsx("option",{value:"completada",children:"Pagados"})]})]}),_&&W.jsx("div",{className:`mb-4 p-3 rounded-md ${_.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_}),e?W.jsx("p",{className:"text-gray-500",children:"Cargando ventas..."}):M.length===0?W.jsx("p",{className:"text-gray-500 italic",children:"No hay ventas registradas."}):W.jsx("div",{className:"space-y-6",children:M.map(G=>W.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[W.jsxs("div",{className:"flex justify-between items-center mb-2",children:[W.jsxs("div",{children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:G.cliente}),W.jsx("p",{className:"text-sm text-gray-500",children:new Date(G.fecha?.seconds*1e3).toLocaleString()})]}),W.jsxs("div",{className:"text-right",children:[W.jsx("p",{className:"text-sm",children:G.estado==="completada"?W.jsx("span",{className:"text-green-600 font-semibold",children:"Pagado"}):W.jsx("span",{className:"text-red-600 font-semibold",children:"Pendiente"})}),W.jsxs("p",{className:"font-bold text-orange-600",children:["S/ ",G.total?.toFixed(2)]})]})]}),W.jsx("ul",{className:"text-sm text-gray-700 mb-2",children:G.items.map((J,q)=>W.jsxs("li",{className:"flex justify-between",children:[W.jsxs("span",{children:[J.nombre," x ",J.cantidad]}),W.jsxs("span",{children:["S/ ",J.subtotal.toFixed(2)]})]},q))}),W.jsxs("div",{className:"flex gap-4",children:[W.jsx("button",{onClick:()=>I(G),className:"text-sm text-orange-600 hover:underline",children:"🖨 Imprimir boleta"}),G.estado!=="completada"&&W.jsx("button",{onClick:()=>o(G),className:"text-sm text-blue-600 hover:underline",children:"💳 Terminar venta"})]})]},G.id))}),a&&W.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm z-50",children:W.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[W.jsxs("h3",{className:"font-bold mb-4",children:["Terminar venta de ",a.cliente]}),W.jsxs("div",{className:"flex flex-col gap-4",children:[W.jsxs("select",{value:c,onChange:G=>h(G.target.value),className:"p-2 border rounded",children:[W.jsx("option",{value:"Efectivo",children:"Efectivo"}),W.jsx("option",{value:"Yape",children:"Yape"})]}),c==="Efectivo"&&W.jsxs(W.Fragment,{children:[W.jsx("input",{type:"number",placeholder:"Monto pagado",value:d,onChange:G=>m(G.target.value),className:"p-2 border rounded"}),W.jsxs("p",{className:"text-sm text-gray-600",children:["Vuelto: S/ ",K>=0?K:"0.00"]})]}),W.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[W.jsx("button",{onClick:k,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded",children:"Confirmar"}),W.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:underline",children:"Cancelar"})]})]})]})})]})};function MV(){const[n,t]=Rt.useState(null),[e,i]=Rt.useState(""),[a,o]=Rt.useState("ventas"),[c,h]=Rt.useState(!0);return Rt.useEffect(()=>{const d=lC(cp,async m=>{if(m){t(m);const _=ed(ki,"usuarios",m.uid),v=await MM(_);v.exists()?i(v.data().rol):i("vendedor")}else t(null),i("");h(!1)});return()=>d()},[]),c?W.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:W.jsx("div",{className:"text-orange-600 text-lg font-medium",children:"Cargando..."})}):n?W.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:W.jsxs("div",{className:"max-w-7xl mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:[W.jsxs("div",{className:"bg-orange-600 px-6 py-4 flex justify-between items-center",children:[W.jsx("h1",{className:"text-2xl font-bold text-white",children:"🍔 Salchipapon"}),W.jsx("button",{onClick:()=>cp.signOut(),className:"text-white hover:text-orange-200 text-sm font-medium transition",children:"Cerrar sesión"})]}),W.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex flex-wrap gap-2",children:[W.jsx("button",{onClick:()=>o("ventas"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${a==="ventas"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"🛒 Ventas"}),W.jsx("button",{onClick:()=>o("pedidos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${a==="pedidos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"📄 Lista pedidos"}),e==="admin"&&W.jsxs(W.Fragment,{children:[W.jsx("button",{onClick:()=>o("gastos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${a==="gastos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"💸 Gastos"}),W.jsx("button",{onClick:()=>o("dashboard"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${a==="dashboard"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"📊 Dashboard"})]})]}),W.jsxs("div",{className:"p-6",children:[a==="ventas"&&W.jsx(VM,{}),a==="pedidos"&&W.jsx(OV,{}),a==="gastos"&&e==="admin"&&W.jsx(LM,{}),a==="dashboard"&&e==="admin"&&W.jsx(DV,{})]})]})}):W.jsx(PM,{onLogin:()=>{}})}Ax.createRoot(document.getElementById("root")).render(W.jsx(Rt.StrictMode,{children:W.jsx(MV,{})}));
