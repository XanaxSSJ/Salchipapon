(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function wx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fm={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function xx(){if(V0)return cc;V0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return cc.Fragment=t,cc.jsx=e,cc.jsxs=e,cc}var L0;function Rx(){return L0||(L0=1,fm.exports=xx()),fm.exports}var H=Rx(),dm={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function Ix(){if(U0)return It;U0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function E(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function O(V,rt,ct){this.props=V,this.context=rt,this.refs=D,this.updater=ct||S}O.prototype.isReactComponent={},O.prototype.setState=function(V,rt){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,rt,"setState")},O.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=O.prototype;function q(V,rt,ct){this.props=V,this.context=rt,this.refs=D,this.updater=ct||S}var Z=q.prototype=new Q;Z.constructor=q,R(Z,O.prototype),Z.isPureReactComponent=!0;var G=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},it=Object.prototype.hasOwnProperty;function C(V,rt,ct,at,dt,xt){return ct=xt.ref,{$$typeof:n,type:V,key:rt,ref:ct!==void 0?ct:null,props:xt}}function x(V,rt){return C(V.type,rt,void 0,void 0,void 0,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var rt={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return rt[ct]})}var P=/\/+/g;function L(V,rt){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):rt.toString(36)}function M(){}function Wt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(M,M):(V.status="pending",V.then(function(rt){V.status==="pending"&&(V.status="fulfilled",V.value=rt)},function(rt){V.status==="pending"&&(V.status="rejected",V.reason=rt)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function wt(V,rt,ct,at,dt){var xt=typeof V;(xt==="undefined"||xt==="boolean")&&(V=null);var _t=!1;if(V===null)_t=!0;else switch(xt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(V.$$typeof){case n:case t:_t=!0;break;case _:return _t=V._init,wt(_t(V._payload),rt,ct,at,dt)}}if(_t)return dt=dt(V),_t=at===""?"."+L(V,0):at,G(dt)?(ct="",_t!=null&&(ct=_t.replace(P,"$&/")+"/"),wt(dt,rt,ct,"",function(ai){return ai})):dt!=null&&(I(dt)&&(dt=x(dt,ct+(dt.key==null||V&&V.key===dt.key?"":(""+dt.key).replace(P,"$&/")+"/")+_t)),rt.push(dt)),1;_t=0;var Ve=at===""?".":at+":";if(G(V))for(var re=0;re<V.length;re++)at=V[re],xt=Ve+L(at,re),_t+=wt(at,rt,ct,xt,dt);else if(re=E(V),typeof re=="function")for(V=re.call(V),re=0;!(at=V.next()).done;)at=at.value,xt=Ve+L(at,re++),_t+=wt(at,rt,ct,xt,dt);else if(xt==="object"){if(typeof V.then=="function")return wt(Wt(V),rt,ct,at,dt);throw rt=String(V),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return _t}function X(V,rt,ct){if(V==null)return V;var at=[],dt=0;return wt(V,at,"","",function(xt){return rt.call(ct,xt,dt++)}),at}function ot(V){if(V._status===-1){var rt=V._result;rt=rt(),rt.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=rt)}if(V._status===1)return V._result.default;throw V._result}var gt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function kt(){}return It.Children={map:X,forEach:function(V,rt,ct){X(V,function(){rt.apply(this,arguments)},ct)},count:function(V){var rt=0;return X(V,function(){rt++}),rt},toArray:function(V){return X(V,function(rt){return rt})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},It.Component=O,It.Fragment=e,It.Profiler=r,It.PureComponent=q,It.StrictMode=i,It.Suspense=d,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,It.__COMPILER_RUNTIME={__proto__:null,c:function(V){return $.H.useMemoCache(V)}},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cloneElement=function(V,rt,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var at=R({},V.props),dt=V.key,xt=void 0;if(rt!=null)for(_t in rt.ref!==void 0&&(xt=void 0),rt.key!==void 0&&(dt=""+rt.key),rt)!it.call(rt,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&rt.ref===void 0||(at[_t]=rt[_t]);var _t=arguments.length-2;if(_t===1)at.children=ct;else if(1<_t){for(var Ve=Array(_t),re=0;re<_t;re++)Ve[re]=arguments[re+2];at.children=Ve}return C(V.type,dt,void 0,void 0,xt,at)},It.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},It.createElement=function(V,rt,ct){var at,dt={},xt=null;if(rt!=null)for(at in rt.key!==void 0&&(xt=""+rt.key),rt)it.call(rt,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(dt[at]=rt[at]);var _t=arguments.length-2;if(_t===1)dt.children=ct;else if(1<_t){for(var Ve=Array(_t),re=0;re<_t;re++)Ve[re]=arguments[re+2];dt.children=Ve}if(V&&V.defaultProps)for(at in _t=V.defaultProps,_t)dt[at]===void 0&&(dt[at]=_t[at]);return C(V,xt,void 0,void 0,null,dt)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:h,render:V}},It.isValidElement=I,It.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ot}},It.memo=function(V,rt){return{$$typeof:m,type:V,compare:rt===void 0?null:rt}},It.startTransition=function(V){var rt=$.T,ct={};$.T=ct;try{var at=V(),dt=$.S;dt!==null&&dt(ct,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(kt,gt)}catch(xt){gt(xt)}finally{$.T=rt}},It.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},It.use=function(V){return $.H.use(V)},It.useActionState=function(V,rt,ct){return $.H.useActionState(V,rt,ct)},It.useCallback=function(V,rt){return $.H.useCallback(V,rt)},It.useContext=function(V){return $.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,rt){return $.H.useDeferredValue(V,rt)},It.useEffect=function(V,rt,ct){var at=$.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(V,rt)},It.useId=function(){return $.H.useId()},It.useImperativeHandle=function(V,rt,ct){return $.H.useImperativeHandle(V,rt,ct)},It.useInsertionEffect=function(V,rt){return $.H.useInsertionEffect(V,rt)},It.useLayoutEffect=function(V,rt){return $.H.useLayoutEffect(V,rt)},It.useMemo=function(V,rt){return $.H.useMemo(V,rt)},It.useOptimistic=function(V,rt){return $.H.useOptimistic(V,rt)},It.useReducer=function(V,rt,ct){return $.H.useReducer(V,rt,ct)},It.useRef=function(V){return $.H.useRef(V)},It.useState=function(V){return $.H.useState(V)},It.useSyncExternalStore=function(V,rt,ct){return $.H.useSyncExternalStore(V,rt,ct)},It.useTransition=function(){return $.H.useTransition()},It.version="19.1.0",It}var z0;function vp(){return z0||(z0=1,dm.exports=Ix()),dm.exports}var St=vp();const VT=wx(St);var gm={exports:{}},uc={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Cx(){return j0||(j0=1,function(n){function t(X,ot){var gt=X.length;X.push(ot);t:for(;0<gt;){var kt=gt-1>>>1,V=X[kt];if(0<r(V,ot))X[kt]=ot,X[gt]=V,gt=kt;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ot=X[0],gt=X.pop();if(gt!==ot){X[0]=gt;t:for(var kt=0,V=X.length,rt=V>>>1;kt<rt;){var ct=2*(kt+1)-1,at=X[ct],dt=ct+1,xt=X[dt];if(0>r(at,gt))dt<V&&0>r(xt,at)?(X[kt]=xt,X[dt]=gt,kt=dt):(X[kt]=at,X[ct]=gt,kt=ct);else if(dt<V&&0>r(xt,gt))X[kt]=xt,X[dt]=gt,kt=dt;else break t}}return ot}function r(X,ot){var gt=X.sortIndex-ot.sortIndex;return gt!==0?gt:X.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],_=1,v=null,E=3,S=!1,R=!1,D=!1,O=!1,Q=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function G(X){for(var ot=e(m);ot!==null;){if(ot.callback===null)i(m);else if(ot.startTime<=X)i(m),ot.sortIndex=ot.expirationTime,t(d,ot);else break;ot=e(m)}}function $(X){if(D=!1,G(X),!R)if(e(d)!==null)R=!0,it||(it=!0,L());else{var ot=e(m);ot!==null&&wt($,ot.startTime-X)}}var it=!1,C=-1,x=5,I=-1;function k(){return O?!0:!(n.unstable_now()-I<x)}function P(){if(O=!1,it){var X=n.unstable_now();I=X;var ot=!0;try{t:{R=!1,D&&(D=!1,q(C),C=-1),S=!0;var gt=E;try{e:{for(G(X),v=e(d);v!==null&&!(v.expirationTime>X&&k());){var kt=v.callback;if(typeof kt=="function"){v.callback=null,E=v.priorityLevel;var V=kt(v.expirationTime<=X);if(X=n.unstable_now(),typeof V=="function"){v.callback=V,G(X),ot=!0;break e}v===e(d)&&i(d),G(X)}else i(d);v=e(d)}if(v!==null)ot=!0;else{var rt=e(m);rt!==null&&wt($,rt.startTime-X),ot=!1}}break t}finally{v=null,E=gt,S=!1}ot=void 0}}finally{ot?L():it=!1}}}var L;if(typeof Z=="function")L=function(){Z(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Wt=M.port2;M.port1.onmessage=P,L=function(){Wt.postMessage(null)}}else L=function(){Q(P,0)};function wt(X,ot){C=Q(function(){X(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(X){switch(E){case 1:case 2:case 3:var ot=3;break;default:ot=E}var gt=E;E=ot;try{return X()}finally{E=gt}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(X,ot){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var gt=E;E=X;try{return ot()}finally{E=gt}},n.unstable_scheduleCallback=function(X,ot,gt){var kt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?kt+gt:kt):gt=kt,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=gt+V,X={id:_++,callback:ot,priorityLevel:X,startTime:gt,expirationTime:V,sortIndex:-1},gt>kt?(X.sortIndex=gt,t(m,X),e(d)===null&&X===e(m)&&(D?(q(C),C=-1):D=!0,wt($,gt-kt))):(X.sortIndex=V,t(d,X),R||S||(R=!0,it||(it=!0,L()))),X},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(X){var ot=E;return function(){var gt=E;E=ot;try{return X.apply(this,arguments)}finally{E=gt}}}}(pm)),pm}var B0;function Dx(){return B0||(B0=1,mm.exports=Cx()),mm.exports}var _m={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Ox(){if(F0)return tn;F0=1;var n=vp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,_)},tn.flushSync=function(d){var m=c.T,_=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=m,i.p=_,i.d.f()}},tn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},tn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},tn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):_==="script"&&i.d.X(d,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},tn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},tn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},tn.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},tn.requestFormReset=function(d){i.d.r(d)},tn.unstable_batchedUpdates=function(d,m){return d(m)},tn.useFormState=function(d,m,_){return c.H.useFormState(d,m,_)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var H0;function Mx(){if(H0)return _m.exports;H0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),_m.exports=Ox(),_m.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function Nx(){if(q0)return uc;q0=1;var n=Dx(),t=vp(),e=Mx();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===u)return h(g),a;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=g,u=p;else{for(var T=!1,A=g.child;A;){if(A===l){T=!0,l=g,u=p;break}if(A===u){T=!0,u=g,l=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===l){T=!0,l=p,u=g;break}if(A===u){T=!0,u=p,l=g;break}A=A.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function Wt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case it:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case Z:return(s.displayName||"Context")+".Provider";case q:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return a=s.displayName||null,a!==null?a:Wt(s.type)||"Memo";case x:a=s._payload,s=s._init;try{return Wt(s(a))}catch{}}return null}var wt=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},kt=[],V=-1;function rt(s){return{current:s}}function ct(s){0>V||(s.current=kt[V],kt[V]=null,V--)}function at(s,a){V++,kt[V]=s.current,s.current=a}var dt=rt(null),xt=rt(null),_t=rt(null),Ve=rt(null);function re(s,a){switch(at(_t,a),at(xt,s),at(dt,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?u0(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=u0(a),s=h0(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(dt),at(dt,s)}function ai(){ct(dt),ct(xt),ct(_t)}function bs(s){s.memoizedState!==null&&at(Ve,s);var a=dt.current,l=h0(a,s.type);a!==l&&(at(xt,s),at(dt,l))}function Vi(s){xt.current===s&&(ct(dt),ct(xt)),Ve.current===s&&(ct(Ve),sc._currentValue=gt)}var Ar=Object.prototype.hasOwnProperty,wr=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,el=n.unstable_shouldYield,cu=n.unstable_requestPaint,Dn=n.unstable_now,fd=n.unstable_getCurrentPriorityLevel,nl=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,Rr=n.unstable_NormalPriority,dd=n.unstable_LowPriority,Ia=n.unstable_IdlePriority,il=n.log,uu=n.unstable_setDisableYieldValue,de=null,Kt=null;function bn(s){if(typeof il=="function"&&uu(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(de,s)}catch{}}var Ze=Math.clz32?Math.clz32:Ir,hu=Math.log,gd=Math.LN2;function Ir(s){return s>>>=0,s===0?32:31-(hu(s)/gd|0)|0}var Cr=256,Dr=4194304;function Qn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ca(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,p=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?g=Qn(u):(T&=A,T!==0?g=Qn(T):l||(l=A&~s,l!==0&&(g=Qn(l))))):(A=u&~p,A!==0?g=Qn(A):T!==0?g=Qn(T):l||(l=u&~s,l!==0&&(g=Qn(l)))),g===0?0:a!==0&&a!==g&&(a&p)===0&&(p=g&-g,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:g}function Or(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function sl(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rl(){var s=Cr;return Cr<<=1,(Cr&4194048)===0&&(Cr=256),s}function al(){var s=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),s}function Li(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Ui(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ol(s,a,l,u,g,p){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var A=s.entanglements,N=s.expirationTimes,F=s.hiddenUpdates;for(l=T&~l;0<l;){var J=31-Ze(l),nt=1<<J;A[J]=0,N[J]=-1;var Y=F[J];if(Y!==null)for(F[J]=null,J=0;J<Y.length;J++){var K=Y[J];K!==null&&(K.lane&=-536870913)}l&=~nt}u!==0&&oi(s,u,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(T&~a))}function oi(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Ze(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function ll(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Ze(l),g=1<<u;g&a|s[u]&a&&(s[u]|=a),l&=~g}}function Es(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Da(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ts(){var s=ot.p;return s!==0?s:(s=window.event,s===void 0?32:D0(s.type))}function fu(s,a){var l=ot.p;try{return ot.p=s,a()}finally{ot.p=l}}var ce=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ce,Ee="__reactProps$"+ce,On="__reactContainer$"+ce,cl="__reactEvents$"+ce,md="__reactListeners$"+ce,Ss="__reactHandles$"+ce,du="__reactResources$"+ce,Mr="__reactMarker$"+ce;function As(s){delete s[Ce],delete s[Ee],delete s[cl],delete s[md],delete s[Ss]}function zi(s){var a=s[Ce];if(a)return a;for(var l=s.parentNode;l;){if(a=l[On]||l[Ce]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=m0(s);s!==null;){if(l=s[Ce])return l;s=m0(s)}return a}s=l,l=s.parentNode}return null}function li(s){if(s=s[Ce]||s[On]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function ci(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function cn(s){var a=s[du];return a||(a=s[du]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pe(s){s[Mr]=!0}var ul=new Set,Oa={};function $n(s,a){ji(s,a),ji(s+"Capture",a)}function ji(s,a){for(Oa[s]=a,s=0;s<a.length;s++)ul.add(a[s])}var gu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Nr={};function pu(s){return Ar.call(Nr,s)?!0:Ar.call(mu,s)?!1:gu.test(s)?Nr[s]=!0:(mu[s]=!0,!1)}function ws(s,a,l){if(pu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function ui(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function He(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}var kr,_u;function Bi(s){if(kr===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);kr=a&&a[1]||"",_u=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+s+_u}var Ma=!1;function Na(s,a){if(!s||Ma)return"";Ma=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(K){var Y=K}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(K){Y=K}s.call(nt.prototype)}}else{try{throw Error()}catch(K){Y=K}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var N=T.split(`
`),F=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===F.length)for(u=N.length-1,g=F.length-1;1<=u&&0<=g&&N[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==F[g]){var J=`
`+N[u].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=u&&0<=g);break}}}finally{Ma=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Bi(l):""}function hl(s){switch(s.tag){case 26:case 27:case 5:return Bi(s.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Na(s.type,!1);case 11:return Na(s.type.render,!1);case 1:return Na(s.type,!0);case 31:return Bi("Activity");default:return""}}function ka(s){try{var a="";do a+=hl(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function pd(s){var a=fl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),u=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Pa(s){s._valueTracker||(s._valueTracker=pd(s))}function dl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=fl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function Pr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var _d=/[\n"\\]/g;function Te(s){return s.replace(_d,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function En(s,a,l,u,g,p,T,A){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+un(a)):s.value!==""+un(a)&&(s.value=""+un(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?xs(s,T,un(a)):l!=null?xs(s,T,un(l)):u!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+un(A):s.removeAttribute("name")}function Vr(s,a,l,u,g,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;l=l!=null?""+un(l):"",a=a!=null?""+un(a):l,A||a===s.value||(s.value=a),s.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=A?s.checked:!!u,s.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function xs(s,a,l){a==="number"&&Pr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Fi(s,a,l,u){if(s=s.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=a.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),a=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Zt(s,a,l){if(a!=null&&(a=""+un(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+un(l):""}function Lr(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(wt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=un(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Mn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||Ur.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function gl(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&l[g]!==u&&yu(s,g,u)}else for(var p in a)a.hasOwnProperty(p)&&yu(s,p,a[p])}function ml(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(s){return vd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Hi=null;function Nn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var qi=null,Gi=null;function pl(s){var a=li(s);if(a&&(s=a.stateNode)){var l=s[Ee]||null;t:switch(s=a.stateNode,a.type){case"input":if(En(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Te(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var g=u[Ee]||null;if(!g)throw Error(i(90));En(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&dl(u)}break t;case"textarea":Zt(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Fi(s,!!l.multiple,a,!1)}}}var hi=!1;function vu(s,a,l){if(hi)return s(a,l);hi=!0;try{var u=s(a);return u}finally{if(hi=!1,(qi!==null||Gi!==null)&&(fh(),qi&&(a=qi,s=Gi,Gi=qi=null,pl(a),s)))for(a=0;a<s.length;a++)pl(s[a])}}function zr(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Ee]||null;if(u===null)return null;l=u[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=!1;if(Xn)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){kn=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{kn=!1}var fi=null,Rs=null,Yi=null;function _l(){if(Yi)return Yi;var s,a=Rs,l=a.length,u,g="value"in fi?fi.value:fi.textContent,p=g.length;for(s=0;s<l&&a[s]===g[s];s++);var T=l-s;for(u=1;u<=T&&a[l-u]===g[p-u];u++);return Yi=g.slice(s,1<u?1-u:void 0)}function di(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function gi(){return!0}function yl(){return!1}function Le(s){function a(l,u,g,p,T){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?gi:yl,this.isPropagationStopped=yl,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),a}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Le(Gt),Br=_({},Gt,{view:0,detail:0}),bu=Le(Br),Ua,za,mi,Fr=_({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==mi&&(mi&&s.type==="mousemove"?(Ua=s.screenX-mi.screenX,za=s.screenY-mi.screenY):za=Ua=0,mi=s),Ua)},movementY:function(s){return"movementY"in s?s.movementY:za}}),Pn=Le(Fr),Eu=_({},Fr,{dataTransfer:0}),bd=Le(Eu),Hr=_({},Br,{relatedTarget:0}),ja=Le(Hr),vl=_({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Le(vl),Tu=_({},Gt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Fa=Le(Tu),Ed=_({},Gt,{data:0}),bl=Le(Ed),qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function El(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Au[s])?!!a[s]:!1}function Gr(){return El}var wu=_({},Br,{key:function(s){if(s.key){var a=qr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=di(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Su[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(s){return s.type==="keypress"?di(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?di(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ha=Le(wu),xu=_({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tl=Le(xu),Ki=_({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Ru=Le(Ki),Iu=_({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Le(Iu),Du=_({},Fr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=Le(Du),hn=_({},Gt,{newState:0,oldState:0}),Ou=Le(hn),Mu=[9,13,27,32],pi=Xn&&"CompositionEvent"in window,f=null;Xn&&"documentMode"in document&&(f=document.documentMode);var y=Xn&&"TextEvent"in window&&!f,b=Xn&&(!pi||f&&8<f&&11>=f),w=" ",j=!1;function W(s,a){switch(s){case"keyup":return Mu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function De(s,a){switch(s){case"compositionend":return lt(a);case"keypress":return a.which!==32?null:(j=!0,w);case"textInput":return s=a.data,s===w&&j?null:s;default:return null}}function Ut(s,a){if(Lt)return s==="compositionend"||!pi&&W(s,a)?(s=_l(),Yi=Rs=fi=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Ue[s.type]:a==="textarea"}function Qi(s,a,l,u){qi?Gi?Gi.push(u):Gi=[u]:qi=u,a=yh(a,"onChange"),0<a.length&&(l=new La("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var qe=null,_i=null;function Sl(s){r0(s,0)}function Nu(s){var a=ci(s);if(dl(a))return s}function x_(s,a){if(s==="change")return a}var R_=!1;if(Xn){var Td;if(Xn){var Sd="oninput"in document;if(!Sd){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Sd=typeof I_.oninput=="function"}Td=Sd}else Td=!1;R_=Td&&(!document.documentMode||9<document.documentMode)}function C_(){qe&&(qe.detachEvent("onpropertychange",D_),_i=qe=null)}function D_(s){if(s.propertyName==="value"&&Nu(_i)){var a=[];Qi(a,_i,s,Nn(s)),vu(Sl,a)}}function e1(s,a,l){s==="focusin"?(C_(),qe=a,_i=l,qe.attachEvent("onpropertychange",D_)):s==="focusout"&&C_()}function n1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Nu(_i)}function i1(s,a){if(s==="click")return Nu(a)}function s1(s,a){if(s==="input"||s==="change")return Nu(a)}function r1(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Tn=typeof Object.is=="function"?Object.is:r1;function Al(s,a){if(Tn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Ar.call(a,g)||!Tn(s[g],a[g]))return!1}return!0}function O_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function M_(s,a){var l=O_(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=O_(l)}}function N_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?N_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function k_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Pr(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Pr(s.document)}return a}function Ad(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var a1=Xn&&"documentMode"in document&&11>=document.documentMode,Ga=null,wd=null,wl=null,xd=!1;function P_(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xd||Ga==null||Ga!==Pr(u)||(u=Ga,"selectionStart"in u&&Ad(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wl&&Al(wl,u)||(wl=u,u=yh(wd,"onSelect"),0<u.length&&(a=new La("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=Ga)))}function Yr(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ya={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Rd={},V_={};Xn&&(V_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Kr(s){if(Rd[s])return Rd[s];if(!Ya[s])return s;var a=Ya[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in V_)return Rd[s]=a[l];return s}var L_=Kr("animationend"),U_=Kr("animationiteration"),z_=Kr("animationstart"),o1=Kr("transitionrun"),l1=Kr("transitionstart"),c1=Kr("transitioncancel"),j_=Kr("transitionend"),B_=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function Wn(s,a){B_.set(s,a),$n(a,[s])}var F_=new WeakMap;function Vn(s,a){if(typeof s=="object"&&s!==null){var l=F_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:ka(a)},F_.set(s,a),a)}return{value:s,source:a,stack:ka(a)}}var Ln=[],Ka=0,Cd=0;function ku(){for(var s=Ka,a=Cd=Ka=0;a<s;){var l=Ln[a];Ln[a++]=null;var u=Ln[a];Ln[a++]=null;var g=Ln[a];Ln[a++]=null;var p=Ln[a];if(Ln[a++]=null,u!==null&&g!==null){var T=u.pending;T===null?g.next=g:(g.next=T.next,T.next=g),u.pending=g}p!==0&&H_(l,g,p)}}function Pu(s,a,l,u){Ln[Ka++]=s,Ln[Ka++]=a,Ln[Ka++]=l,Ln[Ka++]=u,Cd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Dd(s,a,l,u){return Pu(s,a,l,u),Vu(s)}function Qa(s,a){return Pu(s,null,null,a),Vu(s)}function H_(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&a!==null&&(g=31-Ze(l),s=p.hiddenUpdates,u=s[g],u===null?s[g]=[a]:u.push(a),a.lane=l|536870912),p):null}function Vu(s){if(50<Xl)throw Xl=0,Vg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var $a={};function u1(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(s,a,l,u){return new u1(s,a,l,u)}function Od(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $i(s,a){var l=s.alternate;return l===null?(l=Sn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function q_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Lu(s,a,l,u,g,p){var T=0;if(u=s,typeof s=="function")Od(s)&&(T=1);else if(typeof s=="string")T=fx(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=Sn(31,l,a,g),s.elementType=I,s.lanes=p,s;case R:return Qr(l.children,g,p,a);case D:T=8,g|=24;break;case O:return s=Sn(12,l,a,g|2),s.elementType=O,s.lanes=p,s;case $:return s=Sn(13,l,a,g),s.elementType=$,s.lanes=p,s;case it:return s=Sn(19,l,a,g),s.elementType=it,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:case Z:T=10;break t;case q:T=9;break t;case G:T=11;break t;case C:T=14;break t;case x:T=16,u=null;break t}T=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=Sn(T,l,a,g),a.elementType=s,a.type=u,a.lanes=p,a}function Qr(s,a,l,u){return s=Sn(7,s,u,a),s.lanes=l,s}function Md(s,a,l){return s=Sn(6,s,null,a),s.lanes=l,s}function Nd(s,a,l){return a=Sn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Xa=[],Wa=0,Uu=null,zu=0,Un=[],zn=0,$r=null,Xi=1,Wi="";function Xr(s,a){Xa[Wa++]=zu,Xa[Wa++]=Uu,Uu=s,zu=a}function G_(s,a,l){Un[zn++]=Xi,Un[zn++]=Wi,Un[zn++]=$r,$r=s;var u=Xi;s=Wi;var g=32-Ze(u)-1;u&=~(1<<g),l+=1;var p=32-Ze(a)+g;if(30<p){var T=g-g%5;p=(u&(1<<T)-1).toString(32),u>>=T,g-=T,Xi=1<<32-Ze(a)+g|l<<g|u,Wi=p+s}else Xi=1<<p|l<<g|u,Wi=s}function kd(s){s.return!==null&&(Xr(s,1),G_(s,1,0))}function Pd(s){for(;s===Uu;)Uu=Xa[--Wa],Xa[Wa]=null,zu=Xa[--Wa],Xa[Wa]=null;for(;s===$r;)$r=Un[--zn],Un[zn]=null,Wi=Un[--zn],Un[zn]=null,Xi=Un[--zn],Un[zn]=null}var fn=null,ge=null,Ht=!1,Wr=null,yi=!1,Vd=Error(i(519));function Zr(s){var a=Error(i(418,""));throw Il(Vn(a,s)),Vd}function Y_(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Ce]=s,a[Ee]=u,l){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Nt(Zl[l],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Nt("invalid",a),Vr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Pa(a);break;case"select":Nt("invalid",a);break;case"textarea":Nt("invalid",a),Lr(a,u.value,u.defaultValue,u.children),Pa(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||c0(a.textContent,l)?(u.popover!=null&&(Nt("beforetoggle",a),Nt("toggle",a)),u.onScroll!=null&&Nt("scroll",a),u.onScrollEnd!=null&&Nt("scrollend",a),u.onClick!=null&&(a.onclick=vh),a=!0):a=!1,a||Zr(s)}function K_(s){for(fn=s.return;fn;)switch(fn.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:fn=fn.return}}function xl(s){if(s!==fn)return!1;if(!Ht)return K_(s),Ht=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Zg(s.type,s.memoizedProps)),l=!l),l&&ge&&Zr(s),K_(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){ge=Jn(s.nextSibling);break t}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}ge=null}}else a===27?(a=ge,Hs(s.type)?(s=nm,nm=null,ge=s):ge=a):ge=fn?Jn(s.stateNode.nextSibling):null;return!0}function Rl(){ge=fn=null,Ht=!1}function Q_(){var s=Wr;return s!==null&&(mn===null?mn=s:mn.push.apply(mn,s),Wr=null),s}function Il(s){Wr===null?Wr=[s]:Wr.push(s)}var Ld=rt(null),Jr=null,Zi=null;function Is(s,a,l){at(Ld,a._currentValue),a._currentValue=l}function Ji(s){s._currentValue=Ld.current,ct(Ld)}function Ud(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function zd(s,a,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var T=g.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=g;for(var N=0;N<a.length;N++)if(A.context===a[N]){p.lanes|=l,A=p.alternate,A!==null&&(A.lanes|=l),Ud(p.return,l,s),u||(T=null);break t}p=A.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(i(341));T.lanes|=l,p=T.alternate,p!==null&&(p.lanes|=l),Ud(T,l,s),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===s){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Cl(s,a,l,u){s=null;for(var g=a,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=g.type;Tn(g.pendingProps.value,T.value)||(s!==null?s.push(A):s=[A])}}else if(g===Ve.current){if(T=g.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(sc):s=[sc])}g=g.return}s!==null&&zd(a,s,l,u),a.flags|=262144}function ju(s){for(s=s.firstContext;s!==null;){if(!Tn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ta(s){Jr=s,Zi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Je(s){return $_(Jr,s)}function Bu(s,a){return Jr===null&&ta(s),$_(s,a)}function $_(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Zi===null){if(s===null)throw Error(i(308));Zi=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Zi=Zi.next=a;return l}var h1=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},f1=n.unstable_scheduleCallback,d1=n.unstable_NormalPriority,Me={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new h1,data:new Map,refCount:0}}function Dl(s){s.refCount--,s.refCount===0&&f1(d1,function(){s.controller.abort()})}var Ol=null,Bd=0,Za=0,Ja=null;function g1(s,a){if(Ol===null){var l=Ol=[];Bd=0,Za=Hg(),Ja={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Bd++,a.then(X_,X_),a}function X_(){if(--Bd===0&&Ol!==null){Ja!==null&&(Ja.status="fulfilled");var s=Ol;Ol=null,Za=0,Ja=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function m1(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var W_=X.S;X.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&g1(s,a),W_!==null&&W_(s,a)};var ea=rt(null);function Fd(){var s=ea.current;return s!==null?s:ae.pooledCache}function Fu(s,a){a===null?at(ea,ea.current):at(ea,a.pool)}function Z_(){var s=Fd();return s===null?null:{parent:Me._currentValue,pool:s}}var Ml=Error(i(460)),J_=Error(i(474)),Hu=Error(i(542)),Hd={then:function(){}};function ty(s){return s=s.status,s==="fulfilled"||s==="rejected"}function qu(){}function ey(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(qu,qu),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,iy(s),s;default:if(typeof a.status=="string")a.then(qu,qu);else{if(s=ae,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,iy(s),s}throw Nl=a,Ml}}var Nl=null;function ny(){if(Nl===null)throw Error(i(459));var s=Nl;return Nl=null,s}function iy(s){if(s===Ml||s===Hu)throw Error(i(483))}var Cs=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ds(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Os(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=Vu(s),H_(s,null,l),a}return Pu(s,u,a,l),Vu(s)}function kl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,ll(s,l)}}function Yd(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=T:p=p.next=T,l=l.next}while(l!==null);p===null?g=p=a:p=p.next=a}else g=p=a;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Kd=!1;function Pl(){if(Kd){var s=Ja;if(s!==null)throw s}}function Vl(s,a,l,u){Kd=!1;var g=s.updateQueue;Cs=!1;var p=g.firstBaseUpdate,T=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,F=N.next;N.next=null,T===null?p=F:T.next=F,T=N;var J=s.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==T&&(A===null?J.firstBaseUpdate=F:A.next=F,J.lastBaseUpdate=N))}if(p!==null){var nt=g.baseState;T=0,J=F=N=null,A=p;do{var Y=A.lane&-536870913,K=Y!==A.lane;if(K?(zt&Y)===Y:(u&Y)===Y){Y!==0&&Y===Za&&(Kd=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Tt=s,yt=A;Y=a;var ee=l;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){nt=Tt.call(ee,nt,Y);break t}nt=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,Y=typeof Tt=="function"?Tt.call(ee,nt,Y):Tt,Y==null)break t;nt=_({},nt,Y);break t;case 2:Cs=!0}}Y=A.callback,Y!==null&&(s.flags|=64,K&&(s.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(F=J=K,N=nt):J=J.next=K,T|=Y;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;K=A,A=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);J===null&&(N=nt),g.baseState=N,g.firstBaseUpdate=F,g.lastBaseUpdate=J,p===null&&(g.shared.lanes=0),zs|=T,s.lanes=T,s.memoizedState=nt}}function sy(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function ry(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)sy(l[s],a)}var to=rt(null),Gu=rt(0);function ay(s,a){s=as,at(Gu,s),at(to,a),as=s|a.baseLanes}function Qd(){at(Gu,as),at(to,to.current)}function $d(){as=Gu.current,ct(to),ct(Gu)}var Ms=0,Ct=null,Jt=null,Se=null,Yu=!1,eo=!1,na=!1,Ku=0,Ll=0,no=null,p1=0;function _e(){throw Error(i(321))}function Xd(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Tn(s[l],a[l]))return!1;return!0}function Wd(s,a,l,u,g,p){return Ms=p,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,X.H=s===null||s.memoizedState===null?Hy:qy,na=!1,p=l(u,g),na=!1,eo&&(p=ly(a,l,u,g)),oy(s),p}function oy(s){X.H=Ju;var a=Jt!==null&&Jt.next!==null;if(Ms=0,Se=Jt=Ct=null,Yu=!1,Ll=0,no=null,a)throw Error(i(300));s===null||ze||(s=s.dependencies,s!==null&&ju(s)&&(ze=!0))}function ly(s,a,l,u){Ct=s;var g=0;do{if(eo&&(no=null),Ll=0,eo=!1,25<=g)throw Error(i(301));if(g+=1,Se=Jt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=S1,p=a(l,u)}while(eo);return p}function _1(){var s=X.H,a=s.useState()[0];return a=typeof a.then=="function"?Ul(a):a,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(Ct.flags|=1024),a}function Zd(){var s=Ku!==0;return Ku=0,s}function Jd(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function tg(s){if(Yu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Yu=!1}Ms=0,Se=Jt=Ct=null,eo=!1,Ll=Ku=0,no=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Ct.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Jt===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var a=Se===null?Ct.memoizedState:Se.next;if(a!==null)Se=a,Jt=s;else{if(s===null)throw Ct.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?Ct.memoizedState=Se=s:Se=Se.next=s}return Se}function eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(s){var a=Ll;return Ll+=1,no===null&&(no=[]),s=ey(no,s,a),a=Ct,(Se===null?a.memoizedState:Se.next)===null&&(a=a.alternate,X.H=a===null||a.memoizedState===null?Hy:qy),s}function Qu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ul(s);if(s.$$typeof===Z)return Je(s)}throw Error(i(438,String(s)))}function ng(s){var a=null,l=Ct.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=eg(),Ct.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=k;return a.index++,l}function ts(s,a){return typeof a=="function"?a(s):a}function $u(s){var a=Ae();return ig(a,Jt,s)}function ig(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var g=s.baseQueue,p=u.pending;if(p!==null){if(g!==null){var T=g.next;g.next=p.next,p.next=T}a.baseQueue=g=p,u.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{a=g.next;var A=T=null,N=null,F=a,J=!1;do{var nt=F.lane&-536870913;if(nt!==F.lane?(zt&nt)===nt:(Ms&nt)===nt){var Y=F.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),nt===Za&&(J=!0);else if((Ms&Y)===Y){F=F.next,Y===Za&&(J=!0);continue}else nt={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(A=N=nt,T=p):N=N.next=nt,Ct.lanes|=Y,zs|=Y;nt=F.action,na&&l(p,nt),p=F.hasEagerState?F.eagerState:l(p,nt)}else Y={lane:nt,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(A=N=Y,T=p):N=N.next=Y,Ct.lanes|=nt,zs|=nt;F=F.next}while(F!==null&&F!==a);if(N===null?T=p:N.next=A,!Tn(p,s.memoizedState)&&(ze=!0,J&&(l=Ja,l!==null)))throw l;s.memoizedState=p,s.baseState=T,s.baseQueue=N,u.lastRenderedState=p}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function sg(s){var a=Ae(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,p=a.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do p=s(p,T.action),T=T.next;while(T!==g);Tn(p,a.memoizedState)||(ze=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,u]}function cy(s,a,l){var u=Ct,g=Ae(),p=Ht;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!Tn((Jt||g).memoizedState,l);T&&(g.memoizedState=l,ze=!0),g=g.queue;var A=fy.bind(null,u,g,s);if(zl(2048,8,A,[s]),g.getSnapshot!==a||T||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,io(9,Xu(),hy.bind(null,u,g,l,a),null),ae===null)throw Error(i(349));p||(Ms&124)!==0||uy(u,a,l)}return l}function uy(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Ct.updateQueue,a===null?(a=eg(),Ct.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function hy(s,a,l,u){a.value=l,a.getSnapshot=u,dy(a)&&gy(s)}function fy(s,a,l){return l(function(){dy(a)&&gy(s)})}function dy(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Tn(s,l)}catch{return!0}}function gy(s){var a=Qa(s,2);a!==null&&In(a,s,2)}function rg(s){var a=dn();if(typeof s=="function"){var l=s;if(s=l(),na){bn(!0);try{l()}finally{bn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},a}function my(s,a,l,u){return s.baseState=l,ig(s,Jt,typeof u=="function"?u:ts)}function y1(s,a,l,u,g){if(Zu(s))throw Error(i(485));if(s=a.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};X.T!==null?l(!0):p.isTransition=!1,u(p),l=a.pending,l===null?(p.next=a.pending=p,py(a,p)):(p.next=l.next,a.pending=l.next=p)}}function py(s,a){var l=a.action,u=a.payload,g=s.state;if(a.isTransition){var p=X.T,T={};X.T=T;try{var A=l(g,u),N=X.S;N!==null&&N(T,A),_y(s,a,A)}catch(F){ag(s,a,F)}finally{X.T=p}}else try{p=l(g,u),_y(s,a,p)}catch(F){ag(s,a,F)}}function _y(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){yy(s,a,u)},function(u){return ag(s,a,u)}):yy(s,a,l)}function yy(s,a,l){a.status="fulfilled",a.value=l,vy(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,py(s,l)))}function ag(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,vy(a),a=a.next;while(a!==u)}s.action=null}function vy(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function by(s,a){return a}function Ey(s,a){if(Ht){var l=ae.formState;if(l!==null){t:{var u=Ct;if(Ht){if(ge){e:{for(var g=ge,p=yi;g.nodeType!==8;){if(!p){g=null;break e}if(g=Jn(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){ge=Jn(g.nextSibling),u=g.data==="F!";break t}}Zr(u)}u=!1}u&&(a=l[0])}}return l=dn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:by,lastRenderedState:a},l.queue=u,l=jy.bind(null,Ct,u),u.dispatch=l,u=rg(!1),p=hg.bind(null,Ct,!1,u.queue),u=dn(),g={state:a,dispatch:null,action:s,pending:null},u.queue=g,l=y1.bind(null,Ct,g,p,l),g.dispatch=l,u.memoizedState=s,[a,l,!1]}function Ty(s){var a=Ae();return Sy(a,Jt,s)}function Sy(s,a,l){if(a=ig(s,a,by)[0],s=$u(ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Ul(a)}catch(T){throw T===Ml?Hu:T}else u=a;a=Ae();var g=a.queue,p=g.dispatch;return l!==a.memoizedState&&(Ct.flags|=2048,io(9,Xu(),v1.bind(null,g,l),null)),[u,p,s]}function v1(s,a){s.action=a}function Ay(s){var a=Ae(),l=Jt;if(l!==null)return Sy(a,l,s);Ae(),a=a.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function io(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=Ct.updateQueue,a===null&&(a=eg(),Ct.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function Xu(){return{destroy:void 0,resource:void 0}}function wy(){return Ae().memoizedState}function Wu(s,a,l,u){var g=dn();u=u===void 0?null:u,Ct.flags|=s,g.memoizedState=io(1|a,Xu(),l,u)}function zl(s,a,l,u){var g=Ae();u=u===void 0?null:u;var p=g.memoizedState.inst;Jt!==null&&u!==null&&Xd(u,Jt.memoizedState.deps)?g.memoizedState=io(a,p,l,u):(Ct.flags|=s,g.memoizedState=io(1|a,p,l,u))}function xy(s,a){Wu(8390656,8,s,a)}function Ry(s,a){zl(2048,8,s,a)}function Iy(s,a){return zl(4,2,s,a)}function Cy(s,a){return zl(4,4,s,a)}function Dy(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Oy(s,a,l){l=l!=null?l.concat([s]):null,zl(4,4,Dy.bind(null,a,s),l)}function og(){}function My(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Xd(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function Ny(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Xd(a,u[1]))return u[0];if(u=s(),na){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,a],u}function lg(s,a,l){return l===void 0||(Ms&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=Vv(),Ct.lanes|=s,zs|=s,l)}function ky(s,a,l,u){return Tn(l,a)?l:to.current!==null?(s=lg(s,l,u),Tn(s,a)||(ze=!0),s):(Ms&42)===0?(ze=!0,s.memoizedState=l):(s=Vv(),Ct.lanes|=s,zs|=s,a)}function Py(s,a,l,u,g){var p=ot.p;ot.p=p!==0&&8>p?p:8;var T=X.T,A={};X.T=A,hg(s,!1,a,l);try{var N=g(),F=X.S;if(F!==null&&F(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=m1(N,u);jl(s,a,J,Rn(s))}else jl(s,a,u,Rn(s))}catch(nt){jl(s,a,{then:function(){},status:"rejected",reason:nt},Rn())}finally{ot.p=p,X.T=T}}function b1(){}function cg(s,a,l,u){if(s.tag!==5)throw Error(i(476));var g=Vy(s).queue;Py(s,g,a,gt,l===null?b1:function(){return Ly(s),l(u)})}function Vy(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:gt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Ly(s){var a=Vy(s).next.queue;jl(s,a,{},Rn())}function ug(){return Je(sc)}function Uy(){return Ae().memoizedState}function zy(){return Ae().memoizedState}function E1(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Rn();s=Ds(l);var u=Os(a,s,l);u!==null&&(In(u,a,l),kl(u,a,l)),a={cache:jd()},s.payload=a;return}a=a.return}}function T1(s,a,l){var u=Rn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Zu(s)?By(a,l):(l=Dd(s,a,l,u),l!==null&&(In(l,s,u),Fy(l,a,u)))}function jy(s,a,l){var u=Rn();jl(s,a,l,u)}function jl(s,a,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zu(s))By(a,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var T=a.lastRenderedState,A=p(T,l);if(g.hasEagerState=!0,g.eagerState=A,Tn(A,T))return Pu(s,a,g,0),ae===null&&ku(),!1}catch{}finally{}if(l=Dd(s,a,g,u),l!==null)return In(l,s,u),Fy(l,a,u),!0}return!1}function hg(s,a,l,u){if(u={lane:2,revertLane:Hg(),action:u,hasEagerState:!1,eagerState:null,next:null},Zu(s)){if(a)throw Error(i(479))}else a=Dd(s,l,u,2),a!==null&&In(a,s,2)}function Zu(s){var a=s.alternate;return s===Ct||a!==null&&a===Ct}function By(s,a){eo=Yu=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Fy(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,ll(s,l)}}var Ju={readContext:Je,use:Qu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Hy={readContext:Je,use:Qu,useCallback:function(s,a){return dn().memoizedState=[s,a===void 0?null:a],s},useContext:Je,useEffect:xy,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Wu(4194308,4,Dy.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Wu(4194308,4,s,a)},useInsertionEffect:function(s,a){Wu(4,2,s,a)},useMemo:function(s,a){var l=dn();a=a===void 0?null:a;var u=s();if(na){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=dn();if(l!==void 0){var g=l(a);if(na){bn(!0);try{l(a)}finally{bn(!1)}}}else g=a;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=T1.bind(null,Ct,s),[u.memoizedState,s]},useRef:function(s){var a=dn();return s={current:s},a.memoizedState=s},useState:function(s){s=rg(s);var a=s.queue,l=jy.bind(null,Ct,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:og,useDeferredValue:function(s,a){var l=dn();return lg(l,s,a)},useTransition:function(){var s=rg(!1);return s=Py.bind(null,Ct,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=Ct,g=dn();if(Ht){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ae===null)throw Error(i(349));(zt&124)!==0||uy(u,a,l)}g.memoizedState=l;var p={value:l,getSnapshot:a};return g.queue=p,xy(fy.bind(null,u,p,s),[s]),u.flags|=2048,io(9,Xu(),hy.bind(null,u,p,l,a),null),l},useId:function(){var s=dn(),a=ae.identifierPrefix;if(Ht){var l=Wi,u=Xi;l=(u&~(1<<32-Ze(u)-1)).toString(32)+l,a=""+a+"R"+l,l=Ku++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=p1++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:ug,useFormState:Ey,useActionState:Ey,useOptimistic:function(s){var a=dn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=hg.bind(null,Ct,!0,l),l.dispatch=a,[s,a]},useMemoCache:ng,useCacheRefresh:function(){return dn().memoizedState=E1.bind(null,Ct)}},qy={readContext:Je,use:Qu,useCallback:My,useContext:Je,useEffect:Ry,useImperativeHandle:Oy,useInsertionEffect:Iy,useLayoutEffect:Cy,useMemo:Ny,useReducer:$u,useRef:wy,useState:function(){return $u(ts)},useDebugValue:og,useDeferredValue:function(s,a){var l=Ae();return ky(l,Jt.memoizedState,s,a)},useTransition:function(){var s=$u(ts)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:Ul(s),a]},useSyncExternalStore:cy,useId:Uy,useHostTransitionStatus:ug,useFormState:Ty,useActionState:Ty,useOptimistic:function(s,a){var l=Ae();return my(l,Jt,s,a)},useMemoCache:ng,useCacheRefresh:zy},S1={readContext:Je,use:Qu,useCallback:My,useContext:Je,useEffect:Ry,useImperativeHandle:Oy,useInsertionEffect:Iy,useLayoutEffect:Cy,useMemo:Ny,useReducer:sg,useRef:wy,useState:function(){return sg(ts)},useDebugValue:og,useDeferredValue:function(s,a){var l=Ae();return Jt===null?lg(l,s,a):ky(l,Jt.memoizedState,s,a)},useTransition:function(){var s=sg(ts)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:Ul(s),a]},useSyncExternalStore:cy,useId:Uy,useHostTransitionStatus:ug,useFormState:Ay,useActionState:Ay,useOptimistic:function(s,a){var l=Ae();return Jt!==null?my(l,Jt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ng,useCacheRefresh:zy},so=null,Bl=0;function th(s){var a=Bl;return Bl+=1,so===null&&(so=[]),ey(so,s,a)}function Fl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function eh(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Gy(s){var a=s._init;return a(s._payload)}function Yy(s){function a(z,U){if(s){var B=z.deletions;B===null?(z.deletions=[U],z.flags|=16):B.push(U)}}function l(z,U){if(!s)return null;for(;U!==null;)a(z,U),U=U.sibling;return null}function u(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function g(z,U){return z=$i(z,U),z.index=0,z.sibling=null,z}function p(z,U,B){return z.index=B,s?(B=z.alternate,B!==null?(B=B.index,B<U?(z.flags|=67108866,U):B):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function T(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function A(z,U,B,tt){return U===null||U.tag!==6?(U=Md(B,z.mode,tt),U.return=z,U):(U=g(U,B),U.return=z,U)}function N(z,U,B,tt){var ft=B.type;return ft===R?J(z,U,B.props.children,tt,B.key):U!==null&&(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&Gy(ft)===U.type)?(U=g(U,B.props),Fl(U,B),U.return=z,U):(U=Lu(B.type,B.key,B.props,null,z.mode,tt),Fl(U,B),U.return=z,U)}function F(z,U,B,tt){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=Nd(B,z.mode,tt),U.return=z,U):(U=g(U,B.children||[]),U.return=z,U)}function J(z,U,B,tt,ft){return U===null||U.tag!==7?(U=Qr(B,z.mode,tt,ft),U.return=z,U):(U=g(U,B),U.return=z,U)}function nt(z,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Md(""+U,z.mode,B),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return B=Lu(U.type,U.key,U.props,null,z.mode,B),Fl(B,U),B.return=z,B;case S:return U=Nd(U,z.mode,B),U.return=z,U;case x:var tt=U._init;return U=tt(U._payload),nt(z,U,B)}if(wt(U)||L(U))return U=Qr(U,z.mode,B,null),U.return=z,U;if(typeof U.then=="function")return nt(z,th(U),B);if(U.$$typeof===Z)return nt(z,Bu(z,U),B);eh(z,U)}return null}function Y(z,U,B,tt){var ft=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ft!==null?null:A(z,U,""+B,tt);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case E:return B.key===ft?N(z,U,B,tt):null;case S:return B.key===ft?F(z,U,B,tt):null;case x:return ft=B._init,B=ft(B._payload),Y(z,U,B,tt)}if(wt(B)||L(B))return ft!==null?null:J(z,U,B,tt,null);if(typeof B.then=="function")return Y(z,U,th(B),tt);if(B.$$typeof===Z)return Y(z,U,Bu(z,B),tt);eh(z,B)}return null}function K(z,U,B,tt,ft){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return z=z.get(B)||null,A(U,z,""+tt,ft);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:return z=z.get(tt.key===null?B:tt.key)||null,N(U,z,tt,ft);case S:return z=z.get(tt.key===null?B:tt.key)||null,F(U,z,tt,ft);case x:var Ot=tt._init;return tt=Ot(tt._payload),K(z,U,B,tt,ft)}if(wt(tt)||L(tt))return z=z.get(B)||null,J(U,z,tt,ft,null);if(typeof tt.then=="function")return K(z,U,B,th(tt),ft);if(tt.$$typeof===Z)return K(z,U,B,Bu(U,tt),ft);eh(U,tt)}return null}function Tt(z,U,B,tt){for(var ft=null,Ot=null,mt=U,vt=U=0,Be=null;mt!==null&&vt<B.length;vt++){mt.index>vt?(Be=mt,mt=null):Be=mt.sibling;var Bt=Y(z,mt,B[vt],tt);if(Bt===null){mt===null&&(mt=Be);break}s&&mt&&Bt.alternate===null&&a(z,mt),U=p(Bt,U,vt),Ot===null?ft=Bt:Ot.sibling=Bt,Ot=Bt,mt=Be}if(vt===B.length)return l(z,mt),Ht&&Xr(z,vt),ft;if(mt===null){for(;vt<B.length;vt++)mt=nt(z,B[vt],tt),mt!==null&&(U=p(mt,U,vt),Ot===null?ft=mt:Ot.sibling=mt,Ot=mt);return Ht&&Xr(z,vt),ft}for(mt=u(mt);vt<B.length;vt++)Be=K(mt,z,vt,B[vt],tt),Be!==null&&(s&&Be.alternate!==null&&mt.delete(Be.key===null?vt:Be.key),U=p(Be,U,vt),Ot===null?ft=Be:Ot.sibling=Be,Ot=Be);return s&&mt.forEach(function(Qs){return a(z,Qs)}),Ht&&Xr(z,vt),ft}function yt(z,U,B,tt){if(B==null)throw Error(i(151));for(var ft=null,Ot=null,mt=U,vt=U=0,Be=null,Bt=B.next();mt!==null&&!Bt.done;vt++,Bt=B.next()){mt.index>vt?(Be=mt,mt=null):Be=mt.sibling;var Qs=Y(z,mt,Bt.value,tt);if(Qs===null){mt===null&&(mt=Be);break}s&&mt&&Qs.alternate===null&&a(z,mt),U=p(Qs,U,vt),Ot===null?ft=Qs:Ot.sibling=Qs,Ot=Qs,mt=Be}if(Bt.done)return l(z,mt),Ht&&Xr(z,vt),ft;if(mt===null){for(;!Bt.done;vt++,Bt=B.next())Bt=nt(z,Bt.value,tt),Bt!==null&&(U=p(Bt,U,vt),Ot===null?ft=Bt:Ot.sibling=Bt,Ot=Bt);return Ht&&Xr(z,vt),ft}for(mt=u(mt);!Bt.done;vt++,Bt=B.next())Bt=K(mt,z,vt,Bt.value,tt),Bt!==null&&(s&&Bt.alternate!==null&&mt.delete(Bt.key===null?vt:Bt.key),U=p(Bt,U,vt),Ot===null?ft=Bt:Ot.sibling=Bt,Ot=Bt);return s&&mt.forEach(function(Ax){return a(z,Ax)}),Ht&&Xr(z,vt),ft}function ee(z,U,B,tt){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case E:t:{for(var ft=B.key;U!==null;){if(U.key===ft){if(ft=B.type,ft===R){if(U.tag===7){l(z,U.sibling),tt=g(U,B.props.children),tt.return=z,z=tt;break t}}else if(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&Gy(ft)===U.type){l(z,U.sibling),tt=g(U,B.props),Fl(tt,B),tt.return=z,z=tt;break t}l(z,U);break}else a(z,U);U=U.sibling}B.type===R?(tt=Qr(B.props.children,z.mode,tt,B.key),tt.return=z,z=tt):(tt=Lu(B.type,B.key,B.props,null,z.mode,tt),Fl(tt,B),tt.return=z,z=tt)}return T(z);case S:t:{for(ft=B.key;U!==null;){if(U.key===ft)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){l(z,U.sibling),tt=g(U,B.children||[]),tt.return=z,z=tt;break t}else{l(z,U);break}else a(z,U);U=U.sibling}tt=Nd(B,z.mode,tt),tt.return=z,z=tt}return T(z);case x:return ft=B._init,B=ft(B._payload),ee(z,U,B,tt)}if(wt(B))return Tt(z,U,B,tt);if(L(B)){if(ft=L(B),typeof ft!="function")throw Error(i(150));return B=ft.call(B),yt(z,U,B,tt)}if(typeof B.then=="function")return ee(z,U,th(B),tt);if(B.$$typeof===Z)return ee(z,U,Bu(z,B),tt);eh(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(l(z,U.sibling),tt=g(U,B),tt.return=z,z=tt):(l(z,U),tt=Md(B,z.mode,tt),tt.return=z,z=tt),T(z)):l(z,U)}return function(z,U,B,tt){try{Bl=0;var ft=ee(z,U,B,tt);return so=null,ft}catch(mt){if(mt===Ml||mt===Hu)throw mt;var Ot=Sn(29,mt,null,z.mode);return Ot.lanes=tt,Ot.return=z,Ot}finally{}}}var ro=Yy(!0),Ky=Yy(!1),jn=rt(null),vi=null;function Ns(s){var a=s.alternate;at(Ne,Ne.current&1),at(jn,s),vi===null&&(a===null||to.current!==null||a.memoizedState!==null)&&(vi=s)}function Qy(s){if(s.tag===22){if(at(Ne,Ne.current),at(jn,s),vi===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(vi=s)}}else ks()}function ks(){at(Ne,Ne.current),at(jn,jn.current)}function es(s){ct(jn),vi===s&&(vi=null),ct(Ne)}var Ne=rt(0);function nh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||em(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function fg(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var dg={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=Rn(),g=Ds(u);g.payload=a,l!=null&&(g.callback=l),a=Os(s,g,u),a!==null&&(In(a,s,u),kl(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=Rn(),g=Ds(u);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Os(s,g,u),a!==null&&(In(a,s,u),kl(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Rn(),u=Ds(l);u.tag=2,a!=null&&(u.callback=a),a=Os(s,u,l),a!==null&&(In(a,s,l),kl(a,s,l))}};function $y(s,a,l,u,g,p,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,T):a.prototype&&a.prototype.isPureReactComponent?!Al(l,u)||!Al(g,p):!0}function Xy(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&dg.enqueueReplaceState(a,a.state,null)}function ia(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var ih=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Wy(s){ih(s)}function Zy(s){console.error(s)}function Jy(s){ih(s)}function sh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function tv(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function gg(s,a,l){return l=Ds(l),l.tag=3,l.payload={element:null},l.callback=function(){sh(s,a)},l}function ev(s){return s=Ds(s),s.tag=3,s}function nv(s,a,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;s.payload=function(){return g(p)},s.callback=function(){tv(a,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){tv(a,l,u),typeof g!="function"&&(js===null?js=new Set([this]):js.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function A1(s,a,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Cl(a,l,g,!0),l=jn.current,l!==null){switch(l.tag){case 13:return vi===null?Ug():l.alternate===null&&me===0&&(me=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Hd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),jg(s,u,g)),!1;case 22:return l.flags|=65536,u===Hd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),jg(s,u,g)),!1}throw Error(i(435,l.tag))}return jg(s,u,g),Ug(),!1}if(Ht)return a=jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==Vd&&(s=Error(i(422),{cause:u}),Il(Vn(s,l)))):(u!==Vd&&(a=Error(i(423),{cause:u}),Il(Vn(a,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Vn(u,l),g=gg(s.stateNode,u,g),Yd(s,g),me!==4&&(me=2)),!1;var p=Error(i(520),{cause:u});if(p=Vn(p,l),$l===null?$l=[p]:$l.push(p),me!==4&&(me=2),a===null)return!0;u=Vn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=gg(l.stateNode,u,s),Yd(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(js===null||!js.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=ev(g),nv(g,s,l,u),Yd(l,g),!1}l=l.return}while(l!==null);return!1}var iv=Error(i(461)),ze=!1;function Ge(s,a,l,u){a.child=s===null?Ky(a,null,l,u):ro(a,s.child,l,u)}function sv(s,a,l,u,g){l=l.render;var p=a.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return ta(a),u=Wd(s,a,l,T,p,g),A=Zd(),s!==null&&!ze?(Jd(s,a,g),ns(s,a,g)):(Ht&&A&&kd(a),a.flags|=1,Ge(s,a,u,g),a.child)}function rv(s,a,l,u,g){if(s===null){var p=l.type;return typeof p=="function"&&!Od(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,av(s,a,p,u,g)):(s=Lu(l.type,null,u,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!Tg(s,g)){var T=p.memoizedProps;if(l=l.compare,l=l!==null?l:Al,l(T,u)&&s.ref===a.ref)return ns(s,a,g)}return a.flags|=1,s=$i(p,u),s.ref=a.ref,s.return=a,a.child=s}function av(s,a,l,u,g){if(s!==null){var p=s.memoizedProps;if(Al(p,u)&&s.ref===a.ref)if(ze=!1,a.pendingProps=u=p,Tg(s,g))(s.flags&131072)!==0&&(ze=!0);else return a.lanes=s.lanes,ns(s,a,g)}return mg(s,a,l,u,g)}function ov(s,a,l){var u=a.pendingProps,g=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(g=a.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return lv(s,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fu(a,p!==null?p.cachePool:null),p!==null?ay(a,p):Qd(),Qy(a);else return a.lanes=a.childLanes=536870912,lv(s,a,p!==null?p.baseLanes|l:l,l)}else p!==null?(Fu(a,p.cachePool),ay(a,p),ks(),a.memoizedState=null):(s!==null&&Fu(a,null),Qd(),ks());return Ge(s,a,g,l),a.child}function lv(s,a,l,u){var g=Fd();return g=g===null?null:{parent:Me._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},s!==null&&Fu(a,null),Qd(),Qy(a),s!==null&&Cl(s,a,u,!0),null}function rh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function mg(s,a,l,u,g){return ta(a),l=Wd(s,a,l,u,void 0,g),u=Zd(),s!==null&&!ze?(Jd(s,a,g),ns(s,a,g)):(Ht&&u&&kd(a),a.flags|=1,Ge(s,a,l,g),a.child)}function cv(s,a,l,u,g,p){return ta(a),a.updateQueue=null,l=ly(a,u,l,g),oy(s),u=Zd(),s!==null&&!ze?(Jd(s,a,p),ns(s,a,p)):(Ht&&u&&kd(a),a.flags|=1,Ge(s,a,l,p),a.child)}function uv(s,a,l,u,g){if(ta(a),a.stateNode===null){var p=$a,T=l.contextType;typeof T=="object"&&T!==null&&(p=Je(T)),p=new l(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=dg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},qd(a),T=l.contextType,p.context=typeof T=="object"&&T!==null?Je(T):$a,p.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(fg(a,l,T,u),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&dg.enqueueReplaceState(p,p.state,null),Vl(a,u,p,g),Pl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){p=a.stateNode;var A=a.memoizedProps,N=ia(l,A);p.props=N;var F=p.context,J=l.contextType;T=$a,typeof J=="object"&&J!==null&&(T=Je(J));var nt=l.getDerivedStateFromProps;J=typeof nt=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||F!==T)&&Xy(a,p,u,T),Cs=!1;var Y=a.memoizedState;p.state=Y,Vl(a,u,p,g),Pl(),F=a.memoizedState,A||Y!==F||Cs?(typeof nt=="function"&&(fg(a,l,nt,u),F=a.memoizedState),(N=Cs||$y(a,l,N,u,Y,F,T))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=F),p.props=u,p.state=F,p.context=T,u=N):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,Gd(s,a),T=a.memoizedProps,J=ia(l,T),p.props=J,nt=a.pendingProps,Y=p.context,F=l.contextType,N=$a,typeof F=="object"&&F!==null&&(N=Je(F)),A=l.getDerivedStateFromProps,(F=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==nt||Y!==N)&&Xy(a,p,u,N),Cs=!1,Y=a.memoizedState,p.state=Y,Vl(a,u,p,g),Pl();var K=a.memoizedState;T!==nt||Y!==K||Cs||s!==null&&s.dependencies!==null&&ju(s.dependencies)?(typeof A=="function"&&(fg(a,l,A,u),K=a.memoizedState),(J=Cs||$y(a,l,J,u,Y,K,N)||s!==null&&s.dependencies!==null&&ju(s.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,N)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=K),p.props=u,p.state=K,p.context=N,u=J):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),u=!1)}return p=u,rh(s,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&u?(a.child=ro(a,s.child,null,g),a.child=ro(a,null,l,g)):Ge(s,a,l,g),a.memoizedState=p.state,s=a.child):s=ns(s,a,g),s}function hv(s,a,l,u){return Rl(),a.flags|=256,Ge(s,a,l,u),a.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _g(s){return{baseLanes:s,cachePool:Z_()}}function yg(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Bn),s}function fv(s,a,l){var u=a.pendingProps,g=!1,p=(a.flags&128)!==0,T;if((T=p)||(T=s!==null&&s.memoizedState===null?!1:(Ne.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ht){if(g?Ns(a):ks(),Ht){var A=ge,N;if(N=A){t:{for(N=A,A=yi;N.nodeType!==8;){if(!A){A=null;break t}if(N=Jn(N.nextSibling),N===null){A=null;break t}}A=N}A!==null?(a.memoizedState={dehydrated:A,treeContext:$r!==null?{id:Xi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},N=Sn(18,null,null,0),N.stateNode=A,N.return=a,a.child=N,fn=a,ge=null,N=!0):N=!1}N||Zr(a)}if(A=a.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return em(A)?a.lanes=32:a.lanes=536870912,null;es(a)}return A=u.children,u=u.fallback,g?(ks(),g=a.mode,A=ah({mode:"hidden",children:A},g),u=Qr(u,g,l,null),A.return=a,u.return=a,A.sibling=u,a.child=A,g=a.child,g.memoizedState=_g(l),g.childLanes=yg(s,T,l),a.memoizedState=pg,u):(Ns(a),vg(a,A))}if(N=s.memoizedState,N!==null&&(A=N.dehydrated,A!==null)){if(p)a.flags&256?(Ns(a),a.flags&=-257,a=bg(s,a,l)):a.memoizedState!==null?(ks(),a.child=s.child,a.flags|=128,a=null):(ks(),g=u.fallback,A=a.mode,u=ah({mode:"visible",children:u.children},A),g=Qr(g,A,l,null),g.flags|=2,u.return=a,g.return=a,u.sibling=g,a.child=u,ro(a,s.child,null,l),u=a.child,u.memoizedState=_g(l),u.childLanes=yg(s,T,l),a.memoizedState=pg,a=g);else if(Ns(a),em(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var F=T.dgst;T=F,u=Error(i(419)),u.stack="",u.digest=T,Il({value:u,source:null,stack:null}),a=bg(s,a,l)}else if(ze||Cl(s,a,l,!1),T=(l&s.childLanes)!==0,ze||T){if(T=ae,T!==null&&(u=l&-l,u=(u&42)!==0?1:Es(u),u=(u&(T.suspendedLanes|l))!==0?0:u,u!==0&&u!==N.retryLane))throw N.retryLane=u,Qa(s,u),In(T,s,u),iv;A.data==="$?"||Ug(),a=bg(s,a,l)}else A.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=N.treeContext,ge=Jn(A.nextSibling),fn=a,Ht=!0,Wr=null,yi=!1,s!==null&&(Un[zn++]=Xi,Un[zn++]=Wi,Un[zn++]=$r,Xi=s.id,Wi=s.overflow,$r=a),a=vg(a,u.children),a.flags|=4096);return a}return g?(ks(),g=u.fallback,A=a.mode,N=s.child,F=N.sibling,u=$i(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,F!==null?g=$i(F,g):(g=Qr(g,A,l,null),g.flags|=2),g.return=a,u.return=a,u.sibling=g,a.child=u,u=g,g=a.child,A=s.child.memoizedState,A===null?A=_g(l):(N=A.cachePool,N!==null?(F=Me._currentValue,N=N.parent!==F?{parent:F,pool:F}:N):N=Z_(),A={baseLanes:A.baseLanes|l,cachePool:N}),g.memoizedState=A,g.childLanes=yg(s,T,l),a.memoizedState=pg,u):(Ns(a),l=s.child,s=l.sibling,l=$i(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function vg(s,a){return a=ah({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ah(s,a){return s=Sn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function bg(s,a,l){return ro(a,s.child,null,l),s=vg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function dv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),Ud(s.return,a,l)}function Eg(s,a,l,u,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=g)}function gv(s,a,l){var u=a.pendingProps,g=u.revealOrder,p=u.tail;if(Ge(s,a,u.children,l),u=Ne.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&dv(s,l,a);else if(s.tag===19)dv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(at(Ne,u),g){case"forwards":for(l=a.child,g=null;l!==null;)s=l.alternate,s!==null&&nh(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),Eg(a,!1,g,l,p);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&nh(s)===null){a.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Eg(a,!0,l,null,p);break;case"together":Eg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ns(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),zs|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Cl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=$i(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=$i(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Tg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ju(s)))}function w1(s,a,l){switch(a.tag){case 3:re(a,a.stateNode.containerInfo),Is(a,Me,s.memoizedState.cache),Rl();break;case 27:case 5:bs(a);break;case 4:re(a,a.stateNode.containerInfo);break;case 10:Is(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ns(a),a.flags|=128,null):(l&a.child.childLanes)!==0?fv(s,a,l):(Ns(a),s=ns(s,a,l),s!==null?s.sibling:null);Ns(a);break;case 19:var g=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Cl(s,a,l,!1),u=(l&a.childLanes)!==0),g){if(u)return gv(s,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),at(Ne,Ne.current),u)break;return null;case 22:case 23:return a.lanes=0,ov(s,a,l);case 24:Is(a,Me,s.memoizedState.cache)}return ns(s,a,l)}function mv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)ze=!0;else{if(!Tg(s,l)&&(a.flags&128)===0)return ze=!1,w1(s,a,l);ze=(s.flags&131072)!==0}else ze=!1,Ht&&(a.flags&1048576)!==0&&G_(a,zu,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var u=a.elementType,g=u._init;if(u=g(u._payload),a.type=u,typeof u=="function")Od(u)?(s=ia(u,s),a.tag=1,a=uv(null,a,u,s,l)):(a.tag=0,a=mg(null,a,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===G){a.tag=11,a=sv(null,a,u,s,l);break t}else if(g===C){a.tag=14,a=rv(null,a,u,s,l);break t}}throw a=Wt(u)||u,Error(i(306,a,""))}}return a;case 0:return mg(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,g=ia(u,a.pendingProps),uv(s,a,u,g,l);case 3:t:{if(re(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var p=a.memoizedState;g=p.element,Gd(s,a),Vl(a,u,null,l);var T=a.memoizedState;if(u=T.cache,Is(a,Me,u),u!==p.cache&&zd(a,[Me],l,!0),Pl(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=hv(s,a,u,l);break t}else if(u!==g){g=Vn(Error(i(424)),a),Il(g),a=hv(s,a,u,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=Jn(s.firstChild),fn=a,Ht=!0,Wr=null,yi=!0,l=Ky(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Rl(),u===g){a=ns(s,a,l);break t}Ge(s,a,u,l)}a=a.child}return a;case 26:return rh(s,a),s===null?(l=v0(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ht||(l=a.type,s=a.pendingProps,u=bh(_t.current).createElement(l),u[Ce]=a,u[Ee]=s,Ke(u,l,s),pe(u),a.stateNode=u):a.memoizedState=v0(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return bs(a),s===null&&Ht&&(u=a.stateNode=p0(a.type,a.pendingProps,_t.current),fn=a,yi=!0,g=ge,Hs(a.type)?(nm=g,ge=Jn(u.firstChild)):ge=g),Ge(s,a,a.pendingProps.children,l),rh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ht&&((g=u=ge)&&(u=J1(u,a.type,a.pendingProps,yi),u!==null?(a.stateNode=u,fn=a,ge=Jn(u.firstChild),yi=!1,g=!0):g=!1),g||Zr(a)),bs(a),g=a.type,p=a.pendingProps,T=s!==null?s.memoizedProps:null,u=p.children,Zg(g,p)?u=null:T!==null&&Zg(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=Wd(s,a,_1,null,null,l),sc._currentValue=g),rh(s,a),Ge(s,a,u,l),a.child;case 6:return s===null&&Ht&&((s=l=ge)&&(l=tx(l,a.pendingProps,yi),l!==null?(a.stateNode=l,fn=a,ge=null,s=!0):s=!1),s||Zr(a)),null;case 13:return fv(s,a,l);case 4:return re(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=ro(a,null,u,l):Ge(s,a,u,l),a.child;case 11:return sv(s,a,a.type,a.pendingProps,l);case 7:return Ge(s,a,a.pendingProps,l),a.child;case 8:return Ge(s,a,a.pendingProps.children,l),a.child;case 12:return Ge(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Is(a,a.type,u.value),Ge(s,a,u.children,l),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,ta(a),g=Je(g),u=u(g),a.flags|=1,Ge(s,a,u,l),a.child;case 14:return rv(s,a,a.type,a.pendingProps,l);case 15:return av(s,a,a.type,a.pendingProps,l);case 19:return gv(s,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},s===null?(l=ah(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=$i(s.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return ov(s,a,l);case 24:return ta(a),u=Je(Me),s===null?(g=Fd(),g===null&&(g=ae,p=jd(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),a.memoizedState={parent:u,cache:g},qd(a),Is(a,Me,g)):((s.lanes&l)!==0&&(Gd(s,a),Vl(a,null,null,l),Pl()),g=s.memoizedState,p=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Is(a,Me,u)):(u=p.cache,Is(a,Me,u),u!==g.cache&&zd(a,[Me],l,!0))),Ge(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function is(s){s.flags|=4}function pv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!A0(a)){if(a=jn.current,a!==null&&((zt&4194048)===zt?vi!==null:(zt&62914560)!==zt&&(zt&536870912)===0||a!==vi))throw Nl=Hd,J_;s.flags|=8192}}function oh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?al():536870912,s.lanes|=a,co|=a)}function Hl(s,a){if(!Ht)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function x1(s,a,l){var u=a.pendingProps;switch(Pd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ji(Me),ai(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(xl(a)?is(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Q_())),he(a),null;case 26:return l=a.memoizedState,s===null?(is(a),l!==null?(he(a),pv(a,l)):(he(a),a.flags&=-16777217)):l?l!==s.memoizedState?(is(a),he(a),pv(a,l)):(he(a),a.flags&=-16777217):(s.memoizedProps!==u&&is(a),he(a),a.flags&=-16777217),null;case 27:Vi(a),l=_t.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==u&&is(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=dt.current,xl(a)?Y_(a):(s=p0(g,u,l),a.stateNode=s,is(a))}return he(a),null;case 5:if(Vi(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&is(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(s=dt.current,xl(a))Y_(a);else{switch(g=bh(_t.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[Ce]=a,s[Ee]=u;t:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break t;for(;g.sibling===null;){if(g.return===null||g.return===a)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;t:switch(Ke(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&is(a)}}return he(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&is(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=_t.current,xl(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,g=fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ce]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||c0(s.nodeValue,l)),s||Zr(a)}else s=bh(s).createTextNode(u),s[Ce]=a,a.stateNode=s}return he(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ce]=a}else Rl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),g=!1}else g=Q_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(es(a),a):(es(a),null)}if(es(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),oh(a,a.updateQueue),he(a),null;case 4:return ai(),s===null&&Kg(a.stateNode.containerInfo),he(a),null;case 10:return Ji(a.type),he(a),null;case 19:if(ct(Ne),g=a.memoizedState,g===null)return he(a),null;if(u=(a.flags&128)!==0,p=g.rendering,p===null)if(u)Hl(g,!1);else{if(me!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=nh(s),p!==null){for(a.flags|=128,Hl(g,!1),s=p.updateQueue,a.updateQueue=s,oh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)q_(l,s),l=l.sibling;return at(Ne,Ne.current&1|2),a.child}s=s.sibling}g.tail!==null&&Dn()>uh&&(a.flags|=128,u=!0,Hl(g,!1),a.lanes=4194304)}else{if(!u)if(s=nh(p),s!==null){if(a.flags|=128,u=!0,s=s.updateQueue,a.updateQueue=s,oh(a,s),Hl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!Ht)return he(a),null}else 2*Dn()-g.renderingStartTime>uh&&l!==536870912&&(a.flags|=128,u=!0,Hl(g,!1),a.lanes=4194304);g.isBackwards?(p.sibling=a.child,a.child=p):(s=g.last,s!==null?s.sibling=p:a.child=p,g.last=p)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Dn(),a.sibling=null,s=Ne.current,at(Ne,u?s&1|2:s&1),a):(he(a),null);case 22:case 23:return es(a),$d(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),l=a.updateQueue,l!==null&&oh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&ct(ea),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(Me),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function R1(s,a){switch(Pd(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ji(Me),ai(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Vi(a),null;case 13:if(es(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Rl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ct(Ne),null;case 4:return ai(),null;case 10:return Ji(a.type),null;case 22:case 23:return es(a),$d(),s!==null&&ct(ea),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ji(Me),null;case 25:return null;default:return null}}function _v(s,a){switch(Pd(a),a.tag){case 3:Ji(Me),ai();break;case 26:case 27:case 5:Vi(a);break;case 4:ai();break;case 13:es(a);break;case 19:ct(Ne);break;case 10:Ji(a.type);break;case 22:case 23:es(a),$d(),s!==null&&ct(ea);break;case 24:Ji(Me)}}function ql(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var p=l.create,T=l.inst;u=p(),T.destroy=u}l=l.next}while(l!==g)}}catch(A){ne(a,a.return,A)}}function Ps(s,a,l){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&s)===s){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,g=a;var N=l,F=A;try{F()}catch(J){ne(g,N,J)}}}u=u.next}while(u!==p)}}catch(J){ne(a,a.return,J)}}function yv(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{ry(a,l)}catch(u){ne(s,s.return,u)}}}function vv(s,a,l){l.props=ia(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ne(s,a,u)}}function Gl(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){ne(s,a,g)}}function bi(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ne(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ne(s,a,g)}else l.current=null}function bv(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ne(s,s.return,g)}}function Sg(s,a,l){try{var u=s.stateNode;Q1(u,s.type,l,a),u[Ee]=a}catch(g){ne(s,s.return,g)}}function Ev(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Hs(s.type)||s.tag===4}function Ag(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Ev(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Hs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wg(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=vh));else if(u!==4&&(u===27&&Hs(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(wg(s,a,l),s=s.sibling;s!==null;)wg(s,a,l),s=s.sibling}function lh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Hs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(lh(s,a,l),s=s.sibling;s!==null;)lh(s,a,l),s=s.sibling}function Tv(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Ke(a,u,l),a[Ce]=s,a[Ee]=l}catch(p){ne(s,s.return,p)}}var ss=!1,ye=!1,xg=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,je=null;function I1(s,a){if(s=s.containerInfo,Xg=xh,s=k_(s),Ad(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var T=0,A=-1,N=-1,F=0,J=0,nt=s,Y=null;e:for(;;){for(var K;nt!==l||g!==0&&nt.nodeType!==3||(A=T+g),nt!==p||u!==0&&nt.nodeType!==3||(N=T+u),nt.nodeType===3&&(T+=nt.nodeValue.length),(K=nt.firstChild)!==null;)Y=nt,nt=K;for(;;){if(nt===s)break e;if(Y===l&&++F===g&&(A=T),Y===p&&++J===u&&(N=T),(K=nt.nextSibling)!==null)break;nt=Y,Y=nt.parentNode}nt=K}l=A===-1||N===-1?null:{start:A,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wg={focusedElem:s,selectionRange:l},xh=!1,je=a;je!==null;)if(a=je,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,je=s;else for(;je!==null;){switch(a=je,p=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,g=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var Tt=ia(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Tt,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(yt){ne(l,l.return,yt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)tm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":tm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,je=s;break}je=a.return}}function Av(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Vs(s,l),u&4&&ql(5,l);break;case 1:if(Vs(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){ne(l,l.return,T)}else{var g=ia(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ne(l,l.return,T)}}u&64&&yv(l),u&512&&Gl(l,l.return);break;case 3:if(Vs(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{ry(s,a)}catch(T){ne(l,l.return,T)}}break;case 27:a===null&&u&4&&Tv(l);case 26:case 5:Vs(s,l),a===null&&u&4&&bv(l),u&512&&Gl(l,l.return);break;case 12:Vs(s,l);break;case 13:Vs(s,l),u&4&&Rv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=L1.bind(null,l),ex(s,l))));break;case 22:if(u=l.memoizedState!==null||ss,!u){a=a!==null&&a.memoizedState!==null||ye,g=ss;var p=ye;ss=u,(ye=a)&&!p?Ls(s,l,(l.subtreeFlags&8772)!==0):Vs(s,l),ss=g,ye=p}break;case 30:break;default:Vs(s,l)}}function wv(s){var a=s.alternate;a!==null&&(s.alternate=null,wv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&As(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,gn=!1;function rs(s,a,l){for(l=l.child;l!==null;)xv(s,a,l),l=l.sibling}function xv(s,a,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:ye||bi(l,a),rs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ye||bi(l,a);var u=ue,g=gn;Hs(l.type)&&(ue=l.stateNode,gn=!1),rs(s,a,l),tc(l.stateNode),ue=u,gn=g;break;case 5:ye||bi(l,a);case 6:if(u=ue,g=gn,ue=null,rs(s,a,l),ue=u,gn=g,ue!==null)if(gn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(p){ne(l,a,p)}else try{ue.removeChild(l.stateNode)}catch(p){ne(l,a,p)}break;case 18:ue!==null&&(gn?(s=ue,g0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),lc(s)):g0(ue,l.stateNode));break;case 4:u=ue,g=gn,ue=l.stateNode.containerInfo,gn=!0,rs(s,a,l),ue=u,gn=g;break;case 0:case 11:case 14:case 15:ye||Ps(2,l,a),ye||Ps(4,l,a),rs(s,a,l);break;case 1:ye||(bi(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&vv(l,a,u)),rs(s,a,l);break;case 21:rs(s,a,l);break;case 22:ye=(u=ye)||l.memoizedState!==null,rs(s,a,l),ye=u;break;default:rs(s,a,l)}}function Rv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{lc(s)}catch(l){ne(a,a.return,l)}}function C1(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Sv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Sv),a;default:throw Error(i(435,s.tag))}}function Rg(s,a){var l=C1(s);a.forEach(function(u){var g=U1.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function An(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],p=s,T=a,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(Hs(A.type)){ue=A.stateNode,gn=!1;break t}break;case 5:ue=A.stateNode,gn=!1;break t;case 3:case 4:ue=A.stateNode.containerInfo,gn=!0;break t}A=A.return}if(ue===null)throw Error(i(160));xv(p,T,g),ue=null,gn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Iv(a,s),a=a.sibling}var Zn=null;function Iv(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(a,s),wn(s),u&4&&(Ps(3,s,s.return),ql(3,s),Ps(5,s,s.return));break;case 1:An(a,s),wn(s),u&512&&(ye||l===null||bi(l,l.return)),u&64&&ss&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Zn;if(An(a,s),wn(s),u&512&&(ye||l===null||bi(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Mr]||p[Ce]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),Ke(p,u,l),p[Ce]=s,pe(p),u=p;break t;case"link":var T=T0("link","href",g).get(u+(l.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(A,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;case"meta":if(T=T0("meta","content",g).get(u+(l.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(A,1);break e}}p=g.createElement(u),Ke(p,u,l),g.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ce]=s,pe(p),u=p}s.stateNode=u}else S0(g,s.type,s.stateNode);else s.stateNode=E0(g,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?S0(g,s.type,s.stateNode):E0(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Sg(s,s.memoizedProps,l.memoizedProps)}break;case 27:An(a,s),wn(s),u&512&&(ye||l===null||bi(l,l.return)),l!==null&&u&4&&Sg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(An(a,s),wn(s),u&512&&(ye||l===null||bi(l,l.return)),s.flags&32){g=s.stateNode;try{Mn(g,"")}catch(K){ne(s,s.return,K)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Sg(s,g,l!==null?l.memoizedProps:g)),u&1024&&(xg=!0);break;case 6:if(An(a,s),wn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(K){ne(s,s.return,K)}}break;case 3:if(Sh=null,g=Zn,Zn=Eh(a.containerInfo),An(a,s),Zn=g,wn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{lc(a.containerInfo)}catch(K){ne(s,s.return,K)}xg&&(xg=!1,Cv(s));break;case 4:u=Zn,Zn=Eh(s.stateNode.containerInfo),An(a,s),wn(s),Zn=u;break;case 12:An(a,s),wn(s);break;case 13:An(a,s),wn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ng=Dn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 22:g=s.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,F=ss,J=ye;if(ss=F||g,ye=J||N,An(a,s),ye=J,ss=F,wn(s),u&8192)t:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||N||ss||ye||sa(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){N=l=a;try{if(p=N.stateNode,g)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=N.stateNode;var nt=N.memoizedProps.style,Y=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ne(N,N.return,K)}}}else if(a.tag===6){if(l===null){N=a;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(K){ne(N,N.return,K)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rg(s,l))));break;case 19:An(a,s),wn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 30:break;case 21:break;default:An(a,s),wn(s)}}function wn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(Ev(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,p=Ag(s);lh(s,p,g);break;case 5:var T=l.stateNode;l.flags&32&&(Mn(T,""),l.flags&=-33);var A=Ag(s);lh(s,A,T);break;case 3:case 4:var N=l.stateNode.containerInfo,F=Ag(s);wg(s,F,N);break;default:throw Error(i(161))}}catch(J){ne(s,s.return,J)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Cv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Cv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Vs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Av(s,a.alternate,a),a=a.sibling}function sa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ps(4,a,a.return),sa(a);break;case 1:bi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&vv(a,a.return,l),sa(a);break;case 27:tc(a.stateNode);case 26:case 5:bi(a,a.return),sa(a);break;case 22:a.memoizedState===null&&sa(a);break;case 30:sa(a);break;default:sa(a)}s=s.sibling}}function Ls(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=s,p=a,T=p.flags;switch(p.tag){case 0:case 11:case 15:Ls(g,p,l),ql(4,p);break;case 1:if(Ls(g,p,l),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){ne(u,u.return,F)}if(u=p,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)sy(N[g],A)}catch(F){ne(u,u.return,F)}}l&&T&64&&yv(p),Gl(p,p.return);break;case 27:Tv(p);case 26:case 5:Ls(g,p,l),l&&u===null&&T&4&&bv(p),Gl(p,p.return);break;case 12:Ls(g,p,l);break;case 13:Ls(g,p,l),l&&T&4&&Rv(g,p);break;case 22:p.memoizedState===null&&Ls(g,p,l),Gl(p,p.return);break;case 30:break;default:Ls(g,p,l)}a=a.sibling}}function Ig(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Dl(l))}function Cg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Dl(s))}function Ei(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dv(s,a,l,u),a=a.sibling}function Dv(s,a,l,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ei(s,a,l,u),g&2048&&ql(9,a);break;case 1:Ei(s,a,l,u);break;case 3:Ei(s,a,l,u),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Dl(s)));break;case 12:if(g&2048){Ei(s,a,l,u),s=a.stateNode;try{var p=a.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){ne(a,a.return,N)}}else Ei(s,a,l,u);break;case 13:Ei(s,a,l,u);break;case 23:break;case 22:p=a.stateNode,T=a.alternate,a.memoizedState!==null?p._visibility&2?Ei(s,a,l,u):Yl(s,a):p._visibility&2?Ei(s,a,l,u):(p._visibility|=2,ao(s,a,l,u,(a.subtreeFlags&10256)!==0)),g&2048&&Ig(T,a);break;case 24:Ei(s,a,l,u),g&2048&&Cg(a.alternate,a);break;default:Ei(s,a,l,u)}}function ao(s,a,l,u,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=s,T=a,A=l,N=u,F=T.flags;switch(T.tag){case 0:case 11:case 15:ao(p,T,A,N,g),ql(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?ao(p,T,A,N,g):Yl(p,T):(J._visibility|=2,ao(p,T,A,N,g)),g&&F&2048&&Ig(T.alternate,T);break;case 24:ao(p,T,A,N,g),g&&F&2048&&Cg(T.alternate,T);break;default:ao(p,T,A,N,g)}a=a.sibling}}function Yl(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,g=u.flags;switch(u.tag){case 22:Yl(l,u),g&2048&&Ig(u.alternate,u);break;case 24:Yl(l,u),g&2048&&Cg(u.alternate,u);break;default:Yl(l,u)}a=a.sibling}}var Kl=8192;function oo(s){if(s.subtreeFlags&Kl)for(s=s.child;s!==null;)Ov(s),s=s.sibling}function Ov(s){switch(s.tag){case 26:oo(s),s.flags&Kl&&s.memoizedState!==null&&gx(Zn,s.memoizedState,s.memoizedProps);break;case 5:oo(s);break;case 3:case 4:var a=Zn;Zn=Eh(s.stateNode.containerInfo),oo(s),Zn=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Kl,Kl=16777216,oo(s),Kl=a):oo(s));break;default:oo(s)}}function Mv(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ql(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];je=u,kv(u,s)}Mv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Nv(s),s=s.sibling}function Nv(s){switch(s.tag){case 0:case 11:case 15:Ql(s),s.flags&2048&&Ps(9,s,s.return);break;case 3:Ql(s);break;case 12:Ql(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,ch(s)):Ql(s);break;default:Ql(s)}}function ch(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];je=u,kv(u,s)}Mv(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ps(8,a,a.return),ch(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ch(a));break;default:ch(a)}s=s.sibling}}function kv(s,a){for(;je!==null;){var l=je;switch(l.tag){case 0:case 11:case 15:Ps(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Dl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,je=u;else t:for(l=s;je!==null;){u=je;var g=u.sibling,p=u.return;if(wv(u),u===l){je=null;break t}if(g!==null){g.return=p,je=g;break t}je=p}}}var D1={getCacheForType:function(s){var a=Je(Me),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},O1=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ae=null,Mt=null,zt=0,$t=0,xn=null,Us=!1,lo=!1,Dg=!1,as=0,me=0,zs=0,ra=0,Og=0,Bn=0,co=0,$l=null,mn=null,Mg=!1,Ng=0,uh=1/0,hh=null,js=null,Ye=0,Bs=null,uo=null,ho=0,kg=0,Pg=null,Pv=null,Xl=0,Vg=null;function Rn(){if((Qt&2)!==0&&zt!==0)return zt&-zt;if(X.T!==null){var s=Za;return s!==0?s:Hg()}return Ts()}function Vv(){Bn===0&&(Bn=(zt&536870912)===0||Ht?rl():536870912);var s=jn.current;return s!==null&&(s.flags|=32),Bn}function In(s,a,l){(s===ae&&($t===2||$t===9)||s.cancelPendingCommit!==null)&&(fo(s,0),Fs(s,zt,Bn,!1)),Ui(s,l),((Qt&2)===0||s!==ae)&&(s===ae&&((Qt&2)===0&&(ra|=l),me===4&&Fs(s,zt,Bn,!1)),Ti(s))}function Lv(s,a,l){if((Qt&6)!==0)throw Error(i(327));var u=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Or(s,a),g=u?k1(s,a):zg(s,a,!0),p=u;do{if(g===0){lo&&!u&&Fs(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!M1(l)){g=zg(s,a,!1),p=!1;continue}if(g===2){if(p=a,s.errorRecoveryDisabledLanes&p)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var A=s;g=$l;var N=A.current.memoizedState.isDehydrated;if(N&&(fo(A,T).flags|=256),T=zg(A,T,!1),T!==2){if(Dg&&!N){A.errorRecoveryDisabledLanes|=p,ra|=p,g=4;break t}p=mn,mn=g,p!==null&&(mn===null?mn=p:mn.push.apply(mn,p))}g=T}if(p=!1,g!==2)continue}}if(g===1){fo(s,0),Fs(s,a,0,!0);break}t:{switch(u=s,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Fs(u,a,Bn,!Us);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Ng+300-Dn(),10<g)){if(Fs(u,a,Bn,!Us),Ca(u,0,!0)!==0)break t;u.timeoutHandle=f0(Uv.bind(null,u,l,mn,hh,Mg,a,Bn,ra,co,Us,p,2,-0,0),g);break t}Uv(u,l,mn,hh,Mg,a,Bn,ra,co,Us,p,0,-0,0)}}break}while(!0);Ti(s)}function Uv(s,a,l,u,g,p,T,A,N,F,J,nt,Y,K){if(s.timeoutHandle=-1,nt=a.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(ic={stylesheets:null,count:0,unsuspend:dx},Ov(a),nt=mx(),nt!==null)){s.cancelPendingCommit=nt(Gv.bind(null,s,a,p,l,u,g,T,A,N,J,1,Y,K)),Fs(s,p,T,!F);return}Gv(s,a,p,l,u,g,T,A,N)}function M1(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],p=g.getSnapshot;g=g.value;try{if(!Tn(p(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Fs(s,a,l,u){a&=~Og,a&=~ra,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var g=a;0<g;){var p=31-Ze(g),T=1<<p;u[p]=-1,g&=~T}l!==0&&oi(s,l,a)}function fh(){return(Qt&6)===0?(Wl(0),!1):!0}function Lg(){if(Mt!==null){if($t===0)var s=Mt.return;else s=Mt,Zi=Jr=null,tg(s),so=null,Bl=0,s=Mt;for(;s!==null;)_v(s.alternate,s),s=s.return;Mt=null}}function fo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,X1(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Lg(),ae=s,Mt=l=$i(s.current,null),zt=a,$t=0,xn=null,Us=!1,lo=Or(s,a),Dg=!1,co=Bn=Og=ra=zs=me=0,mn=$l=null,Mg=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var g=31-Ze(u),p=1<<g;a|=s[g],u&=~p}return as=a,ku(),l}function zv(s,a){Ct=null,X.H=Ju,a===Ml||a===Hu?(a=ny(),$t=3):a===J_?(a=ny(),$t=4):$t=a===iv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,xn=a,Mt===null&&(me=1,sh(s,Vn(a,s.current)))}function jv(){var s=X.H;return X.H=Ju,s===null?Ju:s}function Bv(){var s=X.A;return X.A=D1,s}function Ug(){me=4,Us||(zt&4194048)!==zt&&jn.current!==null||(lo=!0),(zs&134217727)===0&&(ra&134217727)===0||ae===null||Fs(ae,zt,Bn,!1)}function zg(s,a,l){var u=Qt;Qt|=2;var g=jv(),p=Bv();(ae!==s||zt!==a)&&(hh=null,fo(s,a)),a=!1;var T=me;t:do try{if($t!==0&&Mt!==null){var A=Mt,N=xn;switch($t){case 8:Lg(),T=6;break t;case 3:case 2:case 9:case 6:jn.current===null&&(a=!0);var F=$t;if($t=0,xn=null,go(s,A,N,F),l&&lo){T=0;break t}break;default:F=$t,$t=0,xn=null,go(s,A,N,F)}}N1(),T=me;break}catch(J){zv(s,J)}while(!0);return a&&s.shellSuspendCounter++,Zi=Jr=null,Qt=u,X.H=g,X.A=p,Mt===null&&(ae=null,zt=0,ku()),T}function N1(){for(;Mt!==null;)Fv(Mt)}function k1(s,a){var l=Qt;Qt|=2;var u=jv(),g=Bv();ae!==s||zt!==a?(hh=null,uh=Dn()+500,fo(s,a)):lo=Or(s,a);t:do try{if($t!==0&&Mt!==null){a=Mt;var p=xn;e:switch($t){case 1:$t=0,xn=null,go(s,a,p,1);break;case 2:case 9:if(ty(p)){$t=0,xn=null,Hv(a);break}a=function(){$t!==2&&$t!==9||ae!==s||($t=7),Ti(s)},p.then(a,a);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:ty(p)?($t=0,xn=null,Hv(a)):($t=0,xn=null,go(s,a,p,7));break;case 5:var T=null;switch(Mt.tag){case 26:T=Mt.memoizedState;case 5:case 27:var A=Mt;if(!T||A0(T)){$t=0,xn=null;var N=A.sibling;if(N!==null)Mt=N;else{var F=A.return;F!==null?(Mt=F,dh(F)):Mt=null}break e}}$t=0,xn=null,go(s,a,p,5);break;case 6:$t=0,xn=null,go(s,a,p,6);break;case 8:Lg(),me=6;break t;default:throw Error(i(462))}}P1();break}catch(J){zv(s,J)}while(!0);return Zi=Jr=null,X.H=u,X.A=g,Qt=l,Mt!==null?0:(ae=null,zt=0,ku(),me)}function P1(){for(;Mt!==null&&!el();)Fv(Mt)}function Fv(s){var a=mv(s.alternate,s,as);s.memoizedProps=s.pendingProps,a===null?dh(s):Mt=a}function Hv(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=cv(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=cv(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:tg(a);default:_v(l,a),a=Mt=q_(a,as),a=mv(l,a,as)}s.memoizedProps=s.pendingProps,a===null?dh(s):Mt=a}function go(s,a,l,u){Zi=Jr=null,tg(a),so=null,Bl=0;var g=a.return;try{if(A1(s,g,a,l,zt)){me=1,sh(s,Vn(l,s.current)),Mt=null;return}}catch(p){if(g!==null)throw Mt=g,p;me=1,sh(s,Vn(l,s.current)),Mt=null;return}a.flags&32768?(Ht||u===1?s=!0:lo||(zt&536870912)!==0?s=!1:(Us=s=!0,(u===2||u===9||u===3||u===6)&&(u=jn.current,u!==null&&u.tag===13&&(u.flags|=16384))),qv(a,s)):dh(a)}function dh(s){var a=s;do{if((a.flags&32768)!==0){qv(a,Us);return}s=a.return;var l=x1(a.alternate,a,as);if(l!==null){Mt=l;return}if(a=a.sibling,a!==null){Mt=a;return}Mt=a=s}while(a!==null);me===0&&(me=5)}function qv(s,a){do{var l=R1(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);me=6,Mt=null}function Gv(s,a,l,u,g,p,T,A,N){s.cancelPendingCommit=null;do gh();while(Ye!==0);if((Qt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(p=a.lanes|a.childLanes,p|=Cd,ol(s,l,p,T,A,N),s===ae&&(Mt=ae=null,zt=0),uo=a,Bs=s,ho=l,kg=p,Pg=g,Pv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,z1(Rr,function(){return Xv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,g=ot.p,ot.p=2,T=Qt,Qt|=4;try{I1(s,a,l)}finally{Qt=T,ot.p=g,X.T=u}}Ye=1,Yv(),Kv(),Qv()}}function Yv(){if(Ye===1){Ye=0;var s=Bs,a=uo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var u=ot.p;ot.p=2;var g=Qt;Qt|=4;try{Iv(a,s);var p=Wg,T=k_(s.containerInfo),A=p.focusedElem,N=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&N_(A.ownerDocument.documentElement,A)){if(N!==null&&Ad(A)){var F=N.start,J=N.end;if(J===void 0&&(J=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(J,A.value.length);else{var nt=A.ownerDocument||document,Y=nt&&nt.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Tt=A.textContent.length,yt=Math.min(N.start,Tt),ee=N.end===void 0?yt:Math.min(N.end,Tt);!K.extend&&yt>ee&&(T=ee,ee=yt,yt=T);var z=M_(A,yt),U=M_(A,ee);if(z&&U&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var B=nt.createRange();B.setStart(z.node,z.offset),K.removeAllRanges(),yt>ee?(K.addRange(B),K.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),K.addRange(B))}}}}for(nt=[],K=A;K=K.parentNode;)K.nodeType===1&&nt.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var tt=nt[A];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}xh=!!Xg,Wg=Xg=null}finally{Qt=g,ot.p=u,X.T=l}}s.current=a,Ye=2}}function Kv(){if(Ye===2){Ye=0;var s=Bs,a=uo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var u=ot.p;ot.p=2;var g=Qt;Qt|=4;try{Av(s,a.alternate,a)}finally{Qt=g,ot.p=u,X.T=l}}Ye=3}}function Qv(){if(Ye===4||Ye===3){Ye=0,cu();var s=Bs,a=uo,l=ho,u=Pv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ye=5:(Ye=0,uo=Bs=null,$v(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(js=null),Da(l),a=a.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=X.T,g=ot.p,ot.p=2,X.T=null;try{for(var p=s.onRecoverableError,T=0;T<u.length;T++){var A=u[T];p(A.value,{componentStack:A.stack})}}finally{X.T=a,ot.p=g}}(ho&3)!==0&&gh(),Ti(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Vg?Xl++:(Xl=0,Vg=s):Xl=0,Wl(0)}}function $v(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Dl(a)))}function gh(s){return Yv(),Kv(),Qv(),Xv()}function Xv(){if(Ye!==5)return!1;var s=Bs,a=kg;kg=0;var l=Da(ho),u=X.T,g=ot.p;try{ot.p=32>l?32:l,X.T=null,l=Pg,Pg=null;var p=Bs,T=ho;if(Ye=0,uo=Bs=null,ho=0,(Qt&6)!==0)throw Error(i(331));var A=Qt;if(Qt|=4,Nv(p.current),Dv(p,p.current,T,l),Qt=A,Wl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(de,p)}catch{}return!0}finally{ot.p=g,X.T=u,$v(s,a)}}function Wv(s,a,l){a=Vn(l,a),a=gg(s.stateNode,a,2),s=Os(s,a,2),s!==null&&(Ui(s,2),Ti(s))}function ne(s,a,l){if(s.tag===3)Wv(s,s,l);else for(;a!==null;){if(a.tag===3){Wv(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(js===null||!js.has(u))){s=Vn(l,s),l=ev(2),u=Os(a,l,2),u!==null&&(nv(l,u,a,s),Ui(u,2),Ti(u));break}}a=a.return}}function jg(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new O1;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(l)||(Dg=!0,g.add(l),s=V1.bind(null,s,a,l),a.then(s,s))}function V1(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ae===s&&(zt&l)===l&&(me===4||me===3&&(zt&62914560)===zt&&300>Dn()-Ng?(Qt&2)===0&&fo(s,0):Og|=l,co===zt&&(co=0)),Ti(s)}function Zv(s,a){a===0&&(a=al()),s=Qa(s,a),s!==null&&(Ui(s,a),Ti(s))}function L1(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Zv(s,l)}function U1(s,a){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),Zv(s,l)}function z1(s,a){return wr(s,a)}var mh=null,mo=null,Bg=!1,ph=!1,Fg=!1,aa=0;function Ti(s){s!==mo&&s.next===null&&(mo===null?mh=mo=s:mo=mo.next=s),ph=!0,Bg||(Bg=!0,B1())}function Wl(s,a){if(!Fg&&ph){Fg=!0;do for(var l=!1,u=mh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var T=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Ze(42|s)+1)-1,p&=g&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,n0(u,p))}else p=zt,p=Ca(u,u===ae?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Or(u,p)||(l=!0,n0(u,p));u=u.next}while(l);Fg=!1}}function j1(){Jv()}function Jv(){ph=Bg=!1;var s=0;aa!==0&&($1()&&(s=aa),aa=0);for(var a=Dn(),l=null,u=mh;u!==null;){var g=u.next,p=t0(u,a);p===0?(u.next=null,l===null?mh=g:l.next=g,g===null&&(mo=l)):(l=u,(s!==0||(p&3)!==0)&&(ph=!0)),u=g}Wl(s)}function t0(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var T=31-Ze(p),A=1<<T,N=g[T];N===-1?((A&l)===0||(A&u)!==0)&&(g[T]=sl(A,a)):N<=a&&(s.expiredLanes|=A),p&=~A}if(a=ae,l=zt,l=Ca(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&($t===2||$t===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&xr(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Or(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&xr(u),Da(l)){case 2:case 8:l=Ra;break;case 32:l=Rr;break;case 268435456:l=Ia;break;default:l=Rr}return u=e0.bind(null,s),l=wr(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&xr(u),s.callbackPriority=2,s.callbackNode=null,2}function e0(s,a){if(Ye!==0&&Ye!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(gh()&&s.callbackNode!==l)return null;var u=zt;return u=Ca(s,s===ae?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Lv(s,u,a),t0(s,Dn()),s.callbackNode!=null&&s.callbackNode===l?e0.bind(null,s):null)}function n0(s,a){if(gh())return null;Lv(s,a,!0)}function B1(){W1(function(){(Qt&6)!==0?wr(nl,j1):Jv()})}function Hg(){return aa===0&&(aa=rl()),aa}function i0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Va(""+s)}function s0(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function F1(s,a,l,u,g){if(a==="submit"&&l&&l.stateNode===g){var p=i0((g[Ee]||null).action),T=u.submitter;T&&(a=(a=T[Ee]||null)?i0(a.formAction):T.getAttribute("formAction"),a!==null&&(p=a,T=null));var A=new La("action","action",null,u,g);s.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(aa!==0){var N=T?s0(g,T):new FormData(g);cg(l,{pending:!0,data:N,method:g.method,action:p},null,N)}}else typeof p=="function"&&(A.preventDefault(),N=T?s0(g,T):new FormData(g),cg(l,{pending:!0,data:N,method:g.method,action:p},p,N))},currentTarget:g}]})}}for(var qg=0;qg<Id.length;qg++){var Gg=Id[qg],H1=Gg.toLowerCase(),q1=Gg[0].toUpperCase()+Gg.slice(1);Wn(H1,"on"+q1)}Wn(L_,"onAnimationEnd"),Wn(U_,"onAnimationIteration"),Wn(z_,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(o1,"onTransitionRun"),Wn(l1,"onTransitionStart"),Wn(c1,"onTransitionCancel"),Wn(j_,"onTransitionEnd"),ji("onMouseEnter",["mouseout","mouseover"]),ji("onMouseLeave",["mouseout","mouseover"]),ji("onPointerEnter",["pointerout","pointerover"]),ji("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function r0(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var p=void 0;if(a)for(var T=u.length-1;0<=T;T--){var A=u[T],N=A.instance,F=A.currentTarget;if(A=A.listener,N!==p&&g.isPropagationStopped())break t;p=A,g.currentTarget=F;try{p(g)}catch(J){ih(J)}g.currentTarget=null,p=N}else for(T=0;T<u.length;T++){if(A=u[T],N=A.instance,F=A.currentTarget,A=A.listener,N!==p&&g.isPropagationStopped())break t;p=A,g.currentTarget=F;try{p(g)}catch(J){ih(J)}g.currentTarget=null,p=N}}}}function Nt(s,a){var l=a[cl];l===void 0&&(l=a[cl]=new Set);var u=s+"__bubble";l.has(u)||(a0(a,s,2,!1),l.add(u))}function Yg(s,a,l){var u=0;a&&(u|=4),a0(l,s,u,a)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Kg(s){if(!s[_h]){s[_h]=!0,ul.forEach(function(l){l!=="selectionchange"&&(G1.has(l)||Yg(l,!1,s),Yg(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[_h]||(a[_h]=!0,Yg("selectionchange",!1,a))}}function a0(s,a,l,u){switch(D0(a)){case 2:var g=yx;break;case 8:g=vx;break;default:g=om}l=g.bind(null,a,l,s),g=void 0,!kn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(a,l,{capture:!0,passive:g}):s.addEventListener(a,l,!0):g!==void 0?s.addEventListener(a,l,{passive:g}):s.addEventListener(a,l,!1)}function Qg(s,a,l,u,g){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)t:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===g)break;if(T===4)for(T=u.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;A!==null;){if(T=zi(A),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){u=p=T;continue t}A=A.parentNode}}u=u.return}vu(function(){var F=p,J=Nn(l),nt=[];t:{var Y=B_.get(s);if(Y!==void 0){var K=La,Tt=s;switch(s){case"keypress":if(di(l)===0)break t;case"keydown":case"keyup":K=Ha;break;case"focusin":Tt="focus",K=ja;break;case"focusout":Tt="blur",K=ja;break;case"beforeblur":case"afterblur":K=ja;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ru;break;case L_:case U_:case z_:K=Ba;break;case j_:K=Cu;break;case"scroll":case"scrollend":K=bu;break;case"wheel":K=qa;break;case"copy":case"cut":case"paste":K=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Tl;break;case"toggle":case"beforetoggle":K=Ou}var yt=(a&4)!==0,ee=!yt&&(s==="scroll"||s==="scrollend"),z=yt?Y!==null?Y+"Capture":null:Y;yt=[];for(var U=F,B;U!==null;){var tt=U;if(B=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||B===null||z===null||(tt=zr(U,z),tt!=null&&yt.push(Jl(U,tt,B))),ee)break;U=U.return}0<yt.length&&(Y=new K(Y,Tt,null,l,J),nt.push({event:Y,listeners:yt}))}}if((a&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",K=s==="mouseout"||s==="pointerout",Y&&l!==Hi&&(Tt=l.relatedTarget||l.fromElement)&&(zi(Tt)||Tt[On]))break t;if((K||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Tt=l.relatedTarget||l.toElement,K=F,Tt=Tt?zi(Tt):null,Tt!==null&&(ee=o(Tt),yt=Tt.tag,Tt!==ee||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(K=null,Tt=F),K!==Tt)){if(yt=Pn,tt="onMouseLeave",z="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(yt=Tl,tt="onPointerLeave",z="onPointerEnter",U="pointer"),ee=K==null?Y:ci(K),B=Tt==null?Y:ci(Tt),Y=new yt(tt,U+"leave",K,l,J),Y.target=ee,Y.relatedTarget=B,tt=null,zi(J)===F&&(yt=new yt(z,U+"enter",Tt,l,J),yt.target=B,yt.relatedTarget=ee,tt=yt),ee=tt,K&&Tt)e:{for(yt=K,z=Tt,U=0,B=yt;B;B=po(B))U++;for(B=0,tt=z;tt;tt=po(tt))B++;for(;0<U-B;)yt=po(yt),U--;for(;0<B-U;)z=po(z),B--;for(;U--;){if(yt===z||z!==null&&yt===z.alternate)break e;yt=po(yt),z=po(z)}yt=null}else yt=null;K!==null&&o0(nt,Y,K,yt,!1),Tt!==null&&ee!==null&&o0(nt,ee,Tt,yt,!0)}}t:{if(Y=F?ci(F):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ft=x_;else if(Oe(Y))if(R_)ft=s1;else{ft=n1;var Ot=e1}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&ml(F.elementType)&&(ft=x_):ft=i1;if(ft&&(ft=ft(s,F))){Qi(nt,ft,l,J);break t}Ot&&Ot(s,Y,F),s==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&xs(Y,"number",Y.value)}switch(Ot=F?ci(F):window,s){case"focusin":(Oe(Ot)||Ot.contentEditable==="true")&&(Ga=Ot,wd=F,wl=null);break;case"focusout":wl=wd=Ga=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,P_(nt,l,J);break;case"selectionchange":if(a1)break;case"keydown":case"keyup":P_(nt,l,J)}var mt;if(pi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Lt?W(s,l)&&(vt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(b&&l.locale!=="ko"&&(Lt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lt&&(mt=_l()):(fi=J,Rs="value"in fi?fi.value:fi.textContent,Lt=!0)),Ot=yh(F,vt),0<Ot.length&&(vt=new bl(vt,s,null,l,J),nt.push({event:vt,listeners:Ot}),mt?vt.data=mt:(mt=lt(l),mt!==null&&(vt.data=mt)))),(mt=y?De(s,l):Ut(s,l))&&(vt=yh(F,"onBeforeInput"),0<vt.length&&(Ot=new bl("onBeforeInput","beforeinput",null,l,J),nt.push({event:Ot,listeners:vt}),Ot.data=mt)),F1(nt,s,F,l,J)}r0(nt,a)})}function Jl(s,a,l){return{instance:s,listener:a,currentTarget:l}}function yh(s,a){for(var l=a+"Capture",u=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=zr(s,l),g!=null&&u.unshift(Jl(s,g,p)),g=zr(s,a),g!=null&&u.push(Jl(s,g,p))),s.tag===3)return u;s=s.return}return[]}function po(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function o0(s,a,l,u,g){for(var p=a._reactName,T=[];l!==null&&l!==u;){var A=l,N=A.alternate,F=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||F===null||(N=F,g?(F=zr(l,p),F!=null&&T.unshift(Jl(l,F,N))):g||(F=zr(l,p),F!=null&&T.push(Jl(l,F,N)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var Y1=/\r\n?/g,K1=/\u0000|\uFFFD/g;function l0(s){return(typeof s=="string"?s:""+s).replace(Y1,`
`).replace(K1,"")}function c0(s,a){return a=l0(a),l0(s)===a}function vh(){}function te(s,a,l,u,g,p){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Mn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Mn(s,""+u);break;case"className":ui(s,"class",u);break;case"tabIndex":ui(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ui(s,l,u);break;case"style":gl(s,u,p);break;case"data":if(a!=="object"){ui(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&te(s,a,"name",g.name,g,null),te(s,a,"formEncType",g.formEncType,g,null),te(s,a,"formMethod",g.formMethod,g,null),te(s,a,"formTarget",g.formTarget,g,null)):(te(s,a,"encType",g.encType,g,null),te(s,a,"method",g.method,g,null),te(s,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Va(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=vh);break;case"onScroll":u!=null&&Nt("scroll",s);break;case"onScrollEnd":u!=null&&Nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Va(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Nt("beforetoggle",s),Nt("toggle",s),ws(s,"popover",u);break;case"xlinkActuate":He(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ws(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=yd.get(l)||l,ws(s,l,u))}}function $g(s,a,l,u,g,p){switch(l){case"style":gl(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Mn(s,u):(typeof u=="number"||typeof u=="bigint")&&Mn(s,""+u);break;case"onScroll":u!=null&&Nt("scroll",s);break;case"onScrollEnd":u!=null&&Nt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),p=s[Ee]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):ws(s,l,u)}}}function Ke(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",s),Nt("load",s);var u=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var T=l[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:te(s,a,p,T,l,null)}}g&&te(s,a,"srcSet",l.srcSet,l,null),u&&te(s,a,"src",l.src,l,null);return;case"input":Nt("invalid",s);var A=p=T=g=null,N=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var J=l[u];if(J!=null)switch(u){case"name":g=J;break;case"type":T=J;break;case"checked":N=J;break;case"defaultChecked":F=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:te(s,a,u,J,l,null)}}Vr(s,p,A,N,F,T,g,!1),Pa(s);return;case"select":Nt("invalid",s),u=T=p=null;for(g in l)if(l.hasOwnProperty(g)&&(A=l[g],A!=null))switch(g){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:te(s,a,g,A,l,null)}a=p,l=T,s.multiple=!!u,a!=null?Fi(s,!!u,a,!1):l!=null&&Fi(s,!!u,l,!0);return;case"textarea":Nt("invalid",s),p=g=u=null;for(T in l)if(l.hasOwnProperty(T)&&(A=l[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":g=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:te(s,a,T,A,l,null)}Lr(s,u,g,p),Pa(s);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(u=l[N],u!=null))switch(N){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(s,a,N,u,l,null)}return;case"dialog":Nt("beforetoggle",s),Nt("toggle",s),Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":Nt("load",s);break;case"video":case"audio":for(u=0;u<Zl.length;u++)Nt(Zl[u],s);break;case"image":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"embed":case"source":case"link":Nt("error",s),Nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:te(s,a,F,u,l,null)}return;default:if(ml(a)){for(J in l)l.hasOwnProperty(J)&&(u=l[J],u!==void 0&&$g(s,a,J,u,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(u=l[A],u!=null&&te(s,a,A,u,l,null))}function Q1(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,T=null,A=null,N=null,F=null,J=null;for(K in l){var nt=l[K];if(l.hasOwnProperty(K)&&nt!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=nt;default:u.hasOwnProperty(K)||te(s,a,K,null,u,nt)}}for(var Y in u){var K=u[Y];if(nt=l[Y],u.hasOwnProperty(Y)&&(K!=null||nt!=null))switch(Y){case"type":p=K;break;case"name":g=K;break;case"checked":F=K;break;case"defaultChecked":J=K;break;case"value":T=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==nt&&te(s,a,Y,K,u,nt)}}En(s,T,A,N,F,J,p,g);return;case"select":K=T=A=Y=null;for(p in l)if(N=l[p],l.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":K=N;default:u.hasOwnProperty(p)||te(s,a,p,null,u,N)}for(g in u)if(p=u[g],N=l[g],u.hasOwnProperty(g)&&(p!=null||N!=null))switch(g){case"value":Y=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==N&&te(s,a,g,p,u,N)}a=A,l=T,u=K,Y!=null?Fi(s,!!l,Y,!1):!!u!=!!l&&(a!=null?Fi(s,!!l,a,!0):Fi(s,!!l,l?[]:"",!1));return;case"textarea":K=Y=null;for(A in l)if(g=l[A],l.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:te(s,a,A,null,u,g)}for(T in u)if(g=u[T],p=l[T],u.hasOwnProperty(T)&&(g!=null||p!=null))switch(T){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&te(s,a,T,g,u,p)}Zt(s,Y,K);return;case"option":for(var Tt in l)if(Y=l[Tt],l.hasOwnProperty(Tt)&&Y!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:te(s,a,Tt,null,u,Y)}for(N in u)if(Y=u[N],K=l[N],u.hasOwnProperty(N)&&Y!==K&&(Y!=null||K!=null))switch(N){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:te(s,a,N,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)Y=l[yt],l.hasOwnProperty(yt)&&Y!=null&&!u.hasOwnProperty(yt)&&te(s,a,yt,null,u,Y);for(F in u)if(Y=u[F],K=l[F],u.hasOwnProperty(F)&&Y!==K&&(Y!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,a));break;default:te(s,a,F,Y,u,K)}return;default:if(ml(a)){for(var ee in l)Y=l[ee],l.hasOwnProperty(ee)&&Y!==void 0&&!u.hasOwnProperty(ee)&&$g(s,a,ee,void 0,u,Y);for(J in u)Y=u[J],K=l[J],!u.hasOwnProperty(J)||Y===K||Y===void 0&&K===void 0||$g(s,a,J,Y,u,K);return}}for(var z in l)Y=l[z],l.hasOwnProperty(z)&&Y!=null&&!u.hasOwnProperty(z)&&te(s,a,z,null,u,Y);for(nt in u)Y=u[nt],K=l[nt],!u.hasOwnProperty(nt)||Y===K||Y==null&&K==null||te(s,a,nt,Y,u,K)}var Xg=null,Wg=null;function bh(s){return s.nodeType===9?s:s.ownerDocument}function u0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Zg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jg=null;function $1(){var s=window.event;return s&&s.type==="popstate"?s===Jg?!1:(Jg=s,!0):(Jg=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,X1=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(s){return d0.resolve(null).then(s).catch(Z1)}:f0;function Z1(s){setTimeout(function(){throw s})}function Hs(s){return s==="head"}function g0(s,a){var l=a,u=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var T=s.ownerDocument;if(l&1&&tc(T.documentElement),l&2&&tc(T.body),l&4)for(l=T.head,tc(l),T=l.firstChild;T;){var A=T.nextSibling,N=T.nodeName;T[Mr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=A}}if(g===0){s.removeChild(p),lc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);lc(a)}function tm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":tm(l),As(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function J1(s,a,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Mr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function tx(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function em(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function ex(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Jn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var nm=null;function m0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function p0(s,a,l){switch(a=bh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);As(s)}var Fn=new Map,_0=new Set;function Eh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=ot.d;ot.d={f:nx,r:ix,D:sx,C:rx,L:ax,m:ox,X:cx,S:lx,M:ux};function nx(){var s=os.f(),a=fh();return s||a}function ix(s){var a=li(s);a!==null&&a.tag===5&&a.type==="form"?Ly(a):os.r(s)}var _o=typeof document>"u"?null:document;function y0(s,a,l){var u=_o;if(u&&typeof a=="string"&&a){var g=Te(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),_0.has(g)||(_0.add(g),s={rel:s,crossOrigin:l,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),Ke(a,"link",s),pe(a),u.head.appendChild(a)))}}function sx(s){os.D(s),y0("dns-prefetch",s,null)}function rx(s,a){os.C(s,a),y0("preconnect",s,a)}function ax(s,a,l){os.L(s,a,l);var u=_o;if(u&&s&&a){var g='link[rel="preload"][as="'+Te(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Te(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Te(l.imageSizes)+'"]')):g+='[href="'+Te(s)+'"]';var p=g;switch(a){case"style":p=yo(s);break;case"script":p=vo(s)}Fn.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Fn.set(p,s),u.querySelector(g)!==null||a==="style"&&u.querySelector(ec(p))||a==="script"&&u.querySelector(nc(p))||(a=u.createElement("link"),Ke(a,"link",s),pe(a),u.head.appendChild(a)))}}function ox(s,a){os.m(s,a);var l=_o;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(s)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(s)}if(!Fn.has(p)&&(s=_({rel:"modulepreload",href:s},a),Fn.set(p,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(nc(p)))return}u=l.createElement("link"),Ke(u,"link",s),pe(u),l.head.appendChild(u)}}}function lx(s,a,l){os.S(s,a,l);var u=_o;if(u&&s){var g=cn(u).hoistableStyles,p=yo(s);a=a||"default";var T=g.get(p);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(ec(p)))A.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Fn.get(p))&&im(s,l);var N=T=u.createElement("link");pe(N),Ke(N,"link",s),N._p=new Promise(function(F,J){N.onload=F,N.onerror=J}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Th(T,a,u)}T={type:"stylesheet",instance:T,count:1,state:A},g.set(p,T)}}}function cx(s,a){os.X(s,a);var l=_o;if(l&&s){var u=cn(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(nc(g)),p||(s=_({src:s,async:!0},a),(a=Fn.get(g))&&sm(s,a),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function ux(s,a){os.M(s,a);var l=_o;if(l&&s){var u=cn(l).hoistableScripts,g=vo(s),p=u.get(g);p||(p=l.querySelector(nc(g)),p||(s=_({src:s,async:!0,type:"module"},a),(a=Fn.get(g))&&sm(s,a),p=l.createElement("script"),pe(p),Ke(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function v0(s,a,l,u){var g=(g=_t.current)?Eh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=yo(l.href),l=cn(g).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=yo(l.href);var p=cn(g).hoistableStyles,T=p.get(s);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,T),(p=g.querySelector(ec(s)))&&!p._p&&(T.instance=p,T.state.loading=5),Fn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fn.set(s,l),p||hx(g,s,l,T.state))),a&&u===null)throw Error(i(528,""));return T}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=vo(l),l=cn(g).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function yo(s){return'href="'+Te(s)+'"'}function ec(s){return'link[rel="stylesheet"]['+s+"]"}function b0(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function hx(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Ke(a,"link",l),pe(a),s.head.appendChild(a))}function vo(s){return'[src="'+Te(s)+'"]'}function nc(s){return"script[async]"+s}function E0(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Te(l.href)+'"]');if(u)return a.instance=u,pe(u),u;var g=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pe(u),Ke(u,"style",g),Th(u,l.precedence,s),a.instance=u;case"stylesheet":g=yo(l.href);var p=s.querySelector(ec(g));if(p)return a.state.loading|=4,a.instance=p,pe(p),p;u=b0(l),(g=Fn.get(g))&&im(u,g),p=(s.ownerDocument||s).createElement("link"),pe(p);var T=p;return T._p=new Promise(function(A,N){T.onload=A,T.onerror=N}),Ke(p,"link",u),a.state.loading|=4,Th(p,l.precedence,s),a.instance=p;case"script":return p=vo(l.src),(g=s.querySelector(nc(p)))?(a.instance=g,pe(g),g):(u=l,(g=Fn.get(p))&&(u=_({},l),sm(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),pe(g),Ke(g,"link",u),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Th(u,l.precedence,s));return a.instance}function Th(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===a)p=A;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function im(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function sm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Sh=null;function T0(s,a,l){if(Sh===null){var u=new Map,g=Sh=new Map;g.set(l,u)}else g=Sh,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[Mr]||p[Ce]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(a)||"";T=s+T;var A=u.get(T);A?A.push(p):u.set(T,[p])}}return u}function S0(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function fx(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function A0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ic=null;function dx(){}function gx(s,a,l){if(ic===null)throw Error(i(475));var u=ic;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=yo(l.href),p=s.querySelector(ec(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Ah.bind(u),s.then(u,u)),a.state.loading|=4,a.instance=p,pe(p);return}p=s.ownerDocument||s,l=b0(l),(g=Fn.get(g))&&im(l,g),p=p.createElement("link"),pe(p);var T=p;T._p=new Promise(function(A,N){T.onload=A,T.onerror=N}),Ke(p,"link",l),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Ah.bind(u),s.addEventListener("load",a),s.addEventListener("error",a))}}function mx(){if(ic===null)throw Error(i(475));var s=ic;return s.stylesheets&&s.count===0&&rm(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&rm(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Ah(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var wh=null;function rm(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,wh=new Map,a.forEach(px,s),wh=null,Ah.call(s))}function px(s,a){if(!(a.state.loading&4)){var l=wh.get(s);if(l)var u=l.get(null);else{l=new Map,wh.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var T=g[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}g=a.instance,T=g.getAttribute("data-precedence"),p=l.get(T)||u,p===u&&l.set(null,g),l.set(T,g),this.count++,u=Ah.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var sc={$$typeof:Z,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function _x(s,a,l,u,g,p,T,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function w0(s,a,l,u,g,p,T,A,N,F,J,nt){return s=new _x(s,a,l,T,A,N,F,nt),a=1,p===!0&&(a|=24),p=Sn(3,null,null,a),s.current=p,p.stateNode=s,a=jd(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:a},qd(p),s}function x0(s){return s?(s=$a,s):$a}function R0(s,a,l,u,g,p){g=x0(g),u.context===null?u.context=g:u.pendingContext=g,u=Ds(a),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Os(s,u,a),l!==null&&(In(l,s,a),kl(l,s,a))}function I0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function am(s,a){I0(s,a),(s=s.alternate)&&I0(s,a)}function C0(s){if(s.tag===13){var a=Qa(s,67108864);a!==null&&In(a,s,67108864),am(s,67108864)}}var xh=!0;function yx(s,a,l,u){var g=X.T;X.T=null;var p=ot.p;try{ot.p=2,om(s,a,l,u)}finally{ot.p=p,X.T=g}}function vx(s,a,l,u){var g=X.T;X.T=null;var p=ot.p;try{ot.p=8,om(s,a,l,u)}finally{ot.p=p,X.T=g}}function om(s,a,l,u){if(xh){var g=lm(u);if(g===null)Qg(s,a,u,Rh,l),O0(s,u);else if(Ex(g,s,a,l,u))u.stopPropagation();else if(O0(s,u),a&4&&-1<bx.indexOf(s)){for(;g!==null;){var p=li(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Qn(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var N=1<<31-Ze(T);A.entanglements[1]|=N,T&=~N}Ti(p),(Qt&6)===0&&(uh=Dn()+500,Wl(0))}}break;case 13:A=Qa(p,2),A!==null&&In(A,p,2),fh(),am(p,2)}if(p=lm(u),p===null&&Qg(s,a,u,Rh,l),p===g)break;g=p}g!==null&&u.stopPropagation()}else Qg(s,a,u,null,l)}}function lm(s){return s=Nn(s),cm(s)}var Rh=null;function cm(s){if(Rh=null,s=zi(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Rh=s,null}function D0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fd()){case nl:return 2;case Ra:return 8;case Rr:case dd:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var um=!1,qs=null,Gs=null,Ys=null,rc=new Map,ac=new Map,Ks=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(s,a){switch(s){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":rc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(a.pointerId)}}function oc(s,a,l,u,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},a!==null&&(a=li(a),a!==null&&C0(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function Ex(s,a,l,u,g){switch(a){case"focusin":return qs=oc(qs,s,a,l,u,g),!0;case"dragenter":return Gs=oc(Gs,s,a,l,u,g),!0;case"mouseover":return Ys=oc(Ys,s,a,l,u,g),!0;case"pointerover":var p=g.pointerId;return rc.set(p,oc(rc.get(p)||null,s,a,l,u,g)),!0;case"gotpointercapture":return p=g.pointerId,ac.set(p,oc(ac.get(p)||null,s,a,l,u,g)),!0}return!1}function M0(s){var a=zi(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,fu(s.priority,function(){if(l.tag===13){var u=Rn();u=Es(u);var g=Qa(l,u);g!==null&&In(g,l,u),am(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ih(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=lm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Hi=u,l.target.dispatchEvent(u),Hi=null}else return a=li(l),a!==null&&C0(a),s.blockedOn=l,!1;a.shift()}return!0}function N0(s,a,l){Ih(s)&&l.delete(a)}function Tx(){um=!1,qs!==null&&Ih(qs)&&(qs=null),Gs!==null&&Ih(Gs)&&(Gs=null),Ys!==null&&Ih(Ys)&&(Ys=null),rc.forEach(N0),ac.forEach(N0)}function Ch(s,a){s.blockedOn===a&&(s.blockedOn=null,um||(um=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Tx)))}var Dh=null;function k0(s){Dh!==s&&(Dh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dh===s&&(Dh=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],g=s[a+2];if(typeof u!="function"){if(cm(u||l)===null)continue;break}var p=li(l);p!==null&&(s.splice(a,3),a-=3,cg(p,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function lc(s){function a(N){return Ch(N,s)}qs!==null&&Ch(qs,s),Gs!==null&&Ch(Gs,s),Ys!==null&&Ch(Ys,s),rc.forEach(a),ac.forEach(a);for(var l=0;l<Ks.length;l++){var u=Ks[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Ks.length&&(l=Ks[0],l.blockedOn===null);)M0(l),l.blockedOn===null&&Ks.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],p=l[u+1],T=g[Ee]||null;if(typeof p=="function")T||k0(l);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(g=p,T=p[Ee]||null)A=T.formAction;else if(cm(g)!==null)continue}else A=T.action;typeof A=="function"?l[u+1]=A:(l.splice(u,3),u-=3),k0(l)}}}function hm(s){this._internalRoot=s}Oh.prototype.render=hm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=Rn();R0(l,u,s,a,null,null)},Oh.prototype.unmount=hm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;R0(s.current,2,null,s,null,null),fh(),a[On]=null}};function Oh(s){this._internalRoot=s}Oh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ts();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Ks.length&&a!==0&&a<Ks[l].priority;l++);Ks.splice(l,0,s),l===0&&M0(s)}};var P0=t.version;if(P0!=="19.1.0")throw Error(i(527,P0,"19.1.0"));ot.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var Sx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{de=Mh.inject(Sx),Kt=Mh}catch{}}return uc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,u="",g=Wy,p=Zy,T=Jy,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks)),a=w0(s,1,!1,null,null,l,u,g,p,T,A,null),s[On]=a.current,Kg(s),new hm(a)},uc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var u=!1,g="",p=Wy,T=Zy,A=Jy,N=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),a=w0(s,1,!0,a,l??null,u,g,p,T,A,N,F),a.context=x0(null),l=a.current,u=Rn(),u=Es(u),g=Ds(u),g.callback=null,Os(l,g,u),l=u,a.current.lanes=l,Ui(a,l),Ti(a),s[On]=a.current,Kg(s),new Oh(a)},uc.version="19.1.0",uc}var G0;function kx(){if(G0)return gm.exports;G0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),gm.exports=Nx(),gm.exports}var Px=kx();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>{};var Y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Lx=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],h=n[e++],d=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,h=c?n[r+1]:0,d=r+2<n.length,m=d?n[r+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|m>>6,S=m&63;d||(S=64,c||(E=64)),i.push(e[_],e[v],e[E],e[S])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(LT(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Lx(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const m=r<n.length?e[n.charAt(r)]:64;++r;const v=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||h==null||m==null||v==null)throw new Ux;const E=o<<2|h>>4;if(i.push(E),m!==64){const S=h<<4&240|m>>2;if(i.push(S),v!==64){const R=m<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ux extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zx=function(n){const t=LT(n);return UT.encodeByteArray(t,!0)},df=function(n){return zx(n).replace(/\./g,"")},zT=function(n){try{return UT.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=()=>jx().__FIREBASE_DEFAULTS__,Fx=()=>{if(typeof process>"u"||typeof Y0>"u")return;const n=Y0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&zT(n[1]);return t&&JSON.parse(t)},jf=()=>{try{return Vx()||Bx()||Fx()||Hx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jT=n=>{var t,e;return(e=(t=jf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},qx=n=>{const t=jT(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},BT=()=>{var n;return(n=jf())===null||n===void 0?void 0:n.config},FT=n=>{var t;return(t=jf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[df(JSON.stringify(e)),df(JSON.stringify(c)),""].join(".")}const wc={};function Kx(){const n={prod:[],emulator:[]};for(const t of Object.keys(wc))wc[t]?n.emulator.push(t):n.prod.push(t);return n}function Qx(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let K0=!1;function qT(n,t){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||wc[n]===t||wc[n]||K0)return;wc[n]=t;function e(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=Kx().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{K0=!0,c()},E}function _(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=Qx(i),S=e("text"),R=document.getElementById(S)||document.createElement("span"),D=e("learnmore"),O=document.getElementById(D)||document.createElement("a"),Q=e("preprendIcon"),q=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Z=E.element;h(Z),_(O,D);const G=m();d(q,Q),Z.append(q,R,O,G),document.body.appendChild(Z)}o?(R.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $x(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function Xx(){var n;const t=(n=jf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tR(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eR(){return!Xx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nR(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="FirebaseError";class vs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=sR,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?rR(o,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new vs(r,h,i)}}function rR(n,t){return n.replace(aR,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const aR=/\{\$([^}]+)}/g;function oR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function _a(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(Q0(o)&&Q0(c)){if(!_a(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function Q0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function pc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function _c(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function lR(n,t){const e=new cR(n,t);return e.subscribe.bind(e)}class cR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");uR(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=ym),r.error===void 0&&(r.error=ym),r.complete===void 0&&(r.complete=ym);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uR(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n){return n&&n._delegate?n._delegate:n}class ya{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Gx;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dR(t))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=ha){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ha){return this.instances.has(t)}getOptions(t=ha){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&t(c,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ha){return this.component?this.component.multipleInstances?t:ha:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fR(n){return n===ha?void 0:n}function dR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new hR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const mR={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},pR=Pt.INFO,_R={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},yR=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=_R[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bp{constructor(t){this.name=t,this._logLevel=pR,this._logHandler=yR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const vR=(n,t)=>t.some(e=>n instanceof e);let $0,X0;function bR(){return $0||($0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ER(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,Bm=new WeakMap,YT=new WeakMap,vm=new WeakMap,Ep=new WeakMap;function TR(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(ir(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&GT.set(e,n)}).catch(()=>{}),Ep.set(t,n),t}function SR(n){if(Bm.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Bm.set(n,t)}let Fm={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Bm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||YT.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ir(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function AR(n){Fm=n(Fm)}function wR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(bm(this),t,...e);return YT.set(i,t.sort?t.sort():[t]),ir(i)}:ER().includes(n)?function(...t){return n.apply(bm(this),t),ir(GT.get(this))}:function(...t){return ir(n.apply(bm(this),t))}}function xR(n){return typeof n=="function"?wR(n):(n instanceof IDBTransaction&&SR(n),vR(n,bR())?new Proxy(n,Fm):n)}function ir(n){if(n instanceof IDBRequest)return TR(n);if(vm.has(n))return vm.get(n);const t=xR(n);return t!==n&&(vm.set(n,t),Ep.set(t,n)),t}const bm=n=>Ep.get(n);function RR(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),h=ir(c);return i&&c.addEventListener("upgradeneeded",d=>{i(ir(c.result),d.oldVersion,d.newVersion,ir(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const IR=["get","getKey","getAll","getAllKeys","count"],CR=["put","add","delete","clear"],Em=new Map;function W0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Em.get(t))return Em.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=CR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||IR.includes(e)))return;const o=async function(c,...h){const d=this.transaction(c,r?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),r&&d.done]))[0]};return Em.set(t,o),o}AR(n=>({...n,get:(t,e,i)=>W0(t,e)||n.get(t,e,i),has:(t,e)=>!!W0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(OR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function OR(n){const t=n.getComponent();return t?.type==="VERSION"}const Hm="@firebase/app",Z0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new bp("@firebase/app"),MR="@firebase/app-compat",NR="@firebase/analytics-compat",kR="@firebase/analytics",PR="@firebase/app-check-compat",VR="@firebase/app-check",LR="@firebase/auth",UR="@firebase/auth-compat",zR="@firebase/database",jR="@firebase/data-connect",BR="@firebase/database-compat",FR="@firebase/functions",HR="@firebase/functions-compat",qR="@firebase/installations",GR="@firebase/installations-compat",YR="@firebase/messaging",KR="@firebase/messaging-compat",QR="@firebase/performance",$R="@firebase/performance-compat",XR="@firebase/remote-config",WR="@firebase/remote-config-compat",ZR="@firebase/storage",JR="@firebase/storage-compat",tI="@firebase/firestore",eI="@firebase/ai",nI="@firebase/firestore-compat",iI="firebase",sI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",rI={[Hm]:"fire-core",[MR]:"fire-core-compat",[kR]:"fire-analytics",[NR]:"fire-analytics-compat",[VR]:"fire-app-check",[PR]:"fire-app-check-compat",[LR]:"fire-auth",[UR]:"fire-auth-compat",[zR]:"fire-rtdb",[jR]:"fire-data-connect",[BR]:"fire-rtdb-compat",[FR]:"fire-fn",[HR]:"fire-fn-compat",[qR]:"fire-iid",[GR]:"fire-iid-compat",[YR]:"fire-fcm",[KR]:"fire-fcm-compat",[QR]:"fire-perf",[$R]:"fire-perf-compat",[XR]:"fire-rc",[WR]:"fire-rc-compat",[ZR]:"fire-gcs",[JR]:"fire-gcs-compat",[tI]:"fire-fst",[nI]:"fire-fst-compat",[eI]:"fire-vertex","fire-js":"fire-js",[iI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,aI=new Map,Gm=new Map;function J0(n,t){try{n.container.addComponent(t)}catch(e){ms.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ko(n){const t=n.name;if(Gm.has(t))return ms.debug(`There were multiple attempts to register component ${t}.`),!1;Gm.set(t,n);for(const e of gf.values())J0(e,n);for(const e of aI.values())J0(e,n);return!0}function Tp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ti(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new $c("app","Firebase",oI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=sI;function KT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:qm,automaticDataCollectionEnabled:!0},t),r=i.name;if(typeof r!="string"||!r)throw sr.create("bad-app-name",{appName:String(r)});if(e||(e=BT()),!e)throw sr.create("no-options");const o=gf.get(r);if(o){if(_a(e,o.options)&&_a(i,o.config))return o;throw sr.create("duplicate-app",{appName:r})}const c=new gR(r);for(const d of Gm.values())c.addComponent(d);const h=new lI(e,i,c);return gf.set(r,h),h}function QT(n=qm){const t=gf.get(n);if(!t&&n===qm&&BT())return KT();if(!t)throw sr.create("no-app",{appName:n});return t}function rr(n,t,e){var i;let r=(i=rI[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const o=r.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ms.warn(h.join(" "));return}ko(new ya(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebase-heartbeat-database",uI=1,kc="firebase-heartbeat-store";let Tm=null;function $T(){return Tm||(Tm=RR(cI,uI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(kc)}catch(e){console.warn(e)}}}}).catch(n=>{throw sr.create("idb-open",{originalErrorMessage:n.message})})),Tm}async function hI(n){try{const e=(await $T()).transaction(kc),i=await e.objectStore(kc).get(XT(n));return await e.done,i}catch(t){if(t instanceof vs)ms.warn(t.message);else{const e=sr.create("idb-get",{originalErrorMessage:t?.message});ms.warn(e.message)}}}async function tb(n,t){try{const i=(await $T()).transaction(kc,"readwrite");await i.objectStore(kc).put(t,XT(n)),await i.done}catch(e){if(e instanceof vs)ms.warn(e.message);else{const i=sr.create("idb-set",{originalErrorMessage:e?.message});ms.warn(i.message)}}}function XT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1024,dI=30;class gI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eb();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>dI){const c=_I(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ms.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eb(),{heartbeatsToSend:i,unsentEntries:r}=mI(this._heartbeatsCache.heartbeats),o=df(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ms.warn(e),""}}}function eb(){return new Date().toISOString().substring(0,10)}function mI(n,t=fI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),nb(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),nb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class pI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await hI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return tb(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return tb(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function nb(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function _I(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n){ko(new ya("platform-logger",t=>new DR(t),"PRIVATE")),ko(new ya("heartbeat",t=>new gI(t),"PRIVATE")),rr(Hm,Z0,n),rr(Hm,Z0,"esm2017"),rr("fire-js","")}yI("");function Sp(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vI=WT,ZT=new $c("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new bp("@firebase/auth");function bI(n,...t){mf.logLevel<=Pt.WARN&&mf.warn(`Auth (${qo}): ${n}`,...t)}function Jh(n,...t){mf.logLevel<=Pt.ERROR&&mf.error(`Auth (${qo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,...t){throw Ap(n,...t)}function Ri(n,...t){return Ap(n,...t)}function JT(n,t,e){const i=Object.assign(Object.assign({},vI()),{[t]:e});return new $c("auth","Firebase",i).create(t,{appName:n.name})}function ar(n){return JT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ap(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return ZT.create(n,...t)}function bt(n,t,...e){if(!n)throw Ap(t,...e)}function fs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Jh(t),new Error(t)}function ps(n,t){n||fs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function EI(){return ib()==="http:"||ib()==="https:"}function ib(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EI()||Zx()||"connection"in navigator)?navigator.onLine:!0}function SI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,e){this.shortDelay=t,this.longDelay=e,ps(e>t,"Short delay should be less than long delay!"),this.isMobile=$x()||Jx()}get(){return TI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,t){ps(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xI=new Wc(3e4,6e4);function Aa(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Er(n,t,e,i,r={}){return eS(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=Xc(Object.assign({key:n.config.apiKey},c)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:t,headers:d},o);return Wx()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(m.credentials="include"),tS.fetch()(await nS(n,n.config.apiHost,e,h),m)})}async function eS(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},AI),t);try{const r=new II(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Nh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Nh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Nh(n,"user-disabled",c);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw JT(n,_,m);si(n,_)}}catch(r){if(r instanceof vs)throw r;si(n,"network-request-failed",{message:String(r)})}}async function Bf(n,t,e,i,r={}){const o=await Er(n,t,e,i,r);return"mfaPendingCredential"in o&&si(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function nS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?wp(n.config,r):`${n.config.apiScheme}://${r}`;return wI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function RI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class II{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),xI.get())})}}function Nh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Ri(n,t,i);return r.customData._tokenResponse=e,r}function sb(n){return n!==void 0&&n.enterprise!==void 0}class CI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return RI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DI(n,t){return Er(n,"GET","/v2/recaptchaConfig",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(n,t){return Er(n,"POST","/v1/accounts:delete",t)}async function pf(n,t){return Er(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function MI(n,t=!1){const e=Xe(n),i=await e.getIdToken(t),r=xp(i);bt(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:xc(Sm(r.auth_time)),issuedAtTime:xc(Sm(r.iat)),expirationTime:xc(Sm(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Sm(n){return Number(n)*1e3}function xp(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const r=zT(e);return r?JSON.parse(r):(Jh("Failed to decode base64 JWT payload"),null)}catch(r){return Jh("Caught error parsing JWT payload as JSON",r?.toString()),null}}function rb(n){const t=xp(n);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof vs&&NI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function NI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(n){var t;const e=n.auth,i=await n.getIdToken(),r=await Pc(n,pf(e,{idToken:i}));bt(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const c=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?iS(o.providerUserInfo):[],h=VI(n.providerData,c),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Km(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function PI(n){const t=Xe(n);await _f(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function VI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function iS(n){return n.map(t=>{var{providerId:e}=t,i=Sp(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(n,t){const e=await eS(n,{},async()=>{const i=Xc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await nS(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(d.credentials="include"),tS.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function UI(n,t){return Er(n,"POST","/v2/accounts:revokeToken",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const e=rb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await LI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new Ro;return i&&(bt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(bt(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(bt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,t){bt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ei{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,o=Sp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Pc(this,this.stsTokenManager.getToken(this.auth,t));return bt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return MI(this,t)}reload(){return PI(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ei(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await _f(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(ar(this.auth));const t=await this.getIdToken();return await Pc(this,OI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,o,c,h,d,m,_;const v=(i=e.displayName)!==null&&i!==void 0?i:void 0,E=(r=e.email)!==null&&r!==void 0?r:void 0,S=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,R=(c=e.photoURL)!==null&&c!==void 0?c:void 0,D=(h=e.tenantId)!==null&&h!==void 0?h:void 0,O=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,Q=(m=e.createdAt)!==null&&m!==void 0?m:void 0,q=(_=e.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:G,isAnonymous:$,providerData:it,stsTokenManager:C}=e;bt(Z&&C,t,"internal-error");const x=Ro.fromJSON(this.name,C);bt(typeof Z=="string",t,"internal-error"),$s(v,t.name),$s(E,t.name),bt(typeof G=="boolean",t,"internal-error"),bt(typeof $=="boolean",t,"internal-error"),$s(S,t.name),$s(R,t.name),$s(D,t.name),$s(O,t.name),$s(Q,t.name),$s(q,t.name);const I=new ei({uid:Z,auth:t,email:E,emailVerified:G,displayName:v,isAnonymous:$,photoURL:R,phoneNumber:S,tenantId:D,stsTokenManager:x,createdAt:Q,lastLoginAt:q});return it&&Array.isArray(it)&&(I.providerData=it.map(k=>Object.assign({},k))),O&&(I._redirectEventId=O),I}static async _fromIdTokenResponse(t,e,i=!1){const r=new Ro;r.updateFromServerResponse(e);const o=new ei({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await _f(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];bt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?iS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,h=new Ro;h.updateFromIdToken(i);const d=new ei({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:c}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Km(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function ds(n){ps(n instanceof Function,"Expected a class definition");let t=ab.get(n);return t?(ps(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,ab.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}sS.type="NONE";const ob=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,t,e){return`firebase:${n}:${t}:${e}`}class Io{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=tf(this.userKey,r.apiKey,o),this.fullPersistenceKey=tf("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await pf(this.auth,{idToken:t}).catch(()=>{});return e?ei._fromGetAccountInfoResponse(this.auth,e,t):null}return ei._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Io(ds(ob),t,i);const r=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=r[0]||ds(ob);const c=tf(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const _=await m._get(c);if(_){let v;if(typeof _=="string"){const E=await pf(t,{idToken:_}).catch(()=>{});if(!E)break;v=await ei._fromGetAccountInfoResponse(t,E,_)}else v=ei._fromJSON(t,_);m!==o&&(h=v),o=m;break}}catch{}const d=r.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Io(o,t,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Io(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uS(t))return"Blackberry";if(hS(t))return"Webos";if(aS(t))return"Safari";if((t.includes("chrome/")||oS(t))&&!t.includes("edge/"))return"Chrome";if(cS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function rS(n=ln()){return/firefox\//i.test(n)}function aS(n=ln()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oS(n=ln()){return/crios\//i.test(n)}function lS(n=ln()){return/iemobile/i.test(n)}function cS(n=ln()){return/android/i.test(n)}function uS(n=ln()){return/blackberry/i.test(n)}function hS(n=ln()){return/webos/i.test(n)}function Rp(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zI(n=ln()){var t;return Rp(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function jI(){return tR()&&document.documentMode===10}function fS(n=ln()){return Rp(n)||cS(n)||hS(n)||uS(n)||/windows phone/i.test(n)||lS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n,t=[]){let e;switch(n){case"Browser":e=lb(ln());break;case"Worker":e=`${lb(ln())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const d=t(o);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(n,t={}){return Er(n,"GET","/v2/passwordPolicy",Aa(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=6;class qI{constructor(t){var e,i,r,o;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:HI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,o,c,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cb(this),this.idTokenSubscription=new cb(this),this.beforeStateQueue=new BI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ds(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Io.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await pf(this,{idToken:t}),i=await ei._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=r?._redirectEventId,d=await this.tryRedirectSignIn(t);(!c||c===h)&&d?.user&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await _f(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=SI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ti(this.app))return Promise.reject(ar(this));const e=t?Xe(t):null;return e&&bt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ti(this.app)?Promise.reject(ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await FI(this),e=new qI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $c("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await UI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ds(t)||this._popupRedirectResolver;bt(e,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[ds(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,r);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e?.error&&bI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Go(n){return Xe(n)}class cb{constructor(t){this.auth=t,this.observer=null,this.addObserver=lR(e=>this.observer=e)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YI(n){Ff=n}function gS(n){return Ff.loadJS(n)}function KI(){return Ff.recaptchaEnterpriseScript}function QI(){return Ff.gapiScript}function $I(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class XI{constructor(){this.enterprise=new WI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class WI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const ZI="recaptcha-enterprise",mS="NO_RECAPTCHA";class JI{constructor(t){this.type=ZI,this.auth=Go(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{DI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new CI(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function r(o,c,h){const d=window.grecaptcha;sb(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(m=>{c(m)}).catch(()=>{c(mS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XI().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!e&&sb(window.grecaptcha))r(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=KI();d.length!==0&&(d+=h),gS(d).then(()=>{r(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function ub(n,t,e,i=!1,r=!1){const o=new JI(n);let c;if(r)c=mS;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const h=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function hb(n,t,e,i,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ub(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ub(n,t,e,e==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n,t){const e=Tp(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(_a(o,t??{}))return r;si(r,"already-initialized")}return e.initialize({options:t})}function eC(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ds);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function nC(n,t,e){const i=Go(n);bt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=pS(t),{host:c,port:h}=iC(t),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},_=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){bt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),bt(_a(m,i.config.emulator)&&_a(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ho(c)?(HT(`${o}//${c}${d}`),qT("Auth",!0)):sC()}function pS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function iC(n){const t=pS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:fb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:fb(c)}}}function fb(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function sC(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return fs("not implemented")}_getIdTokenResponse(t){return fs("not implemented")}_linkToIdToken(t,e){return fs("not implemented")}_getReauthenticationResolver(t){return fs("not implemented")}}async function rC(n,t){return Er(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(n,t){return Bf(n,"POST","/v1/accounts:signInWithPassword",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(n,t){return Bf(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,t))}async function lC(n,t){return Bf(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Ip{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Vc(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Vc(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(t,e,"signInWithPassword",aC);case"emailLink":return oC(t,{email:this._email,oobCode:this._password});default:si(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(t,i,"signUpPassword",rC);case"emailLink":return lC(t,{idToken:e,email:this._email,oobCode:this._password});default:si(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n,t){return Bf(n,"POST","/v1/accounts:signInWithIdp",Aa(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="http://localhost";class va extends Ip{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new va(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):si("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,o=Sp(e,["providerId","signInMethod"]);if(!i||!r)return null;const c=new va(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Co(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Co(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Co(t,e)}buildRequest(){const t={requestUri:cC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Xc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hC(n){const t=pc(_c(n)).link,e=t?pc(_c(t)).deep_link_id:null,i=pc(_c(n)).deep_link_id;return(i?pc(_c(i)).link:null)||i||e||t||n}class Cp{constructor(t){var e,i,r,o,c,h;const d=pc(_c(t)),m=(e=d.apiKey)!==null&&e!==void 0?e:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,v=uC((r=d.mode)!==null&&r!==void 0?r:null);bt(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const e=hC(t);try{return new Cp(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(t,e){return Vc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Cp.parseLink(e);return bt(i,"argument-error"),Vc._fromEmailAndCode(t,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends _S{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Zc{constructor(){super("facebook.com")}static credential(t){return va._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xs.credential(t.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return va._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ws.credentialFromTaggedObject(t)}static credentialFromError(t){return Ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ws.credential(e,i)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Zc{constructor(){super("github.com")}static credential(t){return va._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Zs.credentialFromTaggedObject(t)}static credentialFromError(t){return Zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Zs.credential(t.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Zc{constructor(){super("twitter.com")}static credential(t,e){return va._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Js.credentialFromTaggedObject(t)}static credentialFromError(t){return Js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Js.credential(e,i)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await ei._fromIdTokenResponse(t,i,r),c=db(i);return new Po({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=db(i);return new Po({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function db(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends vs{constructor(t,e,i,r){var o;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new yf(t,e,i,r)}}function yS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(n,o,t,i):o})}async function fC(n,t,e=!1){const i=await Pc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(n,t,e=!1){const{auth:i}=n;if(ti(i.app))return Promise.reject(ar(i));const r="reauthenticate";try{const o=await Pc(n,yS(i,r,t,n),e);bt(o.idToken,i,"internal-error");const c=xp(o.idToken);bt(c,i,"internal-error");const{sub:h}=c;return bt(n.uid===h,i,"user-mismatch"),Po._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&si(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(n,t,e=!1){if(ti(n.app))return Promise.reject(ar(n));const i="signIn",r=await yS(n,i,t),o=await Po._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function gC(n,t){return vS(Go(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(n){const t=Go(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function pC(n,t,e){return ti(n.app)?Promise.reject(ar(n)):gC(Xe(n),Yo.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mC(n),i})}function _C(n,t,e,i){return Xe(n).onIdTokenChanged(t,e,i)}function yC(n,t,e){return Xe(n).beforeAuthStateChanged(t,e)}function vC(n,t,e,i){return Xe(n).onAuthStateChanged(t,e,i)}const vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=1e3,EC=10;class ES extends bS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);jI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,EC):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},bC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}ES.type="LOCAL";const TC=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends bS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}TS.type="SESSION";const SS=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Hf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async m=>m(e.origin,o)),d=await SC(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=Dp("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function wC(n){Ii().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function xC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function IC(){return AS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",CC=1,bf="firebaseLocalStorage",xS="fbase_key";class Jc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function qf(n,t){return n.transaction([bf],t?"readwrite":"readonly").objectStore(bf)}function DC(){const n=indexedDB.deleteDatabase(wS);return new Jc(n).toPromise()}function Qm(){const n=indexedDB.open(wS,CC);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(bf,{keyPath:xS})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(bf)?t(i):(i.close(),await DC(),t(await Qm()))})})}async function gb(n,t,e){const i=qf(n,!0).put({[xS]:t,value:e});return new Jc(i).toPromise()}async function OC(n,t){const e=qf(n,!1).get(t),i=await new Jc(e).toPromise();return i===void 0?null:i.value}function mb(n,t){const e=qf(n,!0).delete(t);return new Jc(e).toPromise()}const MC=800,NC=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>NC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(IC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await xC(),!this.activeServiceWorker)return;this.sender=new AC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||RC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Qm();return await gb(t,vf,"1"),await mb(t,vf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>gb(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>OC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>mb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=qf(r,!1).getAll();return new Jc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const kC=RS;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n,t){return t?ds(t):(bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends Ip{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Co(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Co(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Co(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function VC(n){return vS(n.auth,new Op(n),n.bypassAuthState)}function LC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),dC(e,new Op(n),n.bypassAuthState)}async function UC(n){const{auth:t,user:e}=n;return bt(e,t,"internal-error"),fC(e,new Op(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return VC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return LC;default:si(this.auth,"internal-error")}}resolve(t){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Wc(2e3,1e4);class wo extends IS{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const t=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,zC.get())};t()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="pendingRedirect",ef=new Map;class BC extends IS{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=ef.get(this.auth._key());if(!t){try{const i=await FC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}ef.set(this.auth._key(),t)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FC(n,t){const e=GC(t),i=qC(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function HC(n,t){ef.set(n._key(),t)}function qC(n){return ds(n._redirectPersistence)}function GC(n){return tf(jC,n.config.apiKey,n.name)}async function YC(n,t,e=!1){if(ti(n.app))return Promise.reject(ar(n));const i=Go(n),r=PC(i,t),c=await new BC(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=10*60*1e3;class QC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$C(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!CS(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ri(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=KC&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(t))}saveEventToCache(t){this.cachedEventUids.add(pb(t)),this.lastProcessedEventTime=Date.now()}}function pb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function CS({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function $C(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,t={}){return Er(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZC=/^https?/;async function JC(n){if(n.config.emulator)return;const{authorizedDomains:t}=await XC(n);for(const e of t)try{if(t2(e))return}catch{}si(n,"unauthorized-domain")}function t2(n){const t=Ym(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!ZC.test(e))return!1;if(WC.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Wc(3e4,6e4);function _b(){const n=Ii().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function n2(n){return new Promise((t,e)=>{var i,r,o;function c(){_b(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_b(),e(Ri(n,"network-request-failed"))},timeout:e2.get()})}if(!((r=(i=Ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((o=Ii().gapi)===null||o===void 0)&&o.load)c();else{const h=$I("iframefcb");return Ii()[h]=()=>{gapi.load?c():e(Ri(n,"network-request-failed"))},gS(`${QI()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw nf=null,t})}let nf=null;function i2(n){return nf=nf||n2(n),nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Wc(5e3,15e3),r2="__/auth/iframe",a2="emulator/auth/iframe",o2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c2(n){const t=n.config;bt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?wp(t,a2):`https://${n.config.authDomain}/${r2}`,i={apiKey:t.apiKey,appName:n.name,v:qo},r=l2.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Xc(i).slice(1)}`}async function u2(n){const t=await i2(n),e=Ii().gapi;return bt(e,n,"internal-error"),t.open({where:document.body,url:c2(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o2,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ri(n,"network-request-failed"),h=Ii().setTimeout(()=>{o(c)},s2.get());function d(){Ii().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f2=500,d2=600,g2="_blank",m2="http://localhost";class yb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p2(n,t,e,i=f2,r=d2){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},h2),{width:i.toString(),height:r.toString(),top:o,left:c}),m=ln().toLowerCase();e&&(h=oS(m)?g2:e),rS(m)&&(t=t||m2,d.scrollbars="yes");const _=Object.entries(d).reduce((E,[S,R])=>`${E}${S}=${R},`,"");if(zI(m)&&h!=="_self")return _2(t||"",h),new yb(null);const v=window.open(t||"",h,_);bt(v,n,"popup-blocked");try{v.focus()}catch{}return new yb(v)}function _2(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="__/auth/handler",v2="emulator/auth/handler",b2=encodeURIComponent("fac");async function vb(n,t,e,i,r,o){bt(n.config.authDomain,n,"auth-domain-config-required"),bt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:qo,eventId:r};if(t instanceof _S){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",oR(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(t instanceof Zc){const _=t.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${b2}=${encodeURIComponent(d)}`:"";return`${E2(n)}?${Xc(h).slice(1)}${m}`}function E2({config:n}){return n.emulator?wp(n,v2):`https://${n.authDomain}/${y2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SS,this._completeRedirectFn=YC,this._overrideRedirectResult=HC}async _openPopup(t,e,i,r){var o;ps((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await vb(t,e,i,Ym(),r);return p2(t,c,Dp())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await vb(t,e,i,Ym(),r);return wC(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(ps(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await u2(t),i=new QC(t);return e.register("authEvent",r=>(bt(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Am,{type:Am},r=>{var o;const c=(o=r?.[0])===null||o===void 0?void 0:o[Am];c!==void 0&&e(!!c),si(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=JC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return fS()||aS()||Rp()}}const S2=T2;var bb="@firebase/auth",Eb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x2(n){ko(new ya("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dS(n)},m=new GI(i,r,o,d);return eC(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),ko(new ya("auth-internal",t=>{const e=Go(t.getProvider("auth").getImmediate());return(i=>new A2(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(bb,Eb,w2(n)),rr(bb,Eb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=5*60,I2=FT("authIdTokenMaxAge")||R2;let Tb=null;const C2=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>I2)return;const r=e?.token;Tb!==r&&(Tb=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function D2(n=QT()){const t=Tp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=tC(n,{popupRedirectResolver:S2,persistence:[kC,TC,SS]}),i=FT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=C2(o.toString());yC(e,c,()=>c(e.currentUser)),_C(e,h=>c(h))}}const r=jT("auth");return r&&nC(e,`http://${r}`),e}function O2(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}YI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Ri("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",O2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x2("Browser");var M2="firebase",N2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(M2,N2,"app");var Sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,DS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,x){function I(){}I.prototype=x.prototype,C.D=x.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(k,P,L){for(var M=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)M[Wt-2]=arguments[Wt];return x.prototype[P].apply(k,M)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,x,I){I||(I=0);var k=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)k[P]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(P=0;16>P;++P)k[P]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=C.g[0],I=C.g[1],P=C.g[2];var L=C.g[3],M=x+(L^I&(P^L))+k[0]+3614090360&4294967295;x=I+(M<<7&4294967295|M>>>25),M=L+(P^x&(I^P))+k[1]+3905402710&4294967295,L=x+(M<<12&4294967295|M>>>20),M=P+(I^L&(x^I))+k[2]+606105819&4294967295,P=L+(M<<17&4294967295|M>>>15),M=I+(x^P&(L^x))+k[3]+3250441966&4294967295,I=P+(M<<22&4294967295|M>>>10),M=x+(L^I&(P^L))+k[4]+4118548399&4294967295,x=I+(M<<7&4294967295|M>>>25),M=L+(P^x&(I^P))+k[5]+1200080426&4294967295,L=x+(M<<12&4294967295|M>>>20),M=P+(I^L&(x^I))+k[6]+2821735955&4294967295,P=L+(M<<17&4294967295|M>>>15),M=I+(x^P&(L^x))+k[7]+4249261313&4294967295,I=P+(M<<22&4294967295|M>>>10),M=x+(L^I&(P^L))+k[8]+1770035416&4294967295,x=I+(M<<7&4294967295|M>>>25),M=L+(P^x&(I^P))+k[9]+2336552879&4294967295,L=x+(M<<12&4294967295|M>>>20),M=P+(I^L&(x^I))+k[10]+4294925233&4294967295,P=L+(M<<17&4294967295|M>>>15),M=I+(x^P&(L^x))+k[11]+2304563134&4294967295,I=P+(M<<22&4294967295|M>>>10),M=x+(L^I&(P^L))+k[12]+1804603682&4294967295,x=I+(M<<7&4294967295|M>>>25),M=L+(P^x&(I^P))+k[13]+4254626195&4294967295,L=x+(M<<12&4294967295|M>>>20),M=P+(I^L&(x^I))+k[14]+2792965006&4294967295,P=L+(M<<17&4294967295|M>>>15),M=I+(x^P&(L^x))+k[15]+1236535329&4294967295,I=P+(M<<22&4294967295|M>>>10),M=x+(P^L&(I^P))+k[1]+4129170786&4294967295,x=I+(M<<5&4294967295|M>>>27),M=L+(I^P&(x^I))+k[6]+3225465664&4294967295,L=x+(M<<9&4294967295|M>>>23),M=P+(x^I&(L^x))+k[11]+643717713&4294967295,P=L+(M<<14&4294967295|M>>>18),M=I+(L^x&(P^L))+k[0]+3921069994&4294967295,I=P+(M<<20&4294967295|M>>>12),M=x+(P^L&(I^P))+k[5]+3593408605&4294967295,x=I+(M<<5&4294967295|M>>>27),M=L+(I^P&(x^I))+k[10]+38016083&4294967295,L=x+(M<<9&4294967295|M>>>23),M=P+(x^I&(L^x))+k[15]+3634488961&4294967295,P=L+(M<<14&4294967295|M>>>18),M=I+(L^x&(P^L))+k[4]+3889429448&4294967295,I=P+(M<<20&4294967295|M>>>12),M=x+(P^L&(I^P))+k[9]+568446438&4294967295,x=I+(M<<5&4294967295|M>>>27),M=L+(I^P&(x^I))+k[14]+3275163606&4294967295,L=x+(M<<9&4294967295|M>>>23),M=P+(x^I&(L^x))+k[3]+4107603335&4294967295,P=L+(M<<14&4294967295|M>>>18),M=I+(L^x&(P^L))+k[8]+1163531501&4294967295,I=P+(M<<20&4294967295|M>>>12),M=x+(P^L&(I^P))+k[13]+2850285829&4294967295,x=I+(M<<5&4294967295|M>>>27),M=L+(I^P&(x^I))+k[2]+4243563512&4294967295,L=x+(M<<9&4294967295|M>>>23),M=P+(x^I&(L^x))+k[7]+1735328473&4294967295,P=L+(M<<14&4294967295|M>>>18),M=I+(L^x&(P^L))+k[12]+2368359562&4294967295,I=P+(M<<20&4294967295|M>>>12),M=x+(I^P^L)+k[5]+4294588738&4294967295,x=I+(M<<4&4294967295|M>>>28),M=L+(x^I^P)+k[8]+2272392833&4294967295,L=x+(M<<11&4294967295|M>>>21),M=P+(L^x^I)+k[11]+1839030562&4294967295,P=L+(M<<16&4294967295|M>>>16),M=I+(P^L^x)+k[14]+4259657740&4294967295,I=P+(M<<23&4294967295|M>>>9),M=x+(I^P^L)+k[1]+2763975236&4294967295,x=I+(M<<4&4294967295|M>>>28),M=L+(x^I^P)+k[4]+1272893353&4294967295,L=x+(M<<11&4294967295|M>>>21),M=P+(L^x^I)+k[7]+4139469664&4294967295,P=L+(M<<16&4294967295|M>>>16),M=I+(P^L^x)+k[10]+3200236656&4294967295,I=P+(M<<23&4294967295|M>>>9),M=x+(I^P^L)+k[13]+681279174&4294967295,x=I+(M<<4&4294967295|M>>>28),M=L+(x^I^P)+k[0]+3936430074&4294967295,L=x+(M<<11&4294967295|M>>>21),M=P+(L^x^I)+k[3]+3572445317&4294967295,P=L+(M<<16&4294967295|M>>>16),M=I+(P^L^x)+k[6]+76029189&4294967295,I=P+(M<<23&4294967295|M>>>9),M=x+(I^P^L)+k[9]+3654602809&4294967295,x=I+(M<<4&4294967295|M>>>28),M=L+(x^I^P)+k[12]+3873151461&4294967295,L=x+(M<<11&4294967295|M>>>21),M=P+(L^x^I)+k[15]+530742520&4294967295,P=L+(M<<16&4294967295|M>>>16),M=I+(P^L^x)+k[2]+3299628645&4294967295,I=P+(M<<23&4294967295|M>>>9),M=x+(P^(I|~L))+k[0]+4096336452&4294967295,x=I+(M<<6&4294967295|M>>>26),M=L+(I^(x|~P))+k[7]+1126891415&4294967295,L=x+(M<<10&4294967295|M>>>22),M=P+(x^(L|~I))+k[14]+2878612391&4294967295,P=L+(M<<15&4294967295|M>>>17),M=I+(L^(P|~x))+k[5]+4237533241&4294967295,I=P+(M<<21&4294967295|M>>>11),M=x+(P^(I|~L))+k[12]+1700485571&4294967295,x=I+(M<<6&4294967295|M>>>26),M=L+(I^(x|~P))+k[3]+2399980690&4294967295,L=x+(M<<10&4294967295|M>>>22),M=P+(x^(L|~I))+k[10]+4293915773&4294967295,P=L+(M<<15&4294967295|M>>>17),M=I+(L^(P|~x))+k[1]+2240044497&4294967295,I=P+(M<<21&4294967295|M>>>11),M=x+(P^(I|~L))+k[8]+1873313359&4294967295,x=I+(M<<6&4294967295|M>>>26),M=L+(I^(x|~P))+k[15]+4264355552&4294967295,L=x+(M<<10&4294967295|M>>>22),M=P+(x^(L|~I))+k[6]+2734768916&4294967295,P=L+(M<<15&4294967295|M>>>17),M=I+(L^(P|~x))+k[13]+1309151649&4294967295,I=P+(M<<21&4294967295|M>>>11),M=x+(P^(I|~L))+k[4]+4149444226&4294967295,x=I+(M<<6&4294967295|M>>>26),M=L+(I^(x|~P))+k[11]+3174756917&4294967295,L=x+(M<<10&4294967295|M>>>22),M=P+(x^(L|~I))+k[2]+718787259&4294967295,P=L+(M<<15&4294967295|M>>>17),M=I+(L^(P|~x))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+L&4294967295}i.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var I=x-this.blockSize,k=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=I;)r(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<x;)if(k[P++]=C.charCodeAt(L++),P==this.blockSize){r(this,k),P=0;break}}else for(;L<x;)if(k[P++]=C[L++],P==this.blockSize){r(this,k),P=0;break}}this.h=P,this.o+=x},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var I=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=I&255,I/=256;for(this.u(C),C=Array(16),x=I=0;4>x;++x)for(var k=0;32>k;k+=8)C[I++]=this.g[x]>>>k&255;return C};function o(C,x){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=x(C)}function c(C,x){this.h=x;for(var I=[],k=!0,P=C.length-1;0<=P;P--){var L=C[P]|0;k&&L==x||(I[P]=L,k=!1)}this.g=I}var h={};function d(C){return-128<=C&&128>C?o(C,function(x){return new c([x|0],0>x?-1:0)}):new c([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return O(m(-C));for(var x=[],I=1,k=0;C>=I;k++)x[k]=C/I|0,I*=4294967296;return new c(x,0)}function _(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return O(_(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(x,8)),k=v,P=0;P<C.length;P+=8){var L=Math.min(8,C.length-P),M=parseInt(C.substring(P,P+L),x);8>L?(L=m(Math.pow(x,L)),k=k.j(L).add(m(M))):(k=k.j(I),k=k.add(m(M)))}return k}var v=d(0),E=d(1),S=d(16777216);n=c.prototype,n.m=function(){if(D(this))return-O(this).m();for(var C=0,x=1,I=0;I<this.g.length;I++){var k=this.i(I);C+=(0<=k?k:4294967296+k)*x,x*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R(this))return"0";if(D(this))return"-"+O(this).toString(C);for(var x=m(Math.pow(C,6)),I=this,k="";;){var P=G(I,x).g;I=Q(I,P.j(x));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=P,R(I))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function R(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function D(C){return C.h==-1}n.l=function(C){return C=Q(this,C),D(C)?-1:R(C)?0:1};function O(C){for(var x=C.g.length,I=[],k=0;k<x;k++)I[k]=~C.g[k];return new c(I,~C.h).add(E)}n.abs=function(){return D(this)?O(this):this},n.add=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],k=0,P=0;P<=x;P++){var L=k+(this.i(P)&65535)+(C.i(P)&65535),M=(L>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);k=M>>>16,L&=65535,M&=65535,I[P]=M<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function Q(C,x){return C.add(O(x))}n.j=function(C){if(R(this)||R(C))return v;if(D(this))return D(C)?O(this).j(O(C)):O(O(this).j(C));if(D(C))return O(this.j(O(C)));if(0>this.l(S)&&0>C.l(S))return m(this.m()*C.m());for(var x=this.g.length+C.g.length,I=[],k=0;k<2*x;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<C.g.length;P++){var L=this.i(k)>>>16,M=this.i(k)&65535,Wt=C.i(P)>>>16,wt=C.i(P)&65535;I[2*k+2*P]+=M*wt,q(I,2*k+2*P),I[2*k+2*P+1]+=L*wt,q(I,2*k+2*P+1),I[2*k+2*P+1]+=M*Wt,q(I,2*k+2*P+1),I[2*k+2*P+2]+=L*Wt,q(I,2*k+2*P+2)}for(k=0;k<x;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=x;k<2*x;k++)I[k]=0;return new c(I,0)};function q(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function Z(C,x){this.g=C,this.h=x}function G(C,x){if(R(x))throw Error("division by zero");if(R(C))return new Z(v,v);if(D(C))return x=G(O(C),x),new Z(O(x.g),O(x.h));if(D(x))return x=G(C,O(x)),new Z(O(x.g),x.h);if(30<C.g.length){if(D(C)||D(x))throw Error("slowDivide_ only works with positive integers.");for(var I=E,k=x;0>=k.l(C);)I=$(I),k=$(k);var P=it(I,1),L=it(k,1);for(k=it(k,2),I=it(I,2);!R(k);){var M=L.add(k);0>=M.l(C)&&(P=P.add(I),L=M),k=it(k,1),I=it(I,1)}return x=Q(C,P.j(x)),new Z(P,x)}for(P=v;0<=C.l(x);){for(I=Math.max(1,Math.floor(C.m()/x.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=m(I),M=L.j(x);D(M)||0<M.l(C);)I-=k,L=m(I),M=L.j(x);R(L)&&(L=E),P=P.add(L),C=Q(C,M)}return new Z(P,C)}n.A=function(C){return G(this,C).h},n.and=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)&C.i(k);return new c(I,this.h&C.h)},n.or=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)|C.i(k);return new c(I,this.h|C.h)},n.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)^C.i(k);return new c(I,this.h^C.h)};function $(C){for(var x=C.g.length+1,I=[],k=0;k<x;k++)I[k]=C.i(k)<<1|C.i(k-1)>>>31;return new c(I,C.h)}function it(C,x){var I=x>>5;x%=32;for(var k=C.g.length-I,P=[],L=0;L<k;L++)P[L]=0<x?C.i(L+I)>>>x|C.i(L+I+1)<<32-x:C.i(L+I);return new c(P,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,DS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,or=c}).apply(typeof Sb<"u"?Sb:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OS,yc,MS,sf,$m,NS,kS,PS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=e(this);function r(f,y){if(y)t:{var b=i;f=f.split(".");for(var w=0;w<f.length-1;w++){var j=f[w];if(!(j in b))break t;b=b[j]}f=f[f.length-1],w=b[f],y=y(w),y!=w&&y!=null&&t(b,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var b=0,w=!1,j={next:function(){if(!w&&b<f.length){var W=b++;return{value:y(W,f[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(f){return f||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function v(f,y,b){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),f.apply(y,j)}}return function(){return f.apply(y,arguments)}}function E(f,y,b){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,E.apply(null,arguments)}function S(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function R(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(w,j,W){for(var lt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)lt[Lt-2]=arguments[Lt];return y.prototype[j].apply(w,lt)}}function D(f){const y=f.length;if(0<y){const b=Array(y);for(let w=0;w<y;w++)b[w]=f[w];return b}return[]}function O(f,y){for(let b=1;b<arguments.length;b++){const w=arguments[b];if(d(w)){const j=f.length||0,W=w.length||0;f.length=j+W;for(let lt=0;lt<W;lt++)f[j+lt]=w[lt]}else f.push(w)}}class Q{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(f){return/^[\s\xa0]*$/.test(f)}function Z(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function G(f){return G[" "](f),f}G[" "]=function(){};var $=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function it(f,y,b){for(const w in f)y.call(b,f[w],w,f)}function C(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function x(f){const y={};for(const b in f)y[b]=f[b];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,y){let b,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(b in w)f[b]=w[b];for(let W=0;W<I.length;W++)b=I[W],Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}}function P(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function L(f){h.setTimeout(()=>{throw f},0)}function M(){var f=kt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Wt{constructor(){this.h=this.g=null}add(y,b){const w=wt.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var wt=new Q(()=>new X,f=>f.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,gt=!1,kt=new Wt,V=()=>{const f=h.Promise.resolve(void 0);ot=()=>{f.then(rt)}};var rt=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(b){L(b)}var y=wt;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}gt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return f}();function xt(f,y){if(at.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if($){t:{try{G(y.nodeName);var j=!0;break t}catch{}j=!1}j||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_t[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&xt.aa.h.call(this)}}R(xt,at);var _t={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),re=0;function ai(f,y,b,w,j){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=j,this.key=++re,this.da=this.fa=!1}function bs(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Vi(f){this.src=f,this.g={},this.h=0}Vi.prototype.add=function(f,y,b,w,j){var W=f.toString();f=this.g[W],f||(f=this.g[W]=[],this.h++);var lt=wr(f,y,w,j);return-1<lt?(y=f[lt],b||(y.fa=!1)):(y=new ai(y,this.src,W,!!w,j),y.fa=b,f.push(y)),y};function Ar(f,y){var b=y.type;if(b in f.g){var w=f.g[b],j=Array.prototype.indexOf.call(w,y,void 0),W;(W=0<=j)&&Array.prototype.splice.call(w,j,1),W&&(bs(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function wr(f,y,b,w){for(var j=0;j<f.length;++j){var W=f[j];if(!W.da&&W.listener==y&&W.capture==!!b&&W.ha==w)return j}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),el={};function cu(f,y,b,w,j){if(Array.isArray(y)){for(var W=0;W<y.length;W++)cu(f,y[W],b,w,j);return null}return b=uu(b),f&&f[Ve]?f.K(y,b,m(w)?!!w.capture:!1,j):Dn(f,y,b,!1,w,j)}function Dn(f,y,b,w,j,W){if(!y)throw Error("Invalid event type");var lt=m(j)?!!j.capture:!!j,Lt=Ia(f);if(Lt||(f[xr]=Lt=new Vi(f)),b=Lt.add(y,b,w,lt,W),b.proxy)return b;if(w=fd(),b.proxy=w,w.src=f,w.listener=b,f.addEventListener)dt||(j=lt),j===void 0&&(j=!1),f.addEventListener(y.toString(),w,j);else if(f.attachEvent)f.attachEvent(Rr(y.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function fd(){function f(b){return y.call(f.src,f.listener,b)}const y=dd;return f}function nl(f,y,b,w,j){if(Array.isArray(y))for(var W=0;W<y.length;W++)nl(f,y[W],b,w,j);else w=m(w)?!!w.capture:!!w,b=uu(b),f&&f[Ve]?(f=f.i,y=String(y).toString(),y in f.g&&(W=f.g[y],b=wr(W,b,w,j),-1<b&&(bs(W[b]),Array.prototype.splice.call(W,b,1),W.length==0&&(delete f.g[y],f.h--)))):f&&(f=Ia(f))&&(y=f.g[y.toString()],f=-1,y&&(f=wr(y,b,w,j)),(b=-1<f?y[f]:null)&&Ra(b))}function Ra(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Ve])Ar(y.i,f);else{var b=f.type,w=f.proxy;y.removeEventListener?y.removeEventListener(b,w,f.capture):y.detachEvent?y.detachEvent(Rr(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Ia(y))?(Ar(b,f),b.h==0&&(b.src=null,y[xr]=null)):bs(f)}}}function Rr(f){return f in el?el[f]:el[f]="on"+f}function dd(f,y){if(f.da)f=!0;else{y=new xt(y,this);var b=f.listener,w=f.ha||f.src;f.fa&&Ra(f),f=b.call(w,y)}return f}function Ia(f){return f=f[xr],f instanceof Vi?f:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function uu(f){return typeof f=="function"?f:(f[il]||(f[il]=function(y){return f.handleEvent(y)}),f[il])}function de(){ct.call(this),this.i=new Vi(this),this.M=this,this.F=null}R(de,ct),de.prototype[Ve]=!0,de.prototype.removeEventListener=function(f,y,b,w){nl(this,f,y,b,w)};function Kt(f,y){var b,w=f.F;if(w)for(b=[];w;w=w.F)b.push(w);if(f=f.M,w=y.type||y,typeof y=="string")y=new at(y,f);else if(y instanceof at)y.target=y.target||f;else{var j=y;y=new at(w,f),k(y,j)}if(j=!0,b)for(var W=b.length-1;0<=W;W--){var lt=y.g=b[W];j=bn(lt,w,!0,y)&&j}if(lt=y.g=f,j=bn(lt,w,!0,y)&&j,j=bn(lt,w,!1,y)&&j,b)for(W=0;W<b.length;W++)lt=y.g=b[W],j=bn(lt,w,!1,y)&&j}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],w=0;w<b.length;w++)bs(b[w]);delete f.g[y],f.h--}}this.F=null},de.prototype.K=function(f,y,b,w){return this.i.add(String(f),y,!1,b,w)},de.prototype.L=function(f,y,b,w){return this.i.add(String(f),y,!0,b,w)};function bn(f,y,b,w){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,W=0;W<y.length;++W){var lt=y[W];if(lt&&!lt.da&&lt.capture==b){var Lt=lt.listener,De=lt.ha||lt.src;lt.fa&&Ar(f.i,lt),j=Lt.call(De,w)!==!1&&j}}return j&&!w.defaultPrevented}function Ze(f,y,b){if(typeof f=="function")b&&(f=E(f,b));else if(f&&typeof f.handleEvent=="function")f=E(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function hu(f){f.g=Ze(()=>{f.g=null,f.i&&(f.i=!1,hu(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class gd extends ct{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(f){ct.call(this),this.h=f,this.g={}}R(Ir,ct);var Cr=[];function Dr(f){it(f.g,function(y,b){this.g.hasOwnProperty(b)&&Ra(y)},f),f.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),Dr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=h.JSON.stringify,Ca=h.JSON.parse,Or=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function sl(){}sl.prototype.h=null;function rl(f){return f.h||(f.h=f.i())}function al(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ui(){at.call(this,"d")}R(Ui,at);function ol(){at.call(this,"c")}R(ol,at);var oi={},ll=null;function Es(){return ll=ll||new de}oi.La="serverreachability";function Da(f){at.call(this,oi.La,f)}R(Da,at);function Ts(f){const y=Es();Kt(y,new Da(y))}oi.STAT_EVENT="statevent";function fu(f,y){at.call(this,oi.STAT_EVENT,f),this.stat=y}R(fu,at);function ce(f){const y=Es();Kt(y,new fu(y,f))}oi.Ma="timingevent";function Ce(f,y){at.call(this,oi.Ma,f),this.size=y}R(Ce,at);function Ee(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function cl(f,y,b,w,j,W){f.info(function(){if(f.g)if(W)for(var lt="",Lt=W.split("&"),De=0;De<Lt.length;De++){var Ut=Lt[De].split("=");if(1<Ut.length){var Ue=Ut[0];Ut=Ut[1];var Oe=Ue.split("_");lt=2<=Oe.length&&Oe[1]=="type"?lt+(Ue+"="+Ut+"&"):lt+(Ue+"=redacted&")}}else lt=null;else lt=W;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+y+`
`+b+`
`+lt})}function md(f,y,b,w,j,W,lt){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+y+`
`+b+`
`+W+" "+lt})}function Ss(f,y,b,w){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Mr(f,b)+(w?" "+w:"")})}function du(f,y){f.info(function(){return"TIMEOUT: "+y})}On.prototype.info=function(){};function Mr(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var w=b[f];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var lt=1;lt<j.length;lt++)j[lt]=""}}}}return Qn(b)}catch{return y}}var As={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function ci(){}R(ci,sl),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},li=new ci;function cn(f,y,b,w){this.j=f,this.i=y,this.l=b,this.R=w||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var ul={},Oa={};function $n(f,y,b){f.L=1,f.v=Lr(En(y)),f.m=b,f.P=!0,ji(f,null)}function ji(f,y){f.F=Date.now(),Nr(f),f.A=En(f.v);var b=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),pl(b.i,"t",w),f.C=0,b=f.j.J,f.h=new pe,f.g=Cu(f.j,b?y:null,!f.m),0<f.O&&(f.M=new gd(E(f.Y,f,f.g),f.O)),y=f.U,b=f.g,w=f.ca;var j="readystatechange";Array.isArray(j)||(j&&(Cr[0]=j.toString()),j=Cr);for(var W=0;W<j.length;W++){var lt=cu(b,j[W],w||y.handleEvent,!1,y.h||y);if(!lt)break;y.g[lt.key]=lt}y=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Ts(),cl(f.i,f.u,f.A,f.l,f.R,f.m)}cn.prototype.ca=function(f){f=f.target;const y=this.M;y&&Pn(f)==3?y.j():this.Y(f)},cn.prototype.Y=function(f){try{if(f==this.g)t:{const Oe=Pn(this.g);var y=this.g.Ba();const Qi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||Oe!=4||y==7||(y==8||0>=Qi?Ts(3):Ts(2)),ws(this);var b=this.g.Z();this.X=b;e:if(gu(this)){var w=Eu(this.g);f="";var j=w.length,W=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ui(this);var lt="";break e}this.h.i=new h.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,f+=this.h.i.decode(w[y],{stream:!(W&&y==j-1)});w.length=0,this.h.g+=f,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=b==200,md(this.i,this.u,this.A,this.l,this.R,Oe,b),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,De=this.g;if((Lt=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Lt)){var Ut=Lt;break e}}Ut=null}if(b=Ut)Ss(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kr(this,b);else{this.o=!1,this.s=3,ce(12),He(this),ui(this);break t}}if(this.P){b=!0;let qe;for(;!this.J&&this.C<lt.length;)if(qe=mu(this,lt),qe==Oa){Oe==4&&(this.s=4,ce(14),b=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==ul){this.s=4,ce(15),Ss(this.i,this.l,lt,"[Invalid Chunk]"),b=!1;break}else Ss(this.i,this.l,qe,null),kr(this,qe);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||lt.length!=0||this.h.h||(this.s=1,ce(16),b=!1),this.o=this.o&&b,!b)Ss(this.i,this.l,lt,"[Invalid Chunked Response]"),He(this),ui(this);else if(0<lt.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),Gr(Ue),Ue.M=!0,ce(11))}}else Ss(this.i,this.l,lt,null),kr(this,lt);Oe==4&&He(this),this.o&&!this.J&&(Oe==4?xu(this.j,this):(this.o=!1,Nr(this)))}else bd(this.g),b==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),He(this),ui(this)}}}catch{}finally{}};function gu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function mu(f,y){var b=f.C,w=y.indexOf(`
`,b);return w==-1?Oa:(b=Number(y.substring(b,w)),isNaN(b)?ul:(w+=1,w+b>y.length?Oa:(y=y.slice(w,w+b),f.C=w+b,y)))}cn.prototype.cancel=function(){this.J=!0,He(this)};function Nr(f){f.S=Date.now()+f.I,pu(f,f.I)}function pu(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ee(E(f.ba,f),y)}function ws(f){f.B&&(h.clearTimeout(f.B),f.B=null)}cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(du(this.i,this.A),this.L!=2&&(Ts(),ce(17)),He(this),this.s=2,ui(this)):pu(this,this.S-f)};function ui(f){f.j.G==0||f.J||xu(f.j,f)}function He(f){ws(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Dr(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function kr(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||hl(b.h,f))){if(!f.K&&hl(b.h,f)&&b.G==3){try{var w=b.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){t:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Ha(b),Ba(b);else break t;El(b),ce(18)}}else b.za=j[1],0<b.za-b.T&&37500>j[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ee(E(b.Za,b),6e3));if(1>=Na(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ki(b,11)}else if((f.K||b.g==f)&&Ha(b),!q(y))for(j=b.Da.g.parse(y),y=0;y<j.length;y++){let Ut=j[y];if(b.T=Ut[0],Ut=Ut[1],b.G==2)if(Ut[0]=="c"){b.K=Ut[1],b.ia=Ut[2];const Ue=Ut[3];Ue!=null&&(b.la=Ue,b.j.info("VER="+b.la));const Oe=Ut[4];Oe!=null&&(b.Aa=Oe,b.j.info("SVER="+b.Aa));const Qi=Ut[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(w=1.5*Qi,b.L=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const qe=f.g;if(qe){const _i=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var W=w.h;W.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ka(W,W.h),W.h=null))}if(w.D){const Sl=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(w.ya=Sl,Zt(w.I,w.D,Sl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),w=b;var lt=f;if(w.qa=Iu(w,w.J?w.ia:null,w.W),lt.K){un(w.h,lt);var Lt=lt,De=w.L;De&&(Lt.I=De),Lt.B&&(ws(Lt),Nr(Lt)),w.g=lt}else Au(w);0<b.i.length&&Fa(b)}else Ut[0]!="stop"&&Ut[0]!="close"||Ki(b,7);else b.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ki(b,7):vl(b):Ut[0]!="noop"&&b.l&&b.l.ta(Ut),b.v=0)}}Ts(4)}catch{}}var _u=class{constructor(f,y){this.g=f,this.map=y}};function Bi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Na(f){return f.h?1:f.g?f.g.size:0}function hl(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function ka(f,y){f.g?f.g.add(y):f.h=y}function un(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Bi.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function fl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return D(f.i)}function pd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],b=f.length,w=0;w<b;w++)y.push(f[w]);return y}y=[],b=0;for(w in f)y[b++]=f[w];return y}function Pa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const w in f)y[b++]=w;return y}}}function dl(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=Pa(f),w=pd(f),j=w.length,W=0;W<j;W++)y.call(void 0,w[W],b&&b[W],f)}var Pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var w=f[b].indexOf("="),j=null;if(0<=w){var W=f[b].substring(0,w);j=f[b].substring(w+1)}else W=f[b];y(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Te(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Te){this.h=f.h,Vr(this,f.j),this.o=f.o,this.g=f.g,xs(this,f.s),this.l=f.l;var y=f.i,b=new Hi;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Fi(this,b),this.m=f.m}else f&&(y=String(f).match(Pr))?(this.h=!1,Vr(this,y[1]||"",!0),this.o=Mn(y[2]||""),this.g=Mn(y[3]||"",!0),xs(this,y[4]),this.l=Mn(y[5]||"",!0),Fi(this,y[6]||"",!0),this.m=Mn(y[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}Te.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Ur(y,gl,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Ur(y,gl,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Ur(b,b.charAt(0)=="/"?yd:ml,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Ur(b,Va)),f.join("")};function En(f){return new Te(f)}function Vr(f,y,b){f.j=b?Mn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function xs(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Fi(f,y,b){y instanceof Hi?(f.i=y,vu(f.i,f.h)):(b||(y=Ur(y,vd)),f.i=new Hi(y,f.h))}function Zt(f,y,b){f.i.set(y,b)}function Lr(f){return Zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Mn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ur(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,yu),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function yu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var gl=/[#\/\?@]/g,ml=/[#\?:]/g,yd=/[#\?]/g,vd=/[#\?@]/g,Va=/#/g;function Hi(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Nn(f){f.g||(f.g=new Map,f.h=0,f.i&&_d(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Hi.prototype,n.add=function(f,y){Nn(this),this.i=null,f=hi(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function qi(f,y){Nn(f),y=hi(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Gi(f,y){return Nn(f),y=hi(f,y),f.g.has(y)}n.forEach=function(f,y){Nn(this),this.g.forEach(function(b,w){b.forEach(function(j){f.call(y,j,w,this)},this)},this)},n.na=function(){Nn(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let w=0;w<y.length;w++){const j=f[w];for(let W=0;W<j.length;W++)b.push(y[w])}return b},n.V=function(f){Nn(this);let y=[];if(typeof f=="string")Gi(this,f)&&(y=y.concat(this.g.get(hi(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return Nn(this),this.i=null,f=hi(this,f),Gi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function pl(f,y,b){qi(f,y),0<b.length&&(f.i=null,f.g.set(hi(f,y),D(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var w=y[b];const W=encodeURIComponent(String(w)),lt=this.V(w);for(w=0;w<lt.length;w++){var j=W;lt[w]!==""&&(j+="="+encodeURIComponent(String(lt[w]))),f.push(j)}}return this.i=f.join("&")};function hi(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function vu(f,y){y&&!f.j&&(Nn(f),f.i=null,f.g.forEach(function(b,w){var j=w.toLowerCase();w!=j&&(qi(this,w),pl(this,j,b))},f)),f.j=y}function zr(f,y){const b=new On;if(h.Image){const w=new Image;w.onload=S(kn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=S(kn,b,"TestLoadImage: error",!1,y,w),w.onabort=S(kn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=S(kn,b,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else y(!1)}function Xn(f,y){const b=new On,w=new AbortController,j=setTimeout(()=>{w.abort(),kn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:w.signal}).then(W=>{clearTimeout(j),W.ok?kn(b,"TestPingServer: ok",!0,y):kn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),kn(b,"TestPingServer: error",!1,y)})}function kn(f,y,b,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(b)}catch{}}function jr(){this.g=new Or}function fi(f,y,b){const w=b||"";try{dl(f,function(j,W){let lt=j;m(j)&&(lt=Qn(j)),y.push(w+W+"="+encodeURIComponent(lt))})}catch(j){throw y.push(w+"type="+encodeURIComponent("_badmap")),j}}function Rs(f){this.l=f.Ub||null,this.j=f.eb||!1}R(Rs,sl),Rs.prototype.g=function(){return new Yi(this.l,this.j)},Rs.prototype.i=function(f){return function(){return f}}({});function Yi(f,y){de.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Yi,de),n=Yi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,gi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?di(this):gi(this),this.readyState==3&&_l(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,di(this))},n.Qa=function(f){this.g&&(this.response=f,di(this))},n.ga=function(){this.g&&di(this)};function di(f){f.readyState=4,f.l=null,f.j=null,f.v=null,gi(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function gi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function yl(f){let y="";return it(f,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function Le(f,y,b){t:{for(w in b){var w=!1;break t}w=!0}w||(b=yl(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Zt(f,y,b))}function Gt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Gt,de);var La=/^https?$/i,Br=["POST","PUT"];n=Gt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?rl(this.o):rl(li),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(W){bu(this,W);return}if(f=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)b.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())b.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),j=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Br,y,void 0))||w||j||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,lt]of b)this.g.setRequestHeader(W,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fr(this),this.u=!0,this.g.send(f),this.u=!1}catch(W){bu(this,W)}};function bu(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Ua(f),mi(f)}function Ua(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Kt(this,"complete"),Kt(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),Gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},n.bb=function(){za(this)};function za(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Pn(f)!=4||f.Z()!=2)){if(f.u&&Pn(f)==4)Ze(f.Ea,0,f);else if(Kt(f,"readystatechange"),Pn(f)==4){f.h=!1;try{const lt=f.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var b;if(!(b=y)){var w;if(w=lt===0){var j=String(f.D).match(Pr)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),w=!La.test(j?j.toLowerCase():"")}b=w}if(b)Kt(f,"complete"),Kt(f,"success");else{f.m=6;try{var W=2<Pn(f)?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.Z()+"]",Ua(f)}}finally{mi(f)}}}}function mi(f,y){if(f.g){Fr(f);const b=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Kt(f,"ready");try{b.onreadystatechange=w}catch{}}}function Fr(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Pn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ca(y)}};function Eu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function bd(f){const y={};f=(f.g&&2<=Pn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(q(f[w]))continue;var b=P(f[w]);const j=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=y[j]||[];y[j]=W,W.push(b)}C(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function ja(f){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,f),this.cb=Hr("retryDelaySeedMs",1e4,f),this.Wa=Hr("forwardChannelMaxRetries",2,f),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Bi(f&&f.concurrentRequestLimit),this.Da=new jr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ja.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,w){ce(0),this.W=f,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.I=Iu(this,null,this.W),Fa(this)};function vl(f){if(Tu(f),f.G==3){var y=f.U++,b=En(f.I);if(Zt(b,"SID",f.K),Zt(b,"RID",y),Zt(b,"TYPE","terminate"),qr(f,b),y=new cn(f,f.j,y),y.L=2,y.v=Lr(En(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=Cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Nr(y)}Ru(f)}function Ba(f){f.g&&(Gr(f),f.g.cancel(),f.g=null)}function Tu(f){Ba(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ha(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Fa(f){if(!Ma(f.h)&&!f.s){f.s=!0;var y=f.Ga;ot||V(),gt||(ot(),gt=!0),kt.add(y,f),f.B=0}}function Ed(f,y){return Na(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ee(E(f.Ga,f,y),Tl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const j=new cn(this,this.j,f);let W=this.o;if(this.S&&(W?(W=x(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)t:{for(var y=0,b=0;b<this.i.length;b++){e:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=b;break t}if(y===4096||b===this.i.length-1){y=b+1;break t}}y=1e3}else y=1e3;y=Su(this,j,y),b=En(this.I),Zt(b,"RID",f),Zt(b,"CVER",22),this.D&&Zt(b,"X-HTTP-Session-Id",this.D),qr(this,b),W&&(this.O?y="headers="+encodeURIComponent(String(yl(W)))+"&"+y:this.m&&Le(b,this.m,W)),ka(this.h,j),this.Ua&&Zt(b,"TYPE","init"),this.P?(Zt(b,"$req",y),Zt(b,"SID","null"),j.T=!0,$n(j,b,null)):$n(j,b,y),this.G=2}}else this.G==3&&(f?bl(this,f):this.i.length==0||Ma(this.h)||bl(this))};function bl(f,y){var b;y?b=y.l:b=f.U++;const w=En(f.I);Zt(w,"SID",f.K),Zt(w,"RID",b),Zt(w,"AID",f.T),qr(f,w),f.m&&f.o&&Le(w,f.m,f.o),b=new cn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=Su(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ka(f.h,b),$n(b,w,y)}function qr(f,y){f.H&&it(f.H,function(b,w){Zt(y,w,b)}),f.l&&dl({},function(b,w){Zt(y,w,b)})}function Su(f,y,b){b=Math.min(f.i.length,b);var w=f.l?E(f.l.Na,f.l,f):null;t:{var j=f.i;let W=-1;for(;;){const lt=["count="+b];W==-1?0<b?(W=j[0].g,lt.push("ofs="+W)):W=0:lt.push("ofs="+W);let Lt=!0;for(let De=0;De<b;De++){let Ut=j[De].g;const Ue=j[De].map;if(Ut-=W,0>Ut)W=Math.max(0,j[De].g-100),Lt=!1;else try{fi(Ue,lt,"req"+Ut+"_")}catch{w&&w(Ue)}}if(Lt){w=lt.join("&");break t}}}return f=f.i.splice(0,b),y.D=f,w}function Au(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;ot||V(),gt||(ot(),gt=!0),kt.add(y,f),f.v=0}}function El(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ee(E(f.Fa,f),Tl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ee(E(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ba(this),wu(this))};function Gr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function wu(f){f.g=new cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=En(f.qa);Zt(y,"RID","rpc"),Zt(y,"SID",f.K),Zt(y,"AID",f.T),Zt(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Zt(y,"TO",f.ja),Zt(y,"TYPE","xmlhttp"),qr(f,y),f.m&&f.o&&Le(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Lr(En(y)),b.m=null,b.P=!0,ji(b,f)}n.Za=function(){this.C!=null&&(this.C=null,Ba(this),El(this),ce(19))};function Ha(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function xu(f,y){var b=null;if(f.g==y){Ha(f),Gr(f),f.g=null;var w=2}else if(hl(f.h,y))b=y.D,un(f.h,y),w=1;else return;if(f.G!=0){if(y.o)if(w==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var j=f.B;w=Es(),Kt(w,new Ce(w,b)),Fa(f)}else Au(f);else if(j=y.s,j==3||j==0&&0<y.X||!(w==1&&Ed(f,y)||w==2&&El(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),j){case 1:Ki(f,5);break;case 4:Ki(f,10);break;case 3:Ki(f,6);break;default:Ki(f,2)}}}function Tl(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function Ki(f,y){if(f.j.info("Error code "+y),y==2){var b=E(f.fb,f),w=f.Xa;const j=!w;w=new Te(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vr(w,"https"),Lr(w),j?zr(w.toString(),b):Xn(w.toString(),b)}else ce(2);f.G=0,f.l&&f.l.sa(y),Ru(f),Tu(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Ru(f){if(f.G=0,f.ka=[],f.l){const y=fl(f.h);(y.length!=0||f.i.length!=0)&&(O(f.ka,y),O(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function Iu(f,y,b){var w=b instanceof Te?En(b):new Te(b);if(w.g!="")y&&(w.g=y+"."+w.g),xs(w,w.s);else{var j=h.location;w=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var W=new Te(null);w&&Vr(W,w),y&&(W.g=y),j&&xs(W,j),b&&(W.l=b),w=W}return b=f.D,y=f.ya,b&&y&&Zt(w,b,y),Zt(w,"VER",f.la),qr(f,w),w}function Cu(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Gt(new Rs({eb:b})):new Gt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}n=Du.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qa(){}qa.prototype.g=function(f,y){return new hn(f,y)};function hn(f,y){de.call(this),this.g=new ja(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!q(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!q(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new pi(this)}R(hn,de),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){vl(this.g)},hn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=Qn(f),f=b);y.i.push(new _u(y.Ya++,f)),y.G==3&&Fa(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,hn.aa.N.call(this)};function Ou(f){Ui.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){t:{for(const b in y){f=b;break t}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}R(Ou,Ui);function Mu(){ol.call(this),this.status=1}R(Mu,ol);function pi(f){this.g=f}R(pi,Du),pi.prototype.ua=function(){Kt(this.g,"a")},pi.prototype.ta=function(f){Kt(this.g,new Ou(f))},pi.prototype.sa=function(f){Kt(this.g,new Mu)},pi.prototype.ra=function(){Kt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,PS=function(){return new qa},kS=function(){return Es()},NS=oi,$m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,sf=As,zi.COMPLETE="complete",MS=zi,al.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",de.prototype.listen=de.prototype.K,yc=al,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,OS=Gt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const Ab="@firebase/firestore",wb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new bp("@firebase/firestore");function Eo(){return ba.logLevel}function ht(n,...t){if(ba.logLevel<=Pt.DEBUG){const e=t.map(Mp);ba.debug(`Firestore (${Ko}): ${n}`,...e)}}function _s(n,...t){if(ba.logLevel<=Pt.ERROR){const e=t.map(Mp);ba.error(`Firestore (${Ko}): ${n}`,...e)}}function fr(n,...t){if(ba.logLevel<=Pt.WARN){const e=t.map(Mp);ba.warn(`Firestore (${Ko}): ${n}`,...e)}}function Mp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,VS(n,i,e)}function VS(n,t,e){let i=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw _s(i),new Error(i)}function Yt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||VS(t,r,i)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends vs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(sn.UNAUTHENTICATED))}shutdown(){}}class P2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class V2{constructor(t){this.t=t,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gs,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gs)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string",31837,{l:i}),new LS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new sn(t)}}class L2{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U2{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new L2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0,3512);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Yt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new xb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=j2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Dt(n,t){return n<t?-1:n>t?1:0}function Xm(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Dt(i,r);{const o=US(),c=B2(o.encode(Rb(n,e)),o.encode(Rb(t,e)));return c!==0?c:Dt(i,r)}}e+=i>65535?2:1}return Dt(n.length,t.length)}function Rb(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function B2(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Dt(n[e],t[e]);return Dt(n.length,t.length)}function Vo(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__name__";class xi{constructor(t,e,i){e===void 0?e=0:e>t.length&&Et(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Et(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=xi.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Dt(t.length,e.length)}static compareSegments(t,e){const i=xi.isNumericId(t),r=xi.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?xi.extractNumericId(t).compare(xi.extractNumericId(e)):Xm(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return or.fromString(t.substring(4,t.length-2))}}class oe extends xi{construct(t,e,i){return new oe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new oe(e)}static emptyPath(){return new oe([])}}const F2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends xi{construct(t,e,i){return new $e(t,e,i)}static isValidIdentifier(t){return F2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ib}static keyField(){return new $e([Ib])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new ut(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ut(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(o(),r++)}if(o(),c)throw new ut(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $e(e)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(oe.fromString(t))}static fromName(t){return new pt(oe.fromString(t).popFirst(5))}static empty(){return new pt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return oe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new oe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n,t,e){if(!e)throw new ut(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function H2(n,t,e,i){if(t===!0&&i===!0)throw new ut(et.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Cb(n){if(!pt.isDocumentKey(n))throw new ut(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Db(n){if(pt.isDocumentKey(n))throw new ut(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function dr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ut(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Gf(n);throw new ut(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,t){const e={typeString:n};return t&&(e.value=t),e}function tu(n,t){if(!jS(n))throw new ut(et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ut(et.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=-62135596800,Mb=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Mb);return new ie(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Ob)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mb}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(tu(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ob;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:Re("string",ie._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new ie(0,0))}static max(){return new At(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function q2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(i===1e9?new ie(e+1,0):new ie(e,i));return new gr(r,pt.empty(),t)}function G2(n){return new gr(n.readTime,n.key,Lc)}class gr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new gr(At.min(),pt.empty(),Lc)}static max(){return new gr(At.max(),pt.empty(),Lc)}}function Y2(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Dt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==K2)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new st((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof st?e:st.resolve(e)}catch(e){return st.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):st.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):st.reject(e)}static resolve(t){return new st((e,i)=>{e(t)})}static reject(t){return new st((e,i)=>{i(t)})}static waitFor(t){return new st((e,i)=>{let r=0,o=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++o,c&&o===r&&e()},d=>i(d))}),c=!0,o===r&&e()})}static or(t){let e=st.resolve(!1);for(const i of t)e=e.next(r=>r?st.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new st((i,r)=>{const o=t.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(_=>{c[m]=_,++h,h===o&&i(c)},_=>r(_))}})}static doWhile(t,e){return new st((i,r)=>{const o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}}function $2(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function $o(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Yf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=-1;function Kf(n){return n==null}function Ef(n){return n===0&&1/n==-1/0}function X2(n){return typeof n=="number"&&Number.isInteger(n)&&!Ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="";function W2(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Nb(t)),t=Z2(n.get(e),t);return Nb(t)}function Z2(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case BS:e+="";break;default:e+=o}}return e}function Nb(n){return n+BS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Tr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function FS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||Qe.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ph(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ph(this.root,t,this.comparator,!0)}}class Ph{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??Qe.RED,this.left=r??Qe.EMPTY,this.right=o??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new Qe(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Qe.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new Qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pb(this.data.getIterator())}getIteratorFrom(t){return new Pb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class Pb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.fields=t,t.sort($e.comparator)}static empty(){return new Cn([])}unionWith(t){let e=new Pe($e.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Cn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Vo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new HS("Invalid base64 string: "+o):o}}(t);return new We(e)}static fromUint8Array(t){const e=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(t);return new We(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}We.EMPTY_BYTE_STRING=new We("");const J2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(Yt(!!n,39018),typeof n=="string"){let t=0;const e=J2.exec(n);if(Yt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pr(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="server_timestamp",GS="__type__",YS="__previous_value__",KS="__local_write_time__";function Pp(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[GS])===null||e===void 0?void 0:e.stringValue)===qS}function Qf(n){const t=n.mapValue.fields[YS];return Pp(t)?Qf(t):t}function Uc(n){const t=mr(n.mapValue.fields[KS].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(t,e,i,r,o,c,h,d,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=_}}const Tf="(default)";class zc{constructor(t,e){this.projectId=t,this.database=e||Tf}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(t){return t instanceof zc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="__type__",eD="__max__",Vh={mapValue:{}},$S="__vector__",Sf="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pp(n)?4:iD(n)?9007199254740991:nD(n)?10:11:Et(28295,{value:n})}function Pi(n,t){if(n===t)return!0;const e=_r(n);if(e!==_r(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Uc(n).isEqual(Uc(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=mr(r.timestampValue),h=mr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return pr(r.bytesValue).isEqual(pr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return ve(r.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(r.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ve(r.integerValue)===ve(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=ve(r.doubleValue),h=ve(o.doubleValue);return c===h?Ef(c)===Ef(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return Vo(n.arrayValue.values||[],t.arrayValue.values||[],Pi);case 10:case 11:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(kb(c)!==kb(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Pi(c[d],h[d])))return!1;return!0}(n,t);default:return Et(52216,{left:n})}}function jc(n,t){return(n.values||[]).find(e=>Pi(e,t))!==void 0}function Lo(n,t){if(n===t)return 0;const e=_r(n),i=_r(t);if(e!==i)return Dt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),d=ve(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Vb(n.timestampValue,t.timestampValue);case 4:return Vb(Uc(n),Uc(t));case 5:return Xm(n.stringValue,t.stringValue);case 6:return function(o,c){const h=pr(o),d=pr(c);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Dt(h[m],d[m]);if(_!==0)return _}return Dt(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Dt(ve(o.latitude),ve(c.latitude));return h!==0?h:Dt(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Lb(n.arrayValue,t.arrayValue);case 10:return function(o,c){var h,d,m,_;const v=o.fields||{},E=c.fields||{},S=(h=v[Sf])===null||h===void 0?void 0:h.arrayValue,R=(d=E[Sf])===null||d===void 0?void 0:d.arrayValue,D=Dt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((_=R?.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:Lb(S,R)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===Vh.mapValue&&c===Vh.mapValue)return 0;if(o===Vh.mapValue)return 1;if(c===Vh.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const E=Xm(d[v],_[v]);if(E!==0)return E;const S=Lo(h[d[v]],m[_[v]]);if(S!==0)return S}return Dt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw Et(23264,{le:e})}}function Vb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Dt(n,t);const e=mr(n),i=mr(t),r=Dt(e.seconds,i.seconds);return r!==0?r:Dt(e.nanos,i.nanos)}function Lb(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=Lo(e[r],i[r]);if(o)return o}return Dt(e.length,i.length)}function Uo(n){return Wm(n)}function Wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=mr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return pr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Wm(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${Wm(e.fields[c])}`;return r+"}"}(n.mapValue):Et(61005,{value:n})}function rf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qf(n);return t?16+rf(t):16;case 5:return 2*n.stringValue.length;case 6:return pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+rf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Tr(i.fields,(o,c)=>{r+=o.length+rf(c)}),r}(n.mapValue);default:throw Et(13486,{value:n})}}function Ub(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Zm(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function zb(n){return!!n&&"nullValue"in n}function jb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function nD(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[QS])===null||e===void 0?void 0:e.stringValue)===$S}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Tr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Rc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Rc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function iD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!af(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rc(e)}setAll(t){let e=$e.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=Rc(c):r.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());af(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Pi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];af(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Tr(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new yn(Rc(this.value))}}function XS(n){const t=[];return Tr(n.fields,(e,i)=>{const r=new $e([e]);if(af(i)){const o=XS(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)}),new Cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,e,i,r,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new rn(t,0,At.min(),At.min(),At.min(),yn.empty(),0)}static newFoundDocument(t,e,i,r){return new rn(t,1,e,At.min(),i,r,0)}static newNoDocument(t,e){return new rn(t,2,e,At.min(),At.min(),yn.empty(),0)}static newUnknownDocument(t,e){return new rn(t,3,e,At.min(),At.min(),yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t,e){this.position=t,this.inclusive=e}}function Bb(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=pt.comparator(pt.fromName(c.referenceValue),e.key):i=Lo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Pi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t,e="asc"){this.field=t,this.dir=e}}function sD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{}class xe extends WS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new aD(t,e,i):e==="array-contains"?new cD(t,i):e==="in"?new uD(t,i):e==="not-in"?new hD(t,i):e==="array-contains-any"?new fD(t,i):new xe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new oD(t,i):new lD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Lo(e,this.value)):e!==null&&_r(this.value)===_r(e)&&this.matchesComparison(Lo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends WS{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new ri(t,e)}matches(t){return ZS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ZS(n){return n.op==="and"}function JS(n){return rD(n)&&ZS(n)}function rD(n){for(const t of n.filters)if(t instanceof ri)return!1;return!0}function Jm(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(JS(n))return n.filters.map(t=>Jm(t)).join(",");{const t=n.filters.map(e=>Jm(e)).join(",");return`${n.op}(${t})`}}function tA(n,t){return n instanceof xe?function(i,r){return r instanceof xe&&i.op===r.op&&i.field.isEqual(r.field)&&Pi(i.value,r.value)}(n,t):n instanceof ri?function(i,r){return r instanceof ri&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,c,h)=>o&&tA(c,r.filters[h]),!0):!1}(n,t):void Et(19439)}function eA(n){return n instanceof xe?function(e){return`${e.field.canonicalString()} ${e.op} ${Uo(e.value)}`}(n):n instanceof ri?function(e){return e.op.toString()+" {"+e.getFilters().map(eA).join(" ,")+"}"}(n):"Filter"}class aD extends xe{constructor(t,e,i){super(t,e,i),this.key=pt.fromName(i.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class oD extends xe{constructor(t,e){super(t,"in",e),this.keys=nA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class lD extends xe{constructor(t,e){super(t,"not-in",e),this.keys=nA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function nA(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>pt.fromName(i.referenceValue))}class cD extends xe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Vp(e)&&jc(e.arrayValue,this.value)}}class uD extends xe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&jc(this.value.arrayValue,e)}}class hD extends xe{constructor(t,e){super(t,"not-in",e)}matches(t){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!jc(this.value.arrayValue,e)}}class fD extends xe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Vp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>jc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t,e=null,i=[],r=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Pe=null}}function Hb(n,t=null,e=[],i=[],r=null,o=null,c=null){return new dD(n,t,e,i,r,o,c)}function Lp(n){const t=Rt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Jm(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Kf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Uo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Uo(i)).join(",")),t.Pe=e}return t.Pe}function Up(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!sD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!tA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Fb(n.startAt,t.startAt)&&Fb(n.endAt,t.endAt)}function tp(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,e=null,i=[],r=[],o=null,c="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gD(n,t,e,i,r,o,c,h){return new eu(n,t,e,i,r,o,c,h)}function zp(n){return new eu(n)}function qb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iA(n){return n.collectionGroup!==null}function Ic(n){const t=Rt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const o of t.explicitOrderBy)t.Te.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Pe($e.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Te.push(new wf(o,i))}),e.has($e.keyField().canonicalString())||t.Te.push(new wf($e.keyField(),i))}return t.Te}function Ci(n){const t=Rt(n);return t.Ie||(t.Ie=mD(t,Ic(n))),t.Ie}function mD(n,t){if(n.limitType==="F")return Hb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new wf(r.field,o)});const e=n.endAt?new Af(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Af(n.startAt.position,n.startAt.inclusive):null;return Hb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function ep(n,t){const e=n.filters.concat([t]);return new eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function np(n,t,e){return new eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function $f(n,t){return Up(Ci(n),Ci(t))&&n.limitType===t.limitType}function sA(n){return`${Lp(Ci(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>eA(r)).join(", ")}]`),Kf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Uo(r)).join(",")),`Target(${i})`}(Ci(n))}; limitType=${n.limitType})`}function Xf(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of Ic(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,h,d){const m=Bb(c,h,d);return c.inclusive?m<=0:m<0}(i.startAt,Ic(i),r)||i.endAt&&!function(c,h,d){const m=Bb(c,h,d);return c.inclusive?m>=0:m>0}(i.endAt,Ic(i),r))}(n,t)}function pD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rA(n){return(t,e)=>{let i=!1;for(const r of Ic(n)){const o=_D(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function _D(n,t,e){const i=n.field.isKeyField()?pt.comparator(t.key,e.key):function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Lo(d,m):Et(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Tr(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return FS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new fe(pt.comparator);function ys(){return yD}const aA=new fe(pt.comparator);function vc(...n){let t=aA;for(const e of n)t=t.insert(e.key,e);return t}function oA(n){let t=aA;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function da(){return Cc()}function lA(){return Cc()}function Cc(){return new wa(n=>n.toString(),(n,t)=>n.isEqual(t))}const vD=new fe(pt.comparator),bD=new Pe(pt.comparator);function Vt(...n){let t=bD;for(const e of n)t=t.add(e);return t}const ED=new Pe(Dt);function TD(){return ED}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(t)?"-0":t}}function cA(n){return{integerValue:""+n}}function SD(n,t){return X2(t)?cA(t):jp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function AD(n,t,e){return n instanceof xf?function(r,o){const c={fields:{[GS]:{stringValue:qS},[KS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Pp(o)&&(o=Qf(o)),o&&(c.fields[YS]=o),{mapValue:c}}(e,t):n instanceof Bc?hA(n,t):n instanceof Fc?fA(n,t):function(r,o){const c=uA(r,o),h=Gb(c)+Gb(r.Ee);return Zm(c)&&Zm(r.Ee)?cA(h):jp(r.serializer,h)}(n,t)}function wD(n,t,e){return n instanceof Bc?hA(n,t):n instanceof Fc?fA(n,t):e}function uA(n,t){return n instanceof Rf?function(i){return Zm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class xf extends Wf{}class Bc extends Wf{constructor(t){super(),this.elements=t}}function hA(n,t){const e=dA(t);for(const i of n.elements)e.some(r=>Pi(r,i))||e.push(i);return{arrayValue:{values:e}}}class Fc extends Wf{constructor(t){super(),this.elements=t}}function fA(n,t){let e=dA(t);for(const i of n.elements)e=e.filter(r=>!Pi(r,i));return{arrayValue:{values:e}}}class Rf extends Wf{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function Gb(n){return ve(n.integerValue||n.doubleValue)}function dA(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xD(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Bc&&r instanceof Bc||i instanceof Fc&&r instanceof Fc?Vo(i.elements,r.elements,Pi):i instanceof Rf&&r instanceof Rf?Pi(i.Ee,r.Ee):i instanceof xf&&r instanceof xf}(n.transform,t.transform)}class RD{constructor(t,e){this.version=t,this.transformResults=e}}class Di{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Di}static exists(t){return new Di(void 0,t)}static updateTime(t){return new Di(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function of(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Zf{}function gA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new pA(n.key,Di.none()):new nu(n.key,n.data,Di.none());{const e=n.data,i=yn.empty();let r=new Pe($e.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new Sr(n.key,i,new Cn(r.toArray()),Di.none())}}function ID(n,t,e){n instanceof nu?function(r,o,c){const h=r.value.clone(),d=Kb(r.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Sr?function(r,o,c){if(!of(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Kb(r.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(mA(r)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Dc(n,t,e,i){return n instanceof nu?function(o,c,h,d){if(!of(o.precondition,c))return h;const m=o.value.clone(),_=Qb(o.fieldTransforms,d,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof Sr?function(o,c,h,d){if(!of(o.precondition,c))return h;const m=Qb(o.fieldTransforms,d,c),_=c.data;return _.setAll(mA(o)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return of(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function CD(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=uA(i.transform,r||null);o!=null&&(e===null&&(e=yn.empty()),e.set(i.field,o))}return e||null}function Yb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vo(i,r,(o,c)=>xD(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class nu extends Zf{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sr extends Zf{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function mA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Kb(n,t,e){const i=new Map;Yt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,h=t.data.field(o.field);i.set(o.field,wD(c,h,e[r]))}return i}function Qb(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,AD(o,c,t))}return i}class pA extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DD extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&ID(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Dc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Dc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=lA();return this.mutations.forEach(r=>{const o=t.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(r.key)?null:h;const d=gA(c,h);d!==null&&i.set(r.key,d),c.isValidDocument()||c.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Vo(this.mutations,t.mutations,(e,i)=>Yb(e,i))&&Vo(this.baseMutations,t.baseMutations,(e,i)=>Yb(e,i))}}class Bp{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Yt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let r=function(){return vD}();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new Bp(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,jt;function kD(n){switch(n){case et.OK:return Et(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function _A(n){if(n===void 0)return _s("GRPC error has no .code"),et.UNKNOWN;switch(n){case we.OK:return et.OK;case we.CANCELLED:return et.CANCELLED;case we.UNKNOWN:return et.UNKNOWN;case we.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case we.INTERNAL:return et.INTERNAL;case we.UNAVAILABLE:return et.UNAVAILABLE;case we.UNAUTHENTICATED:return et.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case we.NOT_FOUND:return et.NOT_FOUND;case we.ALREADY_EXISTS:return et.ALREADY_EXISTS;case we.PERMISSION_DENIED:return et.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case we.ABORTED:return et.ABORTED;case we.OUT_OF_RANGE:return et.OUT_OF_RANGE;case we.UNIMPLEMENTED:return et.UNIMPLEMENTED;case we.DATA_LOSS:return et.DATA_LOSS;default:return Et(39323,{code:n})}}(jt=we||(we={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new or([4294967295,4294967295],0);function $b(n){const t=US().encode(n),e=new DS;return e.update(t),new Uint8Array(e.digest())}function Xb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new or([e,i],0),new or([r,o],0)]}class Fp{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new bc(`Invalid padding: ${e}`);if(i<0)throw new bc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new bc(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=or.fromNumber(this.fe)}pe(t,e,i){let r=t.add(e.multiply(or.fromNumber(i)));return r.compare(PD)===1&&(r=new or([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=$b(t),[i,r]=Xb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);if(!this.ye(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new Fp(o,r,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.fe===0)return;const e=$b(t),[i,r]=Xb(e);for(let o=0;o<this.hashCount;o++){const c=this.pe(i,r,o);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,iu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Jf(At.min(),r,new fe(Dt),ys(),Vt())}}class iu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new iu(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,e,i,r){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=r}}class yA{constructor(t,e){this.targetId=t,this.De=e}}class vA{constructor(t,e,i=We.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class Wb{constructor(){this.ve=0,this.Ce=Zb(),this.Fe=We.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Vt(),e=Vt(),i=Vt();return this.Ce.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Et(38017,{changeType:o})}}),new iu(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=Zb()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class VD{constructor(t){this.We=t,this.Ge=new Map,this.ze=ys(),this.je=Lh(),this.Je=Lh(),this.He=new fe(Dt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,r)=>{this.nt(r)&&e(r)})}it(t){const e=t.targetId,i=t.De.count,r=this.st(e);if(r){const o=r.target;if(tp(o))if(i===0){const c=new pt(o.path);this.Xe(e,c,rn.newNoDocument(c,At.min()))}else Yt(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const h=this._t(t),d=h?this.ut(h,t,c):1;if(d!==0){this.rt(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,m)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,h;try{c=pr(i).toUint8Array()}catch(d){if(d instanceof HS)return fr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Fp(c,r,o)}catch(d){return fr(d instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.Xe(e,o,null),r++)}),r}Pt(t){const e=new Map;this.Ge.forEach((o,c)=>{const h=this.st(c);if(h){if(o.current&&tp(h.target)){const d=new pt(h.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,rn.newNoDocument(d,t))}o.Ne&&(e.set(c,o.Le()),o.ke())}});let i=Vt();this.Je.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const m=this.st(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(t));const r=new Jf(t,e,this.He,this.ze,i);return this.ze=ys(),this.je=Lh(),this.Je=Lh(),this.He=new fe(Dt),r}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const r=this.tt(t);this.It(t,e)?r.qe(e,1):r.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Wb,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Pe(Dt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Pe(Dt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Wb),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Lh(){return new fe(pt.comparator)}function Zb(){return new fe(pt.comparator)}const LD={asc:"ASCENDING",desc:"DESCENDING"},UD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zD={and:"AND",or:"OR"};class jD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ip(n,t){return n.useProto3Json||Kf(t)?t:{value:t}}function If(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function BD(n,t){return If(n,t.toTimestamp())}function Oi(n){return Yt(!!n,49232),At.fromTimestamp(function(e){const i=mr(e);return new ie(i.seconds,i.nanos)}(n))}function Hp(n,t){return sp(n,t).canonicalString()}function sp(n,t){const e=function(r){return new oe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function EA(n){const t=oe.fromString(n);return Yt(xA(t),10190,{key:t.toString()}),t}function rp(n,t){return Hp(n.databaseId,t.path)}function wm(n,t){const e=EA(t);if(e.get(1)!==n.databaseId.projectId)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(SA(e))}function TA(n,t){return Hp(n.databaseId,t)}function FD(n){const t=EA(n);return t.length===4?oe.emptyPath():SA(t)}function ap(n){return new oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SA(n){return Yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Jb(n,t,e){return{name:rp(n,t),fields:e.value.mapValue.fields}}function HD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Et(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Yt(_===void 0||typeof _=="string",58123),We.fromBase64String(_||"")):(Yt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),We.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(m){const _=m.code===void 0?et.UNKNOWN:_A(m.code);return new ut(_,m.message||"")}(c);e=new vA(i,r,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=wm(n,i.document.name),o=Oi(i.document.updateTime),c=i.document.createTime?Oi(i.document.createTime):At.min(),h=new yn({mapValue:{fields:i.document.fields}}),d=rn.newFoundDocument(r,o,c,h),m=i.targetIds||[],_=i.removedTargetIds||[];e=new lf(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=wm(n,i.document),o=i.readTime?Oi(i.readTime):At.min(),c=rn.newNoDocument(r,o),h=i.removedTargetIds||[];e=new lf([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=wm(n,i.document),o=i.removedTargetIds||[];e=new lf([],o,r,null)}else{if(!("filter"in t))return Et(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new ND(r,o),h=i.targetId;e=new yA(h,c)}}return e}function qD(n,t){let e;if(t instanceof nu)e={update:Jb(n,t.key,t.value)};else if(t instanceof pA)e={delete:rp(n,t.key)};else if(t instanceof Sr)e={update:Jb(n,t.key,t.data),updateMask:JD(t.fieldMask)};else{if(!(t instanceof DD))return Et(16599,{Rt:t.type});e={verify:rp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof xf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Fc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Rf)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Et(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:BD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et(27497)}(n,t.precondition)),e}function GD(n,t){return n&&n.length>0?(Yt(t!==void 0,14353),n.map(e=>function(r,o){let c=r.updateTime?Oi(r.updateTime):Oi(o);return c.isEqual(At.min())&&(c=Oi(o)),new RD(c,r.transformResults||[])}(e,t))):[]}function YD(n,t){return{documents:[TA(n,t.path)]}}function KD(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=TA(n,r);const o=function(m){if(m.length!==0)return wA(ri.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(_=>function(E){return{field:So(E.field),direction:XD(E.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=ip(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{Vt:e,parent:r}}function QD(n){let t=FD(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Yt(i===1,65062);const _=e.from[0];_.allDescendants?r=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(v){const E=AA(v);return E instanceof ri&&JS(E)?E.getFilters():[E]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(E=>function(R){return new wf(Ao(R.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(e.orderBy));let h=null;e.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,Kf(E)?null:E}(e.limit));let d=null;e.startAt&&(d=function(v){const E=!!v.before,S=v.values||[];return new Af(S,E)}(e.startAt));let m=null;return e.endAt&&(m=function(v){const E=!v.before,S=v.values||[];return new Af(S,E)}(e.endAt)),gD(t,r,c,o,h,"F",d,m)}function $D(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function AA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ao(e.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ao(e.unaryFilter.field);return xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ao(e.unaryFilter.field);return xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(e.unaryFilter.field);return xe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(n):n.fieldFilter!==void 0?function(e){return xe.create(Ao(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ri.create(e.compositeFilter.filters.map(i=>AA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(e.compositeFilter.op))}(n):Et(30097,{filter:n})}function XD(n){return LD[n]}function WD(n){return UD[n]}function ZD(n){return zD[n]}function So(n){return{fieldPath:n.canonicalString()}}function Ao(n){return $e.fromServerFormat(n.fieldPath)}function wA(n){return n instanceof xe?function(e){if(e.op==="=="){if(jb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NAN"}};if(zb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(jb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NAN"}};if(zb(e.value))return{unaryFilter:{field:So(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(e.field),op:WD(e.op),value:e.value}}}(n):n instanceof ri?function(e){const i=e.getFilters().map(r=>wA(r));return i.length===1?i[0]:{compositeFilter:{op:ZD(e.op),filters:i}}}(n):Et(54877,{filter:n})}function JD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function xA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t,e,i,r,o=At.min(),c=At.min(),h=We.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t){this.gt=t}}function eO(n){const t=QD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?np(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.Dn=new iO}addToCollectionParentIndex(t,e){return this.Dn.add(e),st.resolve()}getCollectionParents(t,e){return st.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return st.resolve()}deleteFieldIndex(t,e){return st.resolve()}deleteAllFieldIndexes(t){return st.resolve()}createTargetIndexes(t,e){return st.resolve()}getDocumentsMatchingTarget(t,e){return st.resolve(null)}getIndexType(t,e){return st.resolve(0)}getFieldIndexes(t,e){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,e){return st.resolve(gr.min())}getMinOffsetFromCollectionGroup(t,e){return st.resolve(gr.min())}updateCollectionGroup(t,e,i){return st.resolve()}updateIndexEntries(t,e){return st.resolve()}}class iO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Pe(oe.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Pe(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RA=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(RA,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new zo(0)}static ur(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="LruGarbageCollector",sO=1048576;function nE([n,t],[e,i]){const r=Dt(n,e);return r===0?Dt(t,i):r}class rO{constructor(t){this.Tr=t,this.buffer=new Pe(nE),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();nE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ht(eE,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$o(e)?ht(eE,"Ignoring IndexedDB error during garbage collection: ",e):await Qo(e)}await this.Rr(3e5)})}}class oO{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return st.resolve(Yf.ue);const i=new rO(e);return this.Vr.forEachTarget(t,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(t,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(tE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,r,o,c,h,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,c=Date.now(),this.nthSequenceNumber(t,r))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(m=Date.now(),Eo()<=Pt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}}function lO(n,t){return new oO(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.changes=new wa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?st.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Dc(i.mutation,r,Cn.empty(),ie.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const r=da();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let c=vc();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=da();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let o=ys();const c=Cc(),h=function(){return Cc()}();return e.forEach((d,m)=>{const _=i.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof Sr)?o=o.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),Dc(_.mutation,m,_.mutation.getFieldMask(),ie.now())):c.set(m.key,Cn.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,_)=>c.set(m,_)),e.forEach((m,_)=>{var v;return h.set(m,new uO(_,(v=c.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Cc();let r=new fe((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let _=i.get(d)||Cn.empty();_=h.applyToLocalView(m,_),i.set(d,_);const v=(r.get(h.batchId)||Vt()).add(d);r=r.insert(h.batchId,v)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=lA();_.forEach(E=>{if(!o.has(E)){const S=gA(e.get(E),i.get(E));S!==null&&v.set(E,S),o=o.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return st.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):iA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):st.resolve(da());let h=Lc,d=o;return c.next(m=>st.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?st.resolve():this.remoteDocumentCache.getEntry(t,_).next(E=>{d=d.insert(_,E)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,Vt())).next(_=>({batchId:h,changes:oA(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(i=>{let r=vc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=vc();return this.indexManager.getCollectionParents(t,o).next(h=>st.forEach(h,d=>{const m=function(v,E){return new eu(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,r).next(_=>{_.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(c=>{o.forEach((d,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,rn.newInvalidDocument(_)))});let h=vc();return c.forEach((d,m)=>{const _=o.get(d);_!==void 0&&Dc(_.mutation,m,Cn.empty(),ie.now()),Xf(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return st.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(e)),st.resolve()}getNamedQuery(t,e){return st.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(r){return{name:r.name,query:eO(r.bundledQuery),readTime:Oi(r.readTime)}}(e)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.overlays=new fe(pt.comparator),this.kr=new Map}getOverlay(t,e){return st.resolve(this.overlays.get(e))}getOverlays(t,e){const i=da();return st.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.wt(t,e,o)}),st.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),st.resolve()}getOverlaysForCollection(t,e,i){const r=da(),o=e.length+1,c=new pt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return st.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new fe((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=da(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=da(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=r)););return st.resolve(h)}wt(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new MD(e,i));let o=this.kr.get(e);o===void 0&&(o=Vt(),this.kr.set(e,o)),this.kr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(t){return st.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.qr=new Pe(Fe.Qr),this.$r=new Pe(Fe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new Fe(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new Fe(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new pt(new oe([])),i=new Fe(e,t),r=new Fe(e,t+1),o=[];return this.$r.forEachInRange([i,r],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new pt(new oe([])),i=new Fe(e,t),r=new Fe(e,t+1);let o=Vt();return this.$r.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Fe(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Fe{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return pt.comparator(t.key,e.key)||Dt(t.Hr,e.Hr)}static Ur(t,e){return Dt(t.Hr,e.Hr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Pe(Fe.Qr)}checkEmpty(t){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new OD(o,e,i,r);this.mutationQueue.push(c);for(const h of r)this.Yr=this.Yr.add(new Fe(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return st.resolve(c)}lookupMutationBatch(t,e){return st.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.Xr(i),o=r<0?0:r;return st.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?kp:this.er-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Fe(e,0),r=new Fe(e,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],c=>{const h=this.Zr(c.Hr);o.push(h)}),st.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Pe(Dt);return e.forEach(r=>{const o=new Fe(r,0),c=new Fe(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],h=>{i=i.add(h.Hr)})}),st.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;pt.isDocumentKey(o)||(o=o.child(""));const c=new Fe(new pt(o),0);let h=new Pe(Dt);return this.Yr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(h=h.add(d.Hr)),!0)},c),st.resolve(this.ei(h))}ei(t){const e=[];return t.forEach(i=>{const r=this.Zr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Yt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return st.forEach(e.mutations,r=>{const o=new Fe(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new Fe(e,0),r=this.Yr.firstAfterOrEqual(i);return st.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,st.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(t){this.ni=t,this.docs=function(){return new fe(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return st.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(e))}getEntries(t,e){let i=ys();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():rn.newInvalidDocument(r))}),st.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=ys();const c=e.path,h=new pt(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||Y2(G2(_),i)<=0||(r.has(_.key)||Xf(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return st.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Et(9500)}ri(t,e){return st.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new _O(this)}getSize(t){return st.resolve(this.size)}}class _O extends cO{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Or.addEntry(t,r)):this.Or.removeEntry(i)}),st.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t){this.persistence=t,this.ii=new wa(e=>Lp(e),Up),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.si=0,this.oi=new qp,this.targetCount=0,this._i=zo.ar()}forEachTarget(t,e){return this.ii.forEach((i,r)=>e(r)),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),st.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new zo(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,st.resolve()}updateTargetData(t,e){return this.hr(e),st.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),st.waitFor(o).next(()=>r)}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return st.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),st.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(c=>{o.push(r.markPotentiallyOrphaned(t,c))}),st.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),st.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return st.resolve(i)}containsKey(t,e){return st.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,e){this.ai={},this.overlays={},this.ui=new Yf(0),this.ci=!1,this.ci=!0,this.li=new gO,this.referenceDelegate=t(this),this.hi=new yO(this),this.indexManager=new nO,this.remoteDocumentCache=function(r){return new pO(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new tO(e),this.Ti=new fO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new dO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new mO(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const r=new vO(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(t,e){return st.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class vO extends Q2{constructor(t){super(),this.currentSequenceNumber=t}}class Gp{constructor(t){this.persistence=t,this.Ai=new qp,this.Ri=null}static Vi(t){return new Gp(t)}get mi(){if(this.Ri)return this.Ri;throw Et(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),st.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),st.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),st.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.mi,i=>{const r=pt.fromPath(i);return this.fi(t,r).next(o=>{o||e.removeEntry(r,At.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return st.or([()=>st.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Cf{constructor(t,e){this.persistence=t,this.gi=new wa(i=>W2(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=lO(this,e)}static Vi(t,e){return new Cf(t,e)}Ii(){}di(t){return st.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return st.forEach(this.gi,(i,r)=>this.Sr(t,i,r).next(o=>o?st.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(t,c=>this.Sr(t,c,e).next(h=>{h||(i++,o.removeEntry(c,At.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),st.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),st.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),st.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),st.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=rf(t.data.value)),e}Sr(t,e,i){return st.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.gi.get(e);return st.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=r}static Es(t,e){let i=Vt(),r=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Yp(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eR()?8:$2(ln())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ps(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(t,e,r,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new bO;return this.ws(t,e,c).next(h=>{if(o.result=h,this.Rs)return this.Ss(t,e,c,h.size)})}).next(()=>o.result)}Ss(t,e,i,r){return i.documentReadCount<this.Vs?(Eo()<=Pt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",To(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),st.resolve()):(Eo()<=Pt.DEBUG&&ht("QueryEngine","Query:",To(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Eo()<=Pt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",To(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ci(e))):st.resolve())}ps(t,e){if(qb(e))return st.resolve(null);let i=Ci(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=np(e,null,"F"),i=Ci(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.gs.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.bs(e,h);return this.Ds(e,m,c,d.readTime)?this.ps(t,np(e,null,"F")):this.vs(t,m,e,d)}))})))}ys(t,e,i,r){return qb(e)||r.isEqual(At.min())?st.resolve(null):this.gs.getDocuments(t,i).next(o=>{const c=this.bs(e,o);return this.Ds(e,c,i,r)?st.resolve(null):(Eo()<=Pt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),To(e)),this.vs(t,c,e,q2(r,Lc)).next(h=>h))})}bs(t,e){let i=new Pe(rA(t));return e.forEach((r,o)=>{Xf(t,o)&&(i=i.add(o))}),i}Ds(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(t,e,i){return Eo()<=Pt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",To(e)),this.gs.getDocumentsMatchingQuery(t,e,gr.min(),i)}vs(t,e,i,r){return this.gs.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",TO=3e8;class SO{constructor(t,e,i,r){this.persistence=t,this.Cs=e,this.serializer=r,this.Fs=new fe(Dt),this.Ms=new wa(o=>Lp(o),Up),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function AO(n,t,e,i){return new SO(n,t,e,i)}async function CA(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=Vt();for(const m of r){c.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(i,d).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:h}))})})}function wO(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,E=v.keys();let S=st.resolve();return E.forEach(R=>{S=S.next(()=>_.getEntry(d,R)).next(D=>{const O=m.docVersions.get(R);Yt(O!==null,48541),D.version.compareTo(O)<0&&(v.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),_.addEntry(D)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Vt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function DA(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function xO(n,t){const e=Rt(n),i=t.snapshotVersion;let r=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});r=e.Fs;const h=[];t.targetChanges.forEach((_,v)=>{const E=r.get(v);if(!E)return;h.push(e.hi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>e.hi.addMatchingKeys(o,_.addedDocuments,v)));let S=E.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(We.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,i)),r=r.insert(v,S),function(D,O,Q){return D.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=TO?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(E,S,_)&&h.push(e.hi.updateTargetData(o,S))});let d=ys(),m=Vt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(RO(o,c,t.documentUpdates).next(_=>{d=_.Ls,m=_.ks})),!i.isEqual(At.min())){const _=e.hi.getLastRemoteSnapshotVersion(o).next(v=>e.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return st.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.Fs=r,o))}function RO(n,t,e){let i=Vt(),r=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=ys();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(At.min())?(t.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),c=c.insert(h,d)):ht(Kp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ls:c,ks:r}})}function IO(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=kp),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function CO(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.hi.getTargetData(i,t).next(o=>o?(r=o,st.resolve(r)):e.hi.allocateTargetId(i).next(c=>(r=new tr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function op(n,t,e){const i=Rt(n),r=i.Fs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!$o(c))throw c;ht(Kp,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(r.target)}function iE(n,t,e){const i=Rt(n);let r=At.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,m,_){const v=Rt(d),E=v.Ms.get(_);return E!==void 0?st.resolve(v.Fs.get(E)):v.hi.getTargetData(m,_)}(i,c,Ci(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,t,e?r:At.min(),e?o:Vt())).next(h=>(DO(i,pD(t),h),{documents:h,qs:o})))}function DO(n,t,e){let i=n.xs.get(t)||At.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(t,i)}class sE{constructor(){this.activeTargetIds=TD()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class OO{constructor(){this.Fo=new sE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new sE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="ConnectivityMonitor";class aE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ht(rE,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ht(rE,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function lp(){return Uh===null?Uh=function(){return 268435456+Math.round(2147483648*Math.random())}():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kO{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Tf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(t,e,i,r,o){const c=lp(),h=this.Go(t,e.toUriEncodedString());ht(xm,`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:m}=new URL(h),_=Ho(m);return this.jo(t,h,d,i,_).then(v=>(ht(xm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw fr(xm,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Jo(t,e,i,r,o,c){return this.Wo(t,e,i,r,o)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}Go(t,e){const i=NO[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class VO extends kO{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,r,o){const c=lp();return new Promise((h,d)=>{const m=new OS;m.setWithCredentials(!0),m.listenOnce(MS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case sf.NO_ERROR:const v=m.getResponseJson();ht(en,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case sf.TIMEOUT:ht(en,`RPC '${t}' ${c} timed out`),d(new ut(et.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const E=m.getStatus();if(ht(en,`RPC '${t}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const D=function(Q){const q=Q.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(q)>=0?q:et.UNKNOWN}(R.status);d(new ut(D,R.message))}else d(new ut(et.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ut(et.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{c_:t,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ht(en,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(r);ht(en,`RPC '${t}' ${c} sending request:`,r),m.send(e,"POST",_,i,15)})}P_(t,e,i){const r=lp(),o=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=PS(),h=kS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ht(en,`Creating RPC '${t}' stream ${r}: ${_}`,d);const v=c.createWebChannel(_,d);this.T_(v);let E=!1,S=!1;const R=new PO({Ho:O=>{S?ht(en,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(E||(ht(en,`Opening RPC '${t}' stream ${r} transport.`),v.open(),E=!0),ht(en,`RPC '${t}' stream ${r} sending:`,O),v.send(O))},Yo:()=>v.close()}),D=(O,Q,q)=>{O.listen(Q,Z=>{try{q(Z)}catch(G){setTimeout(()=>{throw G},0)}})};return D(v,yc.EventType.OPEN,()=>{S||(ht(en,`RPC '${t}' stream ${r} transport opened.`),R.s_())}),D(v,yc.EventType.CLOSE,()=>{S||(S=!0,ht(en,`RPC '${t}' stream ${r} transport closed`),R.__(),this.I_(v))}),D(v,yc.EventType.ERROR,O=>{S||(S=!0,fr(en,`RPC '${t}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),R.__(new ut(et.UNAVAILABLE,"The operation could not be completed")))}),D(v,yc.EventType.MESSAGE,O=>{var Q;if(!S){const q=O.data[0];Yt(!!q,16349);const Z=q,G=Z?.error||((Q=Z[0])===null||Q===void 0?void 0:Q.error);if(G){ht(en,`RPC '${t}' stream ${r} received error:`,G);const $=G.status;let it=function(I){const k=we[I];if(k!==void 0)return _A(k)}($),C=G.message;it===void 0&&(it=et.INTERNAL,C="Unknown error status: "+$+" with message "+G.message),S=!0,R.__(new ut(it,C)),v.close()}else ht(en,`RPC '${t}' stream ${r} received:`,q),R.a_(q)}}),D(h,NS.STAT_EVENT,O=>{O.stat===$m.PROXY?ht(en,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===$m.NOPROXY&&ht(en,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){return new jD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,e-i);r>0&&ht("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="PersistentStream";class MA{constructor(t,e,i,r,o,c,h,d){this.Fi=t,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new OA(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(_s(e.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===e&&this.W_(i,r)},i=>{t(()=>{const r=new ut(et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ht(oE,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(ht(oE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LO extends MA{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=HD(this.serializer,t),i=function(o){if(!("targetChange"in o))return At.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?Oi(c.readTime):At.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=ap(this.serializer),e.addTarget=function(o,c){let h;const d=c.target;if(h=tp(d)?{documents:YD(o,d)}:{query:KD(o,d).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=bA(o,c.resumeToken);const m=ip(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(At.min())>0){h.readTime=If(o,c.snapshotVersion.toTimestamp());const m=ip(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=$D(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=ap(this.serializer),e.removeTarget=t,this.k_(e)}}class UO extends MA{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=GD(t.writeResults,t.commitTime),i=Oi(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=ap(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>qD(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{}class jO extends zO{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(t,sp(e,i),r,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(et.UNKNOWN,o.toString())})}Jo(t,e,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(t,sp(e,i),r,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(et.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class BO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(e),this._a=!1):ht("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class FO{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{xa(this)&&(ht(Ea,"Restarting streams for network reachability change."),await async function(d){const m=Rt(d);m.Ia.add(4),await su(m),m.Aa.set("Unknown"),m.Ia.delete(4),await ed(m)}(this))})}),this.Aa=new BO(i,r)}}async function ed(n){if(xa(n))for(const t of n.da)await t(!0)}async function su(n){for(const t of n.da)await t(!1)}function NA(n,t){const e=Rt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Wp(e)?Xp(e):Xo(e).x_()&&$p(e,t))}function Qp(n,t){const e=Rt(n),i=Xo(e);e.Ta.delete(t),i.x_()&&kA(e,t),e.Ta.size===0&&(i.x_()?i.B_():xa(e)&&e.Aa.set("Unknown"))}function $p(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xo(n).H_(t)}function kA(n,t){n.Ra.$e(t),Xo(n).Y_(t)}function Xp(n){n.Ra=new VD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Xo(n).start(),n.Aa.aa()}function Wp(n){return xa(n)&&!Xo(n).M_()&&n.Ta.size>0}function xa(n){return Rt(n).Ia.size===0}function PA(n){n.Ra=void 0}async function HO(n){n.Aa.set("Online")}async function qO(n){n.Ta.forEach((t,e)=>{$p(n,t)})}async function GO(n,t){PA(n),Wp(n)?(n.Aa.la(t),Xp(n)):n.Aa.set("Unknown")}async function YO(n,t,e){if(n.Aa.set("Online"),t instanceof vA&&t.state===2&&t.cause)try{await async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ta.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ta.delete(h),r.Ra.removeTarget(h))}(n,t)}catch(i){ht(Ea,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Df(n,i)}else if(t instanceof lf?n.Ra.Ye(t):t instanceof yA?n.Ra.it(t):n.Ra.et(t),!e.isEqual(At.min()))try{const i=await DA(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Ra.Pt(c);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ta.get(m);_&&o.Ta.set(m,_.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,m)=>{const _=o.Ta.get(d);if(!_)return;o.Ta.set(d,_.withResumeToken(We.EMPTY_BYTE_STRING,_.snapshotVersion)),kA(o,d);const v=new tr(_.target,d,m,_.sequenceNumber);$p(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ht(Ea,"Failed to raise snapshot:",i),await Df(n,i)}}async function Df(n,t,e){if(!$o(t))throw t;n.Ia.add(1),await su(n),n.Aa.set("Offline"),e||(e=()=>DA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(Ea,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await ed(n)})}function VA(n,t){return t().catch(e=>Df(n,e,t))}async function nd(n){const t=Rt(n),e=yr(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:kp;for(;KO(t);)try{const r=await IO(t.localStore,i);if(r===null){t.Pa.length===0&&e.B_();break}i=r.batchId,QO(t,r)}catch(r){await Df(t,r)}LA(t)&&UA(t)}function KO(n){return xa(n)&&n.Pa.length<10}function QO(n,t){n.Pa.push(t);const e=yr(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function LA(n){return xa(n)&&!yr(n).M_()&&n.Pa.length>0}function UA(n){yr(n).start()}async function $O(n){yr(n).na()}async function XO(n){const t=yr(n);for(const e of n.Pa)t.X_(e.mutations)}async function WO(n,t,e){const i=n.Pa.shift(),r=Bp.from(i,t,e);await VA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await nd(n)}async function ZO(n,t){t&&yr(n).Z_&&await async function(i,r){if(function(c){return kD(c)&&c!==et.ABORTED}(r.code)){const o=i.Pa.shift();yr(i).N_(),await VA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await nd(i)}}(n,t),LA(n)&&UA(n)}async function lE(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),ht(Ea,"RemoteStore received new credentials");const i=xa(e);e.Ia.add(3),await su(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await ed(e)}async function JO(n,t){const e=Rt(n);t?(e.Ia.delete(2),await ed(e)):t||(e.Ia.add(2),await su(e),e.Aa.set("Unknown"))}function Xo(n){return n.Va||(n.Va=function(e,i,r){const o=Rt(e);return o.ia(),new LO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:HO.bind(null,n),e_:qO.bind(null,n),n_:GO.bind(null,n),J_:YO.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Wp(n)?Xp(n):n.Aa.set("Unknown")):(await n.Va.stop(),PA(n))})),n.Va}function yr(n){return n.ma||(n.ma=function(e,i,r){const o=Rt(e);return o.ia(),new UO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$O.bind(null,n),n_:ZO.bind(null,n),ea:XO.bind(null,n),ta:WO.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await nd(n)):(await n.ma.stop(),n.Pa.length>0&&(ht(Ea,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,h=new Zp(t,e,c,r,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jp(n,t){if(_s("AsyncQueue",`${t}: ${n}`),$o(n))return new ut(et.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(t){return new Do(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||pt.comparator(e.key,i.key):(e,i)=>pt.comparator(e.key,i.key),this.keyedMap=vc(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Do;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.fa=new fe(pt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Et(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class jo{constructor(t,e,i,r,o,c,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new jo(t,e,Do.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$f(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class eM{constructor(){this.queries=uE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const r=Rt(e),o=r.queries;r.queries=uE(),o.forEach((c,h)=>{for(const d of h.wa)d.onError(i)})})(this,new ut(et.ABORTED,"Firestore shutting down"))}}function uE(){return new wa(n=>sA(n),$f)}async function zA(n,t){const e=Rt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.Sa()&&t.ba()&&(i=2):(o=new tM,i=t.ba()?0:1);try{switch(i){case 0:o.ya=await e.onListen(r,!0);break;case 1:o.ya=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=Jp(c,`Initialization of query '${To(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.wa.push(t),t.va(e.onlineState),o.ya&&t.Ca(o.ya)&&t_(e)}async function jA(n,t){const e=Rt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.wa.indexOf(t);c>=0&&(o.wa.splice(c,1),o.wa.length===0?r=t.ba()?0:1:!o.Sa()&&t.ba()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function nM(n,t){const e=Rt(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const h of c.wa)h.Ca(r)&&(i=!0);c.ya=r}}i&&t_(e)}function iM(n,t,e){const i=Rt(n),r=i.queries.get(t);if(r)for(const o of r.wa)o.onError(e);i.queries.delete(t)}function t_(n){n.Da.forEach(t=>{t.next()})}var cp,hE;(hE=cp||(cp={})).Fa="default",hE.Cache="cache";class BA{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new jo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=jo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t){this.key=t}}class HA{constructor(t){this.key=t}}class sM{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Vt(),this.mutatedKeys=Vt(),this.Xa=rA(t),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new cE,r=e?e.eu:this.eu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((_,v)=>{const E=r.get(_),S=Xf(this.query,v)?v:null,R=!!E&&this.mutatedKeys.has(E.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;E&&S?E.data.isEqual(S.data)?R!==D&&(i.track({type:3,doc:S}),O=!0):this.iu(E,S)||(i.track({type:2,doc:S}),O=!0,(d&&this.Xa(S,d)>0||m&&this.Xa(S,m)<0)&&(h=!0)):!E&&S?(i.track({type:0,doc:S}),O=!0):E&&!S&&(i.track({type:1,doc:E}),O=!0,(d||m)&&(h=!0)),O&&(S?(c=c.add(S),o=D?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:o}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort((_,v)=>function(S,R){const D=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{At:O})}};return D(S)-D(R)}(_.type,v.type)||this.Xa(_.doc,v.doc)),this.su(i),r=r!=null&&r;const h=e&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,m=d!==this.Ya;return this.Ya=d,c.length!==0||m?{snapshot:new jo(this.query,t.eu,o,c,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Vt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new HA(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new FA(i))}),e}uu(t){this.Ha=t.qs,this.Za=Vt();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const e_="SyncEngine";class rM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class aM{constructor(t){this.key=t,this.lu=!1}}class oM{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new wa(h=>sA(h),$f),this.Tu=new Map,this.Iu=new Set,this.du=new fe(pt.comparator),this.Eu=new Map,this.Au=new qp,this.Ru={},this.Vu=new Map,this.mu=zo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lM(n,t,e=!0){const i=$A(n);let r;const o=i.Pu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await qA(i,t,e,!0),r}async function cM(n,t){const e=$A(n);await qA(e,t,!0,!1)}async function qA(n,t,e,i){const r=await CO(n.localStore,Ci(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await uM(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&NA(n.remoteStore,r),h}async function uM(n,t,e,i,r){n.gu=(v,E,S)=>async function(D,O,Q,q){let Z=O.view.nu(Q);Z.Ds&&(Z=await iE(D.localStore,O.query,!1).then(({documents:C})=>O.view.nu(C,Z)));const G=q&&q.targetChanges.get(O.targetId),$=q&&q.targetMismatches.get(O.targetId)!=null,it=O.view.applyChanges(Z,D.isPrimaryClient,G,$);return dE(D,O.targetId,it._u),it.snapshot}(n,v,E,S);const o=await iE(n.localStore,t,!0),c=new sM(t,o.qs),h=c.nu(o.documents),d=iu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),m=c.applyChanges(h,n.isPrimaryClient,d);dE(n,e,m._u);const _=new rM(t,e,c);return n.Pu.set(t,_),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),m.snapshot}async function hM(n,t,e){const i=Rt(n),r=i.Pu.get(t),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(c=>!$f(c,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await op(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Qp(i.remoteStore,r.targetId),up(i,r.targetId)}).catch(Qo)):(up(i,r.targetId),await op(i.localStore,r.targetId,!0))}async function fM(n,t){const e=Rt(n),i=e.Pu.get(t),r=e.Tu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Qp(e.remoteStore,i.targetId))}async function dM(n,t,e){const i=bM(n);try{const r=await function(c,h){const d=Rt(c),m=ie.now(),_=h.reduce((S,R)=>S.add(R.key),Vt());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=ys(),D=Vt();return d.Os.getEntries(S,_).next(O=>{R=O,R.forEach((Q,q)=>{q.isValidDocument()||(D=D.add(Q))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,R)).next(O=>{v=O;const Q=[];for(const q of h){const Z=CD(q,v.get(q.key).overlayedDocument);Z!=null&&Q.push(new Sr(q.key,Z,XS(Z.value.mapValue),Di.exists(!0)))}return d.mutationQueue.addMutationBatch(S,m,Q,h)}).next(O=>{E=O;const Q=O.applyToLocalDocumentSet(v,D);return d.documentOverlayCache.saveOverlays(S,O.batchId,Q)})}).then(()=>({batchId:E.batchId,changes:oA(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,d){let m=c.Ru[c.currentUser.toKey()];m||(m=new fe(Dt)),m=m.insert(h,d),c.Ru[c.currentUser.toKey()]=m}(i,r.batchId,e),await ru(i,r.changes),await nd(i.remoteStore)}catch(r){const o=Jp(r,"Failed to persist write");e.reject(o)}}async function GA(n,t){const e=Rt(n);try{const i=await xO(e.localStore,t);t.targetChanges.forEach((r,o)=>{const c=e.Eu.get(o);c&&(Yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.lu=!0:r.modifiedDocuments.size>0?Yt(c.lu,14607):r.removedDocuments.size>0&&(Yt(c.lu,42227),c.lu=!1))}),await ru(e,i,t)}catch(i){await Qo(i)}}function fE(n,t,e){const i=Rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Pu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const d=Rt(c);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const E of v.wa)E.va(h)&&(m=!0)}),m&&t_(d)}(i.eventManager,t),r.length&&i.hu.J_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function gM(n,t,e){const i=Rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Eu.get(t),o=r&&r.key;if(o){let c=new fe(pt.comparator);c=c.insert(o,rn.newNoDocument(o,At.min()));const h=Vt().add(o),d=new Jf(At.min(),new Map,new fe(Dt),c,h);await GA(i,d),i.du=i.du.remove(o),i.Eu.delete(t),n_(i)}else await op(i.localStore,t,!1).then(()=>up(i,t,e)).catch(Qo)}async function mM(n,t){const e=Rt(n),i=t.batch.batchId;try{const r=await wO(e.localStore,t);KA(e,i,null),YA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await ru(e,r)}catch(r){await Qo(r)}}async function pM(n,t,e){const i=Rt(n);try{const r=await function(c,h){const d=Rt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Yt(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(i.localStore,t);KA(i,t,e),YA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await ru(i,r)}catch(r){await Qo(r)}}function YA(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function KA(n,t,e){const i=Rt(n);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ru[i.currentUser.toKey()]=r}}function up(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||QA(n,i)})}function QA(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Qp(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),n_(n))}function dE(n,t,e){for(const i of e)i instanceof FA?(n.Au.addReference(i.key,t),_M(n,i)):i instanceof HA?(ht(e_,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||QA(n,i.key)):Et(19791,{yu:i})}function _M(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(ht(e_,"New document in limbo: "+e),n.Iu.add(i),n_(n))}function n_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new pt(oe.fromString(t)),i=n.mu.next();n.Eu.set(i,new aM(e)),n.du=n.du.insert(e,i),NA(n.remoteStore,new tr(Ci(zp(e.path)),i,"TargetPurposeLimboResolution",Yf.ue))}}async function ru(n,t,e){const i=Rt(n),r=[],o=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{c.push(i.gu(d,t,e).then(m=>{var _;if((m||e)&&i.isPrimaryClient){const v=m?!m.fromCache:(_=e?.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){r.push(m);const v=Yp.Es(d.targetId,m);o.push(v)}}))}),await Promise.all(c),i.hu.J_(r),await async function(d,m){const _=Rt(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>st.forEach(m,E=>st.forEach(E.Is,S=>_.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>st.forEach(E.ds,S=>_.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!$o(v))throw v;ht(Kp,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const S=_.Fs.get(E),R=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(R);_.Fs=_.Fs.insert(E,D)}}}(i.localStore,o))}async function yM(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){ht(e_,"User change. New user:",t.toKey());const i=await CA(e.localStore,t);e.currentUser=t,function(o,c){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new ut(et.CANCELLED,c))})}),o.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ru(e,i.Bs)}}function vM(n,t){const e=Rt(n),i=e.Eu.get(t);if(i&&i.lu)return Vt().add(i.key);{let r=Vt();const o=e.Tu.get(t);if(!o)return r;for(const c of o){const h=e.Pu.get(c);r=r.unionWith(h.view.tu)}return r}}function $A(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gM.bind(null,t),t.hu.J_=nM.bind(null,t.eventManager),t.hu.pu=iM.bind(null,t.eventManager),t}function bM(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pM.bind(null,t),t}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=td(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return AO(this.persistence,new EO,t.initialUser,this.serializer)}Du(t){return new IA(Gp.Vi,this.serializer)}bu(t){return new OO}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class EM extends Of{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Yt(this.persistence.referenceDelegate instanceof Cf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aO(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new IA(i=>Cf.Vi(i,e),this.serializer)}}class hp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yM.bind(null,this.syncEngine),await JO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new eM}()}createDatastore(t){const e=td(t.databaseInfo.databaseId),i=function(o){return new VO(o)}(t.databaseInfo);return function(o,c,h,d){return new jO(o,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,c,h){return new FO(i,r,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>fE(this.syncEngine,e,0),function(){return aE.C()?new aE:new MO}())}createSyncEngine(t,e){return function(r,o,c,h,d,m,_){const v=new oM(r,o,c,h,d,m);return _&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const o=Rt(r);ht(Ea,"RemoteStore shutting down."),o.Ia.add(5),await su(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}hp.provider={build:()=>new hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):_s("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class TM{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=sn.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ht(vr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ht(vr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Jp(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Im(n,t){n.asyncQueue.verifyOperationInProgress(),ht(vr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await CA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>{fr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ht("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{fr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=t}async function gE(n,t){n.asyncQueue.verifyOperationInProgress();const e=await SM(n);ht(vr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>lE(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>lE(t.remoteStore,r)),n._onlineComponents=t}async function SM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(vr,"Using user provided OfflineComponentProvider");try{await Im(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===et.FAILED_PRECONDITION||r.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;fr("Error using user provided cache. Falling back to memory cache: "+e),await Im(n,new Of)}}else ht(vr,"Using default OfflineComponentProvider"),await Im(n,new EM(void 0));return n._offlineComponents}async function WA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(vr,"Using user provided OnlineComponentProvider"),await gE(n,n._uninitializedComponentsProvider._online)):(ht(vr,"Using default OnlineComponentProvider"),await gE(n,new hp))),n._onlineComponents}function AM(n){return WA(n).then(t=>t.syncEngine)}async function ZA(n){const t=await WA(n),e=t.eventManager;return e.onListen=lM.bind(null,t.syncEngine),e.onUnlisten=hM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=cM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=fM.bind(null,t.syncEngine),e}function wM(n,t,e={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new XA({next:E=>{_.Ou(),c.enqueueAndForget(()=>jA(o,v));const S=E.docs.has(h);!S&&E.fromCache?m.reject(new ut(et.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&d&&d.source==="server"?m.reject(new ut(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new BA(zp(h.path),_,{includeMetadataChanges:!0,ka:!0});return zA(o,v)}(await ZA(n),n.asyncQueue,t,e,i)),i.promise}function xM(n,t,e={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new XA({next:E=>{_.Ou(),c.enqueueAndForget(()=>jA(o,v)),E.fromCache&&d.source==="server"?m.reject(new ut(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new BA(h,_,{includeMetadataChanges:!0,ka:!0});return zA(o,v)}(await ZA(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firestore.googleapis.com",pE=!0;class _E{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ut(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=pE}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:pE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=RA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<sO)throw new ut(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}H2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class id{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new k2;switch(i.type){case"firstParty":return new U2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=mE.get(e);i&&(ht("ComponentProvider","Removing Datastore"),mE.delete(e),i.terminate())}(this),Promise.resolve()}}function RM(n,t,e,i={}){var r;n=dr(n,id);const o=Ho(t),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;o&&(HT(`https://${d}`),qT("Firestore",!0)),c.host!==tw&&c.host!==d&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:d,ssl:o,emulatorOptions:i});if(!_a(m,h)&&(n._setSettings(m),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=sn.MOCK_USER;else{_=Yx(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ut(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new sn(E)}n._authCredentials=new P2(new LS(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Wo(this.firestore,t,this._query)}}class Ie{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ie(this.firestore,t,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(tu(e,Ie._jsonSchema))return new Ie(t,i||null,new pt(oe.fromString(e.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:Re("string",Ie._jsonSchemaVersion),referencePath:Re("string")};class lr extends Wo{constructor(t,e,i){super(t,e,zp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ie(this.firestore,null,new pt(t))}withConverter(t){return new lr(this.firestore,t,this._path)}}function Ta(n,t,...e){if(n=Xe(n),zS("collection","path",t),n instanceof id){const i=oe.fromString(t,...e);return Db(i),new lr(n,null,i)}{if(!(n instanceof Ie||n instanceof lr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(oe.fromString(t,...e));return Db(i),new lr(n.firestore,null,i)}}function sd(n,t,...e){if(n=Xe(n),arguments.length===1&&(t=Np.newId()),zS("doc","path",t),n instanceof id){const i=oe.fromString(t,...e);return Cb(i),new Ie(n,null,new pt(i))}{if(!(n instanceof Ie||n instanceof lr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(oe.fromString(t,...e));return Cb(i),new Ie(n.firestore,n instanceof lr?n.converter:null,new pt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="AsyncQueue";class vE{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new OA(this,"async_queue_retry"),this.oc=()=>{const i=Rm();i&&ht(yE,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=Rm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=Rm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new gs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!$o(t))throw t;ht(yE,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",bE(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const r=Zp.createAndSchedule(this,t,e,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Et(47125,{hc:bE(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function bE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class au extends id{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new vE,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vE(t),this._firestoreClient=void 0,await t}}}function IM(n,t){const e=typeof n=="object"?n:QT(),i=typeof n=="string"?n:Tf,r=Tp(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=qx("firestore");o&&RM(r,...o)}return r}function i_(n){if(n._terminated)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CM(n),n._firestoreClient}function CM(n){var t,e,i;const r=n._freezeSettings(),o=function(h,d,m,_){return new tD(h,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,JA(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new TM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn(We.fromBase64String(t))}catch(e){throw new ut(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new qn(We.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(tu(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Re("string",qn._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(t){if(tu(t,Mi._jsonSchema))return new Mi(t.latitude,t.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:Re("string",Mi._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(tu(t,Ni._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Ni(t.vectorValues);throw new ut(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Re("string",Ni._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^__.*__$/;class OM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Sr(t,this.data,this.fieldMask,e,this.fieldTransforms):new nu(t,this.data,e,this.fieldTransforms)}}class ew{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Sr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function nw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ec:n})}}class r_{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new r_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.fc(t),r}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Mf(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(nw(this.Ec)&&DM.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class MM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||td(t)}Dc(t,e,i,r=!1){return new r_({Ec:t,methodName:e,bc:i,path:$e.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a_(n){const t=n._freezeSettings(),e=td(n._databaseId);return new MM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function NM(n,t,e,i,r,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,t,e,r);o_("Data must be an object, but it was:",c,i);const h=iw(i,c);let d,m;if(o.merge)d=new Cn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const E=fp(t,v,e);if(!c.contains(E))throw new ut(et.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);rw(_,E)||_.push(E)}d=new Cn(_),m=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=c.fieldTransforms;return new OM(new yn(h),d,m)}class ad extends s_{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ad}}function kM(n,t,e,i){const r=n.Dc(1,t,e);o_("Data must be an object, but it was:",r,i);const o=[],c=yn.empty();Tr(i,(d,m)=>{const _=l_(t,d,e);m=Xe(m);const v=r.gc(_);if(m instanceof ad)o.push(_);else{const E=ou(m,v);E!=null&&(o.push(_),c.set(_,E))}});const h=new Cn(o);return new ew(c,h,r.fieldTransforms)}function PM(n,t,e,i,r,o){const c=n.Dc(1,t,e),h=[fp(t,i,e)],d=[r];if(o.length%2!=0)throw new ut(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(fp(t,o[E])),d.push(o[E+1]);const m=[],_=yn.empty();for(let E=h.length-1;E>=0;--E)if(!rw(m,h[E])){const S=h[E];let R=d[E];R=Xe(R);const D=c.gc(S);if(R instanceof ad)m.push(S);else{const O=ou(R,D);O!=null&&(m.push(S),_.set(S,O))}}const v=new Cn(m);return new ew(_,v,c.fieldTransforms)}function VM(n,t,e,i=!1){return ou(e,n.Dc(i?4:3,t))}function ou(n,t){if(sw(n=Xe(n)))return o_("Unsupported field value:",t,n),iw(n,t);if(n instanceof s_)return function(i,r){if(!nw(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,r){const o=[];let c=0;for(const h of i){let d=ou(h,r.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ie.fromDate(i);return{timestampValue:If(r.serializer,o)}}if(i instanceof ie){const o=new ie(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:If(r.serializer,o)}}if(i instanceof Mi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qn)return{bytesValue:bA(r.serializer,i._byteString)};if(i instanceof Ie){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ni)return function(c,h){return{mapValue:{fields:{[QS]:{stringValue:$S},[Sf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return jp(h.serializer,m)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${Gf(i)}`)}(n,t)}function iw(n,t){const e={};return FS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tr(n,(i,r)=>{const o=ou(r,t.Vc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function sw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ie||n instanceof Mi||n instanceof qn||n instanceof Ie||n instanceof s_||n instanceof Ni)}function o_(n,t,e){if(!sw(e)||!jS(e)){const i=Gf(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function fp(n,t,e){if((t=Xe(t))instanceof rd)return t._internalPath;if(typeof t=="string")return l_(n,t);throw Mf("Field path arguments must be of type string or ",n,!1,void 0,e)}const LM=new RegExp("[~\\*/\\[\\]]");function l_(n,t,e){if(t.search(LM)>=0)throw Mf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new rd(...t.split("."))._internalPath}catch{throw Mf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Mf(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${r}`),d+=")"),new ut(et.INVALID_ARGUMENT,h+n+d)}function rw(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new UM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(c_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class UM extends aw{data(){return super.data()}}function c_(n,t){return typeof t=="string"?l_(n,t):t instanceof rd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ut(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u_{}class jM extends u_{}function EE(n,t,...e){let i=[];t instanceof u_&&i.push(t),i=i.concat(e),function(o){const c=o.filter(d=>d instanceof h_).length,h=o.filter(d=>d instanceof od).length;if(c>1||c>0&&h>0)throw new ut(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class od extends jM{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new od(t,e,i)}_apply(t){const e=this._parse(t);return ow(t._query,e),new Wo(t.firestore,t.converter,ep(t._query,e))}_parse(t){const e=a_(t.firestore);return function(o,c,h,d,m,_,v){let E;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ut(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){SE(v,_);const R=[];for(const D of v)R.push(TE(d,o,D));E={arrayValue:{values:R}}}else E=TE(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||SE(v,_),E=VM(h,c,v,_==="in"||_==="not-in");return xe.create(m,_,E)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function zh(n,t,e){const i=t,r=c_("where",n);return od._create(r,i,e)}class h_ extends u_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new h_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ri.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let c=r;const h=o.getFlattenedFilters();for(const d of h)ow(c,d),c=ep(c,d)}(t._query,e),new Wo(t.firestore,t.converter,ep(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function TE(n,t,e){if(typeof(e=Xe(e))=="string"){if(e==="")throw new ut(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iA(t)&&e.indexOf("/")!==-1)throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(oe.fromString(e));if(!pt.isDocumentKey(i))throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ub(n,new pt(i))}if(e instanceof Ie)return Ub(n,e._key);throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(e)}.`)}function SE(n,t){if(!Array.isArray(n)||n.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ow(n,t){const e=function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class BM{convertValue(t,e="none"){switch(_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Tr(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;const o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[Sf].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(c=>ve(c.doubleValue));return new Ni(o)}convertGeoPoint(t){return new Mi(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Qf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Uc(t));default:return null}}convertTimestamp(t){const e=mr(t);return new ie(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=oe.fromString(t);Yt(xA(i),9688,{name:t});const r=new zc(i.get(1),i.get(3)),o=new pt(i.popFirst(5));return r.isEqual(e)||_s(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class Ec{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ma extends aw{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(c_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ma._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Re("string",ma._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class cf extends ma{data(t={}){return super.data(t)}}class Oo{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ec(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new cf(this._firestore,this._userDataWriter,i.key,i,new Ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const d=new cf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ec(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new cf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ec(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:HM(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Oo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function HM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){n=dr(n,Ie);const t=dr(n.firestore,au);return wM(i_(t),n._key).then(e=>GM(t,n,e))}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:Re("string",Oo._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class lw extends BM{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ie(this.firestore,null,e)}}function Hc(n){n=dr(n,Wo);const t=dr(n.firestore,au),e=i_(t),i=new lw(t);return zM(n._query),xM(e,n._query).then(r=>new Oo(t,i,n,r))}function cw(n,t,e,...i){n=dr(n,Ie);const r=dr(n.firestore,au),o=a_(r);let c;return c=typeof(t=Xe(t))=="string"||t instanceof rd?PM(o,"updateDoc",n._key,t,e,i):kM(o,"updateDoc",n._key,t),hw(r,[c.toMutation(n._key,Di.exists(!0))])}function uw(n,t){const e=dr(n.firestore,au),i=sd(n),r=FM(n.converter,t);return hw(e,[NM(a_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Di.exists(!1))]).then(()=>i)}function hw(n,t){return function(i,r){const o=new gs;return i.asyncQueue.enqueueAndForget(async()=>dM(await AM(i),r,o)),o.promise}(i_(n),t)}function GM(n,t,e){const i=e.docs.get(t._key),r=new lw(n);return new ma(n,r,t._key,i,new Ec(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Ko=r})(qo),ko(new ya("firestore",(i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new au(new V2(i.getProvider("auth-internal")),new z2(c,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ut(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(m.options.projectId,_)}(c,r),c);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),rr(Ab,wb,t),rr(Ab,wb,"esm2017")})();const YM={apiKey:"AIzaSyAjFHv1jOhULNpvcY4-SdR6zB8-U1-Sx6Q",authDomain:"salchipapon.firebaseapp.com",projectId:"salchipapon",storageBucket:"salchipapon.firebasestorage.app",messagingSenderId:"590878913280",appId:"1:590878913280:web:ad8d3fb7d39b1c48db39e5",measurementId:"G-39KL5ZL7G7"},fw=KT(YM),ki=IM(fw),dp=D2(fw),KM=({onLogin:n})=>{const[t,e]=St.useState(""),[i,r]=St.useState(""),[o,c]=St.useState(""),h=async()=>{try{await pC(dp,t,i),n()}catch{c("Credenciales incorrectas")}};return H.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:H.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[H.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-orange-600",children:"Iniciar sesin"}),o&&H.jsx("div",{className:"mb-4 p-2 bg-red-100 border-l-4 border-red-500 text-red-700",children:H.jsx("p",{children:o})}),H.jsx("div",{className:"mb-4",children:H.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Email",value:t,onChange:d=>e(d.target.value)})}),H.jsx("div",{className:"mb-6",children:H.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Contrasea",type:"password",value:i,onChange:d=>r(d.target.value)})}),H.jsx("button",{className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:h,children:"Ingresar"})]})})},QM=()=>{const[n,t]=St.useState([]),[e,i]=St.useState(""),[r,o]=St.useState(1),[c,h]=St.useState([]),[d,m]=St.useState(""),[_,v]=St.useState(""),E=(G,$=2500)=>{v(G),setTimeout(()=>v(""),$)},S=G=>n.find($=>$.id===G);St.useEffect(()=>{(async()=>{const it=(await Hc(Ta(ki,"productos"))).docs.map(C=>({id:C.id,...C.data()}));t(it)})()},[]);const R=()=>{const G=S(e),$=parseInt(r);if(!(!G||$<1)){if(G.stock<$)return E(` No hay stock suficiente para "${G.nombre}".`);h(it=>it.find(x=>x.id===G.id)?it.map(x=>x.id===G.id?{...x,cantidad:x.cantidad+$,subtotal:x.precio*(x.cantidad+$)}:x):[...it,{...G,cantidad:$,subtotal:G.precio*$}]),o(1),i("")}},D=(G,$)=>{if($<1)return;const it=S(G);if(it&&it.stock<$)return E(` No hay suficiente stock para "${it.nombre}".`);h(C=>C.map(x=>x.id===G?{...x,cantidad:$,subtotal:x.precio*$}:x))},O=G=>{h($=>$.filter(it=>it.id!==G))},Q=c.reduce((G,$)=>G+$.subtotal,0),q=async()=>{if(c.length===0)return E(" No hay productos en la venta");v("Guardando venta...");const G={cliente:d.trim()||"Consumidor final",items:c.map(({id:$,nombre:it,precio:C,cantidad:x,subtotal:I})=>({id:$,nombre:it,precio:C,cantidad:x,subtotal:I})),total:Q,fecha:ie.now(),estado:"pendiente",metodoPago:""};try{const $=await uw(Ta(ki,"ventas"),G);await Promise.all(c.map(it=>cw(sd(ki,"productos",it.id),{stock:it.stock-it.cantidad}))),h([]),m(""),v(" Venta registrada correctamente!"),Z(G)}catch($){console.error("Error al guardar venta:",$),v(` Error: ${$.message}`)}},Z=G=>{const $=window.open("","","width=300,height=600");$.document.write(`
            <html>
                <head>
                    <title>Boleta de Venta</title>
                    <style>
                        body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
                        .boleta { width: 240px; margin: auto; text-align: center; }
                        .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
                        .linea { border-top: 1px dashed #000; margin: 8px 0; }
                        .producto { text-align: left; margin: 2px 0; }
                        .total { font-weight: bold; margin-top: 10px; }
                        .metodo { margin-top: 5px; }
                    </style>
                </head>
                <body onload="window.print(); setTimeout(() => window.close(), 500);">
                    <div class="boleta">
                        <div class="titulo">BOLETA DE VENTA</div>
                        <div>Cliente: <strong>${G.cliente}</strong></div>
                        <div>Fecha: ${new Date().toLocaleString()}</div>
                        <div class="linea"></div>
                        <div style="text-align:left">
                            ${G.items.map(it=>`
                                <div class="producto">
                                    ${it.nombre}<br />
                                    ${it.cantidad} x S/ ${it.precio.toFixed(2)} = S/ ${it.subtotal.toFixed(2)}
                                </div>
                            `).join("")}
                        </div>
                        <div class="linea"></div>
                        <div class="total">TOTAL: S/ ${G.total.toFixed(2)}</div>
                        <div class="metodo">Pago: ${G.metodoPago||"---"}</div>
                        <div>${G.estado==="completada"?" Pagado":" Pendiente"}</div>
                        <div class="linea"></div>
                        <div>Gracias por su compra</div>
                    </div>
                </body>
            </html>
        `),$.document.close()};return H.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[H.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Registro de Ventas"}),_&&H.jsx("div",{className:`mb-4 p-3 rounded-md ${_.includes("")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[H.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Cliente"}),H.jsx("input",{type:"text",value:d,placeholder:"Nombre del cliente",onChange:G=>m(G.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Agregar Productos"}),H.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[H.jsxs("select",{value:e,onChange:G=>i(G.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[H.jsx("option",{value:"",children:"Seleccionar producto"}),n.map(G=>H.jsxs("option",{value:G.id,children:[G.nombre," - S/ ",G.precio.toFixed(2)," (",G.stock," disp.)"]},G.id))]}),H.jsx("input",{type:"number",value:r,min:1,placeholder:"Cantidad",onChange:G=>o(G.target.value),className:"w-24 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),H.jsx("button",{onClick:R,disabled:!e||r<1,className:"bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition disabled:opacity-50",children:"Agregar"})]})]}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Productos en la venta"}),c.length===0?H.jsx("p",{className:"text-gray-500 italic",children:"No hay productos agregados"}):H.jsx("ul",{className:"divide-y divide-gray-200",children:c.map(G=>H.jsxs("li",{className:"py-3",children:[H.jsxs("div",{className:"flex justify-between items-center",children:[H.jsxs("div",{children:[H.jsx("span",{className:"font-medium",children:G.nombre}),H.jsxs("span",{className:"text-gray-600 ml-2",children:["(S/ ",G.precio.toFixed(2),")"]})]}),H.jsxs("div",{className:"font-medium",children:["S/ ",G.subtotal.toFixed(2)]})]}),H.jsxs("div",{className:"flex items-center mt-2 gap-2",children:[H.jsx("button",{onClick:()=>D(G.id,G.cantidad-1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"-"}),H.jsx("span",{className:"w-10 text-center",children:G.cantidad}),H.jsx("button",{onClick:()=>D(G.id,G.cantidad+1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded",children:"+"}),H.jsx("button",{onClick:()=>O(G.id),className:"ml-4 text-red-500 hover:text-red-700",children:"Eliminar"})]})]},G.id))}),H.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:H.jsxs("h3",{className:"text-xl font-bold text-right text-orange-600",children:["Total: S/ ",Q.toFixed(2)]})})]}),H.jsx("div",{className:"text-center",children:H.jsx("button",{onClick:q,disabled:c.length===0,className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Guardar Venta"})})]})},$M=()=>{const[n,t]=St.useState(""),[e,i]=St.useState(""),[r,o]=St.useState([]),[c,h]=St.useState(!1),[d,m]=St.useState(""),_=async()=>{try{h(!0);const R=(await Hc(Ta(ki,"gastos"))).docs.map(D=>({id:D.id,...D.data(),fecha:D.data().fecha?.toDate()||new Date}));o(R.sort((D,O)=>O.fecha-D.fecha))}catch(S){console.error("Error cargando gastos:",S),m(" Error al cargar gastos")}finally{h(!1)}},v=async()=>{if(!n||!e){m(" Completa todos los campos"),setTimeout(()=>m(""),3e3);return}try{h(!0),await uw(Ta(ki,"gastos"),{descripcion:n,monto:parseFloat(e),fecha:ie.now()}),t(""),i(""),m(" Gasto agregado correctamente"),setTimeout(()=>m(""),3e3),await _()}catch(S){console.error("Error agregando gasto:",S),m(" Error al agregar gasto"),setTimeout(()=>m(""),3e3)}finally{h(!1)}};St.useEffect(()=>{_()},[]);const E=r.reduce((S,R)=>S+R.monto,0);return H.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[H.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Registro de Gastos"}),d&&H.jsx("div",{className:`mb-4 p-3 rounded-md ${d.includes("")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Agregar Nuevo Gasto"}),H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Descripcin"}),H.jsx("input",{placeholder:"Ej. Materiales de oficina",value:n,onChange:S=>t(S.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Monto (S/)"}),H.jsx("input",{placeholder:"0.00",value:e,onChange:S=>i(S.target.value),type:"number",step:"0.01",min:"0",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),H.jsx("button",{onClick:v,disabled:c,className:"bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition disabled:opacity-50",children:c?"Agregando...":"Agregar Gasto"})]}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[H.jsxs("div",{className:"flex justify-between items-center mb-4",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Historial de Gastos"}),H.jsxs("div",{className:"text-xl font-bold text-red-600",children:["Total: S/ ",E.toFixed(2)]})]}),c&&r.length===0?H.jsx("div",{className:"flex justify-center items-center h-32",children:H.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500"})}):r.length===0?H.jsx("p",{className:"text-gray-500 italic py-4",children:"No hay gastos registrados"}):H.jsx("div",{className:"divide-y divide-gray-200",children:r.map(S=>H.jsxs("div",{className:"py-3 flex justify-between items-start",children:[H.jsxs("div",{children:[H.jsx("p",{className:"font-medium",children:S.descripcion}),H.jsx("p",{className:"text-sm text-gray-500",children:S.fecha.toLocaleDateString("es-PE",{day:"2-digit",month:"short",year:"numeric"})})]}),H.jsxs("div",{className:"text-red-600 font-medium",children:["S/ ",S.monto.toFixed(2)]})]},S.id))})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function lu(n){return n+.5|0}const er=(n,t,e)=>Math.max(Math.min(n,e),t);function Tc(n){return er(lu(n*2.55),0,255)}function cr(n){return er(lu(n*255),0,255)}function hs(n){return er(lu(n/2.55)/100,0,1)}function AE(n){return er(lu(n*100),0,100)}const Hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gp=[..."0123456789ABCDEF"],XM=n=>gp[n&15],WM=n=>gp[(n&240)>>4]+gp[n&15],jh=n=>(n&240)>>4===(n&15),ZM=n=>jh(n.r)&&jh(n.g)&&jh(n.b)&&jh(n.a);function JM(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Hn[n[1]]*17,g:255&Hn[n[2]]*17,b:255&Hn[n[3]]*17,a:t===5?Hn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Hn[n[1]]<<4|Hn[n[2]],g:Hn[n[3]]<<4|Hn[n[4]],b:Hn[n[5]]<<4|Hn[n[6]],a:t===9?Hn[n[7]]<<4|Hn[n[8]]:255})),e}const tN=(n,t)=>n<255?t(n):"";function eN(n){var t=ZM(n)?XM:WM;return n?"#"+t(n.r)+t(n.g)+t(n.b)+tN(n.a,t):void 0}const nN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dw(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function iN(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function sN(n,t,e){const i=dw(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function rN(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function f_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),h=(o+c)/2;let d,m,_;return o!==c&&(_=o-c,m=h>.5?_/(2-o-c):_/(o+c),d=rN(e,i,r,_,o),d=d*60+.5),[d|0,m||0,h]}function d_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(cr)}function g_(n,t,e){return d_(dw,n,t,e)}function aN(n,t,e){return d_(sN,n,t,e)}function oN(n,t,e){return d_(iN,n,t,e)}function gw(n){return(n%360+360)%360}function lN(n){const t=nN.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Tc(+t[5]):cr(+t[5]));const r=gw(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=aN(r,o,c):t[1]==="hsv"?i=oN(r,o,c):i=g_(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function cN(n,t){var e=f_(n);e[0]=gw(e[0]+t),e=g_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function uN(n){if(!n)return;const t=f_(n),e=t[0],i=AE(t[1]),r=AE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${hs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const wE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hN(){const n={},t=Object.keys(xE),e=Object.keys(wE);let i,r,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],r=0;r<e.length;r++)o=e[r],h=h.replace(o,wE[o]);o=parseInt(xE[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let Bh;function fN(n){Bh||(Bh=hN(),Bh.transparent=[0,0,0,0]);const t=Bh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const dN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gN(n){const t=dN.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Tc(c):er(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Tc(i):er(i,0,255)),r=255&(t[4]?Tc(r):er(r,0,255)),o=255&(t[6]?Tc(o):er(o,0,255)),{r:i,g:r,b:o,a:e}}}function mN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${hs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Cm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function pN(n,t,e){const i=bo(hs(n.r)),r=bo(hs(n.g)),o=bo(hs(n.b));return{r:cr(Cm(i+e*(bo(hs(t.r))-i))),g:cr(Cm(r+e*(bo(hs(t.g))-r))),b:cr(Cm(o+e*(bo(hs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Fh(n,t,e){if(n){let i=f_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=g_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function mw(n,t){return n&&Object.assign(t||{},n)}function RE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=cr(n[3]))):(t=mw(n,{r:0,g:0,b:0,a:1}),t.a=cr(t.a)),t}function _N(n){return n.charAt(0)==="r"?gN(n):lN(n)}class qc{constructor(t){if(t instanceof qc)return t;const e=typeof t;let i;e==="object"?i=RE(t):e==="string"&&(i=JM(t)||fN(t)||_N(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=mw(this._rgb);return t&&(t.a=hs(t.a)),t}set rgb(t){this._rgb=RE(t)}rgbString(){return this._valid?mN(this._rgb):void 0}hexString(){return this._valid?eN(this._rgb):void 0}hslString(){return this._valid?uN(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,d=i.a-r.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*r.r+.5,i.g=255&m*i.g+o*r.g+.5,i.b=255&m*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=pN(this._rgb,t._rgb,e)),this}clone(){return new qc(this.rgb)}alpha(t){return this._rgb.a=cr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=lu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fh(this._rgb,2,t),this}darken(t){return Fh(this._rgb,2,-t),this}saturate(t){return Fh(this._rgb,1,t),this}desaturate(t){return Fh(this._rgb,1,-t),this}rotate(t){return cN(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const yN=(()=>{let n=0;return()=>n++})();function se(n){return n==null}function ke(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Yn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Si(n,t){return Yn(n)?n:t}function qt(n,t){return typeof n>"u"?t:n}const vN=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function le(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Xt(n,t,e,i){let r,o,c;if(ke(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ft(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function Nf(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function kf(n){if(ke(n))return n.map(kf);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=kf(n[e[r]]);return t}return n}function pw(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function bN(n,t,e,i){if(!pw(n))return;const r=t[n],o=e[n];Ft(r)&&Ft(o)?Gc(r,o,i):t[n]=kf(o)}function Gc(n,t,e){const i=ke(t)?t:[t],r=i.length;if(!Ft(n))return n;e=e||{};const o=e.merger||bN;let c;for(let h=0;h<r;++h){if(c=i[h],!Ft(c))continue;const d=Object.keys(c);for(let m=0,_=d.length;m<_;++m)o(d[m],n,c,e)}return n}function Oc(n,t){return Gc(n,t,{merger:EN})}function EN(n,t,e){if(!pw(n))return;const i=t[n],r=e[n];Ft(i)&&Ft(r)?Oc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=kf(r))}const IE={"":n=>n,x:n=>n.x,y:n=>n.y};function TN(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function SN(n){const t=TN(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Bo(n,t){return(IE[t]||(IE[t]=SN(t)))(n)}function m_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Yc=n=>typeof n<"u",br=n=>typeof n=="function",CE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function AN(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const on=Math.PI,ur=2*on,Pf=Number.POSITIVE_INFINITY,wN=on/180,ni=on/2,oa=on/4,DE=on*2/3,_w=Math.log10,hr=Math.sign;function uf(n,t,e){return Math.abs(n-t)<e}function OE(n){const t=Math.round(n);n=uf(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(_w(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function xN(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function RN(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Vf(n){return!RN(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function IN(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function CN(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ga(n){return n*(on/180)}function DN(n){return n*(180/on)}function ME(n){if(!Yn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function ON(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*on&&(o+=ur),{angle:o,distance:r}}function MN(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function la(n){return(n%ur+ur)%ur}function NN(n,t,e,i){const r=la(n),o=la(t),c=la(e),h=la(o-r),d=la(c-r),m=la(r-o),_=la(r-c);return r===o||r===c||i||h>d&&m<_}function ii(n,t,e){return Math.max(t,Math.min(e,n))}function kN(n){return ii(n,-32768,32767)}function xo(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function p_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const mp=(n,t,e,i)=>p_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),PN=(n,t,e)=>p_(n,e,i=>n[i][t]>=e);function VN(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const yw=["push","pop","shift","splice","unshift"];function LN(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yw.forEach(e=>{const i="_onData"+m_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function NE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(yw.forEach(o=>{delete n[o]}),delete n._chartjs)}function vw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const bw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ew(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,bw.call(window,()=>{i=!1,n.apply(t,e)}))}}function UN(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const __=n=>n==="start"?"left":n==="end"?"right":"center",nn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,zN=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Hh=n=>n===0||n===1,kE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ur/e)),PE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ur/e)+1,Mc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ni)+1,easeOutSine:n=>Math.sin(n*ni),easeInOutSine:n=>-.5*(Math.cos(on*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Hh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Hh(n)?n:kE(n,.075,.3),easeOutElastic:n=>Hh(n)?n:PE(n,.075,.3),easeInOutElastic(n){return Hh(n)?n:n<.5?.5*kE(n*2,.1125,.45):.5+.5*PE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Mc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Mc.easeInBounce(n*2)*.5:Mc.easeOutBounce(n*2-1)*.5+.5};function Tw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function VE(n){return Tw(n)?n:new qc(n)}function Dm(n){return Tw(n)?n:new qc(n).saturate(.5).darken(.1).hexString()}const jN=["x","y","borderWidth","radius","tension"],BN=["color","borderColor","backgroundColor"];function FN(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:BN},numbers:{type:"number",properties:jN}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function HN(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const LE=new Map;function qN(n,t){t=t||{};const e=n+JSON.stringify(t);let i=LE.get(e);return i||(i=new Intl.NumberFormat(n,t),LE.set(e,i)),i}function Sw(n,t,e){return qN(t,e).format(n)}const GN={values(n){return ke(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(r="scientific"),o=YN(n,e)}const c=_w(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),Sw(n,i,d)}};function YN(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Aw={formatters:GN};function KN(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Aw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Sa=Object.create(null),pp=Object.create(null);function Nc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Om(n,t,e){return typeof t=="string"?Gc(Nc(n,t),e):Gc(Nc(n,""),t)}class QN{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Dm(r.backgroundColor),this.hoverBorderColor=(i,r)=>Dm(r.borderColor),this.hoverColor=(i,r)=>Dm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Om(this,t,e)}get(t){return Nc(this,t)}describe(t,e){return Om(pp,t,e)}override(t,e){return Om(Sa,t,e)}route(t,e,i,r){const o=Nc(this,t),c=Nc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=c[r];return Ft(d)?Object.assign({},m,d):qt(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var be=new QN({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[FN,HN,KN]);function $N(n){return!n||se(n.size)||se(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function UE(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function ca(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function zE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function jE(n,t,e,i){ww(n,t,e,i,null)}function ww(n,t,e,i,r){let o,c,h,d,m,_,v,E;const S=t.pointStyle,R=t.rotation,D=t.radius;let O=(R||0)*wN;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(O),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),n.restore();return}if(!(isNaN(D)||D<=0)){switch(n.beginPath(),S){default:r?n.ellipse(e,i,r/2,D,0,0,ur):n.arc(e,i,D,0,ur),n.closePath();break;case"triangle":_=r?r/2:D,n.moveTo(e+Math.sin(O)*_,i-Math.cos(O)*D),O+=DE,n.lineTo(e+Math.sin(O)*_,i-Math.cos(O)*D),O+=DE,n.lineTo(e+Math.sin(O)*_,i-Math.cos(O)*D),n.closePath();break;case"rectRounded":m=D*.516,d=D-m,c=Math.cos(O+oa)*d,v=Math.cos(O+oa)*(r?r/2-m:d),h=Math.sin(O+oa)*d,E=Math.sin(O+oa)*(r?r/2-m:d),n.arc(e-v,i-h,m,O-on,O-ni),n.arc(e+E,i-c,m,O-ni,O),n.arc(e+v,i+h,m,O,O+ni),n.arc(e-E,i+c,m,O+ni,O+on),n.closePath();break;case"rect":if(!R){d=Math.SQRT1_2*D,_=r?r/2:d,n.rect(e-_,i-d,2*_,2*d);break}O+=oa;case"rectRot":v=Math.cos(O)*(r?r/2:D),c=Math.cos(O)*D,h=Math.sin(O)*D,E=Math.sin(O)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+E,i-c),n.lineTo(e+v,i+h),n.lineTo(e-E,i+c),n.closePath();break;case"crossRot":O+=oa;case"cross":v=Math.cos(O)*(r?r/2:D),c=Math.cos(O)*D,h=Math.sin(O)*D,E=Math.sin(O)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+E,i-c),n.lineTo(e-E,i+c);break;case"star":v=Math.cos(O)*(r?r/2:D),c=Math.cos(O)*D,h=Math.sin(O)*D,E=Math.sin(O)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+E,i-c),n.lineTo(e-E,i+c),O+=oa,v=Math.cos(O)*(r?r/2:D),c=Math.cos(O)*D,h=Math.sin(O)*D,E=Math.sin(O)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+E,i-c),n.lineTo(e-E,i+c);break;case"line":c=r?r/2:Math.cos(O)*D,h=Math.sin(O)*D,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(O)*(r?r/2:D),i+Math.sin(O)*D);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function xw(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function y_(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function v_(n){n.restore()}function XN(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),se(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function WN(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,_=r.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,_),n.lineTo(h,_),n.stroke()}}function ZN(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Kc(n,t,e,i,r,o={}){const c=ke(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=r.string,XN(n,o),d=0;d<c.length;++d)m=c[d],o.backdrop&&ZN(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),se(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),WN(n,e,i,m,o),i+=Number(r.lineHeight);n.restore()}function Lf(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*on,on,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,on,ni,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,ni,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-ni,!0),n.lineTo(e+c.topLeft,i)}const JN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ek(n,t){const e=(""+n).match(JN);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const nk=n=>+n||0;function Rw(n,t){const e={},i=Ft(t),r=i?Object.keys(t):t,o=Ft(n)?i?c=>qt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=nk(o(c));return e}function Iw(n){return Rw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Mo(n){return Rw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Kn(n){const t=Iw(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function an(n,t){n=n||{},t=t||be.font;let e=qt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=qt(n.style,t.style);i&&!(""+i).match(tk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:qt(n.family,t.family),lineHeight:ek(qt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:qt(n.weight,t.weight),string:""};return r.string=$N(r),r}function qh(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function ik(n,t,e){const{min:i,max:r}=n,o=vN(t,(r-i)/2),c=(h,d)=>e&&h===0?0:h+d;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function Zo(n,t){return Object.assign(Object.create(n),t)}function b_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Mw("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:h=>b_([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return Dw(h,d,()=>hk(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return FE(h).includes(d)},ownKeys(h){return FE(h)},set(h,d,m){const _=h._storage||(h._storage=r());return h[d]=_[d]=m,delete h._keys,!0}})}function Fo(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Cw(n,i),setContext:o=>Fo(n,o,e,i),override:o=>Fo(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return Dw(o,c,()=>rk(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function Cw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:br(e)?e:()=>e,isIndexable:br(i)?i:()=>i}}const sk=(n,t)=>n?n+m_(t):t,E_=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Dw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function rk(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let h=i[t];return br(h)&&c.isScriptable(t)&&(h=ak(t,h,n,e)),ke(h)&&h.length&&(h=ok(t,h,n,c.isIndexable)),E_(t,h)&&(h=Fo(h,r,o&&o[t],c)),h}function ak(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,c||i);return h.delete(n),E_(n,d)&&(d=T_(r._scopes,r,n,d)),d}function ok(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ft(t[0])){const d=t,m=r._scopes.filter(_=>_!==d);t=[];for(const _ of d){const v=T_(m,r,n,_);t.push(Fo(v,o,c&&c[n],h))}}return t}function Ow(n,t,e){return br(n)?n(t,e):n}const lk=(n,t)=>n===!0?t:typeof n=="string"?Bo(t,n):void 0;function ck(n,t,e,i,r){for(const o of t){const c=lk(e,o);if(c){n.add(c);const h=Ow(c._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function T_(n,t,e,i){const r=t._rootScopes,o=Ow(t._fallback,e,i),c=[...n,...r],h=new Set;h.add(i);let d=BE(h,c,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=BE(h,c,o,d,i),d===null)?!1:b_(Array.from(h),[""],r,o,()=>uk(t,e,i))}function BE(n,t,e,i,r){for(;e;)e=ck(n,t,e,i,r);return e}function uk(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ke(r)&&Ft(e)?e:r||{}}function hk(n,t,e,i){let r;for(const o of t)if(r=Mw(sk(o,n),e),typeof r<"u")return E_(n,r)?T_(e,i,n,r):r}function Mw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function FE(n){let t=n._keys;return t||(t=n._keys=fk(n._scopes)),t}function fk(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function S_(){return typeof window<"u"&&typeof document<"u"}function A_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ld=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function dk(n,t){return ld(n).getPropertyValue(t)}const gk=["top","right","bottom","left"];function pa(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=gk[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const mk=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function pk(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,h,d;if(mk(r,o,n.target))h=r,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,c=!0}return{x:h,y:d,box:c}}function fa(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=ld(e),o=r.boxSizing==="border-box",c=pa(r,"padding"),h=pa(r,"border","width"),{x:d,y:m,box:_}=pk(n,e),v=c.left+(_&&h.left),E=c.top+(_&&h.top);let{width:S,height:R}=t;return o&&(S-=c.width+h.width,R-=c.height+h.height),{x:Math.round((d-v)/S*e.width/i),y:Math.round((m-E)/R*e.height/i)}}function _k(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&A_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=ld(o),d=pa(h,"border","width"),m=pa(h,"padding");t=c.width-m.width-d.width,e=c.height-m.height-d.height,i=Uf(h.maxWidth,o,"clientWidth"),r=Uf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Pf,maxHeight:r||Pf}}const Gh=n=>Math.round(n*10)/10;function yk(n,t,e,i){const r=ld(n),o=pa(r,"margin"),c=Uf(r.maxWidth,n,"clientWidth")||Pf,h=Uf(r.maxHeight,n,"clientHeight")||Pf,d=_k(n,t,e);let{width:m,height:_}=d;if(r.boxSizing==="content-box"){const E=pa(r,"border","width"),S=pa(r,"padding");m-=S.width+E.width,_-=S.height+E.height}return m=Math.max(0,m-o.width),_=Math.max(0,i?m/i:_-o.height),m=Gh(Math.min(m,c,d.maxWidth)),_=Gh(Math.min(_,h,d.maxHeight)),m&&!_&&(_=Gh(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&_>d.height&&(_=d.height,m=Gh(Math.floor(_*i))),{width:m,height:_}}function HE(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const vk=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};S_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function qE(n,t){const e=dk(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const bk=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Ek=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function No(n,t,e){return n?bk(t,e):Ek()}function Nw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function kw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Yh(n,t,e){return n.options.clip?n[e]:t[e]}function Tk(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Yh(e,t,"left"),right:Yh(e,t,"right"),top:Yh(i,t,"top"),bottom:Yh(i,t,"bottom")}:t}function Sk(n,t){const e=t._clip;if(e.disabled)return!1;const i=Tk(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ak{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=bw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var cs=new Ak;const GE="transparent",wk={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=VE(n||GE),r=i.valid&&VE(t||GE);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class xk{constructor(t,e,i,r){const o=e[i];r=qh([t.to,r,o,t.from]);const c=qh([t.from,o,r]);this._active=!0,this._fn=t.fn||wk[t.type||typeof c],this._easing=Mc[t.easing]||Mc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=qh([t.to,e,r,t.from]),this._from=qh([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||e<i),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}d=e/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class Pw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ft(o))return;const c={};for(const h of e)c[h]=o[h];(ke(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,r=Ik(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&Rk(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const m=c[d];if(m.charAt(0)==="$")continue;if(m==="options"){r.push(...this._animateOptions(t,e));continue}const _=e[m];let v=o[m];const E=i.get(m);if(v)if(E&&v.active()){v.update(E,_,h);continue}else v.cancel();if(!E||!E.duration){t[m]=_;continue}o[m]=v=new xk(E,t,m,_),r.push(v)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return cs.add(this._chart,i),!0}}function Rk(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Ik(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function YE(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function Ck(n,t,e){if(e===!1)return!1;const i=YE(n,e),r=YE(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Dk(n){let t,e,i,r;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function Vw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function KE(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,h,d,m;if(t===null)return;let _=!1;for(c=0,h=r.length;c<h;++c){if(d=+r[c],d===e){if(_=!0,i.all)continue;break}m=n.values[d],Yn(m)&&(o||t===0||hr(t)===hr(m))&&(t+=m)}return!_&&!i.all?0:t}function Ok(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let d,m,_;for(d=0,m=c.length;d<m;++d)_=c[d],h[d]={[r]:_,[o]:n[_]};return h}function Mm(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Mk(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Nk(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function kk(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function QE(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function $E(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,d=o.axis,m=c.axis,_=Mk(o,c,i),v=t.length;let E;for(let S=0;S<v;++S){const R=t[S],{[d]:D,[m]:O}=R,Q=R._stacks||(R._stacks={});E=Q[m]=kk(r,_,D),E[h]=O,E._top=QE(E,c,!0,i.type),E._bottom=QE(E,c,!1,i.type);const q=E._visualValues||(E._visualValues={});q[h]=O}}function Nm(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Pk(n,t){return Zo(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Vk(n,t,e){return Zo(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function hc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const km=n=>n==="reset"||n==="none",XE=(n,t)=>t?n:Object.assign({},n),Lk=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Vw(e,!0),values:null};class Lw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Mm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(v,E,S,R)=>v==="x"?E:v==="r"?R:S,o=e.xAxisID=qt(i.xAxisID,Nm(t,"x")),c=e.yAxisID=qt(i.yAxisID,Nm(t,"y")),h=e.rAxisID=qt(i.rAxisID,Nm(t,"r")),d=e.indexAxis,m=e.iAxisID=r(d,o,c,h),_=e.vAxisID=r(d,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&NE(this._data,this),t._stacked&&hc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e)){const r=this._cachedMeta;this._data=Ok(e,r)}else if(i!==e){if(i){NE(i,this);const r=this._cachedMeta;hc(r),r._parsed=[]}e&&Object.isExtensible(e)&&LN(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Mm(e.vScale,e),e.stack!==i.stack&&(r=!0,hc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&($E(this,e._parsed),e._stacked=Mm(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,h=o.axis;let d=t===0&&e===r.length?!0:i._sorted,m=t>0&&i._parsed[t-1],_,v,E;if(this._parsing===!1)i._parsed=r,i._sorted=!0,E=r;else{ke(r[t])?E=this.parseArrayData(i,r,t,e):Ft(r[t])?E=this.parseObjectData(i,r,t,e):E=this.parsePrimitiveData(i,r,t,e);const S=()=>v[h]===null||m&&v[h]<m[h];for(_=0;_<e;++_)i._parsed[_+t]=v=E[_],d&&(S()&&(d=!1),m=v);i._sorted=d}c&&$E(this,E)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,h=o.axis,d=c.axis,m=o.getLabels(),_=o===c,v=new Array(r);let E,S,R;for(E=0,S=r;E<S;++E)R=E+i,v[E]={[h]:_||o.parse(m[R],R),[d]:c.parse(e[R],R)};return v}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,h=new Array(r);let d,m,_,v;for(d=0,m=r;d<m;++d)_=d+i,v=e[_],h[d]={x:o.parse(v[0],_),y:c.parse(v[1],_)};return h}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(r);let _,v,E,S;for(_=0,v=r;_<v;++_)E=_+i,S=e[E],m[_]={x:o.parse(Bo(S,h),E),y:c.parse(Bo(S,d),E)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:Vw(r,!0),values:e._stacks[t.axis]._visualValues};return KE(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const h=r&&i._stacks[e.axis];r&&h&&(r.values=h,c=KE(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,h=this._getOtherScale(t),d=Lk(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:v}=Nk(h);let E,S;function R(){S=r[E];const D=S[h.axis];return!Yn(S[t.axis])||_>D||v<D}for(E=0;E<c&&!(!R()&&(this.updateRangeFromParsed(m,t,S,d),o));++E);if(o){for(E=c-1;E>=0;--E)if(!R()){this.updateRangeFromParsed(m,t,S,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],Yn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Dk(qt(this.options.clip,Ck(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||r.length-h,m=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,h,d),_=h;_<h+d;++_){const v=r[_];v.hidden||(v.active&&m?c.push(v):v.draw(t,o))}for(_=0;_<c.length;++_)c[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=Vk(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Pk(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],d=this.enableOptionSharing&&Yc(i);if(h)return XE(h,d);const m=this.chart.config,_=m.datasetElementScopeKeys(this._type,t),v=r?[`${t}Hover`,"hover",t,""]:[t,""],E=m.getOptionScopes(this.getDataset(),_),S=Object.keys(be.elements[t]),R=()=>this.getContext(i,r,e),D=m.resolveNamedOptions(E,S,R,v);return D.$shared&&(D.$shared=d,o[c]=Object.freeze(XE(D,d))),D}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let d;if(r.options.animation!==!1){const _=this.chart.config,v=_.datasetAnimationScopeKeys(this._type,e),E=_.getOptionScopes(this.getDataset(),v);d=_.createResolver(E,this.getContext(t,i,e))}const m=new Pw(r,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||km(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){km(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!km(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=c;h--)m[h]=m[h-e]};for(d(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&hc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Uk(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=vw(i.sort((r,o)=>r-o))}return n._cache.$bar}function zk(n){const t=n.iScale,e=Uk(t,n.type);let i=t._length,r,o,c,h;const d=()=>{c===32767||c===-32768||(Yc(h)&&(i=Math.min(i,Math.abs(c-h)||i)),h=c)};for(r=0,o=e.length;r<o;++r)c=t.getPixelForValue(e[r]),d();for(h=void 0,r=0,o=t.ticks.length;r<o;++r)c=t.getPixelForTick(r),d();return i}function jk(n,t,e,i){const r=e.barThickness;let o,c;return se(r)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function Bk(n,t,e,i){const r=t.pixels,o=r[n];let c=n>0?r[n-1]:null,h=n<r.length-1?r[n+1]:null;const d=e.categoryPercentage;c===null&&(c=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-c);const m=o-(o-Math.min(c,h))/2*d;return{chunk:Math.abs(h-c)/2*d/i,ratio:e.barPercentage,start:m}}function Fk(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(r,o),h=Math.max(r,o);let d=c,m=h;Math.abs(c)>Math.abs(h)&&(d=h,m=c),t[e.axis]=m,t._custom={barStart:d,barEnd:m,start:r,end:o,min:c,max:h}}function Uw(n,t,e,i){return ke(n)?Fk(n,t,e,i):t[e.axis]=e.parse(n,i),t}function WE(n,t,e,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),h=r===o,d=[];let m,_,v,E;for(m=e,_=e+i;m<_;++m)E=t[m],v={},v[r.axis]=h||r.parse(c[m],m),d.push(Uw(E,v,o,m));return d}function Pm(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Hk(n,t,e){return n!==0?hr(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function qk(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function Gk(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:h,reverse:d,top:m,bottom:_}=qk(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=m:(e._bottom||0)===i?r=_:(o[ZE(_,c,h,d)]=!0,r=m)),o[ZE(r,c,h,d)]=!0,n.borderSkipped=o}function ZE(n,t,e,i){return i?(n=Yk(n,t,e),n=JE(n,e,t)):n=JE(n,t,e),n}function Yk(n,t,e){return n===t?e:n===e?t:n}function JE(n,t,e){return n==="start"?t:n==="end"?e:n}function Kk(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Qk extends Lw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return WE(t,e,i,r)}parseArrayData(t,e,i,r){return WE(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=o.axis==="x"?h:d,_=c.axis==="x"?h:d,v=[];let E,S,R,D;for(E=i,S=i+r;E<S;++E)D=e[E],R={},R[o.axis]=o.parse(Bo(D,m),E),v.push(Uw(Bo(D,_),R,c,E));return v}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),c=o._custom,h=Pm(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:h}}=this,d=h.getBasePixel(),m=h.isHorizontal(),_=this._getRuler(),{sharedOptions:v,includeOptions:E}=this._getSharedOptions(e,r);for(let S=e;S<e+i;S++){const R=this.getParsed(S),D=o||se(R[h.axis])?{base:d,head:d}:this._calculateBarValuePixels(S),O=this._calculateBarIndexPixels(S,_),Q=(R._stacks||{})[h.axis],q={horizontal:m,base:D.base,enableBorderRadius:!Q||Pm(R._custom)||c===Q._top||c===Q._bottom,x:m?D.head:O.center,y:m?O.center:D.head,height:m?O.size:Math.abs(D.size),width:m?Math.abs(D.size):O.size};E&&(q.options=v||this.resolveDataElementOptions(S,t[S].active?"active":r));const Z=q.options||t[S].options;Gk(q,Z,Q,c),Kk(q,Z,_.ratio),this.updateElement(t[S],S,q,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),o=i.options.stacked,c=[],h=this._cachedMeta.controller.getParsed(e),d=h&&h[i.axis],m=_=>{const v=_._parsed.find(S=>S[i.axis]===d),E=v&&v[_.vScale.axis];if(se(E)||isNaN(E))return!0};for(const _ of r)if(!(e!==void 0&&m(_))&&((o===!1||c.indexOf(_.stack)===-1||o===void 0&&_.stack===void 0)&&c.push(_.stack),_.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[qt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,c;for(o=0,c=e.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const h=t.barThickness;return{min:h||zk(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,h=o||0,d=this.getParsed(t),m=d._custom,_=Pm(m);let v=d[e.axis],E=0,S=i?this.applyStack(e,d,i):v,R,D;S!==v&&(E=S-v,S=v),_&&(v=m.barStart,S=m.barEnd-m.barStart,v!==0&&hr(v)!==hr(m.barEnd)&&(E=0),E+=v);const O=!se(o)&&!_?o:E;let Q=e.getPixelForValue(O);if(this.chart.getDataVisibility(t)?R=e.getPixelForValue(E+S):R=Q,D=R-Q,Math.abs(D)<c){D=Hk(D,e,h)*c,v===h&&(Q-=D/2);const q=e.getPixelForDecimal(0),Z=e.getPixelForDecimal(1),G=Math.min(q,Z),$=Math.max(q,Z);Q=Math.max(Math.min(Q,$),G),R=Q+D,i&&!_&&(d._stacks[e.axis]._visualValues[r]=e.getValueForPixel(R)-e.getValueForPixel(Q))}if(Q===e.getPixelForValue(h)){const q=hr(D)*e.getLineWidthForValue(h)/2;Q+=q,D-=q}return{size:D,base:Q,head:R,center:R+D/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,c=qt(r.maxBarThickness,1/0);let h,d;const m=this._getAxisCount();if(e.grouped){const _=o?this._getStackCount(t):e.stackCount,v=r.barThickness==="flex"?Bk(t,e,r,_*m):jk(t,e,r,_*m),E=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(qt(E,this.getFirstScaleIdForIndexAxis())),R=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+S;h=v.start+v.chunk*R+v.chunk/2,d=Math.min(c,v.chunk*v.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),d=Math.min(c,e.min*e.ratio);return{base:h-d/2,head:h+d/2,center:h,size:d}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function ua(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class w_{static override(t){Object.assign(w_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ua()}parse(){return ua()}format(){return ua()}add(){return ua()}diff(){return ua()}startOf(){return ua()}endOf(){return ua()}}var $k={_date:w_};function Xk(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,h=r._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const m=h._reversePixels?PN:mp;if(i){if(r._sharedOptions){const _=o[0],v=typeof _.getRange=="function"&&_.getRange(t);if(v){const E=m(o,t,e-v),S=m(o,t,e+v);return{lo:E.lo,hi:S.hi}}}}else{const _=m(o,t,e);if(d){const{vScale:v}=r._cachedMeta,{_parsed:E}=n,S=E.slice(0,_.lo+1).reverse().findIndex(D=>!se(D[v.axis]));_.lo-=Math.max(0,S);const R=E.slice(_.hi).findIndex(D=>!se(D[v.axis]));_.hi+=Math.max(0,R)}return _}}return{lo:0,hi:o.length-1}}function cd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:_}=o[h],{lo:v,hi:E}=Xk(o[h],t,c,r);for(let S=v;S<=E;++S){const R=_[S];R.skip||i(R,m,S)}}}function Wk(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Vm(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||cd(n,e,t,function(h,d,m){!r&&!xw(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function Zk(n,t,e,i){let r=[];function o(c,h,d){const{startAngle:m,endAngle:_}=c.getProps(["startAngle","endAngle"],i),{angle:v}=ON(c,{x:t.x,y:t.y});NN(v,m,_)&&r.push({element:c,datasetIndex:h,index:d})}return cd(n,e,t,o),r}function Jk(n,t,e,i,r,o){let c=[];const h=Wk(e);let d=Number.POSITIVE_INFINITY;function m(_,v,E){const S=_.inRange(t.x,t.y,r);if(i&&!S)return;const R=_.getCenterPoint(r);if(!(!!o||n.isPointInArea(R))&&!S)return;const O=h(t,R);O<d?(c=[{element:_,datasetIndex:v,index:E}],d=O):O===d&&c.push({element:_,datasetIndex:v,index:E})}return cd(n,e,t,m),c}function Lm(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?Zk(n,t,e,r):Jk(n,t,e,i,r,o)}function tT(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return cd(n,e,t,(d,m,_)=>{d[c]&&d[c](t[e],r)&&(o.push({element:d,datasetIndex:m,index:_}),h=h||d.inRange(t.x,t.y,r))}),i&&!h?[]:o}var tP={modes:{index(n,t,e,i){const r=fa(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?Vm(n,r,o,i,c):Lm(n,r,o,!1,i,c),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const _=h[0].index,v=m.data[_];v&&!v.skip&&d.push({element:v,datasetIndex:m.index,index:_})}),d):[]},dataset(n,t,e,i){const r=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?Vm(n,r,o,i,c):Lm(n,r,o,!1,i,c);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let _=0;_<m.length;++_)h.push({element:m[_],datasetIndex:d,index:_})}return h},point(n,t,e,i){const r=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Vm(n,r,o,i,c)},nearest(n,t,e,i){const r=fa(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Lm(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=fa(t,n);return tT(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=fa(t,n);return tT(n,r,"y",e.intersect,i)}}};const zw=["left","top","right","bottom"];function fc(n,t){return n.filter(e=>e.pos===t)}function eT(n,t){return n.filter(e=>zw.indexOf(e.pos)===-1&&e.box.axis===t)}function dc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function eP(n){const t=[];let e,i,r,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:h});return t}function nP(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!zw.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function iP(n,t){const e=nP(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],_=m&&h.stackWeight/m.weight;h.horizontal?(h.width=_?_*i:d&&t.availableWidth,h.height=r):(h.width=i,h.height=_?_*r:d&&t.availableHeight)}return e}function sP(n){const t=eP(n),e=dc(t.filter(m=>m.box.fullSize),!0),i=dc(fc(t,"left"),!0),r=dc(fc(t,"right")),o=dc(fc(t,"top"),!0),c=dc(fc(t,"bottom")),h=eT(t,"x"),d=eT(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(d).concat(c).concat(h),chartArea:fc(t,"chartArea"),vertical:i.concat(r).concat(d),horizontal:o.concat(c).concat(h)}}function nT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function jw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function rP(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!Ft(r)){e.size&&(n[r]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[r]+=e.size}o.getPadding&&jw(c,o.getPadding());const h=Math.max(0,t.outerWidth-nT(c,n,"left","right")),d=Math.max(0,t.outerHeight-nT(c,n,"top","bottom")),m=h!==n.w,_=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:_}:{same:_,other:m}}function aP(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function oP(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Sc(n,t,e,i){const r=[];let o,c,h,d,m,_;for(o=0,c=n.length,m=0;o<c;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,oP(h.horizontal,t));const{same:v,other:E}=rP(t,e,h,i);m|=v&&r.length,_=_||E,d.fullSize||r.push(h)}return m&&Sc(r,t,e,i)||_}function Kh(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function iT(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/m.weight||1;if(h.horizontal){const v=t.w*_,E=m.size||d.height;Yc(m.start)&&(c=m.start),d.fullSize?Kh(d,r.left,c,e.outerWidth-r.right-r.left,E):Kh(d,t.left+m.placed,c,v,E),m.start=c,m.placed+=v,c=d.bottom}else{const v=t.h*_,E=m.size||d.width;Yc(m.start)&&(o=m.start),d.fullSize?Kh(d,o,r.top,E,e.outerHeight-r.bottom-r.top):Kh(d,o,t.top+m.placed,E,v),m.start=o,m.placed+=v,o=d.right}}t.x=o,t.y=c}var Gn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Kn(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),h=sP(n.boxes),d=h.vertical,m=h.horizontal;Xt(n.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const _=d.reduce((D,O)=>O.box.options&&O.box.options.display===!1?D:D+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/_,hBoxMaxHeight:c/2}),E=Object.assign({},r);jw(E,Kn(i));const S=Object.assign({maxPadding:E,w:o,h:c,x:r.left,y:r.top},r),R=iP(d.concat(m),v);Sc(h.fullSize,S,v,R),Sc(d,S,v,R),Sc(m,S,v,R)&&Sc(d,S,v,R),aP(S),iT(h.leftAndTop,S,v,R),S.x+=S.w,S.y+=S.h,iT(h.rightAndBottom,S,v,R),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},Xt(h.chartArea,D=>{const O=D.box;Object.assign(O,n.chartArea),O.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class Bw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class lP extends Bw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hf="$chartjs",cP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sT=n=>n===null||n==="";function uP(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[hf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",sT(r)){const o=qE(n,"width");o!==void 0&&(n.width=o)}if(sT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=qE(n,"height");o!==void 0&&(n.height=o)}return n}const Fw=vk?{passive:!0}:!1;function hP(n,t,e){n&&n.addEventListener(t,e,Fw)}function fP(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Fw)}function dP(n,t){const e=cP[n.type]||n.type,{x:i,y:r}=fa(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function zf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function gP(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||zf(h.addedNodes,i),c=c&&!zf(h.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function mP(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||zf(h.removedNodes,i),c=c&&!zf(h.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Qc=new Map;let rT=0;function Hw(){const n=window.devicePixelRatio;n!==rT&&(rT=n,Qc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function pP(n,t){Qc.size||window.addEventListener("resize",Hw),Qc.set(n,t)}function _P(n){Qc.delete(n),Qc.size||window.removeEventListener("resize",Hw)}function yP(n,t,e){const i=n.canvas,r=i&&A_(i);if(!r)return;const o=Ew((h,d)=>{const m=r.clientWidth;e(h,d),m<r.clientWidth&&e()},window),c=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,_=d.contentRect.height;m===0&&_===0||o(m,_)});return c.observe(r),pP(n,o),c}function Um(n,t,e){e&&e.disconnect(),t==="resize"&&_P(n)}function vP(n,t,e){const i=n.canvas,r=Ew(o=>{n.ctx!==null&&e(dP(o,n))},n);return hP(i,t,r),r}class bP extends Bw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(uP(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hf])return!1;const i=e[hf].initial;["height","width"].forEach(o=>{const c=i[o];se(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[hf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:gP,detach:mP,resize:yP}[e]||vP;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Um,detach:Um,resize:Um}[e]||fP)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return yk(t,e,i,r)}isAttached(t){const e=t&&A_(t);return!!(e&&e.isConnected)}}function EP(n){return!S_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?lP:bP}class Jo{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Vf(this.x)&&Vf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function TP(n,t){const e=n.options.ticks,i=SP(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?wP(t):[],c=o.length,h=o[0],d=o[c-1],m=[];if(c>r)return xP(t,m,o,c/r),m;const _=AP(o,t,r);if(c>0){let v,E;const S=c>1?Math.round((d-h)/(c-1)):null;for(Qh(t,m,_,se(S)?0:h-S,h),v=0,E=c-1;v<E;v++)Qh(t,m,_,o[v],o[v+1]);return Qh(t,m,_,d,se(S)?t.length:d+S),m}return Qh(t,m,_),m}function SP(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function AP(n,t,e){const i=RP(n),r=t.length/e;if(!i)return Math.max(r,1);const o=xN(i);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>r)return d}return Math.max(r,1)}function wP(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function xP(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function Qh(n,t,e,i,r){const o=qt(i,0),c=Math.min(qt(r,n.length),n.length);let h=0,d,m,_;for(e=Math.ceil(e),r&&(d=r-i,e=d/Math.floor(d/e)),_=o;_<0;)h++,_=Math.round(o+h*e);for(m=Math.max(o,0);m<c;m++)m===_&&(t.push(n[m]),h++,_=Math.round(o+h*e))}function RP(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const IP=n=>n==="left"?"right":n==="right"?"left":n,aT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,oT=(n,t)=>Math.min(t||n,n);function lT(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function CP(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let d=n.getPixelForTick(r),m;if(!(e&&(i===1?m=Math.max(d-o,c-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(r-1))/2,d+=r<t?m:-m,d<o-h||d>c+h)))return d}function DP(n,t){Xt(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function gc(n){return n.drawTicks?n.tickLength:0}function cT(n,t){if(!n.display)return 0;const e=an(n.font,t),i=Kn(n.padding);return(ke(n.text)?n.text.length:1)*e.lineHeight+i.height}function OP(n,t){return Zo(n,{scale:t,type:"scale"})}function MP(n,t,e){return Zo(n,{tick:e,index:t,type:"tick"})}function NP(n,t,e){let i=__(n);return(e&&t!=="right"||!e&&t==="right")&&(i=IP(i)),i}function kP(n,t,e,i){const{top:r,left:o,bottom:c,right:h,chart:d}=n,{chartArea:m,scales:_}=d;let v=0,E,S,R;const D=c-r,O=h-o;if(n.isHorizontal()){if(S=nn(i,o,h),Ft(e)){const Q=Object.keys(e)[0],q=e[Q];R=_[Q].getPixelForValue(q)+D-t}else e==="center"?R=(m.bottom+m.top)/2+D-t:R=aT(n,e,t);E=h-o}else{if(Ft(e)){const Q=Object.keys(e)[0],q=e[Q];S=_[Q].getPixelForValue(q)-O+t}else e==="center"?S=(m.left+m.right)/2-O+t:S=aT(n,e,t);R=nn(i,c,r),v=e==="left"?-ni:ni}return{titleX:S,titleY:R,maxWidth:E,rotation:v}}class tl extends Jo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Si(t,Number.POSITIVE_INFINITY),e=Si(e,Number.NEGATIVE_INFINITY),i=Si(i,Number.POSITIVE_INFINITY),r=Si(r,Number.NEGATIVE_INFINITY),{min:Si(t,i),max:Si(e,r),minDefined:Yn(t),maxDefined:Yn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)c=h[d].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Si(e,Si(i,e)),max:Si(i,Si(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ik(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?lT(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=TP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=le(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=oT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,h,d,m;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const _=this._getLabelSizes(),v=_.widest.width,E=_.highest.height,S=ii(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:S/(i-1),v+6>h&&(h=S/(i-(t.offset?.5:1)),d=this.maxHeight-gc(t.grid)-e.padding-cT(t.title,this.chart.options.font),m=Math.sqrt(v*v+E*E),c=DN(Math.min(Math.asin(ii((_.highest.height+6)/h,-1,1)),Math.asin(ii(d/m,-1,1))-Math.asin(ii(E/m,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=cT(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=gc(o)+d):(t.height=this.maxHeight,t.width=gc(o)+d),i.display&&this.ticks.length){const{first:m,last:_,widest:v,highest:E}=this._getLabelSizes(),S=i.padding*2,R=ga(this.labelRotation),D=Math.cos(R),O=Math.sin(R);if(h){const Q=i.mirror?0:O*v.width+D*E.height;t.height=Math.min(this.maxHeight,t.height+Q+S)}else{const Q=i.mirror?0:D*v.width+O*E.height;t.width=Math.min(this.maxWidth,t.width+Q+S)}this._calculatePadding(m,_,O,D)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let E=0,S=0;d?m?(E=r*t.width,S=i*e.height):(E=i*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?E=t.width:o!=="inner"&&(E=t.width/2,S=e.width/2),this.paddingLeft=Math.max((E-_+c)*this.width/(this.width-_),0),this.paddingRight=Math.max((S-v+c)*this.width/(this.width-v),0)}else{let _=e.height/2,v=t.height/2;o==="start"?(_=0,v=t.height):o==="end"&&(_=e.height,v=0),this.paddingTop=_+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)se(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=lT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(e/oT(e,i));let m=0,_=0,v,E,S,R,D,O,Q,q,Z,G,$;for(v=0;v<e;v+=d){if(R=t[v].label,D=this._resolveTickFontOptions(v),r.font=O=D.string,Q=o[O]=o[O]||{data:{},gc:[]},q=D.lineHeight,Z=G=0,!se(R)&&!ke(R))Z=UE(r,Q.data,Q.gc,Z,R),G=q;else if(ke(R))for(E=0,S=R.length;E<S;++E)$=R[E],!se($)&&!ke($)&&(Z=UE(r,Q.data,Q.gc,Z,$),G+=q);c.push(Z),h.push(G),m=Math.max(Z,m),_=Math.max(G,_)}DP(o,e);const it=c.indexOf(m),C=h.indexOf(_),x=I=>({width:c[I]||0,height:h[I]||0});return{first:x(0),last:x(e-1),widest:x(it),highest:x(C),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return kN(this._alignToPixels?ca(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=MP(this.getContext(),t,i))}return this.$context||(this.$context=OP(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ga(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>h*r?h/i:d/r:d*r<h*i?d/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:h}=r,d=o.offset,m=this.isHorizontal(),v=this.ticks.length+(d?1:0),E=gc(o),S=[],R=h.setContext(this.getContext()),D=R.display?R.width:0,O=D/2,Q=function(X){return ca(i,X,D)};let q,Z,G,$,it,C,x,I,k,P,L,M;if(c==="top")q=Q(this.bottom),C=this.bottom-E,I=q-O,P=Q(t.top)+O,M=t.bottom;else if(c==="bottom")q=Q(this.top),P=t.top,M=Q(t.bottom)-O,C=q+O,I=this.top+E;else if(c==="left")q=Q(this.right),it=this.right-E,x=q-O,k=Q(t.left)+O,L=t.right;else if(c==="right")q=Q(this.left),k=t.left,L=Q(t.right)-O,it=q+O,x=this.left+E;else if(e==="x"){if(c==="center")q=Q((t.top+t.bottom)/2+.5);else if(Ft(c)){const X=Object.keys(c)[0],ot=c[X];q=Q(this.chart.scales[X].getPixelForValue(ot))}P=t.top,M=t.bottom,C=q+O,I=C+E}else if(e==="y"){if(c==="center")q=Q((t.left+t.right)/2);else if(Ft(c)){const X=Object.keys(c)[0],ot=c[X];q=Q(this.chart.scales[X].getPixelForValue(ot))}it=q-O,x=it-E,k=t.left,L=t.right}const Wt=qt(r.ticks.maxTicksLimit,v),wt=Math.max(1,Math.ceil(v/Wt));for(Z=0;Z<v;Z+=wt){const X=this.getContext(Z),ot=o.setContext(X),gt=h.setContext(X),kt=ot.lineWidth,V=ot.color,rt=gt.dash||[],ct=gt.dashOffset,at=ot.tickWidth,dt=ot.tickColor,xt=ot.tickBorderDash||[],_t=ot.tickBorderDashOffset;G=CP(this,Z,d),G!==void 0&&($=ca(i,G,kt),m?it=x=k=L=$:C=I=P=M=$,S.push({tx1:it,ty1:C,tx2:x,ty2:I,x1:k,y1:P,x2:L,y2:M,width:kt,color:V,borderDash:rt,borderDashOffset:ct,tickWidth:at,tickColor:dt,tickBorderDash:xt,tickBorderDashOffset:_t}))}return this._ticksLength=v,this._borderValue=q,S}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:_,mirror:v}=o,E=gc(i.grid),S=E+_,R=v?-_:S,D=-ga(this.labelRotation),O=[];let Q,q,Z,G,$,it,C,x,I,k,P,L,M="middle";if(r==="top")it=this.bottom-R,C=this._getXAxisLabelAlignment();else if(r==="bottom")it=this.top+R,C=this._getXAxisLabelAlignment();else if(r==="left"){const wt=this._getYAxisLabelAlignment(E);C=wt.textAlign,$=wt.x}else if(r==="right"){const wt=this._getYAxisLabelAlignment(E);C=wt.textAlign,$=wt.x}else if(e==="x"){if(r==="center")it=(t.top+t.bottom)/2+S;else if(Ft(r)){const wt=Object.keys(r)[0],X=r[wt];it=this.chart.scales[wt].getPixelForValue(X)+S}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")$=(t.left+t.right)/2-S;else if(Ft(r)){const wt=Object.keys(r)[0],X=r[wt];$=this.chart.scales[wt].getPixelForValue(X)}C=this._getYAxisLabelAlignment(E).textAlign}e==="y"&&(d==="start"?M="top":d==="end"&&(M="bottom"));const Wt=this._getLabelSizes();for(Q=0,q=h.length;Q<q;++Q){Z=h[Q],G=Z.label;const wt=o.setContext(this.getContext(Q));x=this.getPixelForTick(Q)+o.labelOffset,I=this._resolveTickFontOptions(Q),k=I.lineHeight,P=ke(G)?G.length:1;const X=P/2,ot=wt.color,gt=wt.textStrokeColor,kt=wt.textStrokeWidth;let V=C;c?($=x,C==="inner"&&(Q===q-1?V=this.options.reverse?"left":"right":Q===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?m==="near"||D!==0?L=-P*k+k/2:m==="center"?L=-Wt.highest.height/2-X*k+k:L=-Wt.highest.height+k/2:m==="near"||D!==0?L=k/2:m==="center"?L=Wt.highest.height/2-X*k:L=Wt.highest.height-P*k,v&&(L*=-1),D!==0&&!wt.showLabelBackdrop&&($+=k/2*Math.sin(D))):(it=x,L=(1-P)*k/2);let rt;if(wt.showLabelBackdrop){const ct=Kn(wt.backdropPadding),at=Wt.heights[Q],dt=Wt.widths[Q];let xt=L-ct.top,_t=0-ct.left;switch(M){case"middle":xt-=at/2;break;case"bottom":xt-=at;break}switch(C){case"center":_t-=dt/2;break;case"right":_t-=dt;break;case"inner":Q===q-1?_t-=dt:Q>0&&(_t-=dt/2);break}rt={left:_t,top:xt,width:dt+ct.width,height:at+ct.height,color:wt.backdropColor}}O.push({label:G,font:I,textOffset:L,options:{rotation:D,color:ot,strokeColor:gt,strokeWidth:kt,textAlign:V,textBaseline:M,translation:[$,it],backdrop:rt}})}return O}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ga(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,d=c.widest.width;let m,_;return e==="left"?r?(_=this.right+o,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_+=d)):(_=this.right-h,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_=this.left)):e==="right"?r?(_=this.left+o,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_-=d)):(_=this.left+h,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_=this.right)):m="right",{textAlign:m,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(d,m,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const d=r[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,_,v,E;this.isHorizontal()?(m=ca(t,this.left,c)-c/2,_=ca(t,this.right,h)+h/2,v=E=d):(v=ca(t,this.top,c)-c/2,E=ca(t,this.bottom,h)+h/2,m=_=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,v),e.lineTo(_,E),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&y_(i,r);const o=this.getLabelItems(t);for(const c of o){const h=c.options,d=c.font,m=c.label,_=c.textOffset;Kc(i,m,0,_,d,h)}r&&v_(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=an(i.font),c=Kn(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(d+=c.bottom,ke(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:m,titleY:_,maxWidth:v,rotation:E}=kP(this,d,e,h);Kc(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:E,textAlign:NP(h,e,r),textBaseline:"middle",translation:[m,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=qt(t.grid&&t.grid.z,-1),r=qt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==tl.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return an(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class $h{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;LP(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,PP(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in be[r]&&(delete be[r][i],this.override&&delete Sa[i])}}function PP(n,t,e){const i=Gc(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&VP(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function VP(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),d=c.join(".");be.route(o,r,d,h)})}function LP(n){return"id"in n&&"defaults"in n}class UP{constructor(){this.controllers=new $h(Lw,"datasets",!0),this.elements=new $h(Jo,"elements"),this.plugins=new $h(Object,"plugins"),this.scales=new $h(tl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):Xt(r,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const r=m_(t);le(i["before"+r],[],i),e[t](i),le(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var wi=new UP;class zP{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,h=c[i],d=[e,r,o.options];if(le(h,d,c)===!1&&r.cancelable)return!1}return!0}invalidate(){se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=qt(i.options&&i.options.plugins,{}),o=jP(i);return r===!1&&!e?[]:FP(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function jP(n){const t={},e=[],i=Object.keys(wi.plugins.items);for(let o=0;o<i.length;o++)e.push(wi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function BP(n,t){return!t&&n===!1?null:n===!0?{}:n}function FP(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const h of t){const d=h.id,m=BP(i[d],r);m!==null&&o.push({plugin:h,options:HP(n.config,{plugin:h,local:e[d]},m,c)})}return o}function HP(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _p(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function qP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function GP(n,t){return n===t?"_index_":"_value_"}function uT(n){if(n==="x"||n==="y"||n==="r")return n}function YP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function yp(n,...t){if(uT(n))return n;for(const e of t){const i=e.axis||YP(e.position)||n.length>1&&uT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function hT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function KP(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return hT(n,"x",e[0])||hT(n,"y",e[0])}return{}}function QP(n,t){const e=Sa[n.type]||{scales:{}},i=t.scales||{},r=_p(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!Ft(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=yp(c,h,KP(c,n),be.scales[h.type]),m=GP(d,r),_=e.scales||{};o[c]=Oc(Object.create(null),[{axis:d},h,_[d],_[m]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,d=c.indexAxis||_p(h,t),_=(Sa[h]||{}).scales||{};Object.keys(_).forEach(v=>{const E=qP(v,d),S=c[E+"AxisID"]||E;o[S]=o[S]||Object.create(null),Oc(o[S],[{axis:E},i[S],_[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Oc(h,[be.scales[h.type],be.scale])}),o}function qw(n){const t=n.options||(n.options={});t.plugins=qt(t.plugins,{}),t.scales=QP(n,t)}function Gw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function $P(n){return n=n||{},n.data=Gw(n.data),qw(n),n}const fT=new Map,Yw=new Set;function Xh(n,t){let e=fT.get(n);return e||(e=t(),fT.set(n,e),Yw.add(e)),e}const mc=(n,t,e)=>{const i=Bo(t,e);i!==void 0&&n.add(i)};class XP{constructor(t){this._config=$P(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Xh(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Xh(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Xh(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const d=new Set;e.forEach(_=>{t&&(d.add(t),_.forEach(v=>mc(d,t,v))),_.forEach(v=>mc(d,r,v)),_.forEach(v=>mc(d,Sa[o]||{},v)),_.forEach(v=>mc(d,be,v)),_.forEach(v=>mc(d,pp,v))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),Yw.has(e)&&c.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,Sa[e]||{},be.datasets[e]||{},{type:e},be,pp]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=dT(this._resolverCache,t,r);let d=c;if(ZP(c,e)){o.$shared=!1,i=br(i)?i():i;const m=this.createResolver(t,i,h);d=Fo(c,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],r){const{resolver:o}=dT(this._resolverCache,t,i);return Ft(e)?Fo(o,e,void 0,r):o}}function dT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:b_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,o)),o}const WP=n=>Ft(n)&&Object.getOwnPropertyNames(n).some(t=>br(n[t]));function ZP(n,t){const{isScriptable:e,isIndexable:i}=Cw(n);for(const r of t){const o=e(r),c=i(r),h=(c||o)&&n[r];if(o&&(br(h)||WP(h))||c&&ke(h))return!0}return!1}var JP="4.5.0";const tV=["top","bottom","left","right","chartArea"];function gT(n,t){return n==="top"||n==="bottom"||tV.indexOf(n)===-1&&t==="x"}function mT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function pT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),le(e&&e.onComplete,[n],t)}function eV(n){const t=n.chart,e=t.options.animation;le(e&&e.onProgress,[n],t)}function Kw(n){return S_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ff={},_T=n=>{const t=Kw(n);return Object.values(ff).filter(e=>e.canvas===t).pop()};function nV(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function iV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let ud=class{static defaults=be;static instances=ff;static overrides=Sa;static registry=wi;static version=JP;static getChart=_T;static register(...t){wi.add(...t),yT()}static unregister(...t){wi.remove(...t),yT()}constructor(t,e){const i=this.config=new XP(e),r=Kw(t),o=_T(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||EP(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,c.aspectRatio),d=h&&h.canvas,m=d&&d.height,_=d&&d.width;if(this.id=yN(),this.ctx=h,this.canvas=d,this.width=_,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=UN(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],ff[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}cs.listen(this,"complete",pT),cs.listen(this,"progress",eV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return se(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():HE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zE(this.canvas,this.ctx),this}stop(){return cs.stop(this),this}resize(t,e){cs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,HE(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),le(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Xt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],d=yp(c,h),m=d==="r",_=d==="x";return{options:h,dposition:m?"chartArea":_?"bottom":"left",dtype:m?"radialLinear":_?"category":"linear"}}))),Xt(o,c=>{const h=c.options,d=h.id,m=yp(d,h),_=qt(h.type,c.dtype);(h.position===void 0||gT(h.position,m)!==gT(c.dposition))&&(h.position=c.dposition),r[d]=!0;let v=null;if(d in i&&i[d].type===_)v=i[d];else{const E=wi.getScale(_);v=new E({id:d,type:_,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),Xt(r,(c,h)=>{c||delete i[h]}),Xt(i,c=>{Gn.configure(this,c,c.options),Gn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(mT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||_p(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=wi.getController(h),{datasetElementType:m,dataElementType:_}=be.datasets[h];Object.assign(d,{dataElementType:wi.getElement(_),datasetElementType:m&&wi.getElement(m)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Xt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,_=this.data.datasets.length;m<_;m++){const{controller:v}=this.getDatasetMeta(m),E=!r&&o.indexOf(v)===-1;v.buildOrUpdateElements(E),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Xt(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(mT("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Xt(this.scales,t=>{Gn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!CE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;nV(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!CE(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Xt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,br(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cs.has(this)?this.attached&&!cs.running(this)&&cs.start(this):(this.draw(),pT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=Sk(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&y_(e,r),t.controller.draw(),r&&v_(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return xw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=tP.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Zo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);Yc(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),cs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ff[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};Xt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},r=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let c;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){Xt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Xt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){c=t[h];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Nf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(d,m)=>d.filter(_=>!m.some(v=>_.datasetIndex===v.datasetIndex&&_.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,h=this._getActiveElements(t,r,i,c),d=AN(t),m=iV(t,this._lastEvent,i,d);i&&(this._lastEvent=null,le(o.onHover,[t,h,this],this),d&&le(o.onClick,[t,h,this],this));const _=!Nf(h,r);return(_||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=m,_}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function yT(){return Xt(ud.instances,n=>n._plugins.invalidate())}function Qw(n,t){const{x:e,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let h,d,m,_,v;return n.horizontal?(v=c/2,h=Math.min(e,r),d=Math.max(e,r),m=i-v,_=i+v):(v=o/2,h=e-v,d=e+v,m=Math.min(i,r),_=Math.max(i,r)),{left:h,top:m,right:d,bottom:_}}function nr(n,t,e,i){return n?0:ii(t,e,i)}function sV(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=Iw(i);return{t:nr(r.top,o.top,0,e),r:nr(r.right,o.right,0,t),b:nr(r.bottom,o.bottom,0,e),l:nr(r.left,o.left,0,t)}}function rV(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Mo(r),c=Math.min(t,e),h=n.borderSkipped,d=i||Ft(r);return{topLeft:nr(!d||h.top||h.left,o.topLeft,0,c),topRight:nr(!d||h.top||h.right,o.topRight,0,c),bottomLeft:nr(!d||h.bottom||h.left,o.bottomLeft,0,c),bottomRight:nr(!d||h.bottom||h.right,o.bottomRight,0,c)}}function aV(n){const t=Qw(n),e=t.right-t.left,i=t.bottom-t.top,r=sV(n,e/2,i/2),o=rV(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function zm(n,t,e,i){const r=t===null,o=e===null,h=n&&!(r&&o)&&Qw(n,i);return h&&(r||xo(t,h.left,h.right))&&(o||xo(e,h.top,h.bottom))}function oV(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function lV(n,t){n.rect(t.x,t.y,t.w,t.h)}function jm(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class cV extends Jo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=aV(this),h=oV(c.radius)?Lf:lV;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),h(t,jm(c,e,o)),t.clip(),h(t,jm(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,jm(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return zm(this,t,e,i)}inXRange(t,e){return zm(this,t,null,e)}inYRange(t,e){return zm(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const vT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},uV=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class bT extends Jo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=le(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=an(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=vT(i,o);let m,_;e.font=r.string,this.isHorizontal()?(m=this.maxWidth,_=this._fitRows(c,o,h,d)+10):(_=this.maxHeight,m=this._fitCols(c,r,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],_=r+h;let v=t;o.textAlign="left",o.textBaseline="middle";let E=-1,S=-_;return this.legendItems.forEach((R,D)=>{const O=i+e/2+o.measureText(R.text).width;(D===0||m[m.length-1]+O+2*h>c)&&(v+=_,m[m.length-(D>0?0:1)]=0,S+=_,E++),d[D]={left:0,top:S,row:E,width:O,height:r},m[m.length-1]+=O+h}),v}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],_=c-t;let v=h,E=0,S=0,R=0,D=0;return this.legendItems.forEach((O,Q)=>{const{itemWidth:q,itemHeight:Z}=hV(i,e,o,O,r);Q>0&&S+Z+2*h>_&&(v+=E+h,m.push({width:E,height:S}),R+=E+h,D++,E=S=0),d[Q]={left:R,top:S,col:D,width:q,height:Z},E=Math.max(E,q),S+=Z+h}),v+=E,m.push({width:E,height:S}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=No(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=nn(i,this.left+r,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=nn(i,this.left+r,this.right-this.lineWidths[h])),m.top+=this.top+t+r,m.left=c.leftForLtr(c.x(d),m.width),d+=m.width+r}else{let h=0,d=nn(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=nn(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+r,m.left=c.leftForLtr(c.x(m.left),m.width),d+=m.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;y_(t,this),this._draw(),v_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,h=be.color,d=No(t.rtl,this.left,this.width),m=an(c.font),{padding:_}=c,v=m.size,E=v/2;let S;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=m.string;const{boxWidth:R,boxHeight:D,itemHeight:O}=vT(c,v),Q=function(it,C,x){if(isNaN(R)||R<=0||isNaN(D)||D<0)return;r.save();const I=qt(x.lineWidth,1);if(r.fillStyle=qt(x.fillStyle,h),r.lineCap=qt(x.lineCap,"butt"),r.lineDashOffset=qt(x.lineDashOffset,0),r.lineJoin=qt(x.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=qt(x.strokeStyle,h),r.setLineDash(qt(x.lineDash,[])),c.usePointStyle){const k={radius:D*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},P=d.xPlus(it,R/2),L=C+E;ww(r,k,P,L,c.pointStyleWidth&&R)}else{const k=C+Math.max((v-D)/2,0),P=d.leftForLtr(it,R),L=Mo(x.borderRadius);r.beginPath(),Object.values(L).some(M=>M!==0)?Lf(r,{x:P,y:k,w:R,h:D,radius:L}):r.rect(P,k,R,D),r.fill(),I!==0&&r.stroke()}r.restore()},q=function(it,C,x){Kc(r,x.text,it,C+O/2,m,{strikethrough:x.hidden,textAlign:d.textAlign(x.textAlign)})},Z=this.isHorizontal(),G=this._computeTitleHeight();Z?S={x:nn(o,this.left+_,this.right-i[0]),y:this.top+_+G,line:0}:S={x:this.left+_,y:nn(o,this.top+G+_,this.bottom-e[0].height),line:0},Nw(this.ctx,t.textDirection);const $=O+_;this.legendItems.forEach((it,C)=>{r.strokeStyle=it.fontColor,r.fillStyle=it.fontColor;const x=r.measureText(it.text).width,I=d.textAlign(it.textAlign||(it.textAlign=c.textAlign)),k=R+E+x;let P=S.x,L=S.y;d.setWidth(this.width),Z?C>0&&P+k+_>this.right&&(L=S.y+=$,S.line++,P=S.x=nn(o,this.left+_,this.right-i[S.line])):C>0&&L+$>this.bottom&&(P=S.x=P+e[S.line].width+_,S.line++,L=S.y=nn(o,this.top+G+_,this.bottom-e[S.line].height));const M=d.x(P);if(Q(M,L,it),P=zN(I,P+R+E,Z?P+k:this.right,t.rtl),q(d.x(P),L,it),Z)S.x+=k+_;else if(typeof it.text!="string"){const Wt=m.lineHeight;S.y+=$w(it,Wt)+_}else S.y+=$}),kw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=an(e.font),r=Kn(e.padding);if(!e.display)return;const o=No(t.rtl,this.left,this.width),c=this.ctx,h=e.position,d=i.size/2,m=r.top+d;let _,v=this.left,E=this.width;if(this.isHorizontal())E=Math.max(...this.lineWidths),_=this.top+m,v=nn(t.align,v,this.right-E);else{const R=this.columnSizes.reduce((D,O)=>Math.max(D,O.height),0);_=m+nn(t.align,this.top,this.bottom-R-t.labels.padding-this._computeTitleHeight())}const S=nn(h,v,v+E);c.textAlign=o.textAlign(__(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Kc(c,e.text,S,_,i)}_computeTitleHeight(){const t=this.options.title,e=an(t.font),i=Kn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(xo(t,this.left,this.right)&&xo(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],xo(t,r.left,r.left+r.width)&&xo(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!gV(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=uV(r,i);r&&!o&&le(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&le(e.onHover,[t,i,this],this)}else i&&le(e.onClick,[t,i,this],this)}}function hV(n,t,e,i,r){const o=fV(i,n,t,e),c=dV(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function fV(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function dV(n,t,e){let i=n;return typeof t.text!="string"&&(i=$w(t,e)),i}function $w(n,t){const e=n.text?n.text.length:0;return t*e}function gV(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var mV={id:"legend",_element:bT,start(n,t,e){const i=n.legend=new bT({ctx:n.ctx,options:e,chart:n});Gn.configure(n,i,e),Gn.addBox(n,i)},stop(n){Gn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Gn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),_=Kn(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:r||m.textAlign,borderRadius:c&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Xw extends Jo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=ke(i.text)?i.text.length:1;this._padding=Kn(i.padding);const o=r*an(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:c}=this,h=c.align;let d=0,m,_,v;return this.isHorizontal()?(_=nn(h,i,o),v=e+t,m=o-i):(c.position==="left"?(_=i+t,v=nn(h,r,e),d=on*-.5):(_=o-t,v=nn(h,e,r),d=on*.5),m=r-e),{titleX:_,titleY:v,maxWidth:m,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=an(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:d,rotation:m}=this._drawArgs(o);Kc(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:m,textAlign:__(e.align),textBaseline:"middle",translation:[c,h]})}}function pV(n,t){const e=new Xw({ctx:n.ctx,options:t,chart:n});Gn.configure(n,e,t),Gn.addBox(n,e),n.titleBlock=e}var _V={id:"title",_element:Xw,start(n,t,e){pV(n,e)},stop(n){const t=n.titleBlock;Gn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Gn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ac={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),r+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),_=MN(t,m);_<r&&(r=_,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Ai(n,t){return t&&(ke(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function us(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yV(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function ET(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:h}=t,d=an(t.bodyFont),m=an(t.titleFont),_=an(t.footerFont),v=o.length,E=r.length,S=i.length,R=Kn(t.padding);let D=R.height,O=0,Q=i.reduce((G,$)=>G+$.before.length+$.lines.length+$.after.length,0);if(Q+=n.beforeBody.length+n.afterBody.length,v&&(D+=v*m.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),Q){const G=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;D+=S*G+(Q-S)*d.lineHeight+(Q-1)*t.bodySpacing}E&&(D+=t.footerMarginTop+E*_.lineHeight+(E-1)*t.footerSpacing);let q=0;const Z=function(G){O=Math.max(O,e.measureText(G).width+q)};return e.save(),e.font=m.string,Xt(n.title,Z),e.font=d.string,Xt(n.beforeBody.concat(n.afterBody),Z),q=t.displayColors?c+2+t.boxPadding:0,Xt(i,G=>{Xt(G.before,Z),Xt(G.lines,Z),Xt(G.after,Z)}),q=0,e.font=_.string,Xt(n.footer,Z),e.restore(),O+=R.width,{width:O,height:D}}function vV(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function bV(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function EV(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=r<=(h+d)/2?"left":"right":r<=o/2?m="left":r>=c-o/2&&(m="right"),bV(m,n,t,e)&&(m="center"),m}function TT(n,t,e){const i=e.yAlign||t.yAlign||vV(n,e);return{xAlign:e.xAlign||t.xAlign||EV(n,t,e,i),yAlign:i}}function TV(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function SV(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function ST(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:d}=e,m=r+o,{topLeft:_,topRight:v,bottomLeft:E,bottomRight:S}=Mo(c);let R=TV(t,h);const D=SV(t,d,m);return d==="center"?h==="left"?R+=m:h==="right"&&(R-=m):h==="left"?R-=Math.max(_,E)+r:h==="right"&&(R+=Math.max(v,S)+r),{x:ii(R,0,i.width-t.width),y:ii(D,0,i.height-t.height)}}function Wh(n,t,e){const i=Kn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function AT(n){return Ai([],us(n))}function AV(n,t,e){return Zo(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function wT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Ww={beforeTitle:ls,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return se(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function pn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?Ww[t].call(e,i):r}class xT extends Jo{static positioners=Ac;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new Pw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=AV(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=pn(i,"beforeTitle",this,t),o=pn(i,"title",this,t),c=pn(i,"afterTitle",this,t);let h=[];return h=Ai(h,us(r)),h=Ai(h,us(o)),h=Ai(h,us(c)),h}getBeforeBody(t,e){return AT(pn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Xt(t,o=>{const c={before:[],lines:[],after:[]},h=wT(i,o);Ai(c.before,us(pn(h,"beforeLabel",this,o))),Ai(c.lines,pn(h,"label",this,o)),Ai(c.after,us(pn(h,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return AT(pn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=pn(i,"beforeFooter",this,t),o=pn(i,"footer",this,t),c=pn(i,"afterFooter",this,t);let h=[];return h=Ai(h,us(r)),h=Ai(h,us(o)),h=Ai(h,us(c)),h}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(yV(this.chart,e[d]));return t.filter&&(h=h.filter((_,v,E)=>t.filter(_,v,E,i))),t.itemSort&&(h=h.sort((_,v)=>t.itemSort(_,v,i))),Xt(h,_=>{const v=wT(t.callbacks,_);r.push(pn(v,"labelColor",this,_)),o.push(pn(v,"labelPointStyle",this,_)),c.push(pn(v,"labelTextColor",this,_))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=Ac[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=ET(this,i),m=Object.assign({},h,d),_=TT(this.chart,i,m),v=ST(i,m,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=Mo(h),{x:E,y:S}=t,{width:R,height:D}=e;let O,Q,q,Z,G,$;return o==="center"?(G=S+D/2,r==="left"?(O=E,Q=O-c,Z=G+c,$=G-c):(O=E+R,Q=O+c,Z=G-c,$=G+c),q=O):(r==="left"?Q=E+Math.max(d,_)+c:r==="right"?Q=E+R-Math.max(m,v)-c:Q=this.caretX,o==="top"?(Z=S,G=Z-c,O=Q-c,q=Q+c):(Z=S+D,G=Z+c,O=Q+c,q=Q-c),$=Z),{x1:O,x2:Q,x3:q,y1:Z,y2:G,y3:$}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,h,d;if(o){const m=No(i.rtl,this.x,this.width);for(t.x=Wh(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",c=an(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,d=0;d<o;++d)e.fillText(r[d],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,_=an(o.bodyFont),v=Wh(this,"left",o),E=r.x(v),S=d<_.lineHeight?(_.lineHeight-d)/2:0,R=e.y+S;if(o.usePointStyle){const D={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},O=r.leftForLtr(E,m)+m/2,Q=R+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,jE(t,D,O,Q),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,jE(t,D,O,Q)}else{t.lineWidth=Ft(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const D=r.leftForLtr(E,m),O=r.leftForLtr(r.xPlus(E,1),m-2),Q=Mo(c.borderRadius);Object.values(Q).some(q=>q!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Lf(t,{x:D,y:R,w:m,h:d,radius:Q}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),Lf(t,{x:O,y:R+1,w:m-2,h:d-2,radius:Q}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(D,R,m,d),t.strokeRect(D,R,m,d),t.fillStyle=c.backgroundColor,t.fillRect(O,R+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:_}=i,v=an(i.bodyFont);let E=v.lineHeight,S=0;const R=No(i.rtl,this.x,this.width),D=function(x){e.fillText(x,R.x(t.x+S),t.y+E/2),t.y+=E+o},O=R.textAlign(c);let Q,q,Z,G,$,it,C;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=Wh(this,O,i),e.fillStyle=i.bodyColor,Xt(this.beforeBody,D),S=h&&O!=="right"?c==="center"?m/2+_:m+2+_:0,G=0,it=r.length;G<it;++G){for(Q=r[G],q=this.labelTextColors[G],e.fillStyle=q,Xt(Q.before,D),Z=Q.lines,h&&Z.length&&(this._drawColorBox(e,t,G,R,i),E=Math.max(v.lineHeight,d)),$=0,C=Z.length;$<C;++$)D(Z[$]),E=v.lineHeight;Xt(Q.after,D)}S=0,E=v.lineHeight,Xt(this.afterBody,D),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,h;if(o){const d=No(i.rtl,this.x,this.width);for(t.x=Wh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",c=an(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(r[h],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=t,{width:m,height:_}=i,{topLeft:v,topRight:E,bottomLeft:S,bottomRight:R}=Mo(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+v,d),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(h+m-E,d),e.quadraticCurveTo(h+m,d,h+m,d+E),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(h+m,d+_-R),e.quadraticCurveTo(h+m,d+_,h+m-R,d+_),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(h+S,d+_),e.quadraticCurveTo(h,d+_,h,d+_-S),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=Ac[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=ET(this,t),d=Object.assign({},c,this._size),m=TT(e,t,d),_=ST(t,d,m,e);(r._to!==_.x||o._to!==_.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Kn(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),Nw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),kw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!Nf(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),d=e||!Nf(c,o)||h;return d&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=Ac[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}var wV={id:"tooltip",_element:xT,positioners:Ac,afterInit(n,t,e){e&&(n.tooltip=new xT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ww},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xV=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function RV(n,t,e,i){const r=n.indexOf(t);if(r===-1)return xV(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const IV=(n,t)=>n===null?null:ii(Math.round(n),0,t);function RT(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class CV extends tl{static id="category";static defaults={ticks:{callback:RT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(se(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:RV(i,t,qt(e,t),this._addedLabels),IV(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return RT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function DV(n,t){const e=[],{bounds:r,step:o,min:c,max:h,precision:d,count:m,maxTicks:_,maxDigits:v,includeBounds:E}=n,S=o||1,R=_-1,{min:D,max:O}=t,Q=!se(c),q=!se(h),Z=!se(m),G=(O-D)/(v+1);let $=OE((O-D)/R/S)*S,it,C,x,I;if($<1e-14&&!Q&&!q)return[{value:D},{value:O}];I=Math.ceil(O/$)-Math.floor(D/$),I>R&&($=OE(I*$/R/S)*S),se(d)||(it=Math.pow(10,d),$=Math.ceil($*it)/it),r==="ticks"?(C=Math.floor(D/$)*$,x=Math.ceil(O/$)*$):(C=D,x=O),Q&&q&&o&&IN((h-c)/o,$/1e3)?(I=Math.round(Math.min((h-c)/$,_)),$=(h-c)/I,C=c,x=h):Z?(C=Q?c:C,x=q?h:x,I=m-1,$=(x-C)/I):(I=(x-C)/$,uf(I,Math.round(I),$/1e3)?I=Math.round(I):I=Math.ceil(I));const k=Math.max(ME($),ME(C));it=Math.pow(10,se(d)?k:d),C=Math.round(C*it)/it,x=Math.round(x*it)/it;let P=0;for(Q&&(E&&C!==c?(e.push({value:c}),C<c&&P++,uf(Math.round((C+P*$)*it)/it,c,IT(c,G,n))&&P++):C<c&&P++);P<I;++P){const L=Math.round((C+P*$)*it)/it;if(q&&L>h)break;e.push({value:L})}return q&&E&&x!==h?e.length&&uf(e[e.length-1].value,h,IT(h,G,n))?e[e.length-1].value=h:e.push({value:h}):(!q||x===h)&&e.push({value:x}),e}function IT(n,t,{horizontal:e,minRotation:i}){const r=ga(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class OV extends tl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return se(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=d=>r=e?r:d,h=d=>o=i?o:d;if(t){const d=hr(r),m=hr(o);d<0&&m<0?h(0):d>0&&m>0&&c(0)}if(r===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||c(r-d)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=DV(r,o);return t.bounds==="ticks"&&CN(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Sw(t,this.chart.options.locale,this.options.ticks.format)}}class MV extends OV{static id="linear";static defaults={ticks:{callback:Aw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Yn(t)?t:0,this.max=Yn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ga(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const hd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vn=Object.keys(hd);function CT(n,t){return n-t}function DT(n,t){if(se(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Yn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(Vf(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function OT(n,t,e,i){const r=vn.length;for(let o=vn.indexOf(n);o<r-1;++o){const c=hd[vn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return vn[o]}return vn[r-1]}function NV(n,t,e,i,r){for(let o=vn.length-1;o>=vn.indexOf(e);o--){const c=vn[o];if(hd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return vn[e?vn.indexOf(e):0]}function kV(n){for(let t=vn.indexOf(n)+1,e=vn.length;t<e;++t)if(hd[vn[t]].common)return vn[t]}function MT(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=p_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function PV(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let h,d;for(h=o;h<=c;h=+r.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function NT(n,t,e){const i=[],r={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],r[h]=c,i.push({value:h,major:!1});return o===0||!e?i:PV(n,i,r,e)}class kT extends tl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new $k._date(t.adapters.date);r.init(e),Oc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:DT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(m){!c&&!isNaN(m.min)&&(r=Math.min(r,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!c||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=Yn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Yn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,h=VN(r,o,c);return this._unit=e.unit||(i.autoSkip?OT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):NV(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:kV(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),NT(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=ii(e,0,c),i=ii(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||OT(o.minUnit,e,i,this._getLabelCapacity(e)),h=qt(r.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,m=Vf(d)||d===!0,_={};let v=e,E,S;if(m&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,m?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const R=r.ticks.source==="data"&&this.getDataTimestamps();for(E=v,S=0;E<i;E=+t.add(E,h,c),S++)MT(_,E,R);return(E===i||r.bounds==="ticks"||S===1)&&MT(_,E,R),Object.keys(_).sort(CT).map(D=>+D)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return le(c,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,_=d&&h[d],v=m&&h[m],E=i[e],S=m&&v&&E&&E.major;return this._adapter.format(t,r||(S?v:_))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=ga(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,NT(this,[t],this._majorUnit),r),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(DT(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return vw(t.sort(CT))}}function Zh(n,t,e){let i=0,r=n.length-1,o,c,h,d;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=mp(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:d}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=mp(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:d}=n[r]);const m=c-o;return m?h+(d-h)*(t-o)/m:h}class KV extends kT{static id="timeseries";static defaults=kT.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Zh(e,this.min),this._tableRange=Zh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,h,d,m,_;for(c=0,h=t.length;c<h;++c)m=t[c],m>=e&&m<=i&&r.push(m);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=r.length;c<h;++c)_=r[c+1],d=r[c-1],m=r[c],Math.round((_+d)/2)!==m&&o.push({time:m,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Zh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Zh(this._table,i*this._tableRange+this._minPos,!0)}}const Zw="label";function PT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function VV(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Jw(n,t){n.labels=t}function t1(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zw;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(c=>c[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function LV(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zw;const e={labels:[],datasets:[]};return Jw(e,n.labels),t1(e,n.datasets,t),e}function UV(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:m=[],fallbackContent:_,updateMode:v,...E}=n,S=St.useRef(null),R=St.useRef(null),D=()=>{S.current&&(R.current=new ud(S.current,{type:c,data:LV(h,o),options:d&&{...d},plugins:m}),PT(t,R.current))},O=()=>{PT(t,null),R.current&&(R.current.destroy(),R.current=null)};return St.useEffect(()=>{!r&&R.current&&d&&VV(R.current,d)},[r,d]),St.useEffect(()=>{!r&&R.current&&Jw(R.current.config.data,h.labels)},[r,h.labels]),St.useEffect(()=>{!r&&R.current&&h.datasets&&t1(R.current.config.data,h.datasets,o)},[r,h.datasets]),St.useEffect(()=>{R.current&&(r?(O(),setTimeout(D)):R.current.update(v))},[r,d,h.labels,h.datasets,v]),St.useEffect(()=>{R.current&&(O(),setTimeout(D))},[c]),St.useEffect(()=>(D(),()=>O()),[]),VT.createElement("canvas",{ref:S,role:"img",height:e,width:i,...E},_)}const zV=St.forwardRef(UV);function jV(n,t){return ud.register(t),St.forwardRef((e,i)=>VT.createElement(zV,{...e,ref:i,type:n}))}const BV=jV("bar",Qk);ud.register(CV,MV,cV,_V,wV,mV);const FV=()=>{const[n,t]=St.useState(0),[e,i]=St.useState(0),[r,o]=St.useState(!0),[c,h]=St.useState({mes:new Date().getMonth()+1,ao:new Date().getFullYear()}),d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],m=Array.from({length:5},(S,R)=>new Date().getFullYear()-R);St.useEffect(()=>{(async()=>{try{o(!0);const R=new Date(c.ao,c.mes-1,1),D=new Date(c.ao,c.mes,0),O=EE(Ta(ki,"ventas"),zh("fecha",">=",R),zh("fecha","<=",D)),q=(await Hc(O)).docs.reduce((it,C)=>it+C.data().total,0);t(q);const Z=EE(Ta(ki,"gastos"),zh("fecha",">=",R),zh("fecha","<=",D)),$=(await Hc(Z)).docs.reduce((it,C)=>it+C.data().monto,0);i($)}catch(R){console.error("Error cargando datos:",R)}finally{o(!1)}})()},[c]);const _=S=>{const{name:R,value:D}=S.target;h(O=>({...O,[R]:parseInt(D)}))},v={labels:["Ingresos","Gastos","Ganancia"],datasets:[{label:"Soles (S/)",data:[n,e,n-e],backgroundColor:["rgba(76, 175, 80, 0.7)","rgba(244, 67, 54, 0.7)","rgba(255, 152, 0, 0.7)"],borderColor:["rgba(76, 175, 80, 1)","rgba(244, 67, 54, 1)","rgba(255, 152, 0, 1)"],borderWidth:1,borderRadius:4}]},E={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:`Resumen Financiero - ${d[c.mes-1]} ${c.ao}`,font:{size:16}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(S){return"S/ "+S.toLocaleString("es-PE")}}}}};return r?H.jsx("div",{className:"flex justify-center items-center h-64",children:H.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):H.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[H.jsxs("div",{className:"flex justify-between items-center mb-6",children:[H.jsx("h2",{className:"text-2xl font-bold text-orange-600",children:"Dashboard Financiero"}),H.jsxs("div",{className:"flex gap-4",children:[H.jsx("select",{name:"mes",value:c.mes,onChange:_,className:"bg-white border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:d.map((S,R)=>H.jsx("option",{value:R+1,children:S},R))}),H.jsx("select",{name:"ao",value:c.ao,onChange:_,className:"bg-white border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:m.map(S=>H.jsx("option",{value:S,children:S},S))})]})]}),H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:[H.jsx("h3",{className:"text-gray-500 font-medium",children:"Ingresos"}),H.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["S/ ",n.toLocaleString("es-PE")]})]}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500",children:[H.jsx("h3",{className:"text-gray-500 font-medium",children:"Gastos"}),H.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["S/ ",e.toLocaleString("es-PE")]})]}),H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-orange-500",children:[H.jsx("h3",{className:"text-gray-500 font-medium",children:"Ganancia Neta"}),H.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["S/ ",(n-e).toLocaleString("es-PE")]})]})]}),H.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:H.jsx(BV,{data:v,options:E})}),H.jsx("div",{className:"mt-6 text-sm text-gray-500",children:H.jsxs("p",{children:["ltima actualizacin: ",new Date().toLocaleString("es-PE")]})})]})},HV=()=>{const[n,t]=St.useState([]),[e,i]=St.useState(!0),[r,o]=St.useState(null),[c,h]=St.useState("Efectivo"),[d,m]=St.useState(""),[_,v]=St.useState(""),[E,S]=St.useState("todos");St.useEffect(()=>{(async()=>{const G=(await Hc(Ta(ki,"ventas"))).docs.map($=>({id:$.id,...$.data()}));G.sort(($,it)=>it.fecha?.seconds-$.fecha?.seconds),t(G),i(!1)})()},[]);const R=q=>{const Z=window.open("","","width=300,height=600");Z.document.write(`
      <html>
        <head>
          <title>Boleta de Venta</title>
          <style>
            body { font-family: Arial; font-size: 12px; margin: 0; padding: 10px; }
            .boleta { width: 240px; margin: auto; text-align: center; }
            .titulo { font-size: 16px; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
            .linea { border-top: 1px dashed #000; margin: 8px 0; }
            .producto { text-align: left; margin: 2px 0; }
            .total { font-weight: bold; margin-top: 10px; }
            .metodo { margin-top: 5px; }
          </style>
        </head>
        <body onload="window.print(); setTimeout(() => window.close(), 500);">
          <div class="boleta">
            <div class="titulo">BOLETA DE VENTA</div>
            <div>Cliente: <strong>${q.cliente||"Consumidor final"}</strong></div>
            <div>Fecha: ${new Date(q.fecha?.seconds*1e3).toLocaleString()}</div>
            <div class="linea"></div>
            <div style="text-align:left">
              ${q.items.map(G=>`
                <div class="producto">
                  ${G.nombre}<br />
                  ${G.cantidad} x S/ ${G.precio.toFixed(2)} = S/ ${G.subtotal.toFixed(2)}
                </div>
              `).join("")}
            </div>
            <div class="linea"></div>
            <div class="total">TOTAL: S/ ${q.total.toFixed(2)}</div>
            <div class="metodo">Pago: ${q.metodoPago||"---"}</div>
            <div>${q.estado==="completada"?" Pagado":" Pendiente"}</div>
            <div class="linea"></div>
            <div>Gracias por su compra</div>
          </div>
        </body>
      </html>
    `),Z.document.close()},D=async()=>{if(r){if(c==="Efectivo"&&(!d||parseFloat(d)<r.total)){v(" El monto es insuficiente"),setTimeout(()=>v(""),2500);return}try{const q=sd(ki,"ventas",r.id);await cw(q,{estado:"completada",metodoPago:c}),t(Z=>Z.map(G=>G.id===r.id?{...G,estado:"completada",metodoPago:c}:G)),o(null),m(""),h("Efectivo"),v(" Venta completada"),setTimeout(()=>v(""),2500)}catch{v(" Error al completar la venta")}}},O=n.filter(q=>E==="todos"?!0:q.estado===E),Q=c==="Efectivo"&&d?(parseFloat(d)-r?.total).toFixed(2):null;return H.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[H.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:" Lista de Pedidos"}),H.jsxs("div",{className:"mb-4",children:[H.jsx("label",{className:"mr-2 font-medium",children:"Filtrar por estado:"}),H.jsxs("select",{value:E,onChange:q=>S(q.target.value),className:"p-2 border rounded",children:[H.jsx("option",{value:"todos",children:"Todos"}),H.jsx("option",{value:"pendiente",children:"Pendientes"}),H.jsx("option",{value:"completada",children:"Pagados"})]})]}),_&&H.jsx("div",{className:`mb-4 p-3 rounded-md ${_.includes("")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_}),e?H.jsx("p",{className:"text-gray-500",children:"Cargando ventas..."}):O.length===0?H.jsx("p",{className:"text-gray-500 italic",children:"No hay ventas registradas."}):H.jsx("div",{className:"space-y-6",children:O.map(q=>H.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[H.jsxs("div",{className:"flex justify-between items-center mb-2",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:q.cliente}),H.jsx("p",{className:"text-sm text-gray-500",children:new Date(q.fecha?.seconds*1e3).toLocaleString()})]}),H.jsxs("div",{className:"text-right",children:[H.jsx("p",{className:"text-sm",children:q.estado==="completada"?H.jsx("span",{className:"text-green-600 font-semibold",children:"Pagado"}):H.jsx("span",{className:"text-red-600 font-semibold",children:"Pendiente"})}),H.jsxs("p",{className:"font-bold text-orange-600",children:["S/ ",q.total?.toFixed(2)]})]})]}),H.jsx("ul",{className:"text-sm text-gray-700 mb-2",children:q.items.map((Z,G)=>H.jsxs("li",{className:"flex justify-between",children:[H.jsxs("span",{children:[Z.nombre," x ",Z.cantidad]}),H.jsxs("span",{children:["S/ ",Z.subtotal.toFixed(2)]})]},G))}),H.jsxs("div",{className:"flex gap-4",children:[H.jsx("button",{onClick:()=>R(q),className:"text-sm text-orange-600 hover:underline",children:" Imprimir boleta"}),q.estado!=="completada"&&H.jsx("button",{onClick:()=>o(q),className:"text-sm text-blue-600 hover:underline",children:" Terminar venta"})]})]},q.id))}),r&&H.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm z-50",children:H.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[H.jsxs("h3",{className:"font-bold mb-4",children:["Terminar venta de ",r.cliente]}),H.jsxs("div",{className:"flex flex-col gap-4",children:[H.jsxs("select",{value:c,onChange:q=>h(q.target.value),className:"p-2 border rounded",children:[H.jsx("option",{value:"Efectivo",children:"Efectivo"}),H.jsx("option",{value:"Yape",children:"Yape"})]}),c==="Efectivo"&&H.jsxs(H.Fragment,{children:[H.jsx("input",{type:"number",placeholder:"Monto pagado",value:d,onChange:q=>m(q.target.value),className:"p-2 border rounded"}),H.jsxs("p",{className:"text-sm text-gray-600",children:["Vuelto: S/ ",Q>=0?Q:"0.00"]})]}),H.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[H.jsx("button",{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded",children:"Confirmar"}),H.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:underline",children:"Cancelar"})]})]})]})})]})};function qV(){const[n,t]=St.useState(null),[e,i]=St.useState(""),[r,o]=St.useState("ventas"),[c,h]=St.useState(!0);return St.useEffect(()=>{const d=vC(dp,async m=>{if(m){t(m);const _=sd(ki,"usuarios",m.uid),v=await qM(_);v.exists()?i(v.data().rol):i("vendedor")}else t(null),i("");h(!1)});return()=>d()},[]),c?H.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:H.jsx("div",{className:"text-orange-600 text-lg font-medium",children:"Cargando..."})}):n?H.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:H.jsxs("div",{className:"max-w-7xl mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:[H.jsxs("div",{className:"bg-orange-600 px-6 py-4 flex justify-between items-center",children:[H.jsx("h1",{className:"text-2xl font-bold text-white",children:" Salchipapon"}),H.jsx("button",{onClick:()=>dp.signOut(),className:"text-white hover:text-orange-200 text-sm font-medium transition",children:"Cerrar sesin"})]}),H.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex flex-wrap gap-2",children:[H.jsx("button",{onClick:()=>o("ventas"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${r==="ventas"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:" Ventas"}),H.jsx("button",{onClick:()=>o("pedidos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${r==="pedidos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:" Lista pedidos"}),e==="admin"&&H.jsxs(H.Fragment,{children:[H.jsx("button",{onClick:()=>o("gastos"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${r==="gastos"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:" Gastos"}),H.jsx("button",{onClick:()=>o("dashboard"),className:`px-4 py-2 rounded-md font-medium text-sm transition ${r==="dashboard"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:" Dashboard"})]})]}),H.jsxs("div",{className:"p-6",children:[r==="ventas"&&H.jsx(QM,{}),r==="pedidos"&&H.jsx(HV,{}),r==="gastos"&&e==="admin"&&H.jsx($M,{}),r==="dashboard"&&e==="admin"&&H.jsx(FV,{})]})]})}):H.jsx(KM,{onLogin:()=>{}})}Px.createRoot(document.getElementById("root")).render(H.jsx(St.StrictMode,{children:H.jsx(qV,{})}));
